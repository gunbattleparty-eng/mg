
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/Shape.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '83d94jbLnZF7oVs2WQ1jJK+', 'Shape');
// game_script/scripts/Shape.js

"use strict";

var o;
exports.ShapeSupport = exports.cPolygon = exports.cSphere = exports.cBox = exports.cShape = exports.ShapeType = void 0;
var s;
var r;

var $aILib = require("./AILib");

var l = cc.Vec3;
(r = s = exports.ShapeType || (exports.ShapeType = {}))[r.Box = 1] = "Box";
r[r.Sphere = 2] = "Sphere";
r[r.Polygon = 4] = "Polygon";

var c = function () {
  function t(t, e) {
    this.radius = 0;
    this.height = 0;
    this.type = s.Box;
    this.point2Ds = [];
    this.size = {
      x: 0,
      y: 0,
      z: 0
    };
    this.center = {
      x: 0,
      y: 0,
      z: 0
    };
    this.aabb = [0, 0, 0, 0, 0, 0];
    this.type = e;
    this.center.x = t.x;
    this.center.y = t.y;
    this.center.z = t.z;
  }

  t.prototype.updateAABB = function (t, e, i) {
    if (void 0 === i) {
      i = !0;
    }

    var o = this.size;
    var n = this.center;
    var s = t.x;
    var r = t.y;
    var a = t.z;
    var l = n.x;
    var c = n.y;
    var u = n.z;
    var d = 0.5 * o.x;
    var p = 0.5 * o.y;
    var f = 0.5 * o.z;
    var h = this.aabb;

    if (i) {
      d = Math.abs(d * s);
      p = Math.abs(p * r);
      f = Math.abs(f * a);
      h[0] = l * s - d;
      h[1] = c * r - p;
      h[2] = u * a - f;
      h[3] = l * s + d;
      h[4] = c * r + p;
      h[5] = u * a + f;
    } else {
      {
        var m = e.m;
        var y = m[0] * s;
        var g = m[1] * s;

        var _ = m[2] * s;

        var k = m[3] * r;
        var v = m[4] * r;
        var b = m[5] * r;
        var w = m[6] * a;
        var A = m[7] * a;
        var S = m[8] * a;
        var C = y * l + k * c + w * u;
        var I = g * l + v * c + A * u;
        var P = _ * l + b * c + S * u;
        var R = Math.abs(y) * d + Math.abs(k) * p + Math.abs(w) * f;
        var B = Math.abs(g) * d + Math.abs(v) * p + Math.abs(A) * f;
        var x = Math.abs(_) * d + Math.abs(b) * p + Math.abs(S) * f;
        h[0] = C - R;
        h[1] = I - B;
        h[2] = P - x;
        h[3] = C + R;
        h[4] = I + B;
        h[5] = P + x;
      }
    }

    return h;
  };

  return t;
}();

exports.cShape = c;

var u = function (t) {
  function e(e, i) {
    var o = t.call(this, e, s.Box) || this;
    o.size.x = i.x;
    o.size.y = i.y;
    o.size.z = i.z;
    return o;
  }

  __extends(e, t);

  return e;
}(c);

exports.cBox = u;

var d = function (t) {
  function e(e, i) {
    var o = t.call(this, e, s.Sphere) || this;
    o.radius = i;
    o.size.x = 2 * i;
    o.size.y = 2 * i;
    o.size.z = 2 * i;
    return o;
  }

  __extends(e, t);

  return e;
}(c);

exports.cSphere = d;

var p = function (t) {
  function e(e, i) {
    var o = t.call(this, e, s.Polygon) || this;
    o.point2Ds = i;
    var n = i[0].x;
    var r = i[0].y;
    var a = n;
    var l = r;
    var c = i.length;

    for (var u = 1; u < c; u++) {
      var d = i[u].x;
      var p = i[u].y;
      n >= d ? n = d : a <= d && (a = d);
      r >= p ? r = p : l <= p && (l = p);
    }

    o.size.x = a - n;
    o.size.y = l - r;
    o.size.z = 0;
    return o;
  }

  __extends(e, t);

  return e;
}(c);

exports.cPolygon = p;
var f = new cc.Vec3();
var h = new cc.Vec2();
exports.ShapeSupport = [];

exports.ShapeSupport[s.Box | s.Box] = function (t, e) {
  return !(!t.isIdentity || !e.isIdentity) || $aILib.obbIntersect(t.getCenter(), t.getHalfSize(), t.getRotMat3(), e.getCenter(), e.getHalfSize(), e.getRotMat3());
};

exports.ShapeSupport[s.Box | s.Sphere] = function (t, e) {
  return t.isIdentity ? (l.subtract(f, e.getCenter(), t.getCenter()), $aILib.sphereAABBDistance(f, e.getRaidus(), t.getHalfSize())) : $aILib.sphereOBBDistance(e.getCenter(), e.getRaidus(), t.getCenter(), t.getRotation(), t.getHalfSize());
};

exports.ShapeSupport[s.Sphere | s.Sphere] = function (t, e) {
  var i = t.getCenter();
  var o = e.getCenter();
  l.subtract(f, i, o);
  var n = f.lengthSqr();
  var s = t.getRaidus() + e.getRaidus();
  return n <= s * s;
};

exports.ShapeSupport[s.Box | s.Polygon] = function (t, e) {
  return $aILib["default"].polygonPolygon(t.getPoints(), e.getPoints());
};

exports.ShapeSupport[s.Sphere | s.Polygon] = function (t, e) {
  var i = t.getCenter();
  var o = t.getRaidus();
  h.x = i.x;
  h.y = i.y;
  return $aILib["default"].polygonCircle(e.getPoints(), h, o);
};

exports.ShapeSupport[s.Polygon | s.Polygon] = function (t, e) {
  return $aILib["default"].polygonPolygon(t.getPoints(), e.getPoints());
};

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXFNoYXBlLmpzIl0sIm5hbWVzIjpbIm8iLCJleHBvcnRzIiwiU2hhcGVTdXBwb3J0IiwiY1BvbHlnb24iLCJjU3BoZXJlIiwiY0JveCIsImNTaGFwZSIsIlNoYXBlVHlwZSIsInMiLCJyIiwiJGFJTGliIiwicmVxdWlyZSIsImwiLCJjYyIsIlZlYzMiLCJCb3giLCJTcGhlcmUiLCJQb2x5Z29uIiwiYyIsInQiLCJlIiwicmFkaXVzIiwiaGVpZ2h0IiwidHlwZSIsInBvaW50MkRzIiwic2l6ZSIsIngiLCJ5IiwieiIsImNlbnRlciIsImFhYmIiLCJwcm90b3R5cGUiLCJ1cGRhdGVBQUJCIiwiaSIsIm4iLCJhIiwidSIsImQiLCJwIiwiZiIsImgiLCJNYXRoIiwiYWJzIiwibSIsImciLCJfIiwiayIsInYiLCJiIiwidyIsIkEiLCJTIiwiQyIsIkkiLCJQIiwiUiIsIkIiLCJjYWxsIiwiX19leHRlbmRzIiwibGVuZ3RoIiwiVmVjMiIsImlzSWRlbnRpdHkiLCJvYmJJbnRlcnNlY3QiLCJnZXRDZW50ZXIiLCJnZXRIYWxmU2l6ZSIsImdldFJvdE1hdDMiLCJzdWJ0cmFjdCIsInNwaGVyZUFBQkJEaXN0YW5jZSIsImdldFJhaWR1cyIsInNwaGVyZU9CQkRpc3RhbmNlIiwiZ2V0Um90YXRpb24iLCJsZW5ndGhTcXIiLCJwb2x5Z29uUG9seWdvbiIsImdldFBvaW50cyIsInBvbHlnb25DaXJjbGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsQ0FBSjtBQUNBQyxPQUFPLENBQUNDLFlBQVIsR0FBdUJELE9BQU8sQ0FBQ0UsUUFBUixHQUFtQkYsT0FBTyxDQUFDRyxPQUFSLEdBQWtCSCxPQUFPLENBQUNJLElBQVIsR0FBZUosT0FBTyxDQUFDSyxNQUFSLEdBQWlCTCxPQUFPLENBQUNNLFNBQVIsR0FBb0IsS0FBSyxDQUFySDtBQUNBLElBQUlDLENBQUo7QUFDQSxJQUFJQyxDQUFKOztB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QUNTLE9BQUYsR0FBWVQsQ0FBQyxDQUFDUyxPQUFuQyxJQUE4QyxVQUFVRSxDQUFWLEVBQWFDLENBQWIsRUFBZ0I7RUFDMUQsT0FBT1YsTUFBTSxXQUFOLENBQWU4RCxjQUFmLENBQThCckQsQ0FBQyxDQUFDc0QsU0FBRixFQUE5QixFQUE2Q3JELENBQUMsQ0FBQ3FELFNBQUYsRUFBN0MsQ0FBUDtBQUNILENBRkQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBvO1xyXG5leHBvcnRzLlNoYXBlU3VwcG9ydCA9IGV4cG9ydHMuY1BvbHlnb24gPSBleHBvcnRzLmNTcGhlcmUgPSBleHBvcnRzLmNCb3ggPSBleHBvcnRzLmNTaGFwZSA9IGV4cG9ydHMuU2hhcGVUeXBlID0gdm9pZCAwO1xyXG52YXIgcztcclxudmFyIHI7XHJcbnZhciAkYUlMaWIgPSByZXF1aXJlKFwiLi9BSUxpYlwiKTtcclxudmFyIGwgPSBjYy5WZWMzO1xyXG4ociA9IHMgPSBleHBvcnRzLlNoYXBlVHlwZSB8fCAoZXhwb3J0cy5TaGFwZVR5cGUgPSB7fSkpWyhyLkJveCA9IDEpXSA9IFwiQm94XCI7XHJcbnJbKHIuU3BoZXJlID0gMildID0gXCJTcGhlcmVcIjtcclxuclsoci5Qb2x5Z29uID0gNCldID0gXCJQb2x5Z29uXCI7XHJcbnZhciBjID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIHQodCwgZSkge1xyXG4gICAgICAgIHRoaXMucmFkaXVzID0gMDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IDA7XHJcbiAgICAgICAgdGhpcy50eXBlID0gcy5Cb3g7XHJcbiAgICAgICAgdGhpcy5wb2ludDJEcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuc2l6ZSA9IHtcclxuICAgICAgICAgICAgeDogMCxcclxuICAgICAgICAgICAgeTogMCxcclxuICAgICAgICAgICAgejogMFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5jZW50ZXIgPSB7XHJcbiAgICAgICAgICAgIHg6IDAsXHJcbiAgICAgICAgICAgIHk6IDAsXHJcbiAgICAgICAgICAgIHo6IDBcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuYWFiYiA9IFswLCAwLCAwLCAwLCAwLCAwXTtcclxuICAgICAgICB0aGlzLnR5cGUgPSBlO1xyXG4gICAgICAgIHRoaXMuY2VudGVyLnggPSB0Lng7XHJcbiAgICAgICAgdGhpcy5jZW50ZXIueSA9IHQueTtcclxuICAgICAgICB0aGlzLmNlbnRlci56ID0gdC56O1xyXG4gICAgfVxyXG4gICAgdC5wcm90b3R5cGUudXBkYXRlQUFCQiA9IGZ1bmN0aW9uICh0LCBlLCBpKSB7XHJcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gaSkge1xyXG4gICAgICAgICAgICBpID0gITA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBvID0gdGhpcy5zaXplO1xyXG4gICAgICAgIHZhciBuID0gdGhpcy5jZW50ZXI7XHJcbiAgICAgICAgdmFyIHMgPSB0Lng7XHJcbiAgICAgICAgdmFyIHIgPSB0Lnk7XHJcbiAgICAgICAgdmFyIGEgPSB0Lno7XHJcbiAgICAgICAgdmFyIGwgPSBuLng7XHJcbiAgICAgICAgdmFyIGMgPSBuLnk7XHJcbiAgICAgICAgdmFyIHUgPSBuLno7XHJcbiAgICAgICAgdmFyIGQgPSAwLjUgKiBvLng7XHJcbiAgICAgICAgdmFyIHAgPSAwLjUgKiBvLnk7XHJcbiAgICAgICAgdmFyIGYgPSAwLjUgKiBvLno7XHJcbiAgICAgICAgdmFyIGggPSB0aGlzLmFhYmI7XHJcbiAgICAgICAgaWYgKGkpIHtcclxuICAgICAgICAgICAgZCA9IE1hdGguYWJzKGQgKiBzKTtcclxuICAgICAgICAgICAgcCA9IE1hdGguYWJzKHAgKiByKTtcclxuICAgICAgICAgICAgZiA9IE1hdGguYWJzKGYgKiBhKTtcclxuICAgICAgICAgICAgaFswXSA9IGwgKiBzIC0gZDtcclxuICAgICAgICAgICAgaFsxXSA9IGMgKiByIC0gcDtcclxuICAgICAgICAgICAgaFsyXSA9IHUgKiBhIC0gZjtcclxuICAgICAgICAgICAgaFszXSA9IGwgKiBzICsgZDtcclxuICAgICAgICAgICAgaFs0XSA9IGMgKiByICsgcDtcclxuICAgICAgICAgICAgaFs1XSA9IHUgKiBhICsgZjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbSA9IGUubTtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gbVswXSAqIHM7XHJcbiAgICAgICAgICAgICAgICB2YXIgZyA9IG1bMV0gKiBzO1xyXG4gICAgICAgICAgICAgICAgdmFyIF8gPSBtWzJdICogcztcclxuICAgICAgICAgICAgICAgIHZhciBrID0gbVszXSAqIHI7XHJcbiAgICAgICAgICAgICAgICB2YXIgdiA9IG1bNF0gKiByO1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBtWzVdICogcjtcclxuICAgICAgICAgICAgICAgIHZhciB3ID0gbVs2XSAqIGE7XHJcbiAgICAgICAgICAgICAgICB2YXIgQSA9IG1bN10gKiBhO1xyXG4gICAgICAgICAgICAgICAgdmFyIFMgPSBtWzhdICogYTtcclxuICAgICAgICAgICAgICAgIHZhciBDID0geSAqIGwgKyBrICogYyArIHcgKiB1O1xyXG4gICAgICAgICAgICAgICAgdmFyIEkgPSBnICogbCArIHYgKiBjICsgQSAqIHU7XHJcbiAgICAgICAgICAgICAgICB2YXIgUCA9IF8gKiBsICsgYiAqIGMgKyBTICogdTtcclxuICAgICAgICAgICAgICAgIHZhciBSID0gTWF0aC5hYnMoeSkgKiBkICsgTWF0aC5hYnMoaykgKiBwICsgTWF0aC5hYnModykgKiBmO1xyXG4gICAgICAgICAgICAgICAgdmFyIEIgPSBNYXRoLmFicyhnKSAqIGQgKyBNYXRoLmFicyh2KSAqIHAgKyBNYXRoLmFicyhBKSAqIGY7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IE1hdGguYWJzKF8pICogZCArIE1hdGguYWJzKGIpICogcCArIE1hdGguYWJzKFMpICogZjtcclxuICAgICAgICAgICAgICAgIGhbMF0gPSBDIC0gUjtcclxuICAgICAgICAgICAgICAgIGhbMV0gPSBJIC0gQjtcclxuICAgICAgICAgICAgICAgIGhbMl0gPSBQIC0geDtcclxuICAgICAgICAgICAgICAgIGhbM10gPSBDICsgUjtcclxuICAgICAgICAgICAgICAgIGhbNF0gPSBJICsgQjtcclxuICAgICAgICAgICAgICAgIGhbNV0gPSBQICsgeDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gdDtcclxufSkoKTtcclxuZXhwb3J0cy5jU2hhcGUgPSBjO1xyXG52YXIgdSA9IChmdW5jdGlvbiAodCkge1xyXG4gICAgZnVuY3Rpb24gZShlLCBpKSB7XHJcbiAgICAgICAgdmFyIG8gPSB0LmNhbGwodGhpcywgZSwgcy5Cb3gpIHx8IHRoaXM7XHJcbiAgICAgICAgby5zaXplLnggPSBpLng7XHJcbiAgICAgICAgby5zaXplLnkgPSBpLnk7XHJcbiAgICAgICAgby5zaXplLnogPSBpLno7XHJcbiAgICAgICAgcmV0dXJuIG87XHJcbiAgICB9XHJcbiAgICBfX2V4dGVuZHMoZSwgdCk7XHJcbiAgICByZXR1cm4gZTtcclxufSkoYyk7XHJcbmV4cG9ydHMuY0JveCA9IHU7XHJcbnZhciBkID0gKGZ1bmN0aW9uICh0KSB7XHJcbiAgICBmdW5jdGlvbiBlKGUsIGkpIHtcclxuICAgICAgICB2YXIgbyA9IHQuY2FsbCh0aGlzLCBlLCBzLlNwaGVyZSkgfHwgdGhpcztcclxuICAgICAgICBvLnJhZGl1cyA9IGk7XHJcbiAgICAgICAgby5zaXplLnggPSAyICogaTtcclxuICAgICAgICBvLnNpemUueSA9IDIgKiBpO1xyXG4gICAgICAgIG8uc2l6ZS56ID0gMiAqIGk7XHJcbiAgICAgICAgcmV0dXJuIG87XHJcbiAgICB9XHJcbiAgICBfX2V4dGVuZHMoZSwgdCk7XHJcbiAgICByZXR1cm4gZTtcclxufSkoYyk7XHJcbmV4cG9ydHMuY1NwaGVyZSA9IGQ7XHJcbnZhciBwID0gKGZ1bmN0aW9uICh0KSB7XHJcbiAgICBmdW5jdGlvbiBlKGUsIGkpIHtcclxuICAgICAgICB2YXIgbyA9IHQuY2FsbCh0aGlzLCBlLCBzLlBvbHlnb24pIHx8IHRoaXM7XHJcbiAgICAgICAgby5wb2ludDJEcyA9IGk7XHJcbiAgICAgICAgdmFyIG4gPSBpWzBdLng7XHJcbiAgICAgICAgdmFyIHIgPSBpWzBdLnk7XHJcbiAgICAgICAgdmFyIGEgPSBuO1xyXG4gICAgICAgIHZhciBsID0gcjtcclxuICAgICAgICB2YXIgYyA9IGkubGVuZ3RoO1xyXG4gICAgICAgIGZvciAodmFyIHUgPSAxOyB1IDwgYzsgdSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBkID0gaVt1XS54O1xyXG4gICAgICAgICAgICB2YXIgcCA9IGlbdV0ueTtcclxuICAgICAgICAgICAgbiA+PSBkID8gKG4gPSBkKSA6IGEgPD0gZCAmJiAoYSA9IGQpO1xyXG4gICAgICAgICAgICByID49IHAgPyAociA9IHApIDogbCA8PSBwICYmIChsID0gcCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG8uc2l6ZS54ID0gYSAtIG47XHJcbiAgICAgICAgby5zaXplLnkgPSBsIC0gcjtcclxuICAgICAgICBvLnNpemUueiA9IDA7XHJcbiAgICAgICAgcmV0dXJuIG87XHJcbiAgICB9XHJcbiAgICBfX2V4dGVuZHMoZSwgdCk7XHJcbiAgICByZXR1cm4gZTtcclxufSkoYyk7XHJcbmV4cG9ydHMuY1BvbHlnb24gPSBwO1xyXG52YXIgZiA9IG5ldyBjYy5WZWMzKCk7XHJcbnZhciBoID0gbmV3IGNjLlZlYzIoKTtcclxuZXhwb3J0cy5TaGFwZVN1cHBvcnQgPSBbXTtcclxuZXhwb3J0cy5TaGFwZVN1cHBvcnRbcy5Cb3ggfCBzLkJveF0gPSBmdW5jdGlvbiAodCwgZSkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgICAhKCF0LmlzSWRlbnRpdHkgfHwgIWUuaXNJZGVudGl0eSkgfHxcclxuICAgICAgICAkYUlMaWIub2JiSW50ZXJzZWN0KFxyXG4gICAgICAgICAgICB0LmdldENlbnRlcigpLFxyXG4gICAgICAgICAgICB0LmdldEhhbGZTaXplKCksXHJcbiAgICAgICAgICAgIHQuZ2V0Um90TWF0MygpLFxyXG4gICAgICAgICAgICBlLmdldENlbnRlcigpLFxyXG4gICAgICAgICAgICBlLmdldEhhbGZTaXplKCksXHJcbiAgICAgICAgICAgIGUuZ2V0Um90TWF0MygpXHJcbiAgICAgICAgKVxyXG4gICAgKTtcclxufTtcclxuZXhwb3J0cy5TaGFwZVN1cHBvcnRbcy5Cb3ggfCBzLlNwaGVyZV0gPSBmdW5jdGlvbiAodCwgZSkge1xyXG4gICAgcmV0dXJuIHQuaXNJZGVudGl0eVxyXG4gICAgICAgID8gKGwuc3VidHJhY3QoZiwgZS5nZXRDZW50ZXIoKSwgdC5nZXRDZW50ZXIoKSksICRhSUxpYi5zcGhlcmVBQUJCRGlzdGFuY2UoZiwgZS5nZXRSYWlkdXMoKSwgdC5nZXRIYWxmU2l6ZSgpKSlcclxuICAgICAgICA6ICRhSUxpYi5zcGhlcmVPQkJEaXN0YW5jZShlLmdldENlbnRlcigpLCBlLmdldFJhaWR1cygpLCB0LmdldENlbnRlcigpLCB0LmdldFJvdGF0aW9uKCksIHQuZ2V0SGFsZlNpemUoKSk7XHJcbn07XHJcbmV4cG9ydHMuU2hhcGVTdXBwb3J0W3MuU3BoZXJlIHwgcy5TcGhlcmVdID0gZnVuY3Rpb24gKHQsIGUpIHtcclxuICAgIHZhciBpID0gdC5nZXRDZW50ZXIoKTtcclxuICAgIHZhciBvID0gZS5nZXRDZW50ZXIoKTtcclxuICAgIGwuc3VidHJhY3QoZiwgaSwgbyk7XHJcbiAgICB2YXIgbiA9IGYubGVuZ3RoU3FyKCk7XHJcbiAgICB2YXIgcyA9IHQuZ2V0UmFpZHVzKCkgKyBlLmdldFJhaWR1cygpO1xyXG4gICAgcmV0dXJuIG4gPD0gcyAqIHM7XHJcbn07XHJcbmV4cG9ydHMuU2hhcGVTdXBwb3J0W3MuQm94IHwgcy5Qb2x5Z29uXSA9IGZ1bmN0aW9uICh0LCBlKSB7XHJcbiAgICByZXR1cm4gJGFJTGliLmRlZmF1bHQucG9seWdvblBvbHlnb24odC5nZXRQb2ludHMoKSwgZS5nZXRQb2ludHMoKSk7XHJcbn07XHJcbmV4cG9ydHMuU2hhcGVTdXBwb3J0W3MuU3BoZXJlIHwgcy5Qb2x5Z29uXSA9IGZ1bmN0aW9uICh0LCBlKSB7XHJcbiAgICB2YXIgaSA9IHQuZ2V0Q2VudGVyKCk7XHJcbiAgICB2YXIgbyA9IHQuZ2V0UmFpZHVzKCk7XHJcbiAgICBoLnggPSBpLng7XHJcbiAgICBoLnkgPSBpLnk7XHJcbiAgICByZXR1cm4gJGFJTGliLmRlZmF1bHQucG9seWdvbkNpcmNsZShlLmdldFBvaW50cygpLCBoLCBvKTtcclxufTtcclxuZXhwb3J0cy5TaGFwZVN1cHBvcnRbcy5Qb2x5Z29uIHwgcy5Qb2x5Z29uXSA9IGZ1bmN0aW9uICh0LCBlKSB7XHJcbiAgICByZXR1cm4gJGFJTGliLmRlZmF1bHQucG9seWdvblBvbHlnb24odC5nZXRQb2ludHMoKSwgZS5nZXRQb2ludHMoKSk7XHJcbn07XHJcbiJdfQ==