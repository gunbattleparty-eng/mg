{"version":3,"sources":["assets\\game_script\\scripts\\Bullet_3.js"],"names":["o","$object","require","$assetsLoader","$assetsMap","$resUtil","$configContext","$roleContext","$gameContext","$gameSkillInfo","$baseBullet","m","cc","_decorator","y","ccclass","g","property","t","e","apply","arguments","buttleType","BulletType","split_bullet","targetEnemy","anim","animName","isLoadedSkin","__extends","prototype","initButtle","i","call","speed","skillParam","bulletSpeed","velocity","set","multiplyScalar","atk","splitAtk","Skill4Param","FINAL","node","children","getComponent","Animation","setAnimation","ins","currSkinInfo","gun","n","instance","gunSkinConfigs","find","id","loadRes","BundleNames","Game","skin_res","AnimationClip","sp","isValid","ResUtil","assignWith","buttleLayer","parent","addClip","play","isFirebullet","bulletSuffFreezeAdd","onTrigger","isUse","Trigger","enter","object","sufferAtk","skillId","skillSpecialitys","removeSelf","__decorate","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $object = require(\"./Object\");\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $roleContext = require(\"./RoleContext\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $gameSkillInfo = require(\"./GameSkillInfo\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar m = cc._decorator;\r\nvar y = m.ccclass;\r\nvar g =\r\n    (m.property,\r\n    (function (t) {\r\n        function e() {\r\n            var e = (null !== t && t.apply(this, arguments)) || this;\r\n            e.buttleType = $baseBullet.BulletType.split_bullet;\r\n            e.targetEnemy = null;\r\n            e.anim = null;\r\n            e.animName = \"bullet_1_1\";\r\n            e.isLoadedSkin = !1;\r\n            return e;\r\n        }\r\n        __extends(e, t);\r\n        e.prototype.initButtle = function (e, i) {\r\n            var o = this;\r\n            t.prototype.initButtle.call(this, e, i);\r\n            this.speed = this.skillParam.bulletSpeed;\r\n            this.velocity.set(e).multiplyScalar(this.speed);\r\n            this.atk = this.skillParam.splitAtk[$gameSkillInfo.Skill4Param.FINAL];\r\n            if (!this.anim) {\r\n                this.anim = this.node.children[0].getComponent(cc.Animation);\r\n            }\r\n            this.setAnimation();\r\n            if (!this.isLoadedSkin && 1 !== $roleContext.default.ins.currSkinInfo.gun) {\r\n                this.isLoadedSkin = !0;\r\n                var n = $configContext.default.instance.gunSkinConfigs.find(function (t) {\r\n                    return t.id === $roleContext.default.ins.currSkinInfo.gun;\r\n                });\r\n                $assetsLoader.default.instance.loadRes(\r\n                    $assetsMap.BundleNames.Game,\r\n                    [\"/anim/\" + n.skin_res],\r\n                    cc.AnimationClip,\r\n                    null,\r\n                    function (t, e) {\r\n                        var i = e[0];\r\n                        if (sp && cc.isValid(i)) {\r\n                            o.animName = \"\" + n.skin_res;\r\n                            $resUtil.ResUtil.assignWith(i, $gameContext.default.ins.buttleLayer.parent);\r\n                            o.anim.addClip(i);\r\n                            o.anim.play(o.animName);\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        };\r\n        e.prototype.setAnimation = function (t) {\r\n            if (void 0 === t) {\r\n                t = \"bullet_1_1\";\r\n            }\r\n            this.skillParam.isFirebullet\r\n                ? (t = \"bullet_1_2\")\r\n                : this.skillParam.bulletSuffFreezeAdd > 0\r\n                ? (t = \"bullet_1_4\")\r\n                : \"bullet_1_1\" === t && (t = this.animName);\r\n            this.anim.play(t);\r\n        };\r\n        e.prototype.onTrigger = function (t, e) {\r\n            if (!this.isUse && e == $object.Trigger.enter) {\r\n                if (cc.isValid(this.targetEnemy) && t.object === this.targetEnemy) {\r\n                    return;\r\n                }\r\n                this.isUse = !0;\r\n                t.object.sufferAtk({\r\n                    id: this.skillId,\r\n                    skillSpecialitys: this.skillSpecialitys,\r\n                    atk: this.atk\r\n                });\r\n                this.removeSelf();\r\n            }\r\n        };\r\n        return __decorate([y], e);\r\n    })($baseBullet.default));\r\nexports.default = g;\r\n"]}