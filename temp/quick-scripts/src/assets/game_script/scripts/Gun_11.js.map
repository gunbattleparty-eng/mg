{"version":3,"sources":["assets\\game_script\\scripts\\Gun_11.js"],"names":["o","$assetsLoader","require","$assetsMap","$resUtil","$eventManager","$seedUtil","$configContext","$globalParam","$localEventName","$baseBullet","$gameContext","$gameSkillInfo","$baseGun","g","cc","Vec3","ZERO","_","t","e","i","call","skillId","skillParam","ins","skillInfo","getSkillById","__extends","prototype","updateF","isGamePuase","releaseing","timeLeft","skillCD","Skill4Param","FINAL","send","RENDER_SKILL_CD_INFO","startGun","getRandomEnemys","pointNode","skillReleaseCount","skillAtkRange","length","Math","min","n","getPosition","s","x","y","randomFloat","createBullet","normalizeSelf","schedulesOnce","time","getButtlePool","BulletType","drat","instance","getRes","BundleNames","Game","AssetsMap","GameBundles","prefabs","assetsList","Bullet_29","ResUtil","instantiate","lowBulletLayer","parent","getComponent","skillSpecialitys","basicSkillConfigMap","get","skill_tpye","setPosition","initButtle","insert","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $seedUtil = require(\"./SeedUtil\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $globalParam = require(\"./GlobalParam\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $gameSkillInfo = require(\"./GameSkillInfo\");\r\nvar $baseGun = require(\"./BaseGun\");\r\nvar g = cc.Vec3.ZERO;\r\nvar _ = (function (t) {\r\n    function e(e) {\r\n        var i = t.call(this, e) || this;\r\n        i.skillId = 247;\r\n        i.skillParam = $gameContext.default.ins.skillInfo.getSkillById(i.skillId);\r\n        return i;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.updateF = function (e) {\r\n        t.prototype.updateF.call(this, e);\r\n        if (!($globalParam.default.isGamePuase || this.releaseing)) {\r\n            this.timeLeft -= e;\r\n            this.timeLeft <= 0\r\n                ? ((this.timeLeft = this.skillParam.skillCD[$gameSkillInfo.Skill4Param.FINAL]),\r\n                  $eventManager.default.send($localEventName.default.RENDER_SKILL_CD_INFO, this.skillId, 0),\r\n                  this.startGun()\r\n                      ? ((this.releaseing = !0),\r\n                        (this.timeLeft = this.skillParam.skillCD[$gameSkillInfo.Skill4Param.FINAL]),\r\n                        $eventManager.default.send($localEventName.default.RENDER_SKILL_CD_INFO, this.skillId, 1))\r\n                      : (this.timeLeft = 0))\r\n                : $eventManager.default.send(\r\n                      $localEventName.default.RENDER_SKILL_CD_INFO,\r\n                      this.skillId,\r\n                      this.timeLeft / this.skillParam.skillCD[$gameSkillInfo.Skill4Param.FINAL],\r\n                      -1\r\n                  );\r\n        }\r\n    };\r\n    e.prototype.startGun = function () {\r\n        var t = this;\r\n        var e = $gameContext.default.ins.getRandomEnemys(\r\n            this.pointNode,\r\n            this.skillParam.skillReleaseCount + 1,\r\n            this.skillParam.skillAtkRange[$gameSkillInfo.Skill4Param.FINAL]\r\n        );\r\n        if (e.length <= 0) {\r\n            return !1;\r\n        }\r\n        var i = Math.min(e.length, this.skillParam.skillReleaseCount);\r\n        for (var o = 0; o < i; o++) {\r\n            var n = e[o].getPosition();\r\n            if (o + 1 < e.length) {\r\n                var s = e[o + 1].getPosition();\r\n                g.x = s.x - n.x;\r\n                g.y = s.y - n.y;\r\n            } else {\r\n                g.x = $seedUtil.default.randomFloat(-1, 1);\r\n                g.y = $seedUtil.default.randomFloat(-1, 1);\r\n            }\r\n            this.createBullet(n, g.normalizeSelf());\r\n        }\r\n        this.schedulesOnce(function () {\r\n            t.releaseing = !1;\r\n        }, this.skillParam.time[$gameSkillInfo.Skill4Param.FINAL]);\r\n        return !0;\r\n    };\r\n    e.prototype.createBullet = function (t, e) {\r\n        var i = $gameContext.default.ins.getButtlePool($baseBullet.BulletType.drat);\r\n        if (!i) {\r\n            var o = $assetsLoader.default.instance.getRes(\r\n                $assetsMap.BundleNames.Game,\r\n                $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.Bullet_29\r\n            );\r\n            (i = $resUtil.ResUtil.instantiate(o, $gameContext.default.ins.lowBulletLayer.parent).getComponent(\r\n                $baseBullet.default\r\n            )).skillSpecialitys = $configContext.default.instance.basicSkillConfigMap.get(this.skillId).skill_tpye;\r\n        }\r\n        i.setPosition(t);\r\n        i.initButtle(e, this.skillId);\r\n        i.insert($gameContext.default.ins.lowBulletLayer);\r\n    };\r\n    return e;\r\n})($baseGun.default);\r\nexports.default = _;\r\n"]}