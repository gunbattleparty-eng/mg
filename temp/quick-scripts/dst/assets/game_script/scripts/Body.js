
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/Body.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '35d5eaYM9dJwrqPskERJ5FA', 'Body');
// game_script/scripts/Body.js

"use strict";

exports.cBody = void 0;

var $object = require("./Object");

var n = cc.Mat3;
var s = (cc.Quat, cc.Vec3);

var r = function () {
  function t(t) {
    this.id = 0;
    this.mask = 0;
    this.group = 0;
    this.shape = null;
    this.object = null;
    this.priority = 0;
    this.isDirty = 15;
    this.lower = 0;
    this.upper = 0;
    this.aabb = [0, 0, 0, 0, 0, 0];
    this.isRemove = !1;
    this.isRetrieve = !1;
    this.isIdentity = !1;
    this.inCollider = !1;
    this.raidus = 0;
    this.points = [];
    this.center = new s();
    this.rotMat3 = new n();
    this.halfSize = new s();
    this.scale = new s(1, 1, 1);
    this.isAgent = !1;
    this.maxNeighbors = 0;
    this.neighborDist = 0;
    this.maxVelocity = 0;
    this.newVelocity = new s();
    this.prefVelocity = new s();
    this.orcaLines = [];
    this.object = t;
  }

  t.prototype.updateBound = function (t) {
    if (void 0 === t) {
      t = $object.Dirty.NON;
    }

    var e;
    var i = this.object;
    var n = t | i.isDirty;

    if (this.isAgent) {
      var s = i.velocity;
      this.newVelocity.x = s.x;
      this.newVelocity.y = s.y;
    }

    if (n > 0) {
      var r = !1;
      var a = this.shape;

      if (n & $object.Dirty.S) {
        r = !0;
        var l = this.getScale();
        this.scale.x = l.x >= 0 ? l.x : -l.x;
        this.scale.y = l.y >= 0 ? l.y : -l.y;
        this.scale.z = l.z >= 0 ? l.z : -l.z;
      }

      if (n & $object.Dirty.R) {
        this.isIdentity = 0 == (e = this.getRotation()).x && 0 == e.y && 0 == e.z && 1 == e.w;
        r = !0;
      }

      if (r) {
        a.updateAABB(this.getScale(), this.getRotMat3(), this.isIdentity);
      }

      var c = this.aabb;
      var u = a.aabb;
      var d = this.getPosition();
      c[0] = u[0] + d.x;
      c[1] = u[1] + d.y;
      c[2] = u[2] + d.z;
      c[3] = u[3] + d.x;
      c[4] = u[4] + d.y;
      c[5] = u[5] + d.z;
      this.isDirty = 15;
      i.isDirty = $object.Dirty.NON;
      return !0;
    }

    return !1;
  };

  t.prototype.clear = function () {
    this.shape = null;
    this.object = null;
    this.isRemove = !1;
    this.inCollider = !1;
    this.orcaLines.length = 0;
  };

  t.prototype.getScale = function () {
    return this.object.worldScale;
  };

  t.prototype.getPosition = function () {
    return this.object.worldPosition;
  };

  t.prototype.getRotation = function () {
    return this.object.worldRotation;
  };

  t.prototype.getRotMat3 = function () {
    return this.object.worldRotatioMat3;
  };

  t.prototype.getCenter = function () {
    if (1 & this.isDirty) {
      this.isDirty &= -2;
      var t = this.aabb;
      var e = this.center;
      e.x = 0.5 * (t[0] + t[3]);
      e.y = 0.5 * (t[1] + t[4]);
      e.z = 0.5 * (t[2] + t[5]);
    }

    return this.center;
  };

  t.prototype.getRaidus = function () {
    if (2 & this.isDirty) {
      this.isDirty &= -3;
      var t = this.scale;
      var e = this.shape.radius;
      this.raidus = Math.max(t.x, t.y, t.z) * e;
    }

    return this.raidus;
  };

  t.prototype.getHalfSize = function () {
    if (4 & this.isDirty) {
      this.isDirty &= -5;
      var t = this.scale;
      var e = this.shape.size;
      var i = this.halfSize;
      i.x = t.x * e.x * 0.5;
      i.y = t.y * e.y * 0.5;
      i.z = t.z * e.z * 0.5;
    }

    return this.halfSize;
  };

  t.prototype.getPoints = function () {
    if (8 & this.isDirty) {
      this.isDirty &= -9;
      var t = this.scale;
      var e = this.getRotMat3().m;
      var i = this.getCenter();
      var o = this.points;
      var n = this.shape.point2Ds;
      var s = n.length;

      for (var r = 0; r < s; r++) {
        var a = n[r].x * t.x;
        var l = n[r].y * t.y;

        if (null == o[r]) {
          o[r] = new cc.Vec2();
        }

        o[r].x = a * e[0] + l * e[3] + 0 * e[6] + i.x;
        o[r].y = a * e[1] + l * e[4] + 0 * e[7] + i.y;
      }

      o.length = s;
    }

    return this.points;
  };

  return t;
}();

exports.cBody = r;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXEJvZHkuanMiXSwibmFtZXMiOlsiZXhwb3J0cyIsImNCb2R5IiwiJG9iamVjdCIsInJlcXVpcmUiLCJuIiwiY2MiLCJNYXQzIiwicyIsIlF1YXQiLCJWZWMzIiwiciIsInQiLCJpZCIsIm1hc2siLCJncm91cCIsInNoYXBlIiwib2JqZWN0IiwicHJpb3JpdHkiLCJpc0RpcnR5IiwibG93ZXIiLCJ1cHBlciIsImFhYmIiLCJpc1JlbW92ZSIsImlzUmV0cmlldmUiLCJpc0lkZW50aXR5IiwiaW5Db2xsaWRlciIsInJhaWR1cyIsInBvaW50cyIsImNlbnRlciIsInJvdE1hdDMiLCJoYWxmU2l6ZSIsInNjYWxlIiwiaXNBZ2VudCIsIm1heE5laWdoYm9ycyIsIm5laWdoYm9yRGlzdCIsIm1heFZlbG9jaXR5IiwibmV3VmVsb2NpdHkiLCJwcmVmVmVsb2NpdHkiLCJvcmNhTGluZXMiLCJwcm90b3R5cGUiLCJ1cGRhdGVCb3VuZCIsIkRpcnR5IiwiTk9OIiwiZSIsImkiLCJ2ZWxvY2l0eSIsIngiLCJ5IiwiYSIsIlMiLCJsIiwiZ2V0U2NhbGUiLCJ6IiwiUiIsImdldFJvdGF0aW9uIiwidyIsInVwZGF0ZUFBQkIiLCJnZXRSb3RNYXQzIiwiYyIsInUiLCJkIiwiZ2V0UG9zaXRpb24iLCJjbGVhciIsImxlbmd0aCIsIndvcmxkU2NhbGUiLCJ3b3JsZFBvc2l0aW9uIiwid29ybGRSb3RhdGlvbiIsIndvcmxkUm90YXRpb01hdDMiLCJnZXRDZW50ZXIiLCJnZXRSYWlkdXMiLCJyYWRpdXMiLCJNYXRoIiwibWF4IiwiZ2V0SGFsZlNpemUiLCJzaXplIiwiZ2V0UG9pbnRzIiwibSIsIm8iLCJwb2ludDJEcyIsIlZlYzIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUFBLE9BQU8sQ0FBQ0MsS0FBUixHQUFnQixLQUFLLENBQXJCOztBQUNBLElBQUlDLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFVBQUQsQ0FB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LE9BQU8sQ0FBQ0MsS0FBUixHQUFnQlMsQ0FBaEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydHMuY0JvZHkgPSB2b2lkIDA7XHJcbnZhciAkb2JqZWN0ID0gcmVxdWlyZShcIi4vT2JqZWN0XCIpO1xyXG52YXIgbiA9IGNjLk1hdDM7XHJcbnZhciBzID0gKGNjLlF1YXQsIGNjLlZlYzMpO1xyXG52YXIgciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiB0KHQpIHtcclxuICAgICAgICB0aGlzLmlkID0gMDtcclxuICAgICAgICB0aGlzLm1hc2sgPSAwO1xyXG4gICAgICAgIHRoaXMuZ3JvdXAgPSAwO1xyXG4gICAgICAgIHRoaXMuc2hhcGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub2JqZWN0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLnByaW9yaXR5ID0gMDtcclxuICAgICAgICB0aGlzLmlzRGlydHkgPSAxNTtcclxuICAgICAgICB0aGlzLmxvd2VyID0gMDtcclxuICAgICAgICB0aGlzLnVwcGVyID0gMDtcclxuICAgICAgICB0aGlzLmFhYmIgPSBbMCwgMCwgMCwgMCwgMCwgMF07XHJcbiAgICAgICAgdGhpcy5pc1JlbW92ZSA9ICExO1xyXG4gICAgICAgIHRoaXMuaXNSZXRyaWV2ZSA9ICExO1xyXG4gICAgICAgIHRoaXMuaXNJZGVudGl0eSA9ICExO1xyXG4gICAgICAgIHRoaXMuaW5Db2xsaWRlciA9ICExO1xyXG4gICAgICAgIHRoaXMucmFpZHVzID0gMDtcclxuICAgICAgICB0aGlzLnBvaW50cyA9IFtdO1xyXG4gICAgICAgIHRoaXMuY2VudGVyID0gbmV3IHMoKTtcclxuICAgICAgICB0aGlzLnJvdE1hdDMgPSBuZXcgbigpO1xyXG4gICAgICAgIHRoaXMuaGFsZlNpemUgPSBuZXcgcygpO1xyXG4gICAgICAgIHRoaXMuc2NhbGUgPSBuZXcgcygxLCAxLCAxKTtcclxuICAgICAgICB0aGlzLmlzQWdlbnQgPSAhMTtcclxuICAgICAgICB0aGlzLm1heE5laWdoYm9ycyA9IDA7XHJcbiAgICAgICAgdGhpcy5uZWlnaGJvckRpc3QgPSAwO1xyXG4gICAgICAgIHRoaXMubWF4VmVsb2NpdHkgPSAwO1xyXG4gICAgICAgIHRoaXMubmV3VmVsb2NpdHkgPSBuZXcgcygpO1xyXG4gICAgICAgIHRoaXMucHJlZlZlbG9jaXR5ID0gbmV3IHMoKTtcclxuICAgICAgICB0aGlzLm9yY2FMaW5lcyA9IFtdO1xyXG4gICAgICAgIHRoaXMub2JqZWN0ID0gdDtcclxuICAgIH1cclxuICAgIHQucHJvdG90eXBlLnVwZGF0ZUJvdW5kID0gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICBpZiAodm9pZCAwID09PSB0KSB7XHJcbiAgICAgICAgICAgIHQgPSAkb2JqZWN0LkRpcnR5Lk5PTjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGU7XHJcbiAgICAgICAgdmFyIGkgPSB0aGlzLm9iamVjdDtcclxuICAgICAgICB2YXIgbiA9IHQgfCBpLmlzRGlydHk7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNBZ2VudCkge1xyXG4gICAgICAgICAgICB2YXIgcyA9IGkudmVsb2NpdHk7XHJcbiAgICAgICAgICAgIHRoaXMubmV3VmVsb2NpdHkueCA9IHMueDtcclxuICAgICAgICAgICAgdGhpcy5uZXdWZWxvY2l0eS55ID0gcy55O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobiA+IDApIHtcclxuICAgICAgICAgICAgdmFyIHIgPSAhMTtcclxuICAgICAgICAgICAgdmFyIGEgPSB0aGlzLnNoYXBlO1xyXG4gICAgICAgICAgICBpZiAobiAmICRvYmplY3QuRGlydHkuUykge1xyXG4gICAgICAgICAgICAgICAgciA9ICEwO1xyXG4gICAgICAgICAgICAgICAgdmFyIGwgPSB0aGlzLmdldFNjYWxlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjYWxlLnggPSBsLnggPj0gMCA/IGwueCA6IC1sLng7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjYWxlLnkgPSBsLnkgPj0gMCA/IGwueSA6IC1sLnk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjYWxlLnogPSBsLnogPj0gMCA/IGwueiA6IC1sLno7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG4gJiAkb2JqZWN0LkRpcnR5LlIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNJZGVudGl0eSA9IDAgPT0gKGUgPSB0aGlzLmdldFJvdGF0aW9uKCkpLnggJiYgMCA9PSBlLnkgJiYgMCA9PSBlLnogJiYgMSA9PSBlLnc7XHJcbiAgICAgICAgICAgICAgICByID0gITA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHIpIHtcclxuICAgICAgICAgICAgICAgIGEudXBkYXRlQUFCQih0aGlzLmdldFNjYWxlKCksIHRoaXMuZ2V0Um90TWF0MygpLCB0aGlzLmlzSWRlbnRpdHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBjID0gdGhpcy5hYWJiO1xyXG4gICAgICAgICAgICB2YXIgdSA9IGEuYWFiYjtcclxuICAgICAgICAgICAgdmFyIGQgPSB0aGlzLmdldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIGNbMF0gPSB1WzBdICsgZC54O1xyXG4gICAgICAgICAgICBjWzFdID0gdVsxXSArIGQueTtcclxuICAgICAgICAgICAgY1syXSA9IHVbMl0gKyBkLno7XHJcbiAgICAgICAgICAgIGNbM10gPSB1WzNdICsgZC54O1xyXG4gICAgICAgICAgICBjWzRdID0gdVs0XSArIGQueTtcclxuICAgICAgICAgICAgY1s1XSA9IHVbNV0gKyBkLno7XHJcbiAgICAgICAgICAgIHRoaXMuaXNEaXJ0eSA9IDE1O1xyXG4gICAgICAgICAgICBpLmlzRGlydHkgPSAkb2JqZWN0LkRpcnR5Lk5PTjtcclxuICAgICAgICAgICAgcmV0dXJuICEwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gITE7XHJcbiAgICB9O1xyXG4gICAgdC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zaGFwZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vYmplY3QgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaXNSZW1vdmUgPSAhMTtcclxuICAgICAgICB0aGlzLmluQ29sbGlkZXIgPSAhMTtcclxuICAgICAgICB0aGlzLm9yY2FMaW5lcy5sZW5ndGggPSAwO1xyXG4gICAgfTtcclxuICAgIHQucHJvdG90eXBlLmdldFNjYWxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9iamVjdC53b3JsZFNjYWxlO1xyXG4gICAgfTtcclxuICAgIHQucHJvdG90eXBlLmdldFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9iamVjdC53b3JsZFBvc2l0aW9uO1xyXG4gICAgfTtcclxuICAgIHQucHJvdG90eXBlLmdldFJvdGF0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9iamVjdC53b3JsZFJvdGF0aW9uO1xyXG4gICAgfTtcclxuICAgIHQucHJvdG90eXBlLmdldFJvdE1hdDMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0LndvcmxkUm90YXRpb01hdDM7XHJcbiAgICB9O1xyXG4gICAgdC5wcm90b3R5cGUuZ2V0Q2VudGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgxICYgdGhpcy5pc0RpcnR5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNEaXJ0eSAmPSAtMjtcclxuICAgICAgICAgICAgdmFyIHQgPSB0aGlzLmFhYmI7XHJcbiAgICAgICAgICAgIHZhciBlID0gdGhpcy5jZW50ZXI7XHJcbiAgICAgICAgICAgIGUueCA9IDAuNSAqICh0WzBdICsgdFszXSk7XHJcbiAgICAgICAgICAgIGUueSA9IDAuNSAqICh0WzFdICsgdFs0XSk7XHJcbiAgICAgICAgICAgIGUueiA9IDAuNSAqICh0WzJdICsgdFs1XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNlbnRlcjtcclxuICAgIH07XHJcbiAgICB0LnByb3RvdHlwZS5nZXRSYWlkdXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKDIgJiB0aGlzLmlzRGlydHkpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0RpcnR5ICY9IC0zO1xyXG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMuc2NhbGU7XHJcbiAgICAgICAgICAgIHZhciBlID0gdGhpcy5zaGFwZS5yYWRpdXM7XHJcbiAgICAgICAgICAgIHRoaXMucmFpZHVzID0gTWF0aC5tYXgodC54LCB0LnksIHQueikgKiBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5yYWlkdXM7XHJcbiAgICB9O1xyXG4gICAgdC5wcm90b3R5cGUuZ2V0SGFsZlNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKDQgJiB0aGlzLmlzRGlydHkpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0RpcnR5ICY9IC01O1xyXG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMuc2NhbGU7XHJcbiAgICAgICAgICAgIHZhciBlID0gdGhpcy5zaGFwZS5zaXplO1xyXG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMuaGFsZlNpemU7XHJcbiAgICAgICAgICAgIGkueCA9IHQueCAqIGUueCAqIDAuNTtcclxuICAgICAgICAgICAgaS55ID0gdC55ICogZS55ICogMC41O1xyXG4gICAgICAgICAgICBpLnogPSB0LnogKiBlLnogKiAwLjU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmhhbGZTaXplO1xyXG4gICAgfTtcclxuICAgIHQucHJvdG90eXBlLmdldFBvaW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoOCAmIHRoaXMuaXNEaXJ0eSkge1xyXG4gICAgICAgICAgICB0aGlzLmlzRGlydHkgJj0gLTk7XHJcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5zY2FsZTtcclxuICAgICAgICAgICAgdmFyIGUgPSB0aGlzLmdldFJvdE1hdDMoKS5tO1xyXG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMuZ2V0Q2VudGVyKCk7XHJcbiAgICAgICAgICAgIHZhciBvID0gdGhpcy5wb2ludHM7XHJcbiAgICAgICAgICAgIHZhciBuID0gdGhpcy5zaGFwZS5wb2ludDJEcztcclxuICAgICAgICAgICAgdmFyIHMgPSBuLmxlbmd0aDtcclxuICAgICAgICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCBzOyByKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBhID0gbltyXS54ICogdC54O1xyXG4gICAgICAgICAgICAgICAgdmFyIGwgPSBuW3JdLnkgKiB0Lnk7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBvW3JdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb1tyXSA9IG5ldyBjYy5WZWMyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvW3JdLnggPSBhICogZVswXSArIGwgKiBlWzNdICsgMCAqIGVbNl0gKyBpLng7XHJcbiAgICAgICAgICAgICAgICBvW3JdLnkgPSBhICogZVsxXSArIGwgKiBlWzRdICsgMCAqIGVbN10gKyBpLnk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgby5sZW5ndGggPSBzO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5wb2ludHM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHQ7XHJcbn0pKCk7XHJcbmV4cG9ydHMuY0JvZHkgPSByO1xyXG4iXX0=