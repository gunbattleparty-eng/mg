{"version":3,"sources":["assets\\game_script\\scripts\\VIVOCustom.js"],"names":["o","$baseAd","require","r","window","qg","a","t","e","apply","arguments","style","isOpenPreLoad","__extends","prototype","loadAd","getSystemInfoSync","i","windowWidth","windowHeight","isBanner","adUnitId","left","top","Math","round","isLoaded","adIns","createCustomAd","onLoad","onClose","onHide","onError","autoShow","showCustomAd","n","s","showCallback","closeCallback","errorCallback","isCanShow","isConsume","show","then","console","log","warn","destroyAd","call","reCreateAd","isAutoShow","setTimeout","forbidderAd","hideAd","showing","hide","offLoad","offClose","offHide","offError","destroy","onAdLoad","onAdError","onAdClose","onAdHide","hideing","BaseAd","exports"],"mappings":";;;;;;AAAA,IAAIA,CAAJ;;AACA,IAAIC,OAAO,GAAGC,OAAO,CAAC,UAAD,CAArB;;AACA,IAAIC,CAAC,GAAGC,MAAM,CAACC,EAAf;;AACA,IAAIC,CAAC,GAAI,UAAUC,CAAV,EAAa;EAClB,SAASC,CAAT,GAAa;IACT,IAAIA,CAAC,GAAI,SAASD,CAAT,IAAcA,CAAC,CAACE,KAAF,CAAQ,IAAR,EAAcC,SAAd,CAAf,IAA4C,IAApD;IACAF,CAAC,CAACG,KAAF,GAAU,IAAV;IACAH,CAAC,CAACI,aAAF,GAAkB,CAAC,CAAnB;IACA,OAAOJ,CAAP;EACH;;EACDK,SAAS,CAACL,CAAD,EAAID,CAAJ,CAAT;;EACAC,CAAC,CAACM,SAAF,CAAYC,MAAZ,GAAqB,YAAY;IAC7B,IAAIR,CAAJ;IACA,IAAIC,CAAC,GAAGL,CAAC,CAACa,iBAAF,EAAR;IACA,IAAIC,CAAC,IAAIT,CAAC,CAACU,WAAF,EAAeV,CAAC,CAACW,YAArB,CAAL;IACAZ,CAAC,GACG,KAAKI,KAAL,IAAc,CAAC,KAAKA,KAAL,CAAWS,QAA1B,GACM;MACIC,QAAQ,EAAE,KAAKA,QADnB;MAEIV,KAAK,EAAE;QACHW,IAAI,EAAE,KAAKX,KAAL,CAAWW,IAAX,IAAmB,CADtB;QAEHC,GAAG,EAAE,KAAKZ,KAAL,CAAWY,GAAX,IAAkB,MAAMN;MAF1B;IAFX,CADN,GAQM;MACII,QAAQ,EAAE,KAAKA,QADnB;MAEIV,KAAK,EAAE;QACHW,IAAI,EAAE,KAAKX,KAAL,CAAWW,IAAX,IAAmB,CADtB;QAEHC,GAAG,EAAE,KAAKZ,KAAL,CAAWY,GAAX,IAAkBC,IAAI,CAACC,KAAL,CAAWR,CAAX;MAFpB;IAFX,CATV;IAgBA,KAAKS,QAAL,GAAgB,CAAC,CAAjB;IACA,KAAKC,KAAL,GAAaxB,CAAC,CAACyB,cAAF,CAAiBrB,CAAjB,CAAb;;IACA,IAAI,KAAKoB,KAAL,CAAWE,MAAf,EAAuB;MACnB,KAAKF,KAAL,CAAWE,MAAX,CAAkB,KAAKA,MAAvB;IACH;;IACD,IAAI,KAAKF,KAAL,CAAWG,OAAf,EAAwB;MACpB,KAAKH,KAAL,CAAWG,OAAX,CAAmB,KAAKA,OAAxB;IACH;;IACD,IAAI,KAAKH,KAAL,CAAWI,MAAf,EAAuB;MACnB,KAAKJ,KAAL,CAAWI,MAAX,CAAkB,KAAKA,MAAvB;IACH;;IACD,IAAI,KAAKJ,KAAL,CAAWK,OAAf,EAAwB;MACpB,KAAKL,KAAL,CAAWK,OAAX,CAAmB,KAAKA,OAAxB;IACH;;IACD,KAAKC,QAAL;EACH,CAnCD;;EAoCAzB,CAAC,CAACM,SAAF,CAAYoB,YAAZ,GAA2B,UAAU1B,CAAV,EAAaS,CAAb,EAAgBjB,CAAhB,EAAmBmC,CAAnB,EAAsB;IAC7C,IAAIC,CAAC,GAAG,IAAR;IACA,KAAKC,YAAL,GAAoBpB,CAApB;IACA,KAAKqB,aAAL,GAAqBtC,CAArB;IACA,KAAKuC,aAAL,GAAqBJ,CAArB;;IACA,IAAI,KAAKK,SAAT,EAAoB;MAChB,KAAK7B,KAAL,GAAaH,CAAb;;MACA,IAAI,KAAKmB,KAAT,EAAgB;QACZ,IAAI,KAAKD,QAAT,EAAmB;UACf,KAAKe,SAAL,GAAiB,CAAC,CAAlB;;UACA,IAAI,KAAKd,KAAL,CAAWe,IAAf,EAAqB;YACjB,IAAIvC,CAAC,GAAG,KAAKwB,KAAL,CAAWe,IAAX,EAAR;YACAvC,CAAC,IAAIA,CAAC,CAACwC,IAAP,GACMxC,CAAC,CACIwC,IADL,CACU,YAAY;cACdC,OAAO,CAACC,GAAR,CAAY,uBAAZ;;cACA,IAAIT,CAAC,CAACC,YAAN,EAAoB;gBAChBD,CAAC,CAACC,YAAF;cACH;;cACDD,CAAC,CAACC,YAAF,GAAiB,IAAjB;YACH,CAPL,WAQW,UAAUpB,CAAV,EAAa;cAChB2B,OAAO,CAACE,IAAR,CAAa,sBAAb,EAAqC7B,CAArC;cACA2B,OAAO,CAACE,IAAR,CAAa,sCAAb;cACAvC,CAAC,CAACO,SAAF,CAAYiC,SAAZ,CAAsBC,IAAtB,CAA2BZ,CAA3B;cACAA,CAAC,CAACzB,KAAF,GAAUH,CAAV;cACA4B,CAAC,CAACa,UAAF,CAAa,CAAC,CAAd;YACH,CAdL,CADN,IAgBOL,OAAO,CAACE,IAAR,CAAa,sCAAb,GACA,KAAKnC,KAAL,GAAaH,CADb,EAED,KAAKyC,UAAL,CAAgB,CAAC,CAAjB,CAlBN;UAmBH,CArBD,MAqBO;YACHL,OAAO,CAACE,IAAR,CAAa,SAAb;UACH;QACJ,CA1BD,MA0BO;UACHF,OAAO,CAACE,IAAR,CAAa,uCAAb;UACA,KAAKnC,KAAL,GAAaH,CAAb;UACA,KAAKyC,UAAL,CAAgB,CAAC,CAAjB;QACH;MACJ,CAhCD,MAgCO;QACHL,OAAO,CAACE,IAAR,CAAa,uCAAb;QACA,KAAKnC,KAAL,GAAaH,CAAb;QACA,KAAKyC,UAAL,CAAgB,CAAC,CAAjB;MACH;IACJ,CAvCD,MAuCO;MACHL,OAAO,CAACE,IAAR,CAAa,KAAKzB,QAAlB,EAA4B,WAA5B;IACH;EACJ,CA/CD;;EAgDAb,CAAC,CAACM,SAAF,CAAYmC,UAAZ,GAAyB,UAAU1C,CAAV,EAAa;IAClC,IAAIC,CAAC,GAAG,IAAR;IACA,KAAKuC,SAAL,CAAexC,CAAf;IACA,KAAK2C,UAAL,GAAkB3C,CAAlB;IACA4C,UAAU,CAAC,YAAY;MACnB3C,CAAC,CAACO,MAAF;IACH,CAFS,EAEP,GAFO,CAAV;EAGH,CAPD;;EAQAP,CAAC,CAACM,SAAF,CAAYsC,WAAZ,GAA0B,UAAU7C,CAAV,EAAa;IACnC,KAAKiC,SAAL,GAAiB,CAACjC,CAAlB;;IACA,IAAIA,CAAJ,EAAO;MACH,KAAK8C,MAAL,CAAY,CAAC,CAAb;IACH;EACJ,CALD;;EAMA7C,CAAC,CAACM,SAAF,CAAYuC,MAAZ,GAAqB,UAAU9C,CAAV,EAAa;IAC9BA,CAAC,GAAG,KAAKwC,SAAL,EAAH,GAAsB,KAAKO,OAAL,IAAgB,KAAK3B,KAAL,CAAW4B,IAAX,EAAvC;EACH,CAFD;;EAGA/C,CAAC,CAACM,SAAF,CAAYiC,SAAZ,GAAwB,UAAUvC,CAAV,EAAa;IACjC,IAAI,KAAK,CAAL,KAAWA,CAAf,EAAkB;MACdA,CAAC,GAAG,CAAC,CAAL;IACH;;IACDD,CAAC,CAACO,SAAF,CAAYiC,SAAZ,CAAsBC,IAAtB,CAA2B,IAA3B,EAAiCxC,CAAjC;;IACA,IAAI,KAAKmB,KAAT,EAAgB;MACZ,IAAI,KAAKA,KAAL,CAAW6B,OAAf,EAAwB;QACpB,KAAK7B,KAAL,CAAW6B,OAAX,CAAmB,KAAK3B,MAAxB;MACH;;MACD,IAAI,KAAKF,KAAL,CAAW8B,QAAf,EAAyB;QACrB,KAAK9B,KAAL,CAAW8B,QAAX,CAAoB,KAAK3B,OAAzB;MACH;;MACD,IAAI,KAAKH,KAAL,CAAW+B,OAAf,EAAwB;QACpB,KAAK/B,KAAL,CAAW6B,OAAX,CAAmB,KAAKzB,MAAxB;MACH;;MACD,IAAI,KAAKJ,KAAL,CAAWgC,QAAf,EAAyB;QACrB,KAAKhC,KAAL,CAAWgC,QAAX,CAAoB,KAAK3B,OAAzB;MACH;;MACD,IAAI,KAAKL,KAAL,CAAWiC,OAAf,EAAwB;QACpB,KAAKjC,KAAL,CAAWiC,OAAX;MACH;;MACD,KAAKjC,KAAL,GAAa,IAAb;IACH;EACJ,CAvBD;;EAwBAnB,CAAC,CAACM,SAAF,CAAYmB,QAAZ,GAAuB,YAAY;IAC/B,IAAI,KAAKiB,UAAT,EAAqB;MACjB,KAAKA,UAAL,GAAkB,CAAC,CAAnB;MACA,KAAKhB,YAAL,CAAkB,KAAKvB,KAAvB,EAA8B,KAAK0B,YAAnC,EAAiD,KAAKC,aAAtD,EAAqE,KAAKC,aAA1E;IACH;EACJ,CALD;;EAMA/B,CAAC,CAACM,SAAF,CAAY+C,QAAZ,GAAuB,YAAY;IAC/BtD,CAAC,CAACO,SAAF,CAAY+C,QAAZ,CAAqBb,IAArB,CAA0B,IAA1B;EACH,CAFD;;EAGAxC,CAAC,CAACM,SAAF,CAAYgD,SAAZ,GAAwB,UAAUtD,CAAV,EAAa;IACjCD,CAAC,CAACO,SAAF,CAAYgD,SAAZ,CAAsBd,IAAtB,CAA2B,IAA3B,EAAiCxC,CAAjC;IACA,KAAK8C,OAAL,GAAe,CAAC,CAAhB;;IACA,IAAI,KAAKf,aAAT,EAAwB;MACpB,KAAKA,aAAL;IACH;;IACD,KAAKA,aAAL,GAAqB,IAArB;IACA,KAAKQ,SAAL;EACH,CARD;;EASAvC,CAAC,CAACM,SAAF,CAAYiD,SAAZ,GAAwB,YAAY;IAChCxD,CAAC,CAACO,SAAF,CAAYiD,SAAZ,CAAsBf,IAAtB,CAA2B,IAA3B;IACA,KAAKM,OAAL,GAAe,CAAC,CAAhB;;IACA,IAAI,KAAKhB,aAAT,EAAwB;MACpB,KAAKA,aAAL;IACH;;IACD,KAAKA,aAAL,GAAqB,IAArB;IACA,KAAKS,SAAL;;IACA,IAAI,KAAKnC,aAAT,EAAwB;MACpB,KAAKqC,UAAL,CAAgB,CAAC,CAAjB;IACH;EACJ,CAXD;;EAYAzC,CAAC,CAACM,SAAF,CAAYkD,QAAZ,GAAuB,YAAY;IAC/BzD,CAAC,CAACO,SAAF,CAAYkD,QAAZ,CAAqBhB,IAArB,CAA0B,IAA1B;IACA,KAAKM,OAAL,GAAe,CAAC,CAAhB;IACA,KAAKW,OAAL,GAAe,CAAC,CAAhB;;IACA,IAAI,KAAKrD,aAAT,EAAwB;MACpB,KAAKqC,UAAL,CAAgB,CAAC,CAAjB;IACH;EACJ,CAPD;;EAQA,OAAOzC,CAAP;AACH,CA5KO,CA4KLP,OAAO,CAACiE,MA5KH,CAAR;;AA6KAC,OAAO,WAAP,GAAkB7D,CAAlB","sourceRoot":"/","sourcesContent":["var o;\r\nvar $baseAd = require(\"./BaseAd\");\r\nvar r = window.qg;\r\nvar a = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.style = null;\r\n        e.isOpenPreLoad = !1;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.loadAd = function () {\r\n        var t;\r\n        var e = r.getSystemInfoSync();\r\n        var i = (e.windowWidth, e.windowHeight);\r\n        t =\r\n            this.style && !this.style.isBanner\r\n                ? {\r\n                      adUnitId: this.adUnitId,\r\n                      style: {\r\n                          left: this.style.left || 0,\r\n                          top: this.style.top || 0.4 * i\r\n                      }\r\n                  }\r\n                : {\r\n                      adUnitId: this.adUnitId,\r\n                      style: {\r\n                          left: this.style.left || 0,\r\n                          top: this.style.top || Math.round(i)\r\n                      }\r\n                  };\r\n        this.isLoaded = !0;\r\n        this.adIns = r.createCustomAd(t);\r\n        if (this.adIns.onLoad) {\r\n            this.adIns.onLoad(this.onLoad);\r\n        }\r\n        if (this.adIns.onClose) {\r\n            this.adIns.onClose(this.onClose);\r\n        }\r\n        if (this.adIns.onHide) {\r\n            this.adIns.onHide(this.onHide);\r\n        }\r\n        if (this.adIns.onError) {\r\n            this.adIns.onError(this.onError);\r\n        }\r\n        this.autoShow();\r\n    };\r\n    e.prototype.showCustomAd = function (e, i, o, n) {\r\n        var s = this;\r\n        this.showCallback = i;\r\n        this.closeCallback = o;\r\n        this.errorCallback = n;\r\n        if (this.isCanShow) {\r\n            this.style = e;\r\n            if (this.adIns) {\r\n                if (this.isLoaded) {\r\n                    this.isConsume = !0;\r\n                    if (this.adIns.show) {\r\n                        var r = this.adIns.show();\r\n                        r && r.then\r\n                            ? r\r\n                                  .then(function () {\r\n                                      console.log(\"customAd show success\");\r\n                                      if (s.showCallback) {\r\n                                          s.showCallback();\r\n                                      }\r\n                                      s.showCallback = null;\r\n                                  })\r\n                                  .catch(function (i) {\r\n                                      console.warn(\"customAd show error:\", i);\r\n                                      console.warn(\"showCustomAd, customAd显示异常,执行重新创建并显示\");\r\n                                      t.prototype.destroyAd.call(s);\r\n                                      s.style = e;\r\n                                      s.reCreateAd(!0);\r\n                                  })\r\n                            : (console.warn(\"showCustomAd, customAd显示异常,执行重新创建并显示\"),\r\n                              (this.style = e),\r\n                              this.reCreateAd(!0));\r\n                    } else {\r\n                        console.warn(\"找不到show\");\r\n                    }\r\n                } else {\r\n                    console.warn(\"showCustomAd, customAd未加载完毕,执行重新创建并显示\");\r\n                    this.style = e;\r\n                    this.reCreateAd(!0);\r\n                }\r\n            } else {\r\n                console.warn(\"showCustomAd, customAd对象未创建,执行自动创建并显示\");\r\n                this.style = e;\r\n                this.reCreateAd(!0);\r\n            }\r\n        } else {\r\n            console.warn(this.adUnitId, \":当前广告禁止显示\");\r\n        }\r\n    };\r\n    e.prototype.reCreateAd = function (t) {\r\n        var e = this;\r\n        this.destroyAd(t);\r\n        this.isAutoShow = t;\r\n        setTimeout(function () {\r\n            e.loadAd();\r\n        }, 100);\r\n    };\r\n    e.prototype.forbidderAd = function (t) {\r\n        this.isCanShow = !t;\r\n        if (t) {\r\n            this.hideAd(!0);\r\n        }\r\n    };\r\n    e.prototype.hideAd = function (t) {\r\n        t ? this.destroyAd() : this.showing && this.adIns.hide();\r\n    };\r\n    e.prototype.destroyAd = function (e) {\r\n        if (void 0 === e) {\r\n            e = !1;\r\n        }\r\n        t.prototype.destroyAd.call(this, e);\r\n        if (this.adIns) {\r\n            if (this.adIns.offLoad) {\r\n                this.adIns.offLoad(this.onLoad);\r\n            }\r\n            if (this.adIns.offClose) {\r\n                this.adIns.offClose(this.onClose);\r\n            }\r\n            if (this.adIns.offHide) {\r\n                this.adIns.offLoad(this.onHide);\r\n            }\r\n            if (this.adIns.offError) {\r\n                this.adIns.offError(this.onError);\r\n            }\r\n            if (this.adIns.destroy) {\r\n                this.adIns.destroy();\r\n            }\r\n            this.adIns = null;\r\n        }\r\n    };\r\n    e.prototype.autoShow = function () {\r\n        if (this.isAutoShow) {\r\n            this.isAutoShow = !1;\r\n            this.showCustomAd(this.style, this.showCallback, this.closeCallback, this.errorCallback);\r\n        }\r\n    };\r\n    e.prototype.onAdLoad = function () {\r\n        t.prototype.onAdLoad.call(this);\r\n    };\r\n    e.prototype.onAdError = function (e) {\r\n        t.prototype.onAdError.call(this, e);\r\n        this.showing = !1;\r\n        if (this.errorCallback) {\r\n            this.errorCallback();\r\n        }\r\n        this.errorCallback = null;\r\n        this.destroyAd();\r\n    };\r\n    e.prototype.onAdClose = function () {\r\n        t.prototype.onAdClose.call(this);\r\n        this.showing = !1;\r\n        if (this.closeCallback) {\r\n            this.closeCallback();\r\n        }\r\n        this.closeCallback = null;\r\n        this.destroyAd();\r\n        if (this.isOpenPreLoad) {\r\n            this.reCreateAd(!1);\r\n        }\r\n    };\r\n    e.prototype.onAdHide = function () {\r\n        t.prototype.onAdHide.call(this);\r\n        this.showing = !1;\r\n        this.hideing = !1;\r\n        if (this.isOpenPreLoad) {\r\n            this.reCreateAd(!1);\r\n        }\r\n    };\r\n    return e;\r\n})($baseAd.BaseAd);\r\nexports.default = a;\r\n"]}