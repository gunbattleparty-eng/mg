
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/BattleTipView.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '5039bjWPnhJLIBzFWl4Q0MH', 'BattleTipView');
// game_script/scripts/BattleTipView.js

"use strict";

var o;

var $assetsLoader = require("./AssetsLoader");

var $assetsMap = require("./AssetsMap");

var $resUtil = require("./ResUtil");

var $popupView = require("./PopupView");

var $configContext = require("./ConfigContext");

var d = cc._decorator;
var p = d.ccclass;
var f = d.property;

var h = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.enemyLayer = null;
    e.rewardLayer = null;
    e.headSp = null;
    e.nameLable = null;
    e.descLable = null;
    e.btnCloseTip = null;
    e.levelInfoConfig = null;
    return e;
  }

  __extends(e, t);

  e.prototype.onResetView = function () {
    var t = this;
    var e = this.uiParam.param.level;
    this.levelInfoConfig = $configContext["default"].instance.getConfigByLevel(e);

    var i = function i(e) {
      var i = o.levelInfoConfig.Monsterspool[e];
      var n = o.enemyLayer.children[e].children[0].getComponent(cc.Sprite);
      $assetsLoader["default"].instance.loadRes($assetsMap.BundleNames.Public_Res, ["/enemy_icon/gw_" + i], cc.SpriteFrame, null, function (e, i) {
        var o = i[0];

        if (o && cc.isValid(n)) {
          n.spriteFrame = $resUtil.ResUtil.assignWith(o, t.node);
        }
      });
    };

    var o = this;

    for (var n = 0; n < this.levelInfoConfig.Monsterspool.length; n++) {
      i(n);
    }

    var s = function s(e) {
      var i = c.rewardLayer.children[e];
      var o = i.children[0].getComponent(cc.Sprite);
      i.active = !0;
      var n = c.levelInfoConfig.rewardtype[e];
      1 === n ? $assetsLoader["default"].instance.loadRes($assetsMap.BundleNames.Public, ["/textures/gem/jinbi"], cc.SpriteFrame, null, function (e, n) {
        var s = n[0];

        if (s && cc.isValid(i)) {
          o.spriteFrame = $resUtil.ResUtil.assignWith(s, t.node);
        }
      }) : 2 === n ? $assetsLoader["default"].instance.loadRes($assetsMap.BundleNames.Public, ["/textures/gem/exp"], cc.SpriteFrame, null, function (e, n) {
        var s = n[0];

        if (s && cc.isValid(i)) {
          o.spriteFrame = $resUtil.ResUtil.assignWith(s, t.node);
        }
      }) : 3 === n ? $assetsLoader["default"].instance.loadRes($assetsMap.BundleNames.Public_Res, ["/equipment_icon/zb0"], cc.SpriteFrame, null, function (e, n) {
        var s = n[0];

        if (s && cc.isValid(i)) {
          o.spriteFrame = $resUtil.ResUtil.assignWith(s, t.node);
        }
      }) : 4 === n ? $assetsLoader["default"].instance.loadRes($assetsMap.BundleNames.Public_Res, ["/skill_book/jn0"], cc.SpriteFrame, null, function (e, n) {
        var s = n[0];

        if (s && cc.isValid(i)) {
          o.spriteFrame = $resUtil.ResUtil.assignWith(s, t.node);
        }
      }) : 5 === n && $assetsLoader["default"].instance.loadRes($assetsMap.BundleNames.Public, ["/textures/gem/wenhao"], cc.SpriteFrame, null, function (e, n) {
        var s = n[0];

        if (s && cc.isValid(i)) {
          o.getComponent(cc.Sprite).spriteFrame = $resUtil.ResUtil.assignWith(s, t.node);
        }
      });
    };

    var c = this;

    for (n = 0; n < this.levelInfoConfig.rewardtype.length; n++) {
      s(n);
    }
  };

  e.prototype.addEvent = function () {
    for (var t = 0; t < this.levelInfoConfig.Monsterspool.length; t++) {
      this.enemyLayer.children[t].on(cc.Node.EventType.TOUCH_START, this.touchItem, this);
    }

    this.btnCloseTip.on("click", this.closeTip, this);
  };

  e.prototype.removeEvent = function () {
    for (var t = 0; t < this.levelInfoConfig.Monsterspool.length; t++) {
      this.enemyLayer.children[t].on(cc.Node.EventType.TOUCH_START, this.touchItem, this);
    }

    this.btnCloseTip.off("click", this.closeTip, this);
  };

  e.prototype.touchItem = function (t) {
    var e = this;
    var i = this.enemyLayer.children.indexOf(t.target);
    var o = this.levelInfoConfig.Monsterspool[i];
    var n = $configContext["default"].instance.enemyConfigs.find(function (t) {
      return t.id === o;
    });
    $assetsLoader["default"].instance.loadRes($assetsMap.BundleNames.Public_Res, ["/enemy_icon/gw_" + o], cc.SpriteFrame, null, function (t, i) {
      var o = i[0];

      if (o && cc.isValid(e.headSp)) {
        e.headSp.spriteFrame = $resUtil.ResUtil.assignWith(o, e.node);
      }
    });
    this.descLable.string = n.describe;
    this.nameLable.string = n.name;
    this.descLable.node.parent.active = !0;
  };

  e.prototype.closeTip = function () {
    this.descLable.node.parent.active = !1;
  };

  __decorate([f(cc.Node)], e.prototype, "enemyLayer", void 0);

  __decorate([f(cc.Node)], e.prototype, "rewardLayer", void 0);

  __decorate([f(cc.Sprite)], e.prototype, "headSp", void 0);

  __decorate([f(cc.Label)], e.prototype, "nameLable", void 0);

  __decorate([f(cc.Label)], e.prototype, "descLable", void 0);

  __decorate([f(cc.Node)], e.prototype, "btnCloseTip", void 0);

  return __decorate([p], e);
}($popupView.PopupView);

exports["default"] = h;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXEJhdHRsZVRpcFZpZXcuanMiXSwibmFtZXMiOlsibyIsIiRhc3NldHNMb2FkZXIiLCJyZXF1aXJlIiwiJGFzc2V0c01hcCIsIiRyZXNVdGlsIiwiJHBvcHVwVmlldyIsIiRjb25maWdDb250ZXh0IiwiZCIsImNjIiwiX2RlY29yYXRvciIsInAiLCJjY2NsYXNzIiwiZiIsInByb3BlcnR5IiwiaCIsInQiLCJlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJlbmVteUxheWVyIiwicmV3YXJkTGF5ZXIiLCJoZWFkU3AiLCJuYW1lTGFibGUiLCJkZXNjTGFibGUiLCJidG5DbG9zZVRpcCIsImxldmVsSW5mb0NvbmZpZyIsIl9fZXh0ZW5kcyIsInByb3RvdHlwZSIsIm9uUmVzZXRWaWV3IiwidWlQYXJhbSIsInBhcmFtIiwibGV2ZWwiLCJpbnN0YW5jZSIsImdldENvbmZpZ0J5TGV2ZWwiLCJpIiwiTW9uc3RlcnNwb29sIiwibiIsImNoaWxkcmVuIiwiZ2V0Q29tcG9uZW50IiwiU3ByaXRlIiwibG9hZFJlcyIsIkJ1bmRsZU5hbWVzIiwiUHVibGljX1JlcyIsIlNwcml0ZUZyYW1lIiwiaXNWYWxpZCIsInNwcml0ZUZyYW1lIiwiUmVzVXRpbCIsImFzc2lnbldpdGgiLCJub2RlIiwibGVuZ3RoIiwicyIsImMiLCJhY3RpdmUiLCJyZXdhcmR0eXBlIiwiUHVibGljIiwiYWRkRXZlbnQiLCJvbiIsIk5vZGUiLCJFdmVudFR5cGUiLCJUT1VDSF9TVEFSVCIsInRvdWNoSXRlbSIsImNsb3NlVGlwIiwicmVtb3ZlRXZlbnQiLCJvZmYiLCJpbmRleE9mIiwidGFyZ2V0IiwiZW5lbXlDb25maWdzIiwiZmluZCIsImlkIiwic3RyaW5nIiwiZGVzY3JpYmUiLCJuYW1lIiwicGFyZW50IiwiX19kZWNvcmF0ZSIsIkxhYmVsIiwiUG9wdXBWaWV3IiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJ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QUFOLENBQWpCO0FBQ0gsQ0E5Sk8sQ0E4SkxYLFVBQVUsQ0FBQ3NFLFNBOUpOLENBQVI7O0FBK0pBQyxPQUFPLFdBQVAsR0FBa0I5RCxDQUFsQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIG87XHJcbnZhciAkYXNzZXRzTG9hZGVyID0gcmVxdWlyZShcIi4vQXNzZXRzTG9hZGVyXCIpO1xyXG52YXIgJGFzc2V0c01hcCA9IHJlcXVpcmUoXCIuL0Fzc2V0c01hcFwiKTtcclxudmFyICRyZXNVdGlsID0gcmVxdWlyZShcIi4vUmVzVXRpbFwiKTtcclxudmFyICRwb3B1cFZpZXcgPSByZXF1aXJlKFwiLi9Qb3B1cFZpZXdcIik7XHJcbnZhciAkY29uZmlnQ29udGV4dCA9IHJlcXVpcmUoXCIuL0NvbmZpZ0NvbnRleHRcIik7XHJcbnZhciBkID0gY2MuX2RlY29yYXRvcjtcclxudmFyIHAgPSBkLmNjY2xhc3M7XHJcbnZhciBmID0gZC5wcm9wZXJ0eTtcclxudmFyIGggPSAoZnVuY3Rpb24gKHQpIHtcclxuICAgIGZ1bmN0aW9uIGUoKSB7XHJcbiAgICAgICAgdmFyIGUgPSAobnVsbCAhPT0gdCAmJiB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIHx8IHRoaXM7XHJcbiAgICAgICAgZS5lbmVteUxheWVyID0gbnVsbDtcclxuICAgICAgICBlLnJld2FyZExheWVyID0gbnVsbDtcclxuICAgICAgICBlLmhlYWRTcCA9IG51bGw7XHJcbiAgICAgICAgZS5uYW1lTGFibGUgPSBudWxsO1xyXG4gICAgICAgIGUuZGVzY0xhYmxlID0gbnVsbDtcclxuICAgICAgICBlLmJ0bkNsb3NlVGlwID0gbnVsbDtcclxuICAgICAgICBlLmxldmVsSW5mb0NvbmZpZyA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIGU7XHJcbiAgICB9XHJcbiAgICBfX2V4dGVuZHMoZSwgdCk7XHJcbiAgICBlLnByb3RvdHlwZS5vblJlc2V0VmlldyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdCA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGUgPSB0aGlzLnVpUGFyYW0ucGFyYW0ubGV2ZWw7XHJcbiAgICAgICAgdGhpcy5sZXZlbEluZm9Db25maWcgPSAkY29uZmlnQ29udGV4dC5kZWZhdWx0Lmluc3RhbmNlLmdldENvbmZpZ0J5TGV2ZWwoZSk7XHJcbiAgICAgICAgdmFyIGkgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgaSA9IG8ubGV2ZWxJbmZvQ29uZmlnLk1vbnN0ZXJzcG9vbFtlXTtcclxuICAgICAgICAgICAgdmFyIG4gPSBvLmVuZW15TGF5ZXIuY2hpbGRyZW5bZV0uY2hpbGRyZW5bMF0uZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSk7XHJcbiAgICAgICAgICAgICRhc3NldHNMb2FkZXIuZGVmYXVsdC5pbnN0YW5jZS5sb2FkUmVzKFxyXG4gICAgICAgICAgICAgICAgJGFzc2V0c01hcC5CdW5kbGVOYW1lcy5QdWJsaWNfUmVzLFxyXG4gICAgICAgICAgICAgICAgW1wiL2VuZW15X2ljb24vZ3dfXCIgKyBpXSxcclxuICAgICAgICAgICAgICAgIGNjLlNwcml0ZUZyYW1lLFxyXG4gICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlLCBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvICYmIGNjLmlzVmFsaWQobikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbi5zcHJpdGVGcmFtZSA9ICRyZXNVdGlsLlJlc1V0aWwuYXNzaWduV2l0aChvLCB0Lm5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBvID0gdGhpcztcclxuICAgICAgICBmb3IgKHZhciBuID0gMDsgbiA8IHRoaXMubGV2ZWxJbmZvQ29uZmlnLk1vbnN0ZXJzcG9vbC5sZW5ndGg7IG4rKykge1xyXG4gICAgICAgICAgICBpKG4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcyA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciBpID0gYy5yZXdhcmRMYXllci5jaGlsZHJlbltlXTtcclxuICAgICAgICAgICAgdmFyIG8gPSBpLmNoaWxkcmVuWzBdLmdldENvbXBvbmVudChjYy5TcHJpdGUpO1xyXG4gICAgICAgICAgICBpLmFjdGl2ZSA9ICEwO1xyXG4gICAgICAgICAgICB2YXIgbiA9IGMubGV2ZWxJbmZvQ29uZmlnLnJld2FyZHR5cGVbZV07XHJcbiAgICAgICAgICAgIDEgPT09IG5cclxuICAgICAgICAgICAgICAgID8gJGFzc2V0c0xvYWRlci5kZWZhdWx0Lmluc3RhbmNlLmxvYWRSZXMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAkYXNzZXRzTWFwLkJ1bmRsZU5hbWVzLlB1YmxpYyxcclxuICAgICAgICAgICAgICAgICAgICAgIFtcIi90ZXh0dXJlcy9nZW0vamluYmlcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICBjYy5TcHJpdGVGcmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSwgbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gblswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocyAmJiBjYy5pc1ZhbGlkKGkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uc3ByaXRlRnJhbWUgPSAkcmVzVXRpbC5SZXNVdGlsLmFzc2lnbldpdGgocywgdC5ub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIDogMiA9PT0gblxyXG4gICAgICAgICAgICAgICAgPyAkYXNzZXRzTG9hZGVyLmRlZmF1bHQuaW5zdGFuY2UubG9hZFJlcyhcclxuICAgICAgICAgICAgICAgICAgICAgICRhc3NldHNNYXAuQnVuZGxlTmFtZXMuUHVibGljLFxyXG4gICAgICAgICAgICAgICAgICAgICAgW1wiL3RleHR1cmVzL2dlbS9leHBcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICBjYy5TcHJpdGVGcmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSwgbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gblswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocyAmJiBjYy5pc1ZhbGlkKGkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uc3ByaXRlRnJhbWUgPSAkcmVzVXRpbC5SZXNVdGlsLmFzc2lnbldpdGgocywgdC5ub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIDogMyA9PT0gblxyXG4gICAgICAgICAgICAgICAgPyAkYXNzZXRzTG9hZGVyLmRlZmF1bHQuaW5zdGFuY2UubG9hZFJlcyhcclxuICAgICAgICAgICAgICAgICAgICAgICRhc3NldHNNYXAuQnVuZGxlTmFtZXMuUHVibGljX1JlcyxcclxuICAgICAgICAgICAgICAgICAgICAgIFtcIi9lcXVpcG1lbnRfaWNvbi96YjBcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICBjYy5TcHJpdGVGcmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSwgbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gblswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocyAmJiBjYy5pc1ZhbGlkKGkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uc3ByaXRlRnJhbWUgPSAkcmVzVXRpbC5SZXNVdGlsLmFzc2lnbldpdGgocywgdC5ub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIDogNCA9PT0gblxyXG4gICAgICAgICAgICAgICAgPyAkYXNzZXRzTG9hZGVyLmRlZmF1bHQuaW5zdGFuY2UubG9hZFJlcyhcclxuICAgICAgICAgICAgICAgICAgICAgICRhc3NldHNNYXAuQnVuZGxlTmFtZXMuUHVibGljX1JlcyxcclxuICAgICAgICAgICAgICAgICAgICAgIFtcIi9za2lsbF9ib29rL2puMFwiXSxcclxuICAgICAgICAgICAgICAgICAgICAgIGNjLlNwcml0ZUZyYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlLCBuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBuWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzICYmIGNjLmlzVmFsaWQoaSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5zcHJpdGVGcmFtZSA9ICRyZXNVdGlsLlJlc1V0aWwuYXNzaWduV2l0aChzLCB0Lm5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgOiA1ID09PSBuICYmXHJcbiAgICAgICAgICAgICAgICAgICRhc3NldHNMb2FkZXIuZGVmYXVsdC5pbnN0YW5jZS5sb2FkUmVzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgJGFzc2V0c01hcC5CdW5kbGVOYW1lcy5QdWJsaWMsXHJcbiAgICAgICAgICAgICAgICAgICAgICBbXCIvdGV4dHVyZXMvZ2VtL3dlbmhhb1wiXSxcclxuICAgICAgICAgICAgICAgICAgICAgIGNjLlNwcml0ZUZyYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlLCBuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBuWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzICYmIGNjLmlzVmFsaWQoaSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9ICRyZXNVdGlsLlJlc1V0aWwuYXNzaWduV2l0aChzLCB0Lm5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBjID0gdGhpcztcclxuICAgICAgICBmb3IgKG4gPSAwOyBuIDwgdGhpcy5sZXZlbEluZm9Db25maWcucmV3YXJkdHlwZS5sZW5ndGg7IG4rKykge1xyXG4gICAgICAgICAgICBzKG4pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5hZGRFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IHRoaXMubGV2ZWxJbmZvQ29uZmlnLk1vbnN0ZXJzcG9vbC5sZW5ndGg7IHQrKykge1xyXG4gICAgICAgICAgICB0aGlzLmVuZW15TGF5ZXIuY2hpbGRyZW5bdF0ub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIHRoaXMudG91Y2hJdGVtLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5idG5DbG9zZVRpcC5vbihcImNsaWNrXCIsIHRoaXMuY2xvc2VUaXAsIHRoaXMpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLnJlbW92ZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgdGhpcy5sZXZlbEluZm9Db25maWcuTW9uc3RlcnNwb29sLmxlbmd0aDsgdCsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5lbXlMYXllci5jaGlsZHJlblt0XS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgdGhpcy50b3VjaEl0ZW0sIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmJ0bkNsb3NlVGlwLm9mZihcImNsaWNrXCIsIHRoaXMuY2xvc2VUaXAsIHRoaXMpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLnRvdWNoSXRlbSA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdmFyIGUgPSB0aGlzO1xyXG4gICAgICAgIHZhciBpID0gdGhpcy5lbmVteUxheWVyLmNoaWxkcmVuLmluZGV4T2YodC50YXJnZXQpO1xyXG4gICAgICAgIHZhciBvID0gdGhpcy5sZXZlbEluZm9Db25maWcuTW9uc3RlcnNwb29sW2ldO1xyXG4gICAgICAgIHZhciBuID0gJGNvbmZpZ0NvbnRleHQuZGVmYXVsdC5pbnN0YW5jZS5lbmVteUNvbmZpZ3MuZmluZChmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdC5pZCA9PT0gbztcclxuICAgICAgICB9KTtcclxuICAgICAgICAkYXNzZXRzTG9hZGVyLmRlZmF1bHQuaW5zdGFuY2UubG9hZFJlcyhcclxuICAgICAgICAgICAgJGFzc2V0c01hcC5CdW5kbGVOYW1lcy5QdWJsaWNfUmVzLFxyXG4gICAgICAgICAgICBbXCIvZW5lbXlfaWNvbi9nd19cIiArIG9dLFxyXG4gICAgICAgICAgICBjYy5TcHJpdGVGcmFtZSxcclxuICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKHQsIGkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvID0gaVswXTtcclxuICAgICAgICAgICAgICAgIGlmIChvICYmIGNjLmlzVmFsaWQoZS5oZWFkU3ApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5oZWFkU3Auc3ByaXRlRnJhbWUgPSAkcmVzVXRpbC5SZXNVdGlsLmFzc2lnbldpdGgobywgZS5ub2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5kZXNjTGFibGUuc3RyaW5nID0gbi5kZXNjcmliZTtcclxuICAgICAgICB0aGlzLm5hbWVMYWJsZS5zdHJpbmcgPSBuLm5hbWU7XHJcbiAgICAgICAgdGhpcy5kZXNjTGFibGUubm9kZS5wYXJlbnQuYWN0aXZlID0gITA7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuY2xvc2VUaXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5kZXNjTGFibGUubm9kZS5wYXJlbnQuYWN0aXZlID0gITE7XHJcbiAgICB9O1xyXG4gICAgX19kZWNvcmF0ZShbZihjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcImVuZW15TGF5ZXJcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW2YoY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJyZXdhcmRMYXllclwiLCB2b2lkIDApO1xyXG4gICAgX19kZWNvcmF0ZShbZihjYy5TcHJpdGUpXSwgZS5wcm90b3R5cGUsIFwiaGVhZFNwXCIsIHZvaWQgMCk7XHJcbiAgICBfX2RlY29yYXRlKFtmKGNjLkxhYmVsKV0sIGUucHJvdG90eXBlLCBcIm5hbWVMYWJsZVwiLCB2b2lkIDApO1xyXG4gICAgX19kZWNvcmF0ZShbZihjYy5MYWJlbCldLCBlLnByb3RvdHlwZSwgXCJkZXNjTGFibGVcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW2YoY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJidG5DbG9zZVRpcFwiLCB2b2lkIDApO1xyXG4gICAgcmV0dXJuIF9fZGVjb3JhdGUoW3BdLCBlKTtcclxufSkoJHBvcHVwVmlldy5Qb3B1cFZpZXcpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBoO1xyXG4iXX0=