{"version":3,"sources":["assets\\game_script\\scripts\\ShopResLIstItem.js"],"names":["o","$assetsLoader","require","$assetsMap","$resUtil","$eventManager","$popupManager","$platform","$remoteAudio","$seedUtil","$util","$aD","$adService","$localEventName","$roleContext","$shopContext","$skillContext","$userDataContext","$coinDiamondView","$startView","S","cc","_decorator","C","ccclass","I","property","P","t","e","apply","arguments","icon","titleLable","limitLabel","numLabel","btnBuy","coinLable","adLimitLable","config","buyType","__extends","prototype","start","on","clickBuy","init","instance","loadRes","BundleNames","Start","type","SpriteFrame","i","isValid","spriteFrame","ResUtil","assignWith","node","render","string","name","Ins","getShopResRecordById","id","buyCount","buy_num","active","updateMaterialState","getComponent","Button","interactable","coin_num","reward_num","parent","children","coin_type","video_count","playEffectMusic","opearDiamond","buy","send","RENDER_DOT","MenuType","Shop","showRewardedVideo","Platform","currPlatForm","PlatformEnum","TOU_TIAO","toutiao","report","addShopResRecordVideo","PopupManager","open","AssetsMap","PopUpBundles","prefabs","assetsList","CoinDiamondView","AstType","DIAMON","addShopResRecord","randomCount","randomFrom","splitNumber","length","console","log","n","s","opearEquipBook","push","ext","num","Role","r","l","getUseSkillIds","Math","min","randomArr","d","opearSkillBook","Skill","opearUpgradeStone","opearCoin","ALL","opearPower","p","ins","getRobotSkinInfo","shard","setRobotSkinInfo","opearAdCoin","AdCoinView","closeCallback","RewardView","infos","__decorate","Sprite","Label","Node","Component","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $popupManager = require(\"./PopupManager\");\r\nvar $platform = require(\"./Platform\");\r\nvar $remoteAudio = require(\"./RemoteAudio\");\r\nvar $seedUtil = require(\"./SeedUtil\");\r\nvar $util = require(\"./Util\");\r\nvar $aD = require(\"./AD\");\r\nvar $adService = require(\"./AdService\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $roleContext = require(\"./RoleContext\");\r\nvar $shopContext = require(\"./ShopContext\");\r\nvar $skillContext = require(\"./SkillContext\");\r\nvar $userDataContext = require(\"./UserDataContext\");\r\nvar $coinDiamondView = require(\"./CoinDiamondView\");\r\nvar $startView = require(\"./StartView\");\r\nvar S = cc._decorator;\r\nvar C = S.ccclass;\r\nvar I = S.property;\r\nvar P = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.icon = null;\r\n        e.titleLable = null;\r\n        e.limitLabel = null;\r\n        e.numLabel = null;\r\n        e.btnBuy = null;\r\n        e.coinLable = null;\r\n        e.adLimitLable = null;\r\n        e.config = null;\r\n        e.buyType = 0;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.start = function () {\r\n        this.btnBuy.on(\"click\", this.clickBuy, this);\r\n    };\r\n    e.prototype.init = function (t) {\r\n        var e = this;\r\n        this.config = t;\r\n        $assetsLoader.default.instance.loadRes(\r\n            $assetsMap.BundleNames.Start,\r\n            [\"/textures/shop/icon_\" + t.type],\r\n            cc.SpriteFrame,\r\n            null,\r\n            function (t, i) {\r\n                var o = i[0];\r\n                if (o && cc.isValid(e.icon)) {\r\n                    e.icon.spriteFrame = $resUtil.ResUtil.assignWith(o, e.node);\r\n                }\r\n            }\r\n        );\r\n        this.render();\r\n    };\r\n    e.prototype.render = function () {\r\n        this.titleLable.string = this.config.name;\r\n        var t = $shopContext.default.Ins.getShopResRecordById(this.config.id);\r\n        this.limitLabel.string = \"每日限购\" + t.buyCount + \"/\" + this.config.buy_num;\r\n        this.limitLabel.node.active = -1 !== this.config.buy_num;\r\n        $util.default.updateMaterialState(this.btnBuy, t.buyCount >= this.config.buy_num);\r\n        this.btnBuy.getComponent(cc.Button).interactable = t.buyCount < this.config.buy_num;\r\n        this.coinLable.string = \"\" + this.config.coin_num;\r\n        this.numLabel.string = \"X\" + this.config.reward_num;\r\n        this.coinLable.node.parent.children[0].active = !0;\r\n        this.coinLable.node.parent.children[1].active = !1;\r\n        this.adLimitLable.node.active = !1;\r\n        this.buyType = 0;\r\n        this.btnBuy.children[1].active = !1;\r\n        2 === this.config.coin_type\r\n            ? ((this.coinLable.node.parent.children[0].active = !1),\r\n              (this.coinLable.string = \"免费\"),\r\n              (this.btnBuy.children[1].active = !0),\r\n              (this.buyType = 2),\r\n              t.buyCount > 0 &&\r\n                  ((this.coinLable.string = \"免费\"),\r\n                  (this.btnBuy.children[1].active = !1),\r\n                  (this.buyType = 1),\r\n                  (this.coinLable.node.parent.children[1].active = !0)))\r\n            : 3 === this.config.coin_type\r\n            ? ((this.coinLable.string = \"免费\"),\r\n              (this.coinLable.node.parent.children[0].active = !1),\r\n              (this.coinLable.node.parent.children[1].active = !0),\r\n              (this.buyType = 1),\r\n              this.config.coin_num > 1 &&\r\n                  ((this.adLimitLable.node.active = !0),\r\n                  (this.adLimitLable.string = \"(\" + t.video_count + \"/\" + this.config.coin_num + \")\")))\r\n            : 4 === this.config.coin_type &&\r\n              ((this.coinLable.node.parent.children[0].active = !1),\r\n              (this.coinLable.string = \"免费\"),\r\n              (this.buyType = 2));\r\n    };\r\n    e.prototype.clickBuy = function () {\r\n        var t = this;\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        var e = $shopContext.default.Ins.getShopResRecordById(this.config.id);\r\n        if (!(0 !== this.config.buy_num && e.buyCount >= this.config.buy_num)) {\r\n            0 !== this.buyType || $userDataContext.default.Ins.opearDiamond(-this.config.coin_num)\r\n                ? 1 !== this.buyType\r\n                    ? (this.buy(),\r\n                      $eventManager.default.send($localEventName.default.RENDER_DOT, $startView.MenuType.Shop))\r\n                    : $adService.default.Ins.showRewardedVideo(function () {\r\n                          if ($platform.Platform.currPlatForm === $platform.PlatformEnum.TOU_TIAO) {\r\n                              if (4 === t.config.type) {\r\n                                  $aD.default.toutiao.report(\"Free_Coins\");\r\n                              }\r\n                              if (7 === t.config.type) {\r\n                                  $aD.default.toutiao.report(\"Dog_Skin\");\r\n                              }\r\n                              8 === t.config.type\r\n                                  ? $aD.default.toutiao.report(\"plane_skin\")\r\n                                  : 9 === t.config.type && $aD.default.toutiao.report(\"adfree\");\r\n                          }\r\n                          if (3 === t.config.coin_type) {\r\n                              var e = $shopContext.default.Ins.getShopResRecordById(t.config.id);\r\n                              e.video_count++;\r\n                              e.video_count >= t.config.coin_num\r\n                                  ? ((e.video_count = 0), t.buy())\r\n                                  : ($shopContext.default.Ins.addShopResRecordVideo(e.id, e.video_count), t.render());\r\n                          } else {\r\n                              t.buy();\r\n                          }\r\n                      })\r\n                : $popupManager.PopupManager.instance.open(\r\n                      $assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.CoinDiamondView,\r\n                      {\r\n                          type: $coinDiamondView.AstType.DIAMON\r\n                      }\r\n                  );\r\n        }\r\n    };\r\n    e.prototype.buy = function () {\r\n        var t = this;\r\n        if (10 !== this.config.type) {\r\n            $shopContext.default.Ins.addShopResRecord(this.config.id);\r\n        }\r\n        var e = [];\r\n        if (1 === this.config.type) {\r\n            var i = $seedUtil.default.randomCount(1, 6, $seedUtil.default.randomFrom(1, 4));\r\n            var o = $seedUtil.default.splitNumber(this.config.reward_num, i.length);\r\n            console.log(i, o);\r\n            for (var n = 0; n < o.length; n++) {\r\n                var s = o[n];\r\n                $userDataContext.default.Ins.opearEquipBook(i[n], s);\r\n                e.push({\r\n                    type: 3,\r\n                    ext: i[n],\r\n                    num: s\r\n                });\r\n            }\r\n            $eventManager.default.send($localEventName.default.RENDER_DOT, $startView.MenuType.Role);\r\n        } else {\r\n            if (2 === this.config.type) {\r\n                var r = $seedUtil.default.randomFrom(1, 4);\r\n                var l = $skillContext.default.Ins.getUseSkillIds();\r\n                r = Math.min(l.length, r);\r\n                l = $seedUtil.default.randomArr(l, r);\r\n                var d = $seedUtil.default.splitNumber(this.config.reward_num, r);\r\n                for (n = 0; n < r; n++) {\r\n                    $userDataContext.default.Ins.opearSkillBook(l[n], d[n]);\r\n                    e.push({\r\n                        type: 4,\r\n                        ext: l[n],\r\n                        num: d[n]\r\n                    });\r\n                }\r\n                $eventManager.default.send($localEventName.default.RENDER_DOT, $startView.MenuType.Skill);\r\n            } else {\r\n                if (3 === this.config.type) {\r\n                    $userDataContext.default.Ins.opearUpgradeStone(this.config.reward_num);\r\n                    e.push({\r\n                        type: 7,\r\n                        num: this.config.reward_num\r\n                    });\r\n                    $eventManager.default.send($localEventName.default.RENDER_DOT, $startView.MenuType.Role);\r\n                } else {\r\n                    if (4 === this.config.type) {\r\n                        $userDataContext.default.Ins.opearCoin(this.config.reward_num);\r\n                        e.push({\r\n                            type: 1,\r\n                            num: this.config.reward_num\r\n                        });\r\n                        $eventManager.default.send($localEventName.default.RENDER_DOT, $startView.MenuType.ALL);\r\n                    } else {\r\n                        if (5 === this.config.type) {\r\n                            $userDataContext.default.Ins.opearPower(this.config.reward_num);\r\n                            e.push({\r\n                                type: 8,\r\n                                num: this.config.reward_num\r\n                            });\r\n                        } else {\r\n                            if (7 === this.config.type) {\r\n                                (p = $roleContext.default.ins.getRobotSkinInfo(2)).shard += 1;\r\n                                $roleContext.default.ins.setRobotSkinInfo(p);\r\n                                e.push({\r\n                                    type: 11,\r\n                                    num: this.config.reward_num,\r\n                                    ext: 2\r\n                                });\r\n                            } else {\r\n                                if (8 === this.config.type) {\r\n                                    var p;\r\n                                    (p = $roleContext.default.ins.getRobotSkinInfo(3)).shard += 1;\r\n                                    $roleContext.default.ins.setRobotSkinInfo(p);\r\n                                    e.push({\r\n                                        type: 11,\r\n                                        num: this.config.reward_num,\r\n                                        ext: 3\r\n                                    });\r\n                                } else {\r\n                                    if (9 === this.config.type) {\r\n                                        $userDataContext.default.Ins.opearAdCoin(this.config.reward_num);\r\n                                        e.push({\r\n                                            type: 12,\r\n                                            num: this.config.reward_num\r\n                                        });\r\n                                    } else {\r\n                                        if (10 === this.config.type) {\r\n                                            return void $popupManager.PopupManager.instance.open(\r\n                                                $assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.AdCoinView,\r\n                                                null,\r\n                                                {\r\n                                                    closeCallback: function () {\r\n                                                        t.render();\r\n                                                    }\r\n                                                }\r\n                                            );\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.RewardView, {\r\n            infos: e\r\n        });\r\n        this.render();\r\n    };\r\n    __decorate([I(cc.Sprite)], e.prototype, \"icon\", void 0);\r\n    __decorate([I(cc.Label)], e.prototype, \"titleLable\", void 0);\r\n    __decorate([I(cc.Label)], e.prototype, \"limitLabel\", void 0);\r\n    __decorate([I(cc.Label)], e.prototype, \"numLabel\", void 0);\r\n    __decorate([I(cc.Node)], e.prototype, \"btnBuy\", void 0);\r\n    __decorate([I(cc.Label)], e.prototype, \"coinLable\", void 0);\r\n    __decorate([I(cc.Label)], e.prototype, \"adLimitLable\", void 0);\r\n    return __decorate([C], e);\r\n})(cc.Component);\r\nexports.default = P;\r\n"]}