{"version":3,"sources":["assets\\game_script\\scripts\\Enemy_21.js"],"names":["o","$eventManager","require","$localEventName","$baseBullet","$baseEnemy","$enemyStatus","$healthBar","p","cc","_decorator","f","ccclass","h","property","m","t","e","apply","arguments","healthBar","addUnitHp","__extends","prototype","initEnemy","i","call","statusManager","specialityAtkAdd","set","BulletSpeciality","fire","config","value","ice","init","hp","hp_num","Math","ceil","initHp","sufferDebuff","type","EnemyDebuffType","BURN","FREEZE","ALL_ATK_ADD","sufferAtk","hasDebuff","FORBID_RECOVER","skillSpecialitys","includes","min","send","HURT_ANIM","getAnimPos","sufferAttack","isDie","render","__decorate","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar $baseEnemy = require(\"./BaseEnemy\");\r\nvar $enemyStatus = require(\"./EnemyStatus\");\r\nvar $healthBar = require(\"./HealthBar\");\r\nvar p = cc._decorator;\r\nvar f = p.ccclass;\r\nvar h = p.property;\r\nvar m = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.healthBar = null;\r\n        e.addUnitHp = 0;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.initEnemy = function (e, i, o) {\r\n        if (void 0 === o) {\r\n            o = 0;\r\n        }\r\n        t.prototype.initEnemy.call(this, e, i, o);\r\n        this.statusManager.specialityAtkAdd.set($baseBullet.BulletSpeciality.fire, this.config.value[0]);\r\n        this.statusManager.specialityAtkAdd.set($baseBullet.BulletSpeciality.ice, this.config.value[1]);\r\n        if (this.healthBar) {\r\n            this.healthBar.init(this.statusManager.hp, e.hp_num);\r\n        }\r\n        this.addUnitHp = Math.ceil(this.statusManager.initHp * this.config.value[2]);\r\n    };\r\n    e.prototype.sufferDebuff = function (e) {\r\n        if (\r\n            e.type !== $enemyStatus.EnemyDebuffType.BURN &&\r\n            e.type !== $enemyStatus.EnemyDebuffType.FREEZE &&\r\n            e.type !== $enemyStatus.EnemyDebuffType.ALL_ATK_ADD\r\n        ) {\r\n            t.prototype.sufferDebuff.call(this, e);\r\n        }\r\n    };\r\n    e.prototype.sufferAtk = function (e) {\r\n        return (\r\n            !!t.prototype.sufferAtk.call(this, e) ||\r\n            (!this.hasDebuff($enemyStatus.EnemyDebuffType.FORBID_RECOVER) &&\r\n                (e.skillSpecialitys.includes($baseBullet.BulletSpeciality.fire) &&\r\n                    ((this.statusManager.hp += this.addUnitHp),\r\n                    (this.statusManager.hp = Math.min(this.statusManager.hp, this.statusManager.initHp)),\r\n                    $eventManager.default.send(\r\n                        $localEventName.default.HURT_ANIM,\r\n                        this.getAnimPos(),\r\n                        this.addUnitHp,\r\n                        2,\r\n                        1\r\n                    )),\r\n                !1))\r\n        );\r\n    };\r\n    e.prototype.sufferAttack = function (e, i) {\r\n        if (this.statusManager.isDie) {\r\n            return !1;\r\n        }\r\n        var o = t.prototype.sufferAttack.call(this, e, i);\r\n        if (this.healthBar) {\r\n            this.healthBar.render(this.statusManager.hp);\r\n        }\r\n        return o;\r\n    };\r\n    __decorate([h($healthBar.default)], e.prototype, \"healthBar\", void 0);\r\n    return __decorate([f], e);\r\n})($baseEnemy.default);\r\nexports.default = m;\r\n"]}