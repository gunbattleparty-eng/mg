
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/PauseView.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '81cdegC9AdLNbt7TJYo9SZx', 'PauseView');
// game_script/scripts/PauseView.js

"use strict";

var o;

var $assetsLoader = require("./AssetsLoader");

var $assetsMap = require("./AssetsMap");

var $resUtil = require("./ResUtil");

var $list = require("./List");

var $popupManager = require("./PopupManager");

var $popupView = require("./PopupView");

var $configContext = require("./ConfigContext");

var $userDataContext = require("./UserDataContext");

var $gameContext = require("./GameContext");

var $skillHurtItem = require("./SkillHurtItem");

var y = cc._decorator;
var g = y.ccclass;
var _ = y.property;

var k = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.btnBack = null;
    e.list = null;
    e.rewardNode = null;
    e.skillIds = [];
    e.rewardInfos = [];
    return e;
  }

  __extends(e, t);

  e.prototype.onLoad = function () {
    var t = this;
    $gameContext["default"].ins.hurtRecord.forEach(function (e, i) {
      t.skillIds.push(i);
    });

    if (0 !== this.skillIds.length) {
      this.list.numItems = this.skillIds.length;
    }
  };

  e.prototype.onResetView = function () {
    this.rewardInfos = $gameContext["default"].ins.pauseReward();
    this.renderReward();
  };

  e.prototype.addEvent = function () {
    this.btnBack.on("click", this.clickBack, this);
  };

  e.prototype.removeEvent = function () {
    this.btnBack.off("click", this.clickBack, this);
  };

  e.prototype.clickBack = function () {
    this.uiCallback.closeCallback = null;
    t.prototype.onClickClose.call(this);
    $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.SettleView, {
      isSuccess: !1,
      isPause: !0
    });
  };

  e.prototype.renderItem = function (t, e) {
    var i = this.skillIds[e];
    var o = $gameContext["default"].ins.gameStartTime - $gameContext["default"].ins.skillInfo.chooseParentTime.get(i);
    var n = {
      icon: 1 === i ? "jn1_1" : $configContext["default"].instance.skillConfigsMap.get(i).icon,
      skillCount: $gameContext["default"].ins.skillInfo.getChooseParendCount(i),
      skillName: $configContext["default"].instance.basicSkillConfigs.find(function (t) {
        return t.skillmaster_id === i;
      }).name,
      skillHurt: $gameContext["default"].ins.hurtRecord.get(i),
      skillHurtSec: Math.floor($gameContext["default"].ins.hurtRecord.get(i) / o)
    };
    t.getComponent($skillHurtItem["default"]).render(n);
  };

  e.prototype.renderReward = function () {
    var t = this;
    this.rewardNode.children.forEach(function (t) {
      return t.active = !1;
    });

    var e = function e(_e) {
      var o = i.rewardNode.children[_e];
      o.active = !0;
      var n = i.rewardInfos[_e];

      if (1 === n.type) {
        $assetsLoader["default"].instance.loadRes($assetsMap.BundleNames.Public, ["/textures/gem/jinbi"], cc.SpriteFrame, null, function (e, i) {
          var s = i[0];

          if (s && cc.isValid(o)) {
            o.children[0].getComponent(cc.Sprite).spriteFrame = null;
            o.children[1].getComponent(cc.Sprite).spriteFrame = $resUtil.ResUtil.assignWith(s, t.node);
            o.children[2].getComponent(cc.Label).string = n.num.toString();
          }
        });
      } else {
        if (2 === n.type) {
          $assetsLoader["default"].instance.loadRes($assetsMap.BundleNames.Public, ["/textures/gem/exp"], cc.SpriteFrame, null, function (e, i) {
            var s = i[0];

            if (s && cc.isValid(o)) {
              o.children[0].getComponent(cc.Sprite).spriteFrame = null;
              o.children[1].getComponent(cc.Sprite).spriteFrame = $resUtil.ResUtil.assignWith(s, t.node);
              o.children[2].getComponent(cc.Label).string = n.num.toString();
            }
          });
        } else {
          if (3 === n.type) {
            $assetsLoader["default"].instance.loadRes($assetsMap.BundleNames.Public_Res, ["/equipment_icon/zb" + n.ext], cc.SpriteFrame, null, function (e, i) {
              var s = i[0];

              if (s && cc.isValid(o)) {
                o.children[0].getComponent(cc.Sprite).spriteFrame = null;
                o.children[1].getComponent(cc.Sprite).spriteFrame = $resUtil.ResUtil.assignWith(s, t.node);
                o.children[2].getComponent(cc.Label).string = n.num.toString();
              }
            });
            $userDataContext["default"].Ins.opearEquipBook(n.ext, n.num);
          } else {
            if (4 === n.type) {
              var s = "jn0";

              if (0 !== n.ext) {
                s = $configContext["default"].instance.skillConfigs.find(function (t) {
                  return t.id === n.ext;
                }).icon;
              }

              $assetsLoader["default"].instance.loadRes($assetsMap.BundleNames.Public_Res, ["/skill_book/" + s], cc.SpriteFrame, null, function (e, i) {
                var s = i[0];

                if (s && cc.isValid(o)) {
                  o.children[0].getComponent(cc.Sprite).spriteFrame = null;
                  o.children[1].getComponent(cc.Sprite).spriteFrame = $resUtil.ResUtil.assignWith(s, t.node);
                  o.children[2].getComponent(cc.Label).string = n.num.toString();
                }
              });
            } else {
              if (5 === n.type) {
                var c = ["/textures/gem/wenhao", "/textures/gem/k1"];

                if (0 !== n.ext) {
                  var u = $configContext["default"].instance.gemConfigs.find(function (t) {
                    return t.id === n.ext;
                  });
                  c = ["/textures/gem/g" + u.part + "_" + u.Grade, "/textures/gem/k" + u.Grade];
                }

                $assetsLoader["default"].instance.loadRes($assetsMap.BundleNames.Public, c, cc.SpriteFrame, null, function (e, i) {
                  var s = i[0];

                  if (s && cc.isValid(o)) {
                    o.children[0].getComponent(cc.Sprite).spriteFrame = $resUtil.ResUtil.assignWith(i[1], t.node);
                    o.children[1].getComponent(cc.Sprite).spriteFrame = $resUtil.ResUtil.assignWith(s, t.node);
                    o.children[2].getComponent(cc.Label).string = n.num.toString();
                  }
                });
              }
            }
          }
        }
      }
    };

    var i = this;

    for (var o = 0; o < this.rewardInfos.length; o++) {
      e(o);
    }
  };

  __decorate([_(cc.Node)], e.prototype, "btnBack", void 0);

  __decorate([_($list["default"])], e.prototype, "list", void 0);

  __decorate([_(cc.Node)], e.prototype, "rewardNode", void 0);

  return __decorate([g], e);
}($popupView.PopupView);

exports["default"] = k;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXFBhdXNlVmlldy5qcyJdLCJuYW1lcyI6WyJvIiwiJGFzc2V0c0xvYWRlciIsInJlcXVpcmUiLCIkYXNzZXRzTWFwIiwiJHJlc1V0aWwiLCIkbGlzdCIsIiRwb3B1cE1hbmFnZXIiLCIkcG9wdXBWaWV3IiwiJGNvbmZpZ0NvbnRleHQiLCIkdXNlckRhdGFDb250ZXh0IiwiJGdhbWVDb250ZXh0IiwiJHNraWxsSHVydEl0ZW0iLCJ5IiwiY2MiLCJfZGVjb3JhdG9yIiwiZyIsImNjY2xhc3MiLCJfIiwicHJvcGVydHkiLCJrIiwidCIsImUiLCJhcHBseSIsImFyZ3VtZW50cyIsImJ0bkJhY2siLCJsaXN0IiwicmV3YXJkTm9kZSIsInNraWxsSWRzIiwicmV3YXJkSW5mb3MiLCJfX2V4dGVuZHMiLCJwcm90b3R5cGUiLCJvbkxvYWQiLCJpbnMiLCJodXJ0UmVjb3JkIiwiZm9yRWFjaCIsImkiLCJwdXNoIiwibGVuZ3RoIiwibnVtSXRlbXMiLCJvblJlc2V0VmlldyIsInBhdXNlUmV3YXJkIiwicmVuZGVyUmV3YXJkIiwiYWRkRXZlbnQiLCJvbiIsImNsaWNrQmFjayIsInJlbW92ZUV2ZW50Iiwib2ZmIiwidWlDYWxsYmFjayIsImNsb3NlQ2FsbGJhY2siLCJvbkNsaWNrQ2xvc2UiLCJjYWxsIiwiUG9wdXBNYW5hZ2VyIiwiaW5zdGFuY2UiLCJvcGVuIiwiQXNzZXRzTWFwIiwiUG9wVXBCdW5kbGVzIiwicHJlZmFicyIsImFzc2V0c0xpc3QiLCJTZXR0bGVWaWV3IiwiaXNTdWNjZXNzIiwiaXNQYXVzZSIsInJlbmRlckl0ZW0iLCJnYW1lU3RhcnRUaW1lIiwic2tpbGxJbmZvIiwiY2hvb3NlUGFyZW50VGltZSIsImdldCIsIm4iLCJpY29uIiwic2tpbGxDb25maWdzTWFwIiwic2tpbGxDb3VudCIsImdldENob29zZVBhcmVuZENvdW50Iiwic2tpbGxOYW1lIiwiYmFzaWNTa2lsbENvbmZpZ3MiLCJmaW5kIiwic2tpbGxtYXN0ZXJfaWQiLCJuYW1lIiwic2tpbGxIdXJ0Iiwic2tpbGxIdXJ0U2VjIiwiTWF0aCIsImZsb29yIiwiZ2V0Q29tcG9uZW50IiwicmVuZGVyIiwiY2hpbGRyZW4iLCJhY3RpdmUiLCJ0eXBlIiwibG9hZFJlcyIsIkJ1bmRsZU5hbWVzIiwiUHVibGljIiwiU3ByaXRlRnJhbWUiLCJzIiwiaXNWYWxpZCIsIlNwcml0ZSIsInNwcml0ZUZyYW1lIiwiUmVzVXRpbCIsImFzc2lnbldpdGgiLCJub2RlIiwiTGFiZWwiLCJzdHJpbmciLCJudW0iLCJ0b1N0cmluZyIsIlB1YmxpY19SZXMiLCJleHQiLCJJbnMiLCJvcGVhckVxdWlwQm9vayIsInNraWxsQ29uZmlncyIsImlkIiwiYyIsInUiLCJnZW1Db25maWdzIiwicGFydCIsIkdyYWRlIiwiX19kZWNvcmF0ZSIsIk5vZGUiLCJQb3B1cFZpZXciLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUo7O0FBQ0EsSUFBSUMsYUFBYSxHQUFHQyxPQUFPLENBQUMsZ0JBQUQsQ0FBM0I7O0FBQ0EsSUFBSUMsVUFBVSxHQUFHRCxPQUFPLENBQUMsYUFBRCxDQUF4Qjs7QUFDQSxJQUFJRSxRQUFRLEdBQUdGLE9BQU8sQ0FBQyxXQUFELENBQXRCOztBQUNBLElBQUlHLEtBQUssR0FBR0gsT0FBTyxDQUFDLFFBQUQsQ0FBbkI7O0FBQ0EsSUFBSUksYUFBYSxHQUFHSixPQUFPLENBQUMsZ0JBQUQsQ0FBM0I7O0FBQ0EsSUFBSUssVUFBVSxHQUFHTCxPQUFPLENBQUMsYUFBRCxDQUF4Qjs7QUFDQSxJQUFJTSxjQUFjLEdBQUdOLE9BQU8sQ0FBQyxpQkFBRCxDQUE1Qjs7QUFDQSxJQUFJTyxnQkFBZ0IsR0FBR1AsT0FBTyxDQUFDLG1CQUFELENBQTlCOztBQUNBLElBQUlRLFlBQVksR0FBR1IsT0FBTyxDQUFDLGVBQUQsQ0FBMUI7O0FBQ0EsSUFBSVMsY0FBYyxHQUFHVCxPQUFPLENBQUMsaUJBQUQsQ0FBNUI7O0FB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TixDQUFqQjtBQUNILENBcExPLENBb0xMZCxVQUFVLENBQUMwRyxTQXBMTixDQUFSOztBQXFMQUMsT0FBTyxXQUFQLEdBQWtCL0YsQ0FBbEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBvO1xyXG52YXIgJGFzc2V0c0xvYWRlciA9IHJlcXVpcmUoXCIuL0Fzc2V0c0xvYWRlclwiKTtcclxudmFyICRhc3NldHNNYXAgPSByZXF1aXJlKFwiLi9Bc3NldHNNYXBcIik7XHJcbnZhciAkcmVzVXRpbCA9IHJlcXVpcmUoXCIuL1Jlc1V0aWxcIik7XHJcbnZhciAkbGlzdCA9IHJlcXVpcmUoXCIuL0xpc3RcIik7XHJcbnZhciAkcG9wdXBNYW5hZ2VyID0gcmVxdWlyZShcIi4vUG9wdXBNYW5hZ2VyXCIpO1xyXG52YXIgJHBvcHVwVmlldyA9IHJlcXVpcmUoXCIuL1BvcHVwVmlld1wiKTtcclxudmFyICRjb25maWdDb250ZXh0ID0gcmVxdWlyZShcIi4vQ29uZmlnQ29udGV4dFwiKTtcclxudmFyICR1c2VyRGF0YUNvbnRleHQgPSByZXF1aXJlKFwiLi9Vc2VyRGF0YUNvbnRleHRcIik7XHJcbnZhciAkZ2FtZUNvbnRleHQgPSByZXF1aXJlKFwiLi9HYW1lQ29udGV4dFwiKTtcclxudmFyICRza2lsbEh1cnRJdGVtID0gcmVxdWlyZShcIi4vU2tpbGxIdXJ0SXRlbVwiKTtcclxudmFyIHkgPSBjYy5fZGVjb3JhdG9yO1xyXG52YXIgZyA9IHkuY2NjbGFzcztcclxudmFyIF8gPSB5LnByb3BlcnR5O1xyXG52YXIgayA9IChmdW5jdGlvbiAodCkge1xyXG4gICAgZnVuY3Rpb24gZSgpIHtcclxuICAgICAgICB2YXIgZSA9IChudWxsICE9PSB0ICYmIHQuYXBwbHkodGhpcywgYXJndW1lbnRzKSkgfHwgdGhpcztcclxuICAgICAgICBlLmJ0bkJhY2sgPSBudWxsO1xyXG4gICAgICAgIGUubGlzdCA9IG51bGw7XHJcbiAgICAgICAgZS5yZXdhcmROb2RlID0gbnVsbDtcclxuICAgICAgICBlLnNraWxsSWRzID0gW107XHJcbiAgICAgICAgZS5yZXdhcmRJbmZvcyA9IFtdO1xyXG4gICAgICAgIHJldHVybiBlO1xyXG4gICAgfVxyXG4gICAgX19leHRlbmRzKGUsIHQpO1xyXG4gICAgZS5wcm90b3R5cGUub25Mb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ID0gdGhpcztcclxuICAgICAgICAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuaHVydFJlY29yZC5mb3JFYWNoKGZ1bmN0aW9uIChlLCBpKSB7XHJcbiAgICAgICAgICAgIHQuc2tpbGxJZHMucHVzaChpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoMCAhPT0gdGhpcy5za2lsbElkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0Lm51bUl0ZW1zID0gdGhpcy5za2lsbElkcy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLm9uUmVzZXRWaWV3ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucmV3YXJkSW5mb3MgPSAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMucGF1c2VSZXdhcmQoKTtcclxuICAgICAgICB0aGlzLnJlbmRlclJld2FyZCgpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmFkZEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuYnRuQmFjay5vbihcImNsaWNrXCIsIHRoaXMuY2xpY2tCYWNrLCB0aGlzKTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5yZW1vdmVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmJ0bkJhY2sub2ZmKFwiY2xpY2tcIiwgdGhpcy5jbGlja0JhY2ssIHRoaXMpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmNsaWNrQmFjayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnVpQ2FsbGJhY2suY2xvc2VDYWxsYmFjayA9IG51bGw7XHJcbiAgICAgICAgdC5wcm90b3R5cGUub25DbGlja0Nsb3NlLmNhbGwodGhpcyk7XHJcbiAgICAgICAgJHBvcHVwTWFuYWdlci5Qb3B1cE1hbmFnZXIuaW5zdGFuY2Uub3BlbigkYXNzZXRzTWFwLkFzc2V0c01hcC5Qb3BVcEJ1bmRsZXMucHJlZmFicy5hc3NldHNMaXN0LlNldHRsZVZpZXcsIHtcclxuICAgICAgICAgICAgaXNTdWNjZXNzOiAhMSxcclxuICAgICAgICAgICAgaXNQYXVzZTogITBcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5yZW5kZXJJdGVtID0gZnVuY3Rpb24gKHQsIGUpIHtcclxuICAgICAgICB2YXIgaSA9IHRoaXMuc2tpbGxJZHNbZV07XHJcbiAgICAgICAgdmFyIG8gPSAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuZ2FtZVN0YXJ0VGltZSAtICRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5za2lsbEluZm8uY2hvb3NlUGFyZW50VGltZS5nZXQoaSk7XHJcbiAgICAgICAgdmFyIG4gPSB7XHJcbiAgICAgICAgICAgIGljb246IDEgPT09IGkgPyBcImpuMV8xXCIgOiAkY29uZmlnQ29udGV4dC5kZWZhdWx0Lmluc3RhbmNlLnNraWxsQ29uZmlnc01hcC5nZXQoaSkuaWNvbixcclxuICAgICAgICAgICAgc2tpbGxDb3VudDogJGdhbWVDb250ZXh0LmRlZmF1bHQuaW5zLnNraWxsSW5mby5nZXRDaG9vc2VQYXJlbmRDb3VudChpKSxcclxuICAgICAgICAgICAgc2tpbGxOYW1lOiAkY29uZmlnQ29udGV4dC5kZWZhdWx0Lmluc3RhbmNlLmJhc2ljU2tpbGxDb25maWdzLmZpbmQoZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0LnNraWxsbWFzdGVyX2lkID09PSBpO1xyXG4gICAgICAgICAgICB9KS5uYW1lLFxyXG4gICAgICAgICAgICBza2lsbEh1cnQ6ICRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5odXJ0UmVjb3JkLmdldChpKSxcclxuICAgICAgICAgICAgc2tpbGxIdXJ0U2VjOiBNYXRoLmZsb29yKCRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5odXJ0UmVjb3JkLmdldChpKSAvIG8pXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0LmdldENvbXBvbmVudCgkc2tpbGxIdXJ0SXRlbS5kZWZhdWx0KS5yZW5kZXIobik7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUucmVuZGVyUmV3YXJkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ID0gdGhpcztcclxuICAgICAgICB0aGlzLnJld2FyZE5vZGUuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICByZXR1cm4gKHQuYWN0aXZlID0gITEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBlID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdmFyIG8gPSBpLnJld2FyZE5vZGUuY2hpbGRyZW5bZV07XHJcbiAgICAgICAgICAgIG8uYWN0aXZlID0gITA7XHJcbiAgICAgICAgICAgIHZhciBuID0gaS5yZXdhcmRJbmZvc1tlXTtcclxuICAgICAgICAgICAgaWYgKDEgPT09IG4udHlwZSkge1xyXG4gICAgICAgICAgICAgICAgJGFzc2V0c0xvYWRlci5kZWZhdWx0Lmluc3RhbmNlLmxvYWRSZXMoXHJcbiAgICAgICAgICAgICAgICAgICAgJGFzc2V0c01hcC5CdW5kbGVOYW1lcy5QdWJsaWMsXHJcbiAgICAgICAgICAgICAgICAgICAgW1wiL3RleHR1cmVzL2dlbS9qaW5iaVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBjYy5TcHJpdGVGcmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlLCBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gaVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMgJiYgY2MuaXNWYWxpZChvKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgby5jaGlsZHJlblswXS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLmNoaWxkcmVuWzFdLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lID0gJHJlc1V0aWwuUmVzVXRpbC5hc3NpZ25XaXRoKHMsIHQubm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLmNoaWxkcmVuWzJdLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gbi5udW0udG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoMiA9PT0gbi50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGFzc2V0c0xvYWRlci5kZWZhdWx0Lmluc3RhbmNlLmxvYWRSZXMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRhc3NldHNNYXAuQnVuZGxlTmFtZXMuUHVibGljLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbXCIvdGV4dHVyZXMvZ2VtL2V4cFwiXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2MuU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlLCBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGlbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocyAmJiBjYy5pc1ZhbGlkKG8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5jaGlsZHJlblswXS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5jaGlsZHJlblsxXS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9ICRyZXNVdGlsLlJlc1V0aWwuYXNzaWduV2l0aChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5ub2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLmNoaWxkcmVuWzJdLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gbi5udW0udG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgzID09PSBuLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGFzc2V0c0xvYWRlci5kZWZhdWx0Lmluc3RhbmNlLmxvYWRSZXMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYXNzZXRzTWFwLkJ1bmRsZU5hbWVzLlB1YmxpY19SZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXCIvZXF1aXBtZW50X2ljb24vemJcIiArIG4uZXh0XSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLlNwcml0ZUZyYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlLCBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzICYmIGNjLmlzVmFsaWQobykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5jaGlsZHJlblswXS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uY2hpbGRyZW5bMV0uZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSAkcmVzVXRpbC5SZXNVdGlsLmFzc2lnbldpdGgoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5ub2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uY2hpbGRyZW5bMl0uZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBuLm51bS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHVzZXJEYXRhQ29udGV4dC5kZWZhdWx0Lklucy5vcGVhckVxdWlwQm9vayhuLmV4dCwgbi5udW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICg0ID09PSBuLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gXCJqbjBcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwICE9PSBuLmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSAkY29uZmlnQ29udGV4dC5kZWZhdWx0Lmluc3RhbmNlLnNraWxsQ29uZmlncy5maW5kKGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmlkID09PSBuLmV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5pY29uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGFzc2V0c0xvYWRlci5kZWZhdWx0Lmluc3RhbmNlLmxvYWRSZXMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGFzc2V0c01hcC5CdW5kbGVOYW1lcy5QdWJsaWNfUmVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcIi9za2lsbF9ib29rL1wiICsgc10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MuU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSwgaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGlbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzICYmIGNjLmlzVmFsaWQobykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uY2hpbGRyZW5bMF0uZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5jaGlsZHJlblsxXS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9ICRyZXNVdGlsLlJlc1V0aWwuYXNzaWduV2l0aChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQubm9kZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uY2hpbGRyZW5bMl0uZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBuLm51bS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICg1ID09PSBuLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IFtcIi90ZXh0dXJlcy9nZW0vd2VuaGFvXCIsIFwiL3RleHR1cmVzL2dlbS9rMVwiXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCAhPT0gbi5leHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSAkY29uZmlnQ29udGV4dC5kZWZhdWx0Lmluc3RhbmNlLmdlbUNvbmZpZ3MuZmluZChmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuaWQgPT09IG4uZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IFtcIi90ZXh0dXJlcy9nZW0vZ1wiICsgdS5wYXJ0ICsgXCJfXCIgKyB1LkdyYWRlLCBcIi90ZXh0dXJlcy9nZW0va1wiICsgdS5HcmFkZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRhc3NldHNMb2FkZXIuZGVmYXVsdC5pbnN0YW5jZS5sb2FkUmVzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYXNzZXRzTWFwLkJ1bmRsZU5hbWVzLlB1YmxpYyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MuU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlLCBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGlbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocyAmJiBjYy5pc1ZhbGlkKG8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5jaGlsZHJlblswXS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyZXNVdGlsLlJlc1V0aWwuYXNzaWduV2l0aChpWzFdLCB0Lm5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uY2hpbGRyZW5bMV0uZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcmVzVXRpbC5SZXNVdGlsLmFzc2lnbldpdGgocywgdC5ub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLmNoaWxkcmVuWzJdLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gbi5udW0udG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBpID0gdGhpcztcclxuICAgICAgICBmb3IgKHZhciBvID0gMDsgbyA8IHRoaXMucmV3YXJkSW5mb3MubGVuZ3RoOyBvKyspIHtcclxuICAgICAgICAgICAgZShvKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgX19kZWNvcmF0ZShbXyhjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcImJ0bkJhY2tcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW18oJGxpc3QuZGVmYXVsdCldLCBlLnByb3RvdHlwZSwgXCJsaXN0XCIsIHZvaWQgMCk7XHJcbiAgICBfX2RlY29yYXRlKFtfKGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwicmV3YXJkTm9kZVwiLCB2b2lkIDApO1xyXG4gICAgcmV0dXJuIF9fZGVjb3JhdGUoW2ddLCBlKTtcclxufSkoJHBvcHVwVmlldy5Qb3B1cFZpZXcpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBrO1xyXG4iXX0=