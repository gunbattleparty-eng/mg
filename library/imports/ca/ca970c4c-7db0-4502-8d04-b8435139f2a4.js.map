{"version":3,"sources":["assets\\game_script\\scripts\\Login.js"],"names":["exports","Login","$eventManager","require","$seedUtil","$storageUtil","$platform","$geService","$switchContext","$userDataContext","u","t","info","ttOpenId","wxOpenId","ksOpenId","param","ttAppid","ttSecret","wxAuthUid","ksAuthUid","prototype","start","console","log","SwitchContext","loginParam","openId","getLocalOpenID","nickname","headImg","Ins","Platform","currPlatForm","PlatformEnum","TOU_TIAO","StorageUtil","getItem","WECHAT","KS","qqGetUserInfo","window","qq","getSetting","success","e","authSetting","getUserInfo","i","userInfo","onGetUserInfo","createUserInfoButton","type","text","style","left","top","width","height","lineHeight","textAlign","fontSize","borderRadius","onTap","errMsg","o","destroy","show","wxGetUserInfo","wx","login","code","getWxOpenId","GeService","instance","init","fail","error","fly","post","authUid","headers","then","data","setItem","send","LOGIN_SUCCESS","ttGetUserInfo","tt","force","getTTOpenId","anonymousCode","withCredentials","appid","secret","openid","ksGetUserInfo","ks","getKSOpenId","authorize","scope","nickName","randomFrom"],"mappings":"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","sourceRoot":"/","sourcesContent":["exports.Login = void 0;\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $seedUtil = require(\"./SeedUtil\");\r\nvar $storageUtil = require(\"./StorageUtil\");\r\nvar $platform = require(\"./Platform\");\r\nvar $geService = require(\"./GeService\");\r\nvar $switchContext = require(\"./SwitchContext\");\r\nvar $userDataContext = require(\"./UserDataContext\");\r\nvar u = (function () {\r\n    function t() {\r\n        this.info = null;\r\n        this.ttOpenId = \"\";\r\n        this.wxOpenId = \"\";\r\n        this.ksOpenId = \"\";\r\n        this.param = {\r\n            ttAppid: \"\",\r\n            ttSecret: \"\",\r\n            wxAuthUid: \"\",\r\n            ksAuthUid: \"\"\r\n        };\r\n    }\r\n    \r\n    t.prototype.start = function () {\r\n        console.log(\"=========login-param=======\", this.param);\r\n        this.param = $switchContext.SwitchContext.loginParam;\r\n        this.info = {\r\n            openId: this.getLocalOpenID(),\r\n            nickname: \"\",\r\n            headImg: \"https://cooperation.pailedi.com/web2/wuff/bhrhj/config/default_img2.png\"\r\n        };\r\n        $userDataContext.default.Ins.openId = this.info.openId;\r\n        $platform.Platform.currPlatForm === $platform.PlatformEnum.TOU_TIAO\r\n            ? (this.ttOpenId = $storageUtil.StorageUtil.getItem(\"TT_OPENID\", \"\", !1))\r\n            : $platform.Platform.currPlatForm === $platform.PlatformEnum.WECHAT\r\n            ? (this.wxOpenId = $storageUtil.StorageUtil.getItem(\"WX_OPENID\", \"\", !1))\r\n            : $platform.Platform.currPlatForm === $platform.PlatformEnum.KS &&\r\n              (this.ksOpenId = $storageUtil.StorageUtil.getItem(\"KS_OPENID\", \"\", !1));\r\n    };\r\n    t.prototype.qqGetUserInfo = function () {\r\n        var t = this;\r\n        window.qq.getSetting({\r\n            success: function (e) {\r\n                if (e.authSetting[\"scope.userInfo\"]) {\r\n                    window.qq.getUserInfo({\r\n                        success: function (e) {\r\n                            var i = e.userInfo;\r\n                            t.onGetUserInfo(i);\r\n                        }\r\n                    });\r\n                } else {\r\n                    {\r\n                        var i = window.qq.createUserInfoButton({\r\n                            type: \"text\",\r\n                            text: \"\",\r\n                            style: {\r\n                                left: 0,\r\n                                top: 0,\r\n                                width: 3e3,\r\n                                height: 3e3,\r\n                                lineHeight: 40,\r\n                                textAlign: \"center\",\r\n                                fontSize: 16,\r\n                                borderRadius: 4\r\n                            }\r\n                        });\r\n                        i.onTap(function (e) {\r\n                            console.log(\"button res:\", e);\r\n                            if (e && \"getUserInfo:ok\" === e.errMsg) {\r\n                                var o = e.userInfo;\r\n                                t.onGetUserInfo(o);\r\n                            }\r\n                            i.destroy();\r\n                        });\r\n                        i.show();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    };\r\n    t.prototype.wxGetUserInfo = function (t) {\r\n        var e = this;\r\n        t && \"\" === this.wxOpenId\r\n            ? window.wx.login({\r\n                  success: function (t) {\r\n                      t.code ? e.getWxOpenId(t.code) : console.log(\"登录失败！\" + t.errMsg);\r\n                  }\r\n              })\r\n            : t && \"\" != this.wxOpenId && $geService.GeService.instance.init();\r\n        console.log(\"==========wxGetUserInfo==========\");\r\n        window.wx.getSetting({\r\n            success: function (t) {\r\n                if (t.authSetting[\"scope.userInfo\"]) {\r\n                    console.log(\"===++++===\", t);\r\n                    window.wx.getUserInfo({\r\n                        success: function (t) {\r\n                            var i = t.userInfo;\r\n                            console.log(\"======\", t);\r\n                            e.onGetUserInfo(i);\r\n                        }\r\n                    });\r\n                } else {\r\n                    {\r\n                        var i = window.wx.createUserInfoButton({\r\n                            type: \"text\",\r\n                            text: \"\",\r\n                            style: {\r\n                                left: 0,\r\n                                top: 0,\r\n                                width: 3e3,\r\n                                height: 3e3,\r\n                                lineHeight: 40,\r\n                                textAlign: \"center\",\r\n                                fontSize: 16,\r\n                                borderRadius: 4\r\n                            }\r\n                        });\r\n                        i.onTap(function (t) {\r\n                            console.log(\"button res:\", t);\r\n                            if (t && \"getUserInfo:ok\" === t.errMsg) {\r\n                                var o = t.userInfo;\r\n                                e.onGetUserInfo(o);\r\n                            }\r\n                            i.destroy();\r\n                        });\r\n                        i.show();\r\n                    }\r\n                }\r\n            },\r\n            fail: function (t) {\r\n                console.error(t);\r\n            }\r\n        });\r\n    };\r\n    t.prototype.getWxOpenId = function (e) {\r\n        var i = this;\r\n        fly.post(\r\n            \"https://fkxjl.shenzhendongwei.com/auth/login\",\r\n            {\r\n                authUid: this.param.wxAuthUid,\r\n                code: e\r\n            },\r\n            {\r\n                headers: {\r\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n                }\r\n            }\r\n        ).then(function (e) {\r\n            console.log(\"getOpenId\", e.data);\r\n            i.wxOpenId = e.data.openId;\r\n            console.log(\"getOpenId\", i.wxOpenId);\r\n            $storageUtil.StorageUtil.setItem(\"WX_OPENID\", i.wxOpenId, !1);\r\n            $eventManager.default.send(t.LOGIN_SUCCESS);\r\n            $geService.GeService.instance.init();\r\n        });\r\n    };\r\n    t.prototype.ttGetUserInfo = function (t) {\r\n        var e = this;\r\n        window.tt.login({\r\n            force: !1,\r\n            success: function (i) {\r\n                t && \"\" === e.ttOpenId\r\n                    ? e.getTTOpenId(i.code)\r\n                    : t && \"\" != e.ttOpenId && $geService.GeService.instance.init();\r\n                console.log(\"login 调用成功\" + i.code + \" \" + i.anonymousCode);\r\n                window.tt.getUserInfo({\r\n                    withCredentials: !0,\r\n                    success: function (t) {\r\n                        console.log(\"getUserInfo 调用成功 \", t);\r\n                        e.onGetUserInfo(t.userInfo);\r\n                    },\r\n                    fail: function (t) {\r\n                        console.log(\"getUserInfo 调用失败\", t);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    };\r\n    t.prototype.getTTOpenId = function (e) {\r\n        var i = this;\r\n        if (\"\" !== this.param.ttSecret) {\r\n            fly.post(\"https://developer.toutiao.com/api/apps/v2/jscode2session\", {\r\n                appid: this.param.ttAppid,\r\n                secret: this.param.ttSecret,\r\n                code: e\r\n            }).then(function (e) {\r\n                console.log(\"getOpenId\", e);\r\n                i.ttOpenId = e.data.openid;\r\n                $storageUtil.StorageUtil.setItem(\"TT_OPENID\", i.ttOpenId, !1);\r\n                $eventManager.default.send(t.LOGIN_SUCCESS);\r\n                $geService.GeService.instance.init();\r\n            });\r\n        }\r\n    };\r\n    t.prototype.ksGetUserInfo = function (t) {\r\n        var e = this;\r\n        window.ks.login({\r\n            success: function (i) {\r\n                t && \"\" === e.ksOpenId\r\n                    ? e.getKSOpenId(i.code)\r\n                    : t && \"\" != e.ttOpenId && $geService.GeService.instance.init();\r\n                console.log(\"login 调用成功\" + i.code + \" \" + i.anonymousCode);\r\n            }\r\n        });\r\n        console.log(\"============================================\");\r\n        window.ks.getSetting({\r\n            success: function (t) {\r\n                t[\"scope.userInfo\"]\r\n                    ? window.ks.getUserInfo({\r\n                          success: function (t) {\r\n                              console.log(\"已授权\");\r\n                              var i = t.userInfo;\r\n                              e.onGetUserInfo(i);\r\n                          }\r\n                      })\r\n                    : window.ks.authorize({\r\n                          scope: \"scope.userInfo\",\r\n                          success: function () {\r\n                              console.log(\"授权获取用户信息成功\");\r\n                              window.ks.getUserInfo({\r\n                                  success: function (t) {\r\n                                      var i = t.userInfo;\r\n                                      e.onGetUserInfo(i);\r\n                                  }\r\n                              });\r\n                          }\r\n                      });\r\n            },\r\n            fail: function (t) {\r\n                console.error(t);\r\n            }\r\n        });\r\n    };\r\n    t.prototype.getKSOpenId = function (e) {\r\n        var i = this;\r\n        fly.post(\r\n            \"https://fkxjl.shenzhendongwei.com/auth/login\",\r\n            {\r\n                authUid: this.param.ksAuthUid,\r\n                code: e\r\n            },\r\n            {\r\n                headers: {\r\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n                }\r\n            }\r\n        ).then(function (e) {\r\n            console.log(\"getOpenId1\", e);\r\n            i.ksOpenId = e.data.openId;\r\n            console.log(\"getOpenId2\", i.ksOpenId);\r\n            $storageUtil.StorageUtil.setItem(\"KS_OPENID\", i.ksOpenId, !1);\r\n            $eventManager.default.send(t.LOGIN_SUCCESS);\r\n            $geService.GeService.instance.init();\r\n        });\r\n    };\r\n    t.prototype.onGetUserInfo = function (e) {\r\n        $userDataContext.default.Ins.nickname = e.nickName;\r\n        $eventManager.default.send(t.LOGIN_SUCCESS);\r\n    };\r\n    t.prototype.getLocalOpenID = function () {\r\n        var t = $storageUtil.StorageUtil.getItem(\r\n            \"user_open_id\",\r\n            \"1020\" + $seedUtil.default.randomFrom(0, 99999999),\r\n            !1\r\n        );\r\n        $storageUtil.StorageUtil.setItem(\"user_open_id\", t, !1);\r\n        return t;\r\n    };\r\n    t.LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\r\n    t.instance = new t();\r\n    return t;\r\n})();\r\nexports.Login = u;\r\n"]}