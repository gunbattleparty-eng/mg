{"version":3,"sources":["assets\\game_script\\scripts\\Enemy_11.js"],"names":["o","$eventManager","require","$localEventName","$baseBullet","$baseEnemy","$enemyStatus","d","cc","_decorator","p","ccclass","f","property","t","e","apply","arguments","minHp","addTime","addUnitHp","isAdded","addHping","dtAddTime","dtAddLeft","__extends","prototype","initEnemy","i","call","statusManager","specialityAtkAdd","set","BulletSpeciality","fire","config","value","initHp","Math","ceil","sufferDebuff","type","EnemyDebuffType","BURN","timeLeft","updateFrame","isDie","hasDebuff","FORBID_RECOVER","RECOVER","removeDebuff","hp","min","send","HURT_ANIM","getAnimPos","__decorate","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar $baseEnemy = require(\"./BaseEnemy\");\r\nvar $enemyStatus = require(\"./EnemyStatus\");\r\nvar d = cc._decorator;\r\nvar p = d.ccclass;\r\nvar f =\r\n    (d.property,\r\n    (function (t) {\r\n        function e() {\r\n            var e = (null !== t && t.apply(this, arguments)) || this;\r\n            e.minHp = 0;\r\n            e.addTime = 0;\r\n            e.addUnitHp = 0;\r\n            e.isAdded = !1;\r\n            e.addHping = !1;\r\n            e.dtAddTime = 1;\r\n            e.dtAddLeft = 0;\r\n            return e;\r\n        }\r\n        __extends(e, t);\r\n        e.prototype.initEnemy = function (e, i, o) {\r\n            if (void 0 === o) {\r\n                o = 0;\r\n            }\r\n            t.prototype.initEnemy.call(this, e, i, o);\r\n            this.statusManager.specialityAtkAdd.set($baseBullet.BulletSpeciality.fire, this.config.value[3]);\r\n            this.minHp = this.statusManager.initHp * this.config.value[0];\r\n            this.addTime = this.config.value[1];\r\n            this.addUnitHp = Math.ceil(this.minHp / this.addTime);\r\n            this.dtAddLeft = this.dtAddTime;\r\n            this.addHping = !1;\r\n            this.isAdded = !1;\r\n        };\r\n        e.prototype.sufferDebuff = function (e) {\r\n            if (e.type === $enemyStatus.EnemyDebuffType.BURN) {\r\n                e.timeLeft *= this.config.value[4] + 1;\r\n                e.value *= this.config.value[3] + 1;\r\n            }\r\n            t.prototype.sufferDebuff.call(this, e);\r\n        };\r\n        e.prototype.updateFrame = function (e) {\r\n            if (!this.statusManager.isDie) {\r\n                t.prototype.updateFrame.call(this, e);\r\n                if (this.addHping && this.hasDebuff($enemyStatus.EnemyDebuffType.FORBID_RECOVER)) {\r\n                    this.addHping = !1;\r\n                    return void (\r\n                        this.hasDebuff($enemyStatus.EnemyDebuffType.RECOVER) &&\r\n                        this.removeDebuff($enemyStatus.EnemyDebuffType.RECOVER)\r\n                    );\r\n                }\r\n                if (!this.isAdded && this.statusManager.hp <= this.minHp) {\r\n                    this.isAdded = !0;\r\n                    this.addHping = !0;\r\n                    this.sufferDebuff({\r\n                        type: $enemyStatus.EnemyDebuffType.RECOVER,\r\n                        timeLeft: this.addTime,\r\n                        value: -1\r\n                    });\r\n                }\r\n                if (this.addHping) {\r\n                    this.dtAddLeft -= e;\r\n                    if (this.dtAddLeft <= 0) {\r\n                        this.dtAddLeft = this.dtAddTime;\r\n                        this.addTime -= 1;\r\n                        this.statusManager.hp += this.addUnitHp;\r\n                        this.statusManager.hp = Math.min(this.statusManager.hp, this.statusManager.initHp);\r\n                        $eventManager.default.send(\r\n                            $localEventName.default.HURT_ANIM,\r\n                            this.getAnimPos(),\r\n                            this.addUnitHp,\r\n                            2,\r\n                            1\r\n                        );\r\n                        if (this.addTime <= 0) {\r\n                            this.addHping = !1;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        return __decorate([p], e);\r\n    })($baseEnemy.default));\r\nexports.default = f;\r\n"]}