{"version":3,"sources":["assets\\game_script\\scripts\\EquipmentGemDescItem.js"],"names":["o","$assetsLoader","require","$assetsMap","$resUtil","$eventManager","$equipmentContext","$localEventName","$gameGemInfo","f","cc","_decorator","h","ccclass","m","property","y","t","e","apply","arguments","gemIconSp","gemName","gemDesc","btnUnload","names","partNames","config","index","__extends","prototype","start","on","clickUnload","node","Node","EventType","TOUCH_START","clickClose","onDestroy","off","Ins","removeGem","part","send","RENDER_GEM","active","render","i","instance","loadRes","BundleNames","Public","Grade","SpriteFrame","isValid","spriteFrame","ResUtil","assignWith","string","color","GameGemInfo","gemColor","ins","getGemDesc","__decorate","Sprite","Label","Component","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $equipmentContext = require(\"./EquipmentContext\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $gameGemInfo = require(\"./GameGemInfo\");\r\nvar f = cc._decorator;\r\nvar h = f.ccclass;\r\nvar m = f.property;\r\nvar y = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.gemIconSp = null;\r\n        e.gemName = null;\r\n        e.gemDesc = null;\r\n        e.btnUnload = null;\r\n        e.names = [\"普通\", \"精良\", \"稀有\", \"史诗\", \"传奇\", \"绝世\", \"神话\"];\r\n        e.partNames = [\"帽子\", \"上衣\", \"鞋子\", \"护臂\", \"裤子\", \"手套\"];\r\n        e.config = null;\r\n        e.index = -1;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.start = function () {\r\n        this.btnUnload.on(\"click\", this.clickUnload, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.clickClose, this);\r\n    };\r\n    e.prototype.onDestroy = function () {\r\n        this.btnUnload.off(\"click\", this.clickUnload, this);\r\n        this.node.off(cc.Node.EventType.TOUCH_START, this.clickClose, this);\r\n    };\r\n    e.prototype.clickUnload = function () {\r\n        $equipmentContext.default.Ins.removeGem(this.config.part, this.index);\r\n        $eventManager.default.send($localEventName.default.RENDER_GEM);\r\n        this.clickClose();\r\n    };\r\n    e.prototype.clickClose = function () {\r\n        this.node.active = !1;\r\n    };\r\n    e.prototype.render = function (t, e) {\r\n        var i = this;\r\n        this.index = e;\r\n        this.config = t;\r\n        $assetsLoader.default.instance.loadRes(\r\n            $assetsMap.BundleNames.Public,\r\n            [\"/textures/gem/g\" + this.config.part + \"_\" + this.config.Grade],\r\n            cc.SpriteFrame,\r\n            null,\r\n            function (t, e) {\r\n                var o = e[0];\r\n                if (o && cc.isValid(i.gemIconSp)) {\r\n                    i.gemIconSp.spriteFrame = $resUtil.ResUtil.assignWith(o, i.node);\r\n                }\r\n            }\r\n        );\r\n        this.gemName.string = this.partNames[this.config.part - 1] + \"·\" + this.names[this.config.Grade - 1] + \"宝石\";\r\n        this.gemName.node.color = $gameGemInfo.GameGemInfo.gemColor[this.config.Grade - 1];\r\n        this.gemDesc.string = $gameGemInfo.GameGemInfo.ins.getGemDesc(t);\r\n    };\r\n    __decorate([m(cc.Sprite)], e.prototype, \"gemIconSp\", void 0);\r\n    __decorate([m(cc.Label)], e.prototype, \"gemName\", void 0);\r\n    __decorate([m(cc.Label)], e.prototype, \"gemDesc\", void 0);\r\n    __decorate([m(cc.Node)], e.prototype, \"btnUnload\", void 0);\r\n    return __decorate([h], e);\r\n})(cc.Component);\r\nexports.default = y;\r\n"]}