
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/RBullet_7.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '5cb65rRB71KAYKAmXWD62Q6', 'RBullet_7');
// game_script/scripts/RBullet_7.js

"use strict";

var o;

var $object = require("./Object");

var $util = require("./Util");

var $globalParam = require("./GlobalParam");

var $gameContext = require("./GameContext");

var $gameSkillInfo = require("./GameSkillInfo");

var $baseBullet = require("./BaseBullet");

var p = cc._decorator;
var f = p.ccclass;
var h = p.property;
var m = new cc.Vec3();

var y = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.buttleType = $baseBullet.BulletType.r_bullet_7;
    e.skin = null;
    e.status = 0;
    e.leftTime = 0;
    e.enemys = [];
    e.targetEnemy = null;
    e.findLeftTime = 0;
    e.atkLeftTime = 0;
    e.atkIntervalTime = 1;
    e.pointNode = null;
    return e;
  }

  __extends(e, t);

  e.prototype.initButtle = function (e) {
    this.enemys.length = 0;
    this.targetEnemy = null;
    this.speed = $gameContext["default"].ins.skillInfo.robotParam[3];
    this.atkIntervalTime = $gameContext["default"].ins.skillInfo.robotParam[4];
    this.leftTime = $gameContext["default"].ins.skillInfo.robotParam[5];
    this.setAngle($util["default"].dirConverAngle(e));
    t.prototype.initButtle.call(this, e, null);
    this.atk = Math.ceil($gameContext["default"].ins.skillInfo.robotParam[0] * this.skillParam.skillAtk[$gameSkillInfo.Skill4Param.FINAL]);
    this.status = 0;

    if (e) {
      this.velocity.set(e).multiplyScalar(this.speed);
    }
  };

  e.prototype.onTrigger = function (t, e) {
    var i = t.object;

    if (e === $object.Trigger.enter) {
      this.enemys.push(i);
    } else {
      if (e === $object.Trigger.exit) {
        var o = this.enemys.indexOf(i);

        if (-1 !== o) {
          this.enemys.splice(o, 1);
        }
      }
    }
  };

  e.prototype.attack = function (t) {
    var e = this;
    this.atkLeftTime -= t;

    if (!(this.atkLeftTime > 0)) {
      this.atkLeftTime = 1;
      this.skin.off(dragonBones.EventObject.COMPLETE);
      this.playAnim("hit", 1);
      this.skin.once(dragonBones.EventObject.COMPLETE, function () {
        e.atkLeftTime = e.atkIntervalTime;
        e.playAnim("stand", 0);

        if (0 !== e.status) {
          e.status = 1;
        }
      }, this);

      for (var i = 0; i < this.enemys.length; i++) {
        this.enemys[i].sufferAtk({
          skillSpecialitys: this.skillSpecialitys,
          atk: this.atk
        });
      }
    }
  };

  e.prototype.findTarget = function (t) {
    if ("stand" !== this.skin.animationName) {
      this.skin.off(dragonBones.EventObject.COMPLETE);
      this.playAnim("stand", 0);
    }

    this.findLeftTime -= t;

    if (this.findLeftTime <= 0) {
      this.findLeftTime = 1;
      var e = $gameContext["default"].ins.getRangeRankEnemy(this.pointNode, $gameContext["default"].ins.skillInfo.robotParam[2]);

      if (e) {
        this.targetEnemy = e;
        this.targetEnemy.addDieCallback(this.targetDie, this);
        this.status = 1;
      }
    }
  };

  e.prototype.findPath = function (t) {
    m.x = this.targetEnemy.getPosition().x - this.node.position.x;
    m.y = this.targetEnemy.getPosition().y - this.node.position.y;
    m.z = 0;
    m.normalizeSelf();
    this.targetEnemy.getPosition().sub(this.node.position.add(m.mul(50))).magSqr() < 22500 ? 0 !== this.status && (this.status = 2) : ("run" !== this.skin.animationName && (this.skin.off(dragonBones.EventObject.COMPLETE), this.playAnim("run", 0)), this.setAngle($util["default"].dirConverAngle(m)), this.setPosition(m.mulSelf(this.speed * t).add(this.getPosition())));
  };

  e.prototype.targetDie = function () {
    this.status = 0;
  };

  e.prototype.updateFrame = function (t) {
    if (!($globalParam["default"].isGamePuase || this.leftTime <= 0)) {
      this.leftTime -= t;
      this.leftTime <= 0 ? this.removeSelf() : this.updateStatus(t);
    }
  };

  e.prototype.updateStatus = function (t) {
    0 === this.status ? this.findTarget(t) : 1 === this.status ? this.findPath(t) : 2 === this.status && this.attack(t);
  };

  e.prototype.playAnim = function (t, e) {
    this.skin.timeScale = $gameContext["default"].ins.gameRatio;
    this.skin.playAnimation(t, e);
  };

  __decorate([h(dragonBones.ArmatureDisplay)], e.prototype, "skin", void 0);

  return __decorate([f], e);
}($baseBullet["default"]);

exports["default"] = y;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXFJCdWxsZXRfNy5qcyJdLCJuYW1lcyI6WyJvIiwiJG9iamVjdCIsInJlcXVpcmUiLCIkdXRpbCIsIiRnbG9iYWxQYXJhbSIsIiRnYW1lQ29udGV4dCIsIiRnYW1lU2tpbGxJbmZvIiwiJGJhc2VCdWxsZXQiLCJwIiwiY2MiLCJfZGVjb3JhdG9yIiwiZiIsImNjY2xhc3MiLCJoIiwicHJvcGVydHkiLCJtIiwiVmVjMyIsInkiLCJ0IiwiZSIsImFwcGx5IiwiYXJndW1lbnRzIiwiYnV0dGxlVHlwZSIsIkJ1bGxldFR5cGUiLCJyX2J1bGxldF83Iiwic2tpbiIsInN0YXR1cyIsImxlZnRUaW1lIiwiZW5lbXlzIiwidGFyZ2V0RW5lbXkiLCJmaW5kTGVmdFRpbWUiLCJhdGtMZWZ0VGltZSIsImF0a0ludGVydmFsVGltZSIsInBvaW50Tm9kZSIsIl9fZXh0ZW5kcyIsInByb3RvdHlwZSIsImluaXRCdXR0bGUiLCJsZW5ndGgiLCJzcGVlZCIsImlucyIsInNraWxsSW5mbyIsInJvYm90UGFyYW0iLCJzZXRBbmdsZSIsImRpckNvbnZlckFuZ2xlIiwiY2FsbCIsImF0ayIsIk1hdGgiLCJjZWlsIiwic2tpbGxQYXJhbSIsInNraWxsQXRrIiwiU2tpbGw0UGFyYW0iLCJGSU5BTCIsInZlbG9jaXR5Iiwic2V0IiwibXVsdGlwbHlTY2FsYXIiLCJvblRyaWdnZXIiLCJpIiwib2JqZWN0IiwiVHJpZ2dlciIsImVudGVyIiwicHVzaCIsImV4aXQiLCJpbmRleE9mIiwic3BsaWNlIiwiYXR0YWNrIiwib2ZmIiwiZHJhZ29uQm9uZXMiLCJFdmVudE9iamVjdCIsIkNPTVBMRVRFIiwicGxheUFuaW0iLCJvbmNlIiwic3VmZmVyQXRrIiwic2tpbGxTcGVjaWFsaXR5cyIsImZpbmRUYXJnZXQiLCJhbmltYXRpb25OYW1lIiwiZ2V0UmFuZ2VSYW5rRW5lbXkiLCJhZGREaWVDYWxsYmFjayIsInRhcmdldERpZSIsImZpbmRQYXRoIiwieCIsImdldFBvc2l0aW9uIiwibm9kZSIsInBvc2l0aW9uIiwieiIsIm5vcm1hbGl6ZVNlbGYiLCJzdWIiLCJhZGQiLCJtdWwiLCJtYWdTcXIiLCJzZXRQb3NpdGlvbiIsIm11bFNlbGYiLCJ1cGRhdGVGcmFtZSIsImlzR2FtZVB1YXNlIiwicmVtb3ZlU2VsZiIsInVwZGF0ZVN0YXR1cyIsInRpbWVTY2FsZSIsImdhbWVSYXRpbyIsInBsYXlBbmltYXRpb24iLCJfX2RlY29yYXRlIiwiQXJtYXR1cmVEaXNwbGF5IiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxDQUFKOztBQUNBLElBQUlDLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFVBQUQsQ0FBckI7O0FBQ0EsSUFBSUMsS0FBSyxHQUFHRCxPQUFPLENBQUMsUUFBRCxDQUFuQjs7QUFDQSxJQUFJRSxZQUFZLEdBQUdGLE9BQU8sQ0FBQyxlQUFELENBQTFCOztBQUNBLElBQUlHLFlBQVksR0FBR0gsT0FBTyxDQUFDLGVBQUQsQ0FBMUI7O0FBQ0EsSUFBSUksY0FBYyxHQUFHSixPQUFPLENBQUMsaUJBQUQsQ0FBNUI7O0FBQ0EsSUFBSUssV0FBVyxHQUFHTCxPQUFPLENBQUMsY0FBRCxDQUF6Qjs7QUFDQSxJQUFJTSxDQUFDLEdBQUdDLEVBQUUsQ0FBQ0MsVUFBWDtBQUNBLElBQUlDLENBQUMsR0FBR0gsQ0FBQyxDQUFDSSxPQUFWO0FBQ0EsSUFBSUMsQ0FBQyxHQUFHTCxDQUFDLENBQUNNLFFBQVY7QUFDQSxJQUFJQyxDQUFDLEdBQUcsSUFBSU4sRUFBRSxDQUFDTyxJQUFQLEVBQVI7O0FBQ0EsSUFBSUMsQ0FBQyxHQUFJLFVBQVVDLENBQVYsRUFBYTtFQUNsQixTQUFTQyxDQUFULEdBQWE7SUFDVCxJQUFJQSxDQUFDLEdBQUksU0FBU0QsQ0FBVCxJQUFjQSxDQUFDLENBQUNFLEtBQUYsQ0FBUSxJQUFSLEVBQWNDLFNBQWQsQ0FBZixJQUE0QyxJQUFwRDtJQUNBRixDQUFDLENBQUNHLFVBQUYsR0FBZWYs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QUFMLENBQWdCdkQsQ0FBaEIsQ0FETixHQUVNLE1BQU0sS0FBS1EsTUFBWCxHQUNBLEtBQUtvRCxRQUFMLENBQWM1RCxDQUFkLENBREEsR0FFQSxNQUFNLEtBQUtRLE1BQVgsSUFBcUIsS0FBS3NDLE1BQUwsQ0FBWTlDLENBQVosQ0FKM0I7RUFLSCxDQU5EOztFQU9BQyxDQUFDLENBQUNnQixTQUFGLENBQVlrQyxRQUFaLEdBQXVCLFVBQVVuRCxDQUFWLEVBQWFDLENBQWIsRUFBZ0I7SUFDbkMsS0FBS00sSUFBTCxDQUFVc0UsU0FBVixHQUFzQjFGLFlBQVksV0FBWixDQUFxQmtDLEdBQXJCLENBQXlCeUQsU0FBL0M7SUFDQSxLQUFLdkUsSUFBTCxDQUFVd0UsYUFBVixDQUF3Qi9FLENBQXhCLEVBQTJCQyxDQUEzQjtFQUNILENBSEQ7O0VBSUErRSxVQUFVLENBQUMsQ0FBQ3JGLENBQUMsQ0FBQ3FELFdBQVcsQ0FBQ2lDLGVBQWIsQ0FBRixDQUFELEVBQW1DaEYsQ0FBQyxDQUFDZ0IsU0FBckMsRUFBZ0QsTUFBaEQsRUFBd0QsS0FBSyxDQUE3RCxDQUFWOztFQUNBLE9BQU8rRCxVQUFVLENBQUMsQ0FBQ3ZGLENBQUQsQ0FBRCxFQUFNUSxDQUFOLENBQWpCO0FBQ0gsQ0FoSU8sQ0FnSUxaLFdBQVcsV0FoSU4sQ0FBUjs7QUFpSUE2RixPQUFPLFdBQVAsR0FBa0JuRixDQUFsQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIG87XHJcbnZhciAkb2JqZWN0ID0gcmVxdWlyZShcIi4vT2JqZWN0XCIpO1xyXG52YXIgJHV0aWwgPSByZXF1aXJlKFwiLi9VdGlsXCIpO1xyXG52YXIgJGdsb2JhbFBhcmFtID0gcmVxdWlyZShcIi4vR2xvYmFsUGFyYW1cIik7XHJcbnZhciAkZ2FtZUNvbnRleHQgPSByZXF1aXJlKFwiLi9HYW1lQ29udGV4dFwiKTtcclxudmFyICRnYW1lU2tpbGxJbmZvID0gcmVxdWlyZShcIi4vR2FtZVNraWxsSW5mb1wiKTtcclxudmFyICRiYXNlQnVsbGV0ID0gcmVxdWlyZShcIi4vQmFzZUJ1bGxldFwiKTtcclxudmFyIHAgPSBjYy5fZGVjb3JhdG9yO1xyXG52YXIgZiA9IHAuY2NjbGFzcztcclxudmFyIGggPSBwLnByb3BlcnR5O1xyXG52YXIgbSA9IG5ldyBjYy5WZWMzKCk7XHJcbnZhciB5ID0gKGZ1bmN0aW9uICh0KSB7XHJcbiAgICBmdW5jdGlvbiBlKCkge1xyXG4gICAgICAgIHZhciBlID0gKG51bGwgIT09IHQgJiYgdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSB8fCB0aGlzO1xyXG4gICAgICAgIGUuYnV0dGxlVHlwZSA9ICRiYXNlQnVsbGV0LkJ1bGxldFR5cGUucl9idWxsZXRfNztcclxuICAgICAgICBlLnNraW4gPSBudWxsO1xyXG4gICAgICAgIGUuc3RhdHVzID0gMDtcclxuICAgICAgICBlLmxlZnRUaW1lID0gMDtcclxuICAgICAgICBlLmVuZW15cyA9IFtdO1xyXG4gICAgICAgIGUudGFyZ2V0RW5lbXkgPSBudWxsO1xyXG4gICAgICAgIGUuZmluZExlZnRUaW1lID0gMDtcclxuICAgICAgICBlLmF0a0xlZnRUaW1lID0gMDtcclxuICAgICAgICBlLmF0a0ludGVydmFsVGltZSA9IDE7XHJcbiAgICAgICAgZS5wb2ludE5vZGUgPSBudWxsO1xyXG4gICAgICAgIHJldHVybiBlO1xyXG4gICAgfVxyXG4gICAgX19leHRlbmRzKGUsIHQpO1xyXG4gICAgZS5wcm90b3R5cGUuaW5pdEJ1dHRsZSA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgdGhpcy5lbmVteXMubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLnRhcmdldEVuZW15ID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNwZWVkID0gJGdhbWVDb250ZXh0LmRlZmF1bHQuaW5zLnNraWxsSW5mby5yb2JvdFBhcmFtWzNdO1xyXG4gICAgICAgIHRoaXMuYXRrSW50ZXJ2YWxUaW1lID0gJGdhbWVDb250ZXh0LmRlZmF1bHQuaW5zLnNraWxsSW5mby5yb2JvdFBhcmFtWzRdO1xyXG4gICAgICAgIHRoaXMubGVmdFRpbWUgPSAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuc2tpbGxJbmZvLnJvYm90UGFyYW1bNV07XHJcbiAgICAgICAgdGhpcy5zZXRBbmdsZSgkdXRpbC5kZWZhdWx0LmRpckNvbnZlckFuZ2xlKGUpKTtcclxuICAgICAgICB0LnByb3RvdHlwZS5pbml0QnV0dGxlLmNhbGwodGhpcywgZSwgbnVsbCk7XHJcbiAgICAgICAgdGhpcy5hdGsgPSBNYXRoLmNlaWwoXHJcbiAgICAgICAgICAgICRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5za2lsbEluZm8ucm9ib3RQYXJhbVswXSAqXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNraWxsUGFyYW0uc2tpbGxBdGtbJGdhbWVTa2lsbEluZm8uU2tpbGw0UGFyYW0uRklOQUxdXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLnN0YXR1cyA9IDA7XHJcbiAgICAgICAgaWYgKGUpIHtcclxuICAgICAgICAgICAgdGhpcy52ZWxvY2l0eS5zZXQoZSkubXVsdGlwbHlTY2FsYXIodGhpcy5zcGVlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLm9uVHJpZ2dlciA9IGZ1bmN0aW9uICh0LCBlKSB7XHJcbiAgICAgICAgdmFyIGkgPSB0Lm9iamVjdDtcclxuICAgICAgICBpZiAoZSA9PT0gJG9iamVjdC5UcmlnZ2VyLmVudGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5lbXlzLnB1c2goaSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGUgPT09ICRvYmplY3QuVHJpZ2dlci5leGl0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbyA9IHRoaXMuZW5lbXlzLmluZGV4T2YoaSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoLTEgIT09IG8pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZW15cy5zcGxpY2UobywgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuYXR0YWNrID0gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICB2YXIgZSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5hdGtMZWZ0VGltZSAtPSB0O1xyXG4gICAgICAgIGlmICghKHRoaXMuYXRrTGVmdFRpbWUgPiAwKSkge1xyXG4gICAgICAgICAgICB0aGlzLmF0a0xlZnRUaW1lID0gMTtcclxuICAgICAgICAgICAgdGhpcy5za2luLm9mZihkcmFnb25Cb25lcy5FdmVudE9iamVjdC5DT01QTEVURSk7XHJcbiAgICAgICAgICAgIHRoaXMucGxheUFuaW0oXCJoaXRcIiwgMSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2tpbi5vbmNlKFxyXG4gICAgICAgICAgICAgICAgZHJhZ29uQm9uZXMuRXZlbnRPYmplY3QuQ09NUExFVEUsXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5hdGtMZWZ0VGltZSA9IGUuYXRrSW50ZXJ2YWxUaW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIGUucGxheUFuaW0oXCJzdGFuZFwiLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoMCAhPT0gZS5zdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdGF0dXMgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5lbmVteXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5lbXlzW2ldLnN1ZmZlckF0ayh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbGxTcGVjaWFsaXR5czogdGhpcy5za2lsbFNwZWNpYWxpdHlzLFxyXG4gICAgICAgICAgICAgICAgICAgIGF0azogdGhpcy5hdGtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmZpbmRUYXJnZXQgPSBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIGlmIChcInN0YW5kXCIgIT09IHRoaXMuc2tpbi5hbmltYXRpb25OYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2tpbi5vZmYoZHJhZ29uQm9uZXMuRXZlbnRPYmplY3QuQ09NUExFVEUpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXlBbmltKFwic3RhbmRcIiwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZmluZExlZnRUaW1lIC09IHQ7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluZExlZnRUaW1lIDw9IDApIHtcclxuICAgICAgICAgICAgdGhpcy5maW5kTGVmdFRpbWUgPSAxO1xyXG4gICAgICAgICAgICB2YXIgZSA9ICRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5nZXRSYW5nZVJhbmtFbmVteShcclxuICAgICAgICAgICAgICAgIHRoaXMucG9pbnROb2RlLFxyXG4gICAgICAgICAgICAgICAgJGdhbWVDb250ZXh0LmRlZmF1bHQuaW5zLnNraWxsSW5mby5yb2JvdFBhcmFtWzJdXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGlmIChlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhcmdldEVuZW15ID0gZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0RW5lbXkuYWRkRGllQ2FsbGJhY2sodGhpcy50YXJnZXREaWUsIHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmZpbmRQYXRoID0gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICBtLnggPSB0aGlzLnRhcmdldEVuZW15LmdldFBvc2l0aW9uKCkueCAtIHRoaXMubm9kZS5wb3NpdGlvbi54O1xyXG4gICAgICAgIG0ueSA9IHRoaXMudGFyZ2V0RW5lbXkuZ2V0UG9zaXRpb24oKS55IC0gdGhpcy5ub2RlLnBvc2l0aW9uLnk7XHJcbiAgICAgICAgbS56ID0gMDtcclxuICAgICAgICBtLm5vcm1hbGl6ZVNlbGYoKTtcclxuICAgICAgICB0aGlzLnRhcmdldEVuZW15XHJcbiAgICAgICAgICAgIC5nZXRQb3NpdGlvbigpXHJcbiAgICAgICAgICAgIC5zdWIodGhpcy5ub2RlLnBvc2l0aW9uLmFkZChtLm11bCg1MCkpKVxyXG4gICAgICAgICAgICAubWFnU3FyKCkgPCAyMjUwMFxyXG4gICAgICAgICAgICA/IDAgIT09IHRoaXMuc3RhdHVzICYmICh0aGlzLnN0YXR1cyA9IDIpXHJcbiAgICAgICAgICAgIDogKFwicnVuXCIgIT09IHRoaXMuc2tpbi5hbmltYXRpb25OYW1lICYmXHJcbiAgICAgICAgICAgICAgICAgICh0aGlzLnNraW4ub2ZmKGRyYWdvbkJvbmVzLkV2ZW50T2JqZWN0LkNPTVBMRVRFKSwgdGhpcy5wbGF5QW5pbShcInJ1blwiLCAwKSksXHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRBbmdsZSgkdXRpbC5kZWZhdWx0LmRpckNvbnZlckFuZ2xlKG0pKSxcclxuICAgICAgICAgICAgICB0aGlzLnNldFBvc2l0aW9uKG0ubXVsU2VsZih0aGlzLnNwZWVkICogdCkuYWRkKHRoaXMuZ2V0UG9zaXRpb24oKSkpKTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS50YXJnZXREaWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0dXMgPSAwO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLnVwZGF0ZUZyYW1lID0gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICBpZiAoISgkZ2xvYmFsUGFyYW0uZGVmYXVsdC5pc0dhbWVQdWFzZSB8fCB0aGlzLmxlZnRUaW1lIDw9IDApKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGVmdFRpbWUgLT0gdDtcclxuICAgICAgICAgICAgdGhpcy5sZWZ0VGltZSA8PSAwID8gdGhpcy5yZW1vdmVTZWxmKCkgOiB0aGlzLnVwZGF0ZVN0YXR1cyh0KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUudXBkYXRlU3RhdHVzID0gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAwID09PSB0aGlzLnN0YXR1c1xyXG4gICAgICAgICAgICA/IHRoaXMuZmluZFRhcmdldCh0KVxyXG4gICAgICAgICAgICA6IDEgPT09IHRoaXMuc3RhdHVzXHJcbiAgICAgICAgICAgID8gdGhpcy5maW5kUGF0aCh0KVxyXG4gICAgICAgICAgICA6IDIgPT09IHRoaXMuc3RhdHVzICYmIHRoaXMuYXR0YWNrKHQpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLnBsYXlBbmltID0gZnVuY3Rpb24gKHQsIGUpIHtcclxuICAgICAgICB0aGlzLnNraW4udGltZVNjYWxlID0gJGdhbWVDb250ZXh0LmRlZmF1bHQuaW5zLmdhbWVSYXRpbztcclxuICAgICAgICB0aGlzLnNraW4ucGxheUFuaW1hdGlvbih0LCBlKTtcclxuICAgIH07XHJcbiAgICBfX2RlY29yYXRlKFtoKGRyYWdvbkJvbmVzLkFybWF0dXJlRGlzcGxheSldLCBlLnByb3RvdHlwZSwgXCJza2luXCIsIHZvaWQgMCk7XHJcbiAgICByZXR1cm4gX19kZWNvcmF0ZShbZl0sIGUpO1xyXG59KSgkYmFzZUJ1bGxldC5kZWZhdWx0KTtcclxuZXhwb3J0cy5kZWZhdWx0ID0geTtcclxuIl19