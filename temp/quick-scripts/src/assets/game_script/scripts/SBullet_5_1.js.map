{"version":3,"sources":["assets\\game_script\\scripts\\SBullet_5_1.js"],"names":["o","$object","require","$gameContext","$baseBullet","c","cc","_decorator","u","ccclass","d","property","p","Vec3","f","t","e","apply","arguments","buttleType","BulletType","s_bullet_5_1","boomAnim","leftTime","targetY","attackedEnemy","Set","__extends","prototype","initButtle","speed","ins","skillInfo","skinParam","call","velocity","set","multiplyScalar","setAngle","setScale","v3","Math","abs","getPosition","y","atk","skinAtk","node","children","active","onTrigger","Trigger","stay","i","object","has","add","sufferAtk","skillSpecialitys","updateFrame","playAnim","x","z","setPosition","trigger","once","Animation","EventType","FINISHED","clear","removeSelf","play","gameRatio","__decorate","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $object = require(\"./Object\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar c = cc._decorator;\r\nvar u = c.ccclass;\r\nvar d = c.property;\r\nvar p = new cc.Vec3();\r\nvar f = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.buttleType = $baseBullet.BulletType.s_bullet_5_1;\r\n        e.boomAnim = null;\r\n        e.leftTime = 0;\r\n        e.targetY = 0;\r\n        e.attackedEnemy = new Set();\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.initButtle = function (e) {\r\n        this.speed = $gameContext.default.ins.skillInfo.skinParam[3];\r\n        t.prototype.initButtle.call(this, e, null);\r\n        if (e) {\r\n            this.velocity.set(e).multiplyScalar(this.speed);\r\n        }\r\n        this.setAngle(0);\r\n        this.setScale(\r\n            cc.v3($gameContext.default.ins.skillInfo.skinParam[4], $gameContext.default.ins.skillInfo.skinParam[4])\r\n        );\r\n        this.leftTime = Math.abs(this.getPosition().y - this.targetY) / this.speed;\r\n        this.atk = $gameContext.default.ins.skillInfo.skinAtk;\r\n        this.node.children[0].active = !0;\r\n        this.node.children[1].active = !1;\r\n    };\r\n    e.prototype.onTrigger = function (t, e) {\r\n        if (e == $object.Trigger.stay) {\r\n            var i = t.object;\r\n            if (!this.attackedEnemy.has(i)) {\r\n                this.attackedEnemy.add(i);\r\n                i.sufferAtk({\r\n                    skillSpecialitys: this.skillSpecialitys,\r\n                    atk: this.atk\r\n                });\r\n            }\r\n        }\r\n    };\r\n    e.prototype.updateFrame = function (t) {\r\n        if (!(this.leftTime <= 0)) {\r\n            this.leftTime -= t;\r\n            if (this.leftTime <= 0) {\r\n                this.node.children[0].active = !1;\r\n                this.node.children[1].active = !0;\r\n                return this.playAnim();\r\n            }\r\n            var e = this.getPosition();\r\n            var i = this.velocity;\r\n            p.x = e.x + i.x * t;\r\n            p.y = e.y + i.y * t;\r\n            p.z = e.z + i.z * t;\r\n            this.setPosition(p);\r\n        }\r\n    };\r\n    e.prototype.playAnim = function () {\r\n        var t = this;\r\n        this.trigger = !0;\r\n        this.boomAnim.once(\r\n            cc.Animation.EventType.FINISHED,\r\n            function () {\r\n                t.trigger = !1;\r\n                t.attackedEnemy.clear();\r\n                t.removeSelf();\r\n            },\r\n            this\r\n        );\r\n        this.boomAnim.play().speed = $gameContext.default.ins.gameRatio;\r\n    };\r\n    __decorate([d(cc.Animation)], e.prototype, \"boomAnim\", void 0);\r\n    return __decorate([u], e);\r\n})($baseBullet.default);\r\nexports.default = f;\r\n"]}