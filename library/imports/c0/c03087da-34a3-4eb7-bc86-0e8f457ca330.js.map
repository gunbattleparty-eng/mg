{"version":3,"sources":["assets\\game_script\\scripts\\UICache.js"],"names":["exports","UICache","$resManager","require","$uIView","s","t","currViewManager","Map","cacheViewManager","baseUIMap","baseUICache","popBgPrefab","popBg","cc","NodePool","prototype","getPopBg","size","get","instantiate","setPopBg","put","removeBaseUICache","has","setBaseUI","e","set","getBaseUI","console","warn","UIView","getComponent","cacheBaseUI","node","getCurrView","putCurrView","push","removeCurrView","i","indexOf","splice","getCacheView","ResManager","instance","cacheView","isCache","destroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["exports.UICache = void 0;\r\nvar $resManager = require(\"./ResManager\");\r\nvar $uIView = require(\"./UIView\");\r\nvar s = (function () {\r\n    function t() {\r\n        this.currViewManager = new Map();\r\n        this.cacheViewManager = new Map();\r\n        this.baseUIMap = new Map();\r\n        this.baseUICache = new Map();\r\n        this.popBgPrefab = null;\r\n        this.popBg = new cc.NodePool();\r\n    }\r\n    t.prototype.getPopBg = function () {\r\n        return this.popBg.size() > 0 ? this.popBg.get() : cc.instantiate(this.popBgPrefab);\r\n    };\r\n    t.prototype.setPopBg = function (t) {\r\n        this.popBg.put(t);\r\n    };\r\n    t.prototype.removeBaseUICache = function (t) {\r\n        if (this.baseUIMap.has(t)) {\r\n            this.baseUIMap.delete(t);\r\n        }\r\n    };\r\n    t.prototype.setBaseUI = function (t, e) {\r\n        this.baseUIMap.set(t, e);\r\n    };\r\n    t.prototype.getBaseUI = function (t) {\r\n        if (!this.baseUIMap.has(t)) {\r\n            console.warn(\"没有初始化预制体：\", t);\r\n            return null;\r\n        }\r\n        if (!this.baseUICache.has(t)) {\r\n            var e = new cc.NodePool($uIView.UIView);\r\n            this.baseUICache.set(t, e);\r\n        }\r\n        return this.baseUICache.get(t).size() > 0\r\n            ? this.baseUICache.get(t).get().getComponent($uIView.UIView)\r\n            : cc.instantiate(this.baseUIMap.get(t)).getComponent($uIView.UIView);\r\n    };\r\n    t.prototype.cacheBaseUI = function (t, e) {\r\n        this.baseUICache.get(t).put(e.node);\r\n    };\r\n    t.prototype.getCurrView = function (t) {\r\n        return this.currViewManager.has(t) ? this.currViewManager.get(t) : [];\r\n    };\r\n    t.prototype.putCurrView = function (t, e) {\r\n        if (!this.currViewManager.has(t)) {\r\n            this.currViewManager.set(t, []);\r\n        }\r\n        this.currViewManager.get(t).push(e);\r\n    };\r\n    t.prototype.removeCurrView = function (t, e) {\r\n        var i = this.currViewManager.get(t).indexOf(e);\r\n        return -1 !== i && (this.currViewManager.get(t).splice(i, 1), !0);\r\n    };\r\n    t.prototype.getCacheView = function (t) {\r\n        if (this.cacheViewManager.has(t) && this.cacheViewManager.get(t).size() > 0) {\r\n            return this.cacheViewManager.get(t).get();\r\n        }\r\n        var e = $resManager.ResManager.instance.get(t);\r\n        return e ? cc.instantiate(e) : null;\r\n    };\r\n    t.prototype.cacheView = function (t, e) {\r\n        if (!this.cacheViewManager.has(t)) {\r\n            this.cacheViewManager.set(t, new cc.NodePool($uIView.UIView));\r\n        }\r\n        e.isCache ? this.cacheViewManager.get(t).put(e.node) : e.node.destroy();\r\n    };\r\n    t.instance = new t();\r\n    return t;\r\n})();\r\nexports.UICache = s;\r\n"]}