
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/Bullet_17_1.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '760f6oDlEdMuq2ISIY/AUgx', 'Bullet_17_1');
// game_script/scripts/Bullet_17_1.js

"use strict";

var o;

var $object = require("./Object");

var $countDownUtil = require("./CountDownUtil");

var $configContext = require("./ConfigContext");

var $gameContext = require("./GameContext");

var $gameSkillInfo = require("./GameSkillInfo");

var $enemyStatus = require("./EnemyStatus");

var p = cc._decorator;
var f = p.ccclass;
var h = (p.property, cc.size(0, 0), cc.Vec3.ZERO);

var m = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.targetId = -1;
    e.atk = 0;
    return e;
  }

  __extends(e, t);

  e.prototype.refreshBullet17 = function (t, e, i) {
    if (!this.skillParam) {
      this.skillParam = $gameContext["default"].ins.skillInfo.getSkillById(116);
    }

    this.targetId = t;
    h.x = i / 100;
    h.y = this.skillParam.guideLaserWidth;
    this.setScale(h);
    this.setAngle(e);
    this.atk = Math.ceil(0.5 * this.skillParam.skillAtk[$gameSkillInfo.Skill4Param.FINAL]);
  };

  e.prototype.onTrigger = function (t, e) {
    var i = t.object;

    if (!(i.id === this.targetId || this.node.scaleX <= 0)) {
      if (e === $object.Trigger.stay || e === $object.Trigger.enter) {
        if ($countDownUtil.CountDownUtil.time - i.getLastAtkTime(3) <= this.skillParam.guideLaserAtkInterval / $gameContext["default"].ins.gameRatio) {
          return;
        }

        i.setLastAtkTime(3, $countDownUtil.CountDownUtil.time);

        if (i.sufferAtk({
          id: 116,
          skillSpecialitys: $configContext["default"].instance.basicSkillConfigMap.get(116).skill_tpye,
          atk: this.atk
        })) {
          this.skillParam.addGuideLaserAtkAdd();
        }
      }

      if (e === $object.Trigger.enter) {
        if (this.skillParam.guideLaserBurnTime > 0) {
          var o = {
            type: $enemyStatus.EnemyDebuffType.BURN,
            timeLeft: this.skillParam.guideLaserBurnTime,
            value: this.skillParam.guideLaserBurnAtk[$gameSkillInfo.Skill4Param.FINAL]
          };
          i.sufferDebuff(o);
        }

        if (this.skillParam.guideLaserBack > 0) {
          o = {
            type: $enemyStatus.EnemyDebuffType.BACK,
            timeLeft: -1,
            value: this.skillParam.guideLaserBack
          };
          i.sufferDebuff(o);
        }
      }
    }
  };

  return __decorate([f], e);
}($object.cObject);

exports["default"] = m;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXEJ1bGxldF8xN18xLmpzIl0sIm5hbWVzIjpbIm8iLCIkb2JqZWN0IiwicmVxdWlyZSIsIiRjb3VudERvd25VdGlsIiwiJGNvbmZpZ0NvbnRleHQiLCIkZ2FtZUNvbnRleHQiLCIkZ2FtZVNraWxsSW5mbyIsIiRlbmVteVN0YXR1cyIsInAiLCJjYyIsIl9kZWNvcmF0b3IiLCJmIiwiY2NjbGFzcyIsImgiLCJwcm9wZXJ0eSIsInNpemUiLCJWZWMzIiwiWkVSTyIsIm0iLCJ0IiwiZSIsImFwcGx5IiwiYXJndW1lbnRzIiwidGFyZ2V0SWQiLCJhdGsiLCJfX2V4dGVuZHMiLCJwcm90b3R5cGUiLCJyZWZyZXNoQnVsbGV0MTciLCJpIiwic2tpbGxQYXJhbSIsImlucyIsInNraWxsSW5mbyIsImdldFNraWxsQnlJZCIsIngiLCJ5IiwiZ3VpZGVMYXNlcldpZHRoIiwic2V0U2NhbGUiLCJzZXRBbmdsZSIsIk1hdGgiLCJjZWlsIiwic2tpbGxBdGsiLCJTa2lsbDRQYXJhbSIsIkZJTkFMIiwib25UcmlnZ2VyIiwib2JqZWN0IiwiaWQiLCJub2RlIiwic2NhbGVYIiwiVHJpZ2dlciIsInN0YXkiLCJlbnRlciIsIkNvdW50RG93blV0aWwiLCJ0aW1lIiwiZ2V0TGFzdEF0a1RpbWUiLCJndWlkZUxhc2VyQXRrSW50ZXJ2YWwiLCJnYW1lUmF0aW8iLCJzZXRMYXN0QXRrVGltZSIsInN1ZmZlckF0ayIsInNraWxsU3BlY2lhbGl0eXMiLCJpbnN0YW5jZSIsImJhc2ljU2tpbGxDb25maWdNYXAiLCJnZXQiLCJza2lsbF90cHllIiwiYWRkR3VpZGVMYXNlckF0a0FkZCIsImd1aWRlTGFzZXJCdXJuVGltZSIsInR5cGUiLCJFbmVteURlYnVmZlR5cGUiLCJCVVJOIiwidGltZUxlZnQiLCJ2YWx1ZSIsImd1aWRlTGFzZXJCdXJuQXRrIiwic3VmZmVyRGVidWZmIiwiZ3VpZGVMYXNlckJhY2siLCJCQUNLIiwiX19kZWNvcmF0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Q0FBZ0IyQztVQUh2QixDQUFKO1VBS0E1QyxDQUFDLENBQUMyQyxZQUFGLENBQWV2RSxDQUFmO1FBQ0g7TUFDSjtJQUNKO0VBQ0osQ0F4Q0Q7O0VBeUNBLE9BQU8wRSxVQUFVLENBQUMsQ0FBQy9ELENBQUQsQ0FBRCxFQUFNUyxDQUFOLENBQWpCO0FBQ0gsQ0E3RE8sQ0E2RExuQixPQUFPLENBQUMwRSxPQTdESCxDQUFSOztBQThEQUMsT0FBTyxXQUFQLEdBQWtCMUQsQ0FBbEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBvO1xyXG52YXIgJG9iamVjdCA9IHJlcXVpcmUoXCIuL09iamVjdFwiKTtcclxudmFyICRjb3VudERvd25VdGlsID0gcmVxdWlyZShcIi4vQ291bnREb3duVXRpbFwiKTtcclxudmFyICRjb25maWdDb250ZXh0ID0gcmVxdWlyZShcIi4vQ29uZmlnQ29udGV4dFwiKTtcclxudmFyICRnYW1lQ29udGV4dCA9IHJlcXVpcmUoXCIuL0dhbWVDb250ZXh0XCIpO1xyXG52YXIgJGdhbWVTa2lsbEluZm8gPSByZXF1aXJlKFwiLi9HYW1lU2tpbGxJbmZvXCIpO1xyXG52YXIgJGVuZW15U3RhdHVzID0gcmVxdWlyZShcIi4vRW5lbXlTdGF0dXNcIik7XHJcbnZhciBwID0gY2MuX2RlY29yYXRvcjtcclxudmFyIGYgPSBwLmNjY2xhc3M7XHJcbnZhciBoID0gKHAucHJvcGVydHksIGNjLnNpemUoMCwgMCksIGNjLlZlYzMuWkVSTyk7XHJcbnZhciBtID0gKGZ1bmN0aW9uICh0KSB7XHJcbiAgICBmdW5jdGlvbiBlKCkge1xyXG4gICAgICAgIHZhciBlID0gKG51bGwgIT09IHQgJiYgdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSB8fCB0aGlzO1xyXG4gICAgICAgIGUudGFyZ2V0SWQgPSAtMTtcclxuICAgICAgICBlLmF0ayA9IDA7XHJcbiAgICAgICAgcmV0dXJuIGU7XHJcbiAgICB9XHJcbiAgICBfX2V4dGVuZHMoZSwgdCk7XHJcbiAgICBlLnByb3RvdHlwZS5yZWZyZXNoQnVsbGV0MTcgPSBmdW5jdGlvbiAodCwgZSwgaSkge1xyXG4gICAgICAgIGlmICghdGhpcy5za2lsbFBhcmFtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2tpbGxQYXJhbSA9ICRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5za2lsbEluZm8uZ2V0U2tpbGxCeUlkKDExNik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0O1xyXG4gICAgICAgIGgueCA9IGkgLyAxMDA7XHJcbiAgICAgICAgaC55ID0gdGhpcy5za2lsbFBhcmFtLmd1aWRlTGFzZXJXaWR0aDtcclxuICAgICAgICB0aGlzLnNldFNjYWxlKGgpO1xyXG4gICAgICAgIHRoaXMuc2V0QW5nbGUoZSk7XHJcbiAgICAgICAgdGhpcy5hdGsgPSBNYXRoLmNlaWwoMC41ICogdGhpcy5za2lsbFBhcmFtLnNraWxsQXRrWyRnYW1lU2tpbGxJbmZvLlNraWxsNFBhcmFtLkZJTkFMXSk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUub25UcmlnZ2VyID0gZnVuY3Rpb24gKHQsIGUpIHtcclxuICAgICAgICB2YXIgaSA9IHQub2JqZWN0O1xyXG4gICAgICAgIGlmICghKGkuaWQgPT09IHRoaXMudGFyZ2V0SWQgfHwgdGhpcy5ub2RlLnNjYWxlWCA8PSAwKSkge1xyXG4gICAgICAgICAgICBpZiAoZSA9PT0gJG9iamVjdC5UcmlnZ2VyLnN0YXkgfHwgZSA9PT0gJG9iamVjdC5UcmlnZ2VyLmVudGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgJGNvdW50RG93blV0aWwuQ291bnREb3duVXRpbC50aW1lIC0gaS5nZXRMYXN0QXRrVGltZSgzKSA8PVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2tpbGxQYXJhbS5ndWlkZUxhc2VyQXRrSW50ZXJ2YWwgLyAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuZ2FtZVJhdGlvXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpLnNldExhc3RBdGtUaW1lKDMsICRjb3VudERvd25VdGlsLkNvdW50RG93blV0aWwudGltZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgaS5zdWZmZXJBdGsoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogMTE2LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBza2lsbFNwZWNpYWxpdHlzOiAkY29uZmlnQ29udGV4dC5kZWZhdWx0Lmluc3RhbmNlLmJhc2ljU2tpbGxDb25maWdNYXAuZ2V0KDExNikuc2tpbGxfdHB5ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXRrOiB0aGlzLmF0a1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNraWxsUGFyYW0uYWRkR3VpZGVMYXNlckF0a0FkZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChlID09PSAkb2JqZWN0LlRyaWdnZXIuZW50ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNraWxsUGFyYW0uZ3VpZGVMYXNlckJ1cm5UaW1lID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAkZW5lbXlTdGF0dXMuRW5lbXlEZWJ1ZmZUeXBlLkJVUk4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVMZWZ0OiB0aGlzLnNraWxsUGFyYW0uZ3VpZGVMYXNlckJ1cm5UaW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5za2lsbFBhcmFtLmd1aWRlTGFzZXJCdXJuQXRrWyRnYW1lU2tpbGxJbmZvLlNraWxsNFBhcmFtLkZJTkFMXVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgaS5zdWZmZXJEZWJ1ZmYobyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5za2lsbFBhcmFtLmd1aWRlTGFzZXJCYWNrID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG8gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICRlbmVteVN0YXR1cy5FbmVteURlYnVmZlR5cGUuQkFDSyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZUxlZnQ6IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5za2lsbFBhcmFtLmd1aWRlTGFzZXJCYWNrXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBpLnN1ZmZlckRlYnVmZihvKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gX19kZWNvcmF0ZShbZl0sIGUpO1xyXG59KSgkb2JqZWN0LmNPYmplY3QpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBtO1xyXG4iXX0=