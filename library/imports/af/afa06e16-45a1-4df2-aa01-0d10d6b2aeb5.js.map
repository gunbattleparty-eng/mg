{"version":3,"sources":["assets\\game_script\\scripts\\ShopBoxItem.js"],"names":["o","$assetsMap","require","$eventManager","$popupManager","$uIManager","$platform","$remoteAudio","$seedUtil","$aD","$adService","$configContext","$localEventName","$roleContext","$shopContext","$taskContext","$userDataContext","$coinDiamondView","$startView","A","cc","_decorator","S","ccclass","C","property","I","t","e","apply","arguments","btnLayer","normalOPen1Btn","normalOPen10Btn","normalAdBtn","normalCount","normalProgressNode","advancedOPen1Btn","advancedOPen10Btn","advancedAdBtn","advancedCount","advancedProgressNode","excellentOPen1Btn","excellentOPen10Btn","excellentAdBtn","excellentCount","excellentProgressNode","boxAnimNode","dir","count","isSheep","__extends","prototype","start","Platform","currPlatForm","PlatformEnum","TOU_TIAO","WECHAT","instance","getAdSwitch","gemBoxConfigs","video_num","VLottery_num","renderBtn","renderSkinBtn","renderCount","renderSkinCount","Ins","getEgg","getComponentInChildren","dragonBones","ArmatureDisplay","playAnimation","Label","string","on","clickNormalOPen1","clickNormalOPen10","clickNormalAd","clickAdvancedOPen1","clickAdvancedOPen10","clickAdvancedAd","clickSkinBox1","clickSkinBox10","clickSkinBoxAd","children","length","clickTip","Node","EventType","TOUCH_END","touchBoxAnim","TOUCH_MOVE","moveBoxAnim","indexOf","node","PopupManager","open","AssetsMap","PopUpBundles","prefabs","assetsList","ChanceView","id","onDestroy","off","UIManager","showToast","once","EventObject","COMPLETE","setEgg","gemConfigs","filter","Grade","randomFrom","ins","addPackItem","RewardView","infos","createInfo","send","RENDER_GEM","MenuType","ALL","i","getStartLocation","x","getLocation","stopPropagationImmediate","EggKeyView","type","closeCallback","playEffectMusic","opearDiamond","spend","getNormalBoxRecord","CoinDiamondView","AstType","DIAMON","getRobotBox","gems","robots","push","num","ext","getSkinBoxRecord","showRewardedVideo","toutiao","report","getSkinBoxVideoRecord","setSkinBoxVideoRecord","getBoxVideoRecord","setBoxVideoRecord","getAdvancedBoxRecord","setTaskRecord","getComponent","toString","active","boxRewardRecord","normal","advanced","renderProgress","skin","setContentSize","size","height","__decorate","Component","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $popupManager = require(\"./PopupManager\");\r\nvar $uIManager = require(\"./UIManager\");\r\nvar $platform = require(\"./Platform\");\r\nvar $remoteAudio = require(\"./RemoteAudio\");\r\nvar $seedUtil = require(\"./SeedUtil\");\r\nvar $aD = require(\"./AD\");\r\nvar $adService = require(\"./AdService\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $roleContext = require(\"./RoleContext\");\r\nvar $shopContext = require(\"./ShopContext\");\r\nvar $taskContext = require(\"./TaskContext\");\r\nvar $userDataContext = require(\"./UserDataContext\");\r\nvar $coinDiamondView = require(\"./CoinDiamondView\");\r\nvar $startView = require(\"./StartView\");\r\nvar A = cc._decorator;\r\nvar S = A.ccclass;\r\nvar C = A.property;\r\nvar I = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.btnLayer = null;\r\n        e.normalOPen1Btn = null;\r\n        e.normalOPen10Btn = null;\r\n        e.normalAdBtn = null;\r\n        e.normalCount = null;\r\n        e.normalProgressNode = null;\r\n        e.advancedOPen1Btn = null;\r\n        e.advancedOPen10Btn = null;\r\n        e.advancedAdBtn = null;\r\n        e.advancedCount = null;\r\n        e.advancedProgressNode = null;\r\n        e.excellentOPen1Btn = null;\r\n        e.excellentOPen10Btn = null;\r\n        e.excellentAdBtn = null;\r\n        e.excellentCount = null;\r\n        e.excellentProgressNode = null;\r\n        e.boxAnimNode = null;\r\n        e.dir = 1;\r\n        e.count = 0;\r\n        e.isSheep = !1;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.start = function () {\r\n        var t = \"\";\r\n        $platform.Platform.currPlatForm === $platform.PlatformEnum.TOU_TIAO\r\n            ? (t = \"tt_open_shop_diamond\")\r\n            : $platform.Platform.currPlatForm === $platform.PlatformEnum.WECHAT && (t = \"wx_open_shop_diamond\");\r\n        if (!(\"\" === t || $configContext.default.instance.getAdSwitch(t))) {\r\n            $configContext.default.instance.gemBoxConfigs[0].video_num = 1;\r\n            $configContext.default.instance.gemBoxConfigs[0].VLottery_num = 1;\r\n            $configContext.default.instance.gemBoxConfigs[1].video_num = 1;\r\n            $configContext.default.instance.gemBoxConfigs[1].VLottery_num = 1;\r\n            $configContext.default.instance.gemBoxConfigs[2].video_num = 1;\r\n            $configContext.default.instance.gemBoxConfigs[2].VLottery_num = 1;\r\n        }\r\n        this.renderBtn(!1);\r\n        this.renderBtn(!0);\r\n        this.renderSkinBtn();\r\n        this.renderCount(!1);\r\n        this.renderCount(!0);\r\n        this.renderSkinCount();\r\n        this.isSheep = 1 === $userDataContext.default.Ins.getEgg(2);\r\n        if (this.isSheep) {\r\n            this.boxAnimNode.getComponentInChildren(dragonBones.ArmatureDisplay).playAnimation(\"biyan\", 0);\r\n        }\r\n        this.normalAdBtn.getComponentInChildren(cc.Label).string =\r\n            \"抽\" + $configContext.default.instance.gemBoxConfigs[0].VLottery_num + \"次\";\r\n        this.advancedAdBtn.getComponentInChildren(cc.Label).string =\r\n            \"抽\" + $configContext.default.instance.gemBoxConfigs[1].VLottery_num + \"次\";\r\n        this.excellentAdBtn.getComponentInChildren(cc.Label).string =\r\n            \"抽\" + $configContext.default.instance.gemBoxConfigs[2].VLottery_num + \"次\";\r\n        this.normalOPen1Btn.on(\"click\", this.clickNormalOPen1, this);\r\n        this.normalOPen10Btn.on(\"click\", this.clickNormalOPen10, this);\r\n        this.normalAdBtn.on(\"click\", this.clickNormalAd, this);\r\n        this.advancedOPen1Btn.on(\"click\", this.clickAdvancedOPen1, this);\r\n        this.advancedOPen10Btn.on(\"click\", this.clickAdvancedOPen10, this);\r\n        this.advancedAdBtn.on(\"click\", this.clickAdvancedAd, this);\r\n        this.excellentOPen1Btn.on(\"click\", this.clickSkinBox1, this);\r\n        this.excellentOPen10Btn.on(\"click\", this.clickSkinBox10, this);\r\n        this.excellentAdBtn.on(\"click\", this.clickSkinBoxAd, this);\r\n        for (var e = 0; e < this.btnLayer.children.length; e++) {\r\n            this.btnLayer.children[e].on(\"click\", this.clickTip, this);\r\n        }\r\n        if ($userDataContext.default.Ins.getEgg(2) < 2) {\r\n            this.boxAnimNode.on(cc.Node.EventType.TOUCH_END, this.touchBoxAnim, this);\r\n            this.boxAnimNode.on(cc.Node.EventType.TOUCH_MOVE, this.moveBoxAnim, this);\r\n        }\r\n    };\r\n    e.prototype.clickTip = function (t) {\r\n        var e = this.btnLayer.children.indexOf(t.node) + 1;\r\n        $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.ChanceView, {\r\n            id: e\r\n        });\r\n    };\r\n    e.prototype.onDestroy = function () {\r\n        this.normalOPen1Btn.off(\"click\", this.clickNormalOPen1, this);\r\n        this.normalOPen10Btn.off(\"click\", this.clickNormalOPen10, this);\r\n        this.normalAdBtn.off(\"click\", this.clickNormalAd, this);\r\n        this.advancedOPen1Btn.off(\"click\", this.clickAdvancedOPen1, this);\r\n        this.advancedOPen10Btn.off(\"click\", this.clickAdvancedOPen10, this);\r\n        this.advancedAdBtn.off(\"click\", this.clickAdvancedAd, this);\r\n        this.excellentOPen1Btn.off(\"click\", this.clickSkinBox1, this);\r\n        this.excellentOPen10Btn.off(\"click\", this.clickSkinBox10, this);\r\n        this.excellentAdBtn.off(\"click\", this.clickSkinBoxAd, this);\r\n    };\r\n    e.prototype.touchBoxAnim = function () {\r\n        if ($userDataContext.default.Ins.getEgg(1) < 1) {\r\n            if (this.isSheep) {\r\n                $uIManager.UIManager.instance.showToast(\"缺少钥匙\");\r\n            } else {\r\n                {\r\n                    var t = this.boxAnimNode.getComponentInChildren(dragonBones.ArmatureDisplay);\r\n                    t.playAnimation(\"yao\", 1);\r\n                    t.once(\r\n                        dragonBones.EventObject.COMPLETE,\r\n                        function () {\r\n                            t.playAnimation(\"stand\", 0);\r\n                        },\r\n                        this\r\n                    );\r\n                }\r\n            }\r\n        } else {\r\n            if (1 === $userDataContext.default.Ins.getEgg(1)) {\r\n                if (this.isSheep) {\r\n                    $userDataContext.default.Ins.setEgg(1, 2);\r\n                    $userDataContext.default.Ins.setEgg(2, 2);\r\n                    this.boxAnimNode.getComponentInChildren(dragonBones.ArmatureDisplay).playAnimation(\"stand\", 0);\r\n                    var e = $configContext.default.instance.gemConfigs.filter(function (t) {\r\n                        return 7 === t.Grade;\r\n                    });\r\n                    e = [e[$seedUtil.default.randomFrom(0, e.length - 1)]];\r\n                    $roleContext.default.ins.addPackItem(e[0], 1);\r\n                    $popupManager.PopupManager.instance.open(\r\n                        $assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.RewardView,\r\n                        {\r\n                            infos: this.createInfo(e)\r\n                        }\r\n                    );\r\n                    $eventManager.default.send($localEventName.default.RENDER_GEM, $startView.MenuType.ALL);\r\n                } else {\r\n                    var i = this.boxAnimNode.getComponentInChildren(dragonBones.ArmatureDisplay);\r\n                    i.playAnimation(\"yao\", 1);\r\n                    i.once(\r\n                        dragonBones.EventObject.COMPLETE,\r\n                        function () {\r\n                            i.playAnimation(\"stand\", 0);\r\n                        },\r\n                        this\r\n                    );\r\n                }\r\n            }\r\n        }\r\n    };\r\n    e.prototype.moveBoxAnim = function (t) {\r\n        var e = this;\r\n        if (!(this.count >= 3)) {\r\n            -1 === this.dir\r\n                ? t.getStartLocation().x - t.getLocation().x >= 100 && (this.count++, (this.dir = 1))\r\n                : t.getLocation().x - t.getStartLocation().x >= 100 && (this.count++, (this.dir = -1));\r\n            if (this.count >= 3) {\r\n                t.stopPropagationImmediate();\r\n                $popupManager.PopupManager.instance.open(\r\n                    $assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.EggKeyView,\r\n                    {\r\n                        type: 2\r\n                    },\r\n                    {\r\n                        closeCallback: function () {\r\n                            1 === $userDataContext.default.Ins.getEgg(2)\r\n                                ? (e.boxAnimNode\r\n                                      .getComponentInChildren(dragonBones.ArmatureDisplay)\r\n                                      .playAnimation(\"biyan\", 0),\r\n                                  (e.isSheep = !0))\r\n                                : ((e.count = 0), (e.dir = -1));\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    };\r\n    e.prototype.clickNormalOPen1 = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        if ($userDataContext.default.Ins.opearDiamond(-$configContext.default.instance.gemBoxConfigs[0].spend)) {\r\n            var t = $shopContext.default.Ins.getNormalBoxRecord(1);\r\n            $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.RewardView, {\r\n                infos: this.createInfo(t)\r\n            });\r\n            return void this.renderCount(!0);\r\n        }\r\n        $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.CoinDiamondView, {\r\n            type: $coinDiamondView.AstType.DIAMON\r\n        });\r\n    };\r\n    e.prototype.clickAdvancedOPen1 = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        if ($userDataContext.default.Ins.opearDiamond(-$configContext.default.instance.gemBoxConfigs[1].spend)) {\r\n            var t = $shopContext.default.Ins.getRobotBox(1);\r\n            var e = this.createInfo(t.gems);\r\n            for (var i = 0; i < t.robots.length; i++) {\r\n                e.push({\r\n                    type: 11,\r\n                    num: 1,\r\n                    ext: t.robots[i]\r\n                });\r\n            }\r\n            $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.RewardView, {\r\n                infos: e\r\n            });\r\n            return void this.renderCount(!1);\r\n        }\r\n        $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.CoinDiamondView, {\r\n            type: $coinDiamondView.AstType.DIAMON\r\n        });\r\n    };\r\n    e.prototype.clickSkinBox1 = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        if ($userDataContext.default.Ins.opearDiamond(-$configContext.default.instance.gemBoxConfigs[2].spend)) {\r\n            var t = $shopContext.default.Ins.getSkinBoxRecord(1);\r\n            $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.RewardView, {\r\n                infos: t\r\n            });\r\n            return void this.renderSkinCount();\r\n        }\r\n        $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.CoinDiamondView, {\r\n            type: $coinDiamondView.AstType.DIAMON\r\n        });\r\n    };\r\n    e.prototype.clickSkinBox10 = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        if ($userDataContext.default.Ins.opearDiamond(10 * -$configContext.default.instance.gemBoxConfigs[2].spend)) {\r\n            var t = $shopContext.default.Ins.getSkinBoxRecord(10);\r\n            $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.RewardView, {\r\n                infos: t\r\n            });\r\n            return void this.renderSkinCount();\r\n        }\r\n        $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.CoinDiamondView, {\r\n            type: $coinDiamondView.AstType.DIAMON\r\n        });\r\n    };\r\n    e.prototype.clickSkinBoxAd = function () {\r\n        var t = this;\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        $adService.default.Ins.showRewardedVideo(function () {\r\n            if ($platform.Platform.currPlatForm === $platform.PlatformEnum.TOU_TIAO) {\r\n                $aD.default.toutiao.report(\"JP_box\");\r\n            }\r\n            var e = $shopContext.default.Ins.getSkinBoxVideoRecord();\r\n            if (++e >= $configContext.default.instance.gemBoxConfigs[2].video_num) {\r\n                e = 0;\r\n                var i = $shopContext.default.Ins.getSkinBoxRecord(\r\n                    $configContext.default.instance.gemBoxConfigs[0].VLottery_num\r\n                );\r\n                $popupManager.PopupManager.instance.open(\r\n                    $assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.RewardView,\r\n                    {\r\n                        infos: i\r\n                    }\r\n                );\r\n                t.renderSkinCount();\r\n                $shopContext.default.Ins.setSkinBoxVideoRecord(e);\r\n                t.renderSkinBtn();\r\n            } else {\r\n                $shopContext.default.Ins.setSkinBoxVideoRecord(e);\r\n                t.renderSkinBtn();\r\n            }\r\n        });\r\n    };\r\n    e.prototype.clickNormalOPen10 = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        if ($userDataContext.default.Ins.opearDiamond(10 * -$configContext.default.instance.gemBoxConfigs[0].spend)) {\r\n            var t = $shopContext.default.Ins.getNormalBoxRecord(10);\r\n            $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.RewardView, {\r\n                infos: this.createInfo(t)\r\n            });\r\n            return void this.renderCount(!0);\r\n        }\r\n        $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.CoinDiamondView, {\r\n            type: $coinDiamondView.AstType.DIAMON\r\n        });\r\n    };\r\n    e.prototype.clickAdvancedOPen10 = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        if ($userDataContext.default.Ins.opearDiamond(10 * -$configContext.default.instance.gemBoxConfigs[1].spend)) {\r\n            var t = $shopContext.default.Ins.getRobotBox(10);\r\n            var e = this.createInfo(t.gems);\r\n            for (var i = 0; i < t.robots.length; i++) {\r\n                e.push({\r\n                    type: 11,\r\n                    num: 1,\r\n                    ext: t.robots[i]\r\n                });\r\n            }\r\n            $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.RewardView, {\r\n                infos: e\r\n            });\r\n            return void this.renderCount(!1);\r\n        }\r\n        $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.CoinDiamondView, {\r\n            type: $coinDiamondView.AstType.DIAMON\r\n        });\r\n    };\r\n    e.prototype.clickNormalAd = function () {\r\n        var t = this;\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        $adService.default.Ins.showRewardedVideo(function () {\r\n            if ($platform.Platform.currPlatForm === $platform.PlatformEnum.TOU_TIAO) {\r\n                $aD.default.toutiao.report(\"normal_box\");\r\n            }\r\n            var e = $shopContext.default.Ins.getBoxVideoRecord(!0);\r\n            if (++e >= $configContext.default.instance.gemBoxConfigs[0].video_num) {\r\n                e = 0;\r\n                var i = $shopContext.default.Ins.getNormalBoxRecord(\r\n                    $configContext.default.instance.gemBoxConfigs[0].VLottery_num\r\n                );\r\n                $popupManager.PopupManager.instance.open(\r\n                    $assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.RewardView,\r\n                    {\r\n                        infos: t.createInfo(i)\r\n                    }\r\n                );\r\n                t.renderCount(!0);\r\n                $shopContext.default.Ins.setBoxVideoRecord(!0, e);\r\n                t.renderBtn(!0);\r\n            } else {\r\n                $shopContext.default.Ins.setBoxVideoRecord(!0, e);\r\n                t.renderBtn(!0);\r\n            }\r\n        });\r\n    };\r\n    e.prototype.clickAdvancedAd = function () {\r\n        var t = this;\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        $adService.default.Ins.showRewardedVideo(function () {\r\n            if ($platform.Platform.currPlatForm === $platform.PlatformEnum.TOU_TIAO) {\r\n                $aD.default.toutiao.report(\"NB_box\");\r\n            }\r\n            var e = $shopContext.default.Ins.getBoxVideoRecord(!1);\r\n            if (++e >= $configContext.default.instance.gemBoxConfigs[1].video_num) {\r\n                e = 0;\r\n                var i = $shopContext.default.Ins.getAdvancedBoxRecord(\r\n                    $configContext.default.instance.gemBoxConfigs[1].VLottery_num\r\n                );\r\n                $popupManager.PopupManager.instance.open(\r\n                    $assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.RewardView,\r\n                    {\r\n                        infos: t.createInfo(i)\r\n                    }\r\n                );\r\n                t.renderCount(!1);\r\n                $shopContext.default.Ins.setBoxVideoRecord(!1, e);\r\n                t.renderBtn(!1);\r\n            } else {\r\n                $shopContext.default.Ins.setBoxVideoRecord(!1, e);\r\n                t.renderBtn(!1);\r\n            }\r\n        });\r\n    };\r\n    e.prototype.createInfo = function (t) {\r\n        var e = [];\r\n        for (var i = 0; i < t.length; i++) {\r\n            var o = t[i];\r\n            e.push({\r\n                type: 5,\r\n                ext: o.id,\r\n                num: 1\r\n            });\r\n        }\r\n        $taskContext.default.Ins.setTaskRecord(4, t.length);\r\n        return e;\r\n    };\r\n    e.prototype.renderBtn = function (t) {\r\n        var e = t\r\n            ? $configContext.default.instance.gemBoxConfigs[0].spend\r\n            : $configContext.default.instance.gemBoxConfigs[1].spend;\r\n        var i = t\r\n            ? $configContext.default.instance.gemBoxConfigs[0].video_num\r\n            : $configContext.default.instance.gemBoxConfigs[1].video_num;\r\n        (t ? this.normalOPen1Btn : this.advancedOPen1Btn).children[2].getComponent(cc.Label).string = e.toString();\r\n        (t ? this.normalOPen10Btn : this.advancedOPen10Btn).children[2].getComponent(cc.Label).string = (\r\n            10 * e\r\n        ).toString();\r\n        var o = t ? this.normalAdBtn : this.advancedAdBtn;\r\n        o.children[2].active = 1 !== i;\r\n        o.children[2].getComponent(cc.Label).string =\r\n            \"(\" + $shopContext.default.Ins.getBoxVideoRecord(t) + \"/\" + i + \")\";\r\n    };\r\n    e.prototype.renderSkinBtn = function () {\r\n        var t = $configContext.default.instance.gemBoxConfigs[2].spend;\r\n        var e = $configContext.default.instance.gemBoxConfigs[2].video_num;\r\n        this.excellentOPen1Btn.children[2].getComponent(cc.Label).string = t.toString();\r\n        this.excellentOPen10Btn.children[2].getComponent(cc.Label).string = (10 * t).toString();\r\n        var i = this.excellentAdBtn;\r\n        i.children[2].active = 1 !== e;\r\n        i.children[2].getComponent(cc.Label).string =\r\n            \"(\" + $shopContext.default.Ins.getSkinBoxVideoRecord() + \"/\" + e + \")\";\r\n    };\r\n    e.prototype.renderCount = function (t) {\r\n        var e = t ? this.normalCount : this.advancedCount;\r\n        var i = t ? $shopContext.default.Ins.boxRewardRecord.normal : $shopContext.default.Ins.boxRewardRecord.advanced;\r\n        e.string = i.toString();\r\n        this.renderProgress();\r\n    };\r\n    e.prototype.renderSkinCount = function () {\r\n        this.excellentCount.string = $shopContext.default.Ins.boxRewardRecord.skin.toString();\r\n        this.renderProgress();\r\n    };\r\n    e.prototype.renderProgress = function () {\r\n        var t = 10 - $shopContext.default.Ins.boxRewardRecord.normal;\r\n        var e = (t / 10) * 218;\r\n        this.normalProgressNode.setContentSize(cc.size(e, this.normalProgressNode.height));\r\n        e = ((t = 10 - $shopContext.default.Ins.boxRewardRecord.advanced) / 10) * 218;\r\n        this.advancedProgressNode.setContentSize(cc.size(e, this.advancedProgressNode.height));\r\n        e = ((t = 10 - $shopContext.default.Ins.boxRewardRecord.skin) / 10) * 218;\r\n        this.excellentProgressNode.setContentSize(cc.size(e, this.excellentProgressNode.height));\r\n    };\r\n    __decorate([C(cc.Node)], e.prototype, \"btnLayer\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"normalOPen1Btn\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"normalOPen10Btn\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"normalAdBtn\", void 0);\r\n    __decorate([C(cc.Label)], e.prototype, \"normalCount\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"normalProgressNode\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"advancedOPen1Btn\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"advancedOPen10Btn\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"advancedAdBtn\", void 0);\r\n    __decorate([C(cc.Label)], e.prototype, \"advancedCount\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"advancedProgressNode\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"excellentOPen1Btn\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"excellentOPen10Btn\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"excellentAdBtn\", void 0);\r\n    __decorate([C(cc.Label)], e.prototype, \"excellentCount\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"excellentProgressNode\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"boxAnimNode\", void 0);\r\n    return __decorate([S], e);\r\n})(cc.Component);\r\nexports.default = I;\r\n"]}