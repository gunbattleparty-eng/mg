
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/EventManager.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '7616bIpRSRDTagTHpJb/PIE', 'EventManager');
// game_script/scripts/EventManager.js

"use strict";

var o = function () {
  function t() {}

  t.on = function (t, e, i) {
    var o = this.events;
    o.has(t) ? o.get(t).push({
      callback: e,
      target: i
    }) : o.set(t, [{
      callback: e,
      target: i
    }]);
  };

  t.once = function (t, e, i) {
    var o = this.onceEvents;
    o.has(t) ? o.get(t).push({
      callback: e,
      target: i
    }) : o.set(t, [{
      callback: e,
      target: i
    }]);
  };

  t.off = function (t, e, i) {
    var o = this.events.get(t);

    if (o) {
      var n = 0;

      for (var s = o.length; n < s; n++) {
        if (this.compare(o[n], e, i)) {
          o.splice(n, 1);

          if (0 === o.length) {
            this.events["delete"](t);
          }

          break;
        }
      }
    }

    var r = this.onceEvents.get(t);

    if (r) {
      n = 0;

      for (s = r.length; n < s; n++) {
        if (this.compare(r[n], e, i)) {
          r.splice(n, 1);

          if (0 === r.length) {
            this.onceEvents["delete"](t);
          }

          break;
        }
      }
    }
  };

  t.send = function (t) {
    var e = [];

    for (var i = 1; i < arguments.length; i++) {
      e[i - 1] = arguments[i];
    }

    var o = this.events.get(t);

    if (o) {
      for (var n = 0; n < o.length; n++) {
        var s = o[n];
        var r = s.callback;
        var a = s.target;
        r.apply(a, e);
      }
    }

    var l = this.onceEvents.get(t);

    if (l) {
      for (n = 0; n < l.length; n++) {
        var c = l[n];
        r = c.callback;
        a = c.target;
        r.apply(a, e);
      }

      this.onceEvents["delete"](t);
    }
  };

  t.remove = function (t) {
    if (this.events.has(t)) {
      this.events["delete"](t);
    }

    if (this.onceEvents.has(t)) {
      this.onceEvents["delete"](t);
    }
  };

  t.removeAll = function () {
    this.events.clear();
    this.onceEvents.clear();
  };

  t.compare = function (t, e, i) {
    var o = t.callback;
    return t.target === i && (o === e || o.toString() === e.toString());
  };

  t.events = new Map();
  t.onceEvents = new Map();
  return t;
}();

exports["default"] = o;
window.EventManager = o;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXEV2ZW50TWFuYWdlci5qcyJdLCJuYW1lcyI6WyJvIiwidCIsIm9uIiwiZSIsImkiLCJldmVudHMiLCJoYXMiLCJnZXQiLCJwdXNoIiwiY2FsbGJhY2siLCJ0YXJnZXQiLCJzZXQiLCJvbmNlIiwib25jZUV2ZW50cyIsIm9mZiIsIm4iLCJzIiwibGVuZ3RoIiwiY29tcGFyZSIsInNwbGljZSIsInIiLCJzZW5kIiwiYXJndW1lbnRzIiwiYSIsImFwcGx5IiwibCIsImMiLCJyZW1vdmUiLCJyZW1vdmVBbGwiLCJjbGVhciIsInRvU3RyaW5nIiwiTWFwIiwiZXhwb3J0cyIsIndpbmRvdyIsIkV2ZW50TWFuYWdlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxDQUFDLEdBQUksWUFBWTtFQUNqQixTQUFTQyxDQUFULEdBQWEsQ0FBRTs7RUFDZkEsQ0FBQyxDQUFDQyxFQUFGLEdBQU8sVUFBVUQsQ0FBVixFQUFhRSxDQUFiLEVBQWdCQyxDQUFoQixFQUFtQjtJQUN0QixJQUFJSixDQUFDLEdBQUcsS0FBS0ssTUFBYjtJQUNBTCxDQUFDLENBQUNNLEdBQUYsQ0FBTUwsQ0FBTixJQUNNRCxDQUFDLENBQUNPLEdBQUYsQ0FBTU4sQ0FBTixFQUFTTyxJQUFULENBQWM7TUFDVkMsUUFBUSxFQUFFTixDQURBO01BRVZPLE1BQU0sRUFBRU47SUFGRSxDQUFkLENBRE4sR0FLTUosQ0FBQyxDQUFDVyxHQUFGLENBQU1WLENBQU4sRUFBUyxDQUNMO01BQ0lRLFFBQVEsRUFBRU4sQ0FEZDtNQUVJTyxNQUFNLEVBQUVOO0lBRlosQ0FESyxDQUFULENBTE47RUFXSCxDQWJEOztFQWNBSCxDQUFDLENBQUNXLElBQUYsR0FBUyxVQUFVWCxDQUFWLEVBQWFFLENBQWIsRUFBZ0JDLENBQWhCLEVBQW1CO0lBQ3hCLElBQUlKLENBQUMsR0FBRyxLQUFLYSxVQUFiO0lBQ0FiLENBQUMsQ0FBQ00sR0FBRixD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L0MsQ0FBUDtFQUNILENBSEQ7O0VBSUE3QixDQUFDLENBQUNJLE1BQUYsR0FBVyxJQUFJMEIsR0FBSixFQUFYO0VBQ0E5QixDQUFDLENBQUNZLFVBQUYsR0FBZSxJQUFJa0IsR0FBSixFQUFmO0VBQ0EsT0FBTzlCLENBQVA7QUFDSCxDQXRHTyxFQUFSOztBQXVHQStCLE9BQU8sV0FBUCxHQUFrQmhDLENBQWxCO0FBQ0FpQyxNQUFNLENBQUNDLFlBQVAsR0FBc0JsQyxDQUF0QiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIG8gPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gdCgpIHt9XHJcbiAgICB0Lm9uID0gZnVuY3Rpb24gKHQsIGUsIGkpIHtcclxuICAgICAgICB2YXIgbyA9IHRoaXMuZXZlbnRzO1xyXG4gICAgICAgIG8uaGFzKHQpXHJcbiAgICAgICAgICAgID8gby5nZXQodCkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBlLFxyXG4gICAgICAgICAgICAgICAgICB0YXJnZXQ6IGlcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICA6IG8uc2V0KHQsIFtcclxuICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IGlcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIF0pO1xyXG4gICAgfTtcclxuICAgIHQub25jZSA9IGZ1bmN0aW9uICh0LCBlLCBpKSB7XHJcbiAgICAgICAgdmFyIG8gPSB0aGlzLm9uY2VFdmVudHM7XHJcbiAgICAgICAgby5oYXModClcclxuICAgICAgICAgICAgPyBvLmdldCh0KS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGUsXHJcbiAgICAgICAgICAgICAgICAgIHRhcmdldDogaVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIDogby5zZXQodCwgW1xyXG4gICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZSxcclxuICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogaVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgXSk7XHJcbiAgICB9O1xyXG4gICAgdC5vZmYgPSBmdW5jdGlvbiAodCwgZSwgaSkge1xyXG4gICAgICAgIHZhciBvID0gdGhpcy5ldmVudHMuZ2V0KHQpO1xyXG4gICAgICAgIGlmIChvKSB7XHJcbiAgICAgICAgICAgIHZhciBuID0gMDtcclxuICAgICAgICAgICAgZm9yICh2YXIgcyA9IG8ubGVuZ3RoOyBuIDwgczsgbisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb21wYXJlKG9bbl0sIGUsIGkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgby5zcGxpY2UobiwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IG8ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLmRlbGV0ZSh0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHIgPSB0aGlzLm9uY2VFdmVudHMuZ2V0KHQpO1xyXG4gICAgICAgIGlmIChyKSB7XHJcbiAgICAgICAgICAgIG4gPSAwO1xyXG4gICAgICAgICAgICBmb3IgKHMgPSByLmxlbmd0aDsgbiA8IHM7IG4rKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29tcGFyZShyW25dLCBlLCBpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHIuc3BsaWNlKG4sIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgwID09PSByLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uY2VFdmVudHMuZGVsZXRlKHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0LnNlbmQgPSBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIHZhciBlID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZVtpIC0gMV0gPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBvID0gdGhpcy5ldmVudHMuZ2V0KHQpO1xyXG4gICAgICAgIGlmIChvKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgby5sZW5ndGg7IG4rKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHMgPSBvW25dO1xyXG4gICAgICAgICAgICAgICAgdmFyIHIgPSBzLmNhbGxiYWNrO1xyXG4gICAgICAgICAgICAgICAgdmFyIGEgPSBzLnRhcmdldDtcclxuICAgICAgICAgICAgICAgIHIuYXBwbHkoYSwgZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGwgPSB0aGlzLm9uY2VFdmVudHMuZ2V0KHQpO1xyXG4gICAgICAgIGlmIChsKSB7XHJcbiAgICAgICAgICAgIGZvciAobiA9IDA7IG4gPCBsLmxlbmd0aDsgbisrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9IGxbbl07XHJcbiAgICAgICAgICAgICAgICByID0gYy5jYWxsYmFjaztcclxuICAgICAgICAgICAgICAgIGEgPSBjLnRhcmdldDtcclxuICAgICAgICAgICAgICAgIHIuYXBwbHkoYSwgZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5vbmNlRXZlbnRzLmRlbGV0ZSh0KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdC5yZW1vdmUgPSBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIGlmICh0aGlzLmV2ZW50cy5oYXModCkpIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHMuZGVsZXRlKHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5vbmNlRXZlbnRzLmhhcyh0KSkge1xyXG4gICAgICAgICAgICB0aGlzLm9uY2VFdmVudHMuZGVsZXRlKHQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0LnJlbW92ZUFsbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmV2ZW50cy5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMub25jZUV2ZW50cy5jbGVhcigpO1xyXG4gICAgfTtcclxuICAgIHQuY29tcGFyZSA9IGZ1bmN0aW9uICh0LCBlLCBpKSB7XHJcbiAgICAgICAgdmFyIG8gPSB0LmNhbGxiYWNrO1xyXG4gICAgICAgIHJldHVybiB0LnRhcmdldCA9PT0gaSAmJiAobyA9PT0gZSB8fCBvLnRvU3RyaW5nKCkgPT09IGUudG9TdHJpbmcoKSk7XHJcbiAgICB9O1xyXG4gICAgdC5ldmVudHMgPSBuZXcgTWFwKCk7XHJcbiAgICB0Lm9uY2VFdmVudHMgPSBuZXcgTWFwKCk7XHJcbiAgICByZXR1cm4gdDtcclxufSkoKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gbztcclxud2luZG93LkV2ZW50TWFuYWdlciA9IG87XHJcbiJdfQ==