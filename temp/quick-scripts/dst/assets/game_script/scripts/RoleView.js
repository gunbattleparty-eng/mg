
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/RoleView.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '7f94dIMV0VL8738A/TD0fod', 'RoleView');
// game_script/scripts/RoleView.js

"use strict";

var o;

var $list = require("./List");

var $gemListItem = require("./GemListItem");

var $roleContext = require("./RoleContext");

var $eventManager = require("./EventManager");

var $localEventName = require("./LocalEventName");

var $gameGemInfo = require("./GameGemInfo");

var $equipmentContext = require("./EquipmentContext");

var $uIManager = require("./UIManager");

var $popupManager = require("./PopupManager");

var $assetsMap = require("./AssetsMap");

var $playerSkin = require("./PlayerSkin");

var $itemView = require("./ItemView");

var $startView = require("./StartView");

var $equipmentItem = require("./EquipmentItem");

var $remoteAudio = require("./RemoteAudio");

var $userDataContext = require("./UserDataContext");

var $guide = require("./Guide");

var A = cc._decorator;
var S = A.ccclass;
var C = A.property;

var I = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.gemList = null;
    e.atk = null;
    e.btnCraft = null;
    e.btnProps = null;
    e.btnAutoUpgrade = null;
    e.btnSkin = null;
    e.playerSkin = null;
    e.btnGunSKin = null;
    e.changeGemBtns = null;
    e.equipNode = null;
    e.packList = [];
    return e;
  }

  __extends(e, t);

  e.prototype.start = function () {
    var t = this;
    this.packList = $roleContext["default"].ins.showPackInfoList();
    this.scheduleOnce(function () {
      t.gemList.numItems = t.packList.length;
    }, 0.1);
    $eventManager["default"].on($localEventName["default"].RENDER_GEM, this.updateList, this);
    $eventManager["default"].on($localEventName["default"].RENDER_DOT, this.renderDot, this);
    this.renderAtk();
    this.btnCraft.on("click", this.clickCraft, this);
    this.btnProps.on("click", this.clickProps, this);
    this.btnAutoUpgrade.on("click", this.clickAutoUpgrade, this);
    this.btnSkin.on("click", this.clickSkin, this);
    this.btnGunSKin.on("click", this.clickGunSkin, this);
    var e = $roleContext["default"].ins.currSkinInfo;
    this.playerSkin.changePlayerSkin(e.skin);

    for (var i = 0; i < this.changeGemBtns.children.length; i++) {
      this.changeGemBtns.children[i].on("click", this.changeGemItem, this);
    }

    this.refreshBtn();
    this.renderDot($startView.MenuType.Role);
    this.node.getComponent($equipmentItem["default"]).renderDot($startView.MenuType.Role);
  };

  e.prototype.reuse = function () {
    this.refreshBtn();
    this.renderDot($startView.MenuType.Role);
    this.node.getComponent($equipmentItem["default"]).renderDot($startView.MenuType.Role);
    this.updateList();
    $eventManager["default"].on($localEventName["default"].RENDER_GEM, this.updateList, this);
    $eventManager["default"].on($localEventName["default"].RENDER_DOT, this.renderDot, this);
  };

  e.prototype.unuse = function () {
    $eventManager["default"].off($localEventName["default"].RENDER_GEM, this.updateList, this);
    $eventManager["default"].off($localEventName["default"].RENDER_DOT, this.renderDot, this);
  };

  e.prototype.changeGemItem = function (t) {
    var e = this.changeGemBtns.children.indexOf(t.node);

    if ($equipmentContext["default"].Ins.order !== e) {
      $remoteAudio["default"].instance.playEffectMusic("Click");
      $equipmentContext["default"].Ins.changeGemItem(e);
      this.renderAtk();
      this.refreshBtn();
      $eventManager["default"].send($localEventName["default"].RENDER_GEM);
    }
  };

  e.prototype.refreshBtn = function () {
    this.changeGemBtns.children.forEach(function (t, e) {
      t.children[0].active = $equipmentContext["default"].Ins.order === e;
    });
    this.btnSkin.children[0].active = $roleContext["default"].ins.hasPlayerSkinDot();
    this.btnGunSKin.children[0].active = $roleContext["default"].ins.hasGunSkinDot();
  };

  e.prototype.onDestroy = function () {
    $eventManager["default"].off($localEventName["default"].RENDER_GEM, this.updateList, this);
    $eventManager["default"].off($localEventName["default"].RENDER_DOT, this.renderDot, this);
    this.btnCraft.off("click", this.clickCraft, this);
    this.btnProps.off("click", this.clickProps, this);
    this.btnAutoUpgrade.off("click", this.clickAutoUpgrade, this);
    this.btnSkin.off("click", this.clickSkin, this);
    this.btnGunSKin.off("click", this.clickGunSkin, this);
  };

  e.prototype.renderDot = function (t) {
    if (t === $startView.MenuType.Role) {
      this.btnAutoUpgrade.children[0].active = $equipmentContext["default"].Ins.checkEquipUpgrade();
      this.btnCraft.children[0].active = $roleContext["default"].ins.isCanComposeGem();
    }
  };

  e.prototype.clickSkin = function () {
    $remoteAudio["default"].instance.playEffectMusic("Click");
    $uIManager.UIManager.instance.replaceView($assetsMap.AssetsMap.StartBundles.prefabs.assetsList.RoleShopView);
  };

  e.prototype.clickGunSkin = function () {
    $remoteAudio["default"].instance.playEffectMusic("Click");
    $uIManager.UIManager.instance.replaceView($assetsMap.AssetsMap.StartBundles.prefabs.assetsList.GunShopView);
  };

  e.prototype.renderItem = function (t, e) {
    if (!(0 !== e || $userDataContext["default"].Ins.isEndGuide)) {
      1 === $userDataContext["default"].Ins.guideStep ? $guide["default"].self.startGuideTest(t, "点击宝石") : 2 === $userDataContext["default"].Ins.guideStep && $guide["default"].self.startGuideTest(this.btnAutoUpgrade, "点击装备或一键升级");
    }

    t.getComponent($gemListItem["default"]).render(this.packList[e]);
  };

  e.prototype.updateList = function () {
    this.renderAtk();
    this.gemList.selectedId = -1;
    this.packList = $roleContext["default"].ins.showPackInfoList();
    this.gemList.numItems = this.packList.length;
    this.gemList.updateAll();
  };

  e.prototype.renderAtk = function () {
    var t = 0;

    if ($gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.Attack)) {
      t = $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.Attack);
    }

    t += $equipmentContext["default"].Ins.getEquipmentAtk() + $equipmentContext["default"].Ins.getAtk();
    this.atk.string = "" + t;
  };

  e.prototype.clickCraft = function () {
    $remoteAudio["default"].instance.playEffectMusic("Click");
    var t = $roleContext["default"].ins.getCanComposeGemList();
    t.length <= 0 ? $uIManager.UIManager.instance.showToast("暂无合成宝石") : $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.RewardGemView, {
      gemIds: t
    });
  };

  e.prototype.clickProps = function () {
    $remoteAudio["default"].instance.playEffectMusic("Click");
    $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.GemStatsView);
  };

  e.prototype.clickAutoUpgrade = function () {
    $remoteAudio["default"].instance.playEffectMusic("Click");

    if (!$userDataContext["default"].Ins.isEndGuide) {
      $guide["default"].self.stopGuide();
      $userDataContext["default"].Ins.guideEnd();
    }

    if ($equipmentContext["default"].Ins.checkEquipUpgrade()) {
      var t = $equipmentContext["default"].Ins.autoUpgrade();
      $eventManager["default"].send($localEventName["default"].EQUIP_UPGRADE, t);
      $eventManager["default"].send($localEventName["default"].RENDER_DOT, $startView.MenuType.Role);
    } else {
      $uIManager.UIManager.instance.showToast("暂无升级装备");
    }
  };

  __decorate([C($list["default"])], e.prototype, "gemList", void 0);

  __decorate([C(cc.Label)], e.prototype, "atk", void 0);

  __decorate([C(cc.Node)], e.prototype, "btnCraft", void 0);

  __decorate([C(cc.Node)], e.prototype, "btnProps", void 0);

  __decorate([C(cc.Node)], e.prototype, "btnAutoUpgrade", void 0);

  __decorate([C(cc.Node)], e.prototype, "btnSkin", void 0);

  __decorate([C($playerSkin.PlayerSkin)], e.prototype, "playerSkin", void 0);

  __decorate([C(cc.Node)], e.prototype, "btnGunSKin", void 0);

  __decorate([C(cc.Node)], e.prototype, "changeGemBtns", void 0);

  __decorate([C(cc.Node)], e.prototype, "equipNode", void 0);

  return __decorate([S], e);
}($itemView["default"]);

exports["default"] = I;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXFJvbGVWaWV3LmpzIl0sIm5hbWVzIjpbIm8iLCIkbGlzdCIsInJlcXVpcmUiLCIkZ2VtTGlzdEl0ZW0iLCIkcm9sZUNvbnRleHQiLCIkZXZlbnRNYW5hZ2VyIiwiJGxvY2FsRXZlbnROYW1lIiwiJGdhbWVHZW1JbmZvIiwiJGVxdWlwbWVudENvbnRleHQiLCIkdUlNYW5hZ2VyIiwiJHBvcHVwTWFuYWdlciIsIiRhc3NldHNNYXAiLCIkcGxheWVyU2tpbiIsIiRpdGVtVmlldyIsIiRzdGFydFZpZXciLCIkZXF1aXBtZW50SXRlbSIsIiRyZW1vdGVBdWRpbyIsIiR1c2VyRGF0YUNvbnRleHQiLCIkZ3VpZGUiLCJBIiwiY2MiLCJfZGVjb3JhdG9yIiwiUyIsImNjY2xhc3MiLCJDIiwicHJvcGVydHkiLCJJIiwidCIsImUiLCJhcHBseSIsImFyZ3VtZW50cyIsImdlbUxpc3QiLCJhdGsiLCJidG5DcmFmdCIsImJ0blByb3BzIiwiYnRuQXV0b1VwZ3JhZGUiLCJidG5Ta2luIiwicGxheWVyU2tpbiIsImJ0bkd1blNLaW4iLCJjaGFuZ2VHZW1CdG5zIiwiZXF1aXBOb2RlIiwicGFja0xpc3QiLCJfX2V4dGVuZHMiLCJwcm90b3R5cGUiLCJzdGFydCIsImlucyIsInNob3dQYWNrSW5mb0xpc3QiLCJzY2hlZHVsZU9uY2UiLCJudW1JdGVtcyIsImxlbmd0aCIsIm9uIiwiUkVOREVSX0dFTSIsInVwZGF0ZUxpc3QiLCJSRU5ERVJfRE9UIiwicmVuZGVyRG90IiwicmVuZGVyQXRrIiwiY2xpY2tDcmFmdCIsImNsaWNrUHJvcHMiLCJjbGlja0F1dG9VcGdyYWRlIiwiY2xpY2tTa2luIiwiY2xpY2tHdW5Ta2luIiwiY3VyclNraW5JbmZvIiwiY2hhbmdlUGxheWVyU2tpbiIsInNraW4iLCJpIiwiY2hpbGRyZW4iLCJjaGFuZ2VHZW1JdGVtIiwicmVmcmVzaEJ0biIsIk1lbnVUeXBlIiwiUm9sZSIsIm5vZGUiLCJnZXRDb21wb25lbnQiLCJyZXVzZSIsInVudXNlIiwib2ZmIiwiaW5kZXhPZiIsIklucyIsIm9yZGVyIiwiaW5zdGFuY2UiLCJwbGF5RWZmZWN0TXVzaWMiLCJzZW5kIiwiZm9yRWFjaCIsImFjdGl2ZSIsImhhc1BsYXllclNraW5Eb3QiLCJoYXNHdW5Ta2luRG90Iiwib25EZXN0cm95IiwiY2hlY2tFcXVpcFVwZ3JhZGUiLCJpc0NhbkNvbXBvc2VHZW0iLCJVSU1hbmFnZXIiLCJyZXBsYWNlVmlldyIsIkFzc2V0c01hcCIsIlN0YXJ0QnVuZGxlcyIsInByZWZhYnMiLCJhc3NldHNMaXN0IiwiUm9sZVNob3BWaWV3IiwiR3VuU2hvcFZpZXciLCJyZW5kZXJJdGVtIiwiaXNFbmRHdWlkZSIsImd1aWRlU3RlcCIsInNlbGYiLCJzdGFydEd1aWRlVGVzdCIsInJlbmRlciIsInNlbGVjdGVkSWQiLCJ1cGRhdGVBbGwiLCJHYW1lR2VtSW5mbyIsImhhc0dlbSIsIkdlbVR5cGUiLCJBdHRhY2siLCJnZXQxIiwiZ2V0RXF1aXBtZW50QXRrIiwiZ2V0QXRrIiwic3RyaW5nIiwiZ2V0Q2FuQ29tcG9zZUdlbUxpc3QiLCJzaG93VG9hc3QiLCJQb3B1cE1hbmFnZXIiLCJvcGVuIiwiUG9wVXBCdW5kbGVzIiwiUmV3YXJkR2VtVmlldyIsImdlbUlkcyIsIkdlbVN0YXRzVmlldyIsInN0b3BHdWlkZSIsImd1aWRlRW5kIiwiYXV0b1VwZ3JhZGUiLCJFUVVJUF9VUEdSQURFIiwiX19kZWNvcmF0ZSIsIkxhYmVsIiwiTm9kZSIsIlBsYXllclNraW4iLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUo7O0FBQ0EsSUFBSUMsS0FBSyxHQUFHQyxPQUFPLENBQUMsUUFBRCxDQUFuQjs7QUFDQSxJQUFJQyxZQUFZLEdBQUdELE9BQU8sQ0FBQyxlQUFELENBQTFCOztBQUNBLElBQUlFLFlBQVksR0FBR0YsT0FBTyxDQUFDLGVBQUQsQ0FBMUI7O0FBQ0EsSUFBSUcsYUFBYSxHQUFHSCxP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LENBQTVDLENBQVY7O0VBQ0FpRixVQUFVLENBQUMsQ0FBQ3BHLENBQUMsQ0FBQ1osV0FBVyxDQUFDbUgsVUFBYixDQUFGLENBQUQsRUFBOEJuRyxDQUFDLENBQUNlLFNBQWhDLEVBQTJDLFlBQTNDLEVBQXlELEtBQUssQ0FBOUQsQ0FBVjs7RUFDQWlGLFVBQVUsQ0FBQyxDQUFDcEcsQ0FBQyxDQUFDSixFQUFFLENBQUMwRyxJQUFKLENBQUYsQ0FBRCxFQUFlbEcsQ0FBQyxDQUFDZSxTQUFqQixFQUE0QixZQUE1QixFQUEwQyxLQUFLLENBQS9DLENBQVY7O0VBQ0FpRixVQUFVLENBQUMsQ0FBQ3BHLENBQUMsQ0FBQ0osRUFBRSxDQUFDMEcsSUFBSixDQUFGLENBQUQsRUFBZWxHLENBQUMsQ0FBQ2UsU0FBakIsRUFBNEIsZUFBNUIsRUFBNkMsS0FBSyxDQUFsRCxDQUFWOztFQUNBaUYsVUFBVSxDQUFDLENBQUNwRyxDQUFDLENBQUNKLEVBQUUsQ0FBQzBHLElBQUosQ0FBRixDQUFELEVBQWVsRyxDQUFDLENBQUNlLFNBQWpCLEVBQTRCLFdBQTVCLEVBQXlDLEtBQUssQ0FBOUMsQ0FBVjs7RUFDQSxPQUFPaUYsVUFBVSxDQUFDLENBQUN0RyxDQUFELENBQUQsRUFBTU0sQ0FBTixDQUFqQjtBQUNILENBN0pPLENBNkpMZixTQUFTLFdBN0pKLENBQVI7O0FBOEpBbUgsT0FBTyxXQUFQLEdBQWtCdEcsQ0FBbEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBvO1xyXG52YXIgJGxpc3QgPSByZXF1aXJlKFwiLi9MaXN0XCIpO1xyXG52YXIgJGdlbUxpc3RJdGVtID0gcmVxdWlyZShcIi4vR2VtTGlzdEl0ZW1cIik7XHJcbnZhciAkcm9sZUNvbnRleHQgPSByZXF1aXJlKFwiLi9Sb2xlQ29udGV4dFwiKTtcclxudmFyICRldmVudE1hbmFnZXIgPSByZXF1aXJlKFwiLi9FdmVudE1hbmFnZXJcIik7XHJcbnZhciAkbG9jYWxFdmVudE5hbWUgPSByZXF1aXJlKFwiLi9Mb2NhbEV2ZW50TmFtZVwiKTtcclxudmFyICRnYW1lR2VtSW5mbyA9IHJlcXVpcmUoXCIuL0dhbWVHZW1JbmZvXCIpO1xyXG52YXIgJGVxdWlwbWVudENvbnRleHQgPSByZXF1aXJlKFwiLi9FcXVpcG1lbnRDb250ZXh0XCIpO1xyXG52YXIgJHVJTWFuYWdlciA9IHJlcXVpcmUoXCIuL1VJTWFuYWdlclwiKTtcclxudmFyICRwb3B1cE1hbmFnZXIgPSByZXF1aXJlKFwiLi9Qb3B1cE1hbmFnZXJcIik7XHJcbnZhciAkYXNzZXRzTWFwID0gcmVxdWlyZShcIi4vQXNzZXRzTWFwXCIpO1xyXG52YXIgJHBsYXllclNraW4gPSByZXF1aXJlKFwiLi9QbGF5ZXJTa2luXCIpO1xyXG52YXIgJGl0ZW1WaWV3ID0gcmVxdWlyZShcIi4vSXRlbVZpZXdcIik7XHJcbnZhciAkc3RhcnRWaWV3ID0gcmVxdWlyZShcIi4vU3RhcnRWaWV3XCIpO1xyXG52YXIgJGVxdWlwbWVudEl0ZW0gPSByZXF1aXJlKFwiLi9FcXVpcG1lbnRJdGVtXCIpO1xyXG52YXIgJHJlbW90ZUF1ZGlvID0gcmVxdWlyZShcIi4vUmVtb3RlQXVkaW9cIik7XHJcbnZhciAkdXNlckRhdGFDb250ZXh0ID0gcmVxdWlyZShcIi4vVXNlckRhdGFDb250ZXh0XCIpO1xyXG52YXIgJGd1aWRlID0gcmVxdWlyZShcIi4vR3VpZGVcIik7XHJcbnZhciBBID0gY2MuX2RlY29yYXRvcjtcclxudmFyIFMgPSBBLmNjY2xhc3M7XHJcbnZhciBDID0gQS5wcm9wZXJ0eTtcclxudmFyIEkgPSAoZnVuY3Rpb24gKHQpIHtcclxuICAgIGZ1bmN0aW9uIGUoKSB7XHJcbiAgICAgICAgdmFyIGUgPSAobnVsbCAhPT0gdCAmJiB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIHx8IHRoaXM7XHJcbiAgICAgICAgZS5nZW1MaXN0ID0gbnVsbDtcclxuICAgICAgICBlLmF0ayA9IG51bGw7XHJcbiAgICAgICAgZS5idG5DcmFmdCA9IG51bGw7XHJcbiAgICAgICAgZS5idG5Qcm9wcyA9IG51bGw7XHJcbiAgICAgICAgZS5idG5BdXRvVXBncmFkZSA9IG51bGw7XHJcbiAgICAgICAgZS5idG5Ta2luID0gbnVsbDtcclxuICAgICAgICBlLnBsYXllclNraW4gPSBudWxsO1xyXG4gICAgICAgIGUuYnRuR3VuU0tpbiA9IG51bGw7XHJcbiAgICAgICAgZS5jaGFuZ2VHZW1CdG5zID0gbnVsbDtcclxuICAgICAgICBlLmVxdWlwTm9kZSA9IG51bGw7XHJcbiAgICAgICAgZS5wYWNrTGlzdCA9IFtdO1xyXG4gICAgICAgIHJldHVybiBlO1xyXG4gICAgfVxyXG4gICAgX19leHRlbmRzKGUsIHQpO1xyXG4gICAgZS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMucGFja0xpc3QgPSAkcm9sZUNvbnRleHQuZGVmYXVsdC5pbnMuc2hvd1BhY2tJbmZvTGlzdCgpO1xyXG4gICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdC5nZW1MaXN0Lm51bUl0ZW1zID0gdC5wYWNrTGlzdC5sZW5ndGg7XHJcbiAgICAgICAgfSwgMC4xKTtcclxuICAgICAgICAkZXZlbnRNYW5hZ2VyLmRlZmF1bHQub24oJGxvY2FsRXZlbnROYW1lLmRlZmF1bHQuUkVOREVSX0dFTSwgdGhpcy51cGRhdGVMaXN0LCB0aGlzKTtcclxuICAgICAgICAkZXZlbnRNYW5hZ2VyLmRlZmF1bHQub24oJGxvY2FsRXZlbnROYW1lLmRlZmF1bHQuUkVOREVSX0RPVCwgdGhpcy5yZW5kZXJEb3QsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyQXRrKCk7XHJcbiAgICAgICAgdGhpcy5idG5DcmFmdC5vbihcImNsaWNrXCIsIHRoaXMuY2xpY2tDcmFmdCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5idG5Qcm9wcy5vbihcImNsaWNrXCIsIHRoaXMuY2xpY2tQcm9wcywgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5idG5BdXRvVXBncmFkZS5vbihcImNsaWNrXCIsIHRoaXMuY2xpY2tBdXRvVXBncmFkZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5idG5Ta2luLm9uKFwiY2xpY2tcIiwgdGhpcy5jbGlja1NraW4sIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuYnRuR3VuU0tpbi5vbihcImNsaWNrXCIsIHRoaXMuY2xpY2tHdW5Ta2luLCB0aGlzKTtcclxuICAgICAgICB2YXIgZSA9ICRyb2xlQ29udGV4dC5kZWZhdWx0Lmlucy5jdXJyU2tpbkluZm87XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJTa2luLmNoYW5nZVBsYXllclNraW4oZS5za2luKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hhbmdlR2VtQnRucy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZUdlbUJ0bnMuY2hpbGRyZW5baV0ub24oXCJjbGlja1wiLCB0aGlzLmNoYW5nZUdlbUl0ZW0sIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlZnJlc2hCdG4oKTtcclxuICAgICAgICB0aGlzLnJlbmRlckRvdCgkc3RhcnRWaWV3Lk1lbnVUeXBlLlJvbGUpO1xyXG4gICAgICAgIHRoaXMubm9kZS5nZXRDb21wb25lbnQoJGVxdWlwbWVudEl0ZW0uZGVmYXVsdCkucmVuZGVyRG90KCRzdGFydFZpZXcuTWVudVR5cGUuUm9sZSk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUucmV1c2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoQnRuKCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJEb3QoJHN0YXJ0Vmlldy5NZW51VHlwZS5Sb2xlKTtcclxuICAgICAgICB0aGlzLm5vZGUuZ2V0Q29tcG9uZW50KCRlcXVpcG1lbnRJdGVtLmRlZmF1bHQpLnJlbmRlckRvdCgkc3RhcnRWaWV3Lk1lbnVUeXBlLlJvbGUpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlTGlzdCgpO1xyXG4gICAgICAgICRldmVudE1hbmFnZXIuZGVmYXVsdC5vbigkbG9jYWxFdmVudE5hbWUuZGVmYXVsdC5SRU5ERVJfR0VNLCB0aGlzLnVwZGF0ZUxpc3QsIHRoaXMpO1xyXG4gICAgICAgICRldmVudE1hbmFnZXIuZGVmYXVsdC5vbigkbG9jYWxFdmVudE5hbWUuZGVmYXVsdC5SRU5ERVJfRE9ULCB0aGlzLnJlbmRlckRvdCwgdGhpcyk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUudW51c2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJGV2ZW50TWFuYWdlci5kZWZhdWx0Lm9mZigkbG9jYWxFdmVudE5hbWUuZGVmYXVsdC5SRU5ERVJfR0VNLCB0aGlzLnVwZGF0ZUxpc3QsIHRoaXMpO1xyXG4gICAgICAgICRldmVudE1hbmFnZXIuZGVmYXVsdC5vZmYoJGxvY2FsRXZlbnROYW1lLmRlZmF1bHQuUkVOREVSX0RPVCwgdGhpcy5yZW5kZXJEb3QsIHRoaXMpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmNoYW5nZUdlbUl0ZW0gPSBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIHZhciBlID0gdGhpcy5jaGFuZ2VHZW1CdG5zLmNoaWxkcmVuLmluZGV4T2YodC5ub2RlKTtcclxuICAgICAgICBpZiAoJGVxdWlwbWVudENvbnRleHQuZGVmYXVsdC5JbnMub3JkZXIgIT09IGUpIHtcclxuICAgICAgICAgICAgJHJlbW90ZUF1ZGlvLmRlZmF1bHQuaW5zdGFuY2UucGxheUVmZmVjdE11c2ljKFwiQ2xpY2tcIik7XHJcbiAgICAgICAgICAgICRlcXVpcG1lbnRDb250ZXh0LmRlZmF1bHQuSW5zLmNoYW5nZUdlbUl0ZW0oZSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQXRrKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaEJ0bigpO1xyXG4gICAgICAgICAgICAkZXZlbnRNYW5hZ2VyLmRlZmF1bHQuc2VuZCgkbG9jYWxFdmVudE5hbWUuZGVmYXVsdC5SRU5ERVJfR0VNKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUucmVmcmVzaEJ0biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNoYW5nZUdlbUJ0bnMuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAodCwgZSkge1xyXG4gICAgICAgICAgICB0LmNoaWxkcmVuWzBdLmFjdGl2ZSA9ICRlcXVpcG1lbnRDb250ZXh0LmRlZmF1bHQuSW5zLm9yZGVyID09PSBlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYnRuU2tpbi5jaGlsZHJlblswXS5hY3RpdmUgPSAkcm9sZUNvbnRleHQuZGVmYXVsdC5pbnMuaGFzUGxheWVyU2tpbkRvdCgpO1xyXG4gICAgICAgIHRoaXMuYnRuR3VuU0tpbi5jaGlsZHJlblswXS5hY3RpdmUgPSAkcm9sZUNvbnRleHQuZGVmYXVsdC5pbnMuaGFzR3VuU2tpbkRvdCgpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLm9uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkZXZlbnRNYW5hZ2VyLmRlZmF1bHQub2ZmKCRsb2NhbEV2ZW50TmFtZS5kZWZhdWx0LlJFTkRFUl9HRU0sIHRoaXMudXBkYXRlTGlzdCwgdGhpcyk7XHJcbiAgICAgICAgJGV2ZW50TWFuYWdlci5kZWZhdWx0Lm9mZigkbG9jYWxFdmVudE5hbWUuZGVmYXVsdC5SRU5ERVJfRE9ULCB0aGlzLnJlbmRlckRvdCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5idG5DcmFmdC5vZmYoXCJjbGlja1wiLCB0aGlzLmNsaWNrQ3JhZnQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuYnRuUHJvcHMub2ZmKFwiY2xpY2tcIiwgdGhpcy5jbGlja1Byb3BzLCB0aGlzKTtcclxuICAgICAgICB0aGlzLmJ0bkF1dG9VcGdyYWRlLm9mZihcImNsaWNrXCIsIHRoaXMuY2xpY2tBdXRvVXBncmFkZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5idG5Ta2luLm9mZihcImNsaWNrXCIsIHRoaXMuY2xpY2tTa2luLCB0aGlzKTtcclxuICAgICAgICB0aGlzLmJ0bkd1blNLaW4ub2ZmKFwiY2xpY2tcIiwgdGhpcy5jbGlja0d1blNraW4sIHRoaXMpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLnJlbmRlckRvdCA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgaWYgKHQgPT09ICRzdGFydFZpZXcuTWVudVR5cGUuUm9sZSkge1xyXG4gICAgICAgICAgICB0aGlzLmJ0bkF1dG9VcGdyYWRlLmNoaWxkcmVuWzBdLmFjdGl2ZSA9ICRlcXVpcG1lbnRDb250ZXh0LmRlZmF1bHQuSW5zLmNoZWNrRXF1aXBVcGdyYWRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuYnRuQ3JhZnQuY2hpbGRyZW5bMF0uYWN0aXZlID0gJHJvbGVDb250ZXh0LmRlZmF1bHQuaW5zLmlzQ2FuQ29tcG9zZUdlbSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5jbGlja1NraW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHJlbW90ZUF1ZGlvLmRlZmF1bHQuaW5zdGFuY2UucGxheUVmZmVjdE11c2ljKFwiQ2xpY2tcIik7XHJcbiAgICAgICAgJHVJTWFuYWdlci5VSU1hbmFnZXIuaW5zdGFuY2UucmVwbGFjZVZpZXcoJGFzc2V0c01hcC5Bc3NldHNNYXAuU3RhcnRCdW5kbGVzLnByZWZhYnMuYXNzZXRzTGlzdC5Sb2xlU2hvcFZpZXcpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmNsaWNrR3VuU2tpbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkcmVtb3RlQXVkaW8uZGVmYXVsdC5pbnN0YW5jZS5wbGF5RWZmZWN0TXVzaWMoXCJDbGlja1wiKTtcclxuICAgICAgICAkdUlNYW5hZ2VyLlVJTWFuYWdlci5pbnN0YW5jZS5yZXBsYWNlVmlldygkYXNzZXRzTWFwLkFzc2V0c01hcC5TdGFydEJ1bmRsZXMucHJlZmFicy5hc3NldHNMaXN0Lkd1blNob3BWaWV3KTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5yZW5kZXJJdGVtID0gZnVuY3Rpb24gKHQsIGUpIHtcclxuICAgICAgICBpZiAoISgwICE9PSBlIHx8ICR1c2VyRGF0YUNvbnRleHQuZGVmYXVsdC5JbnMuaXNFbmRHdWlkZSkpIHtcclxuICAgICAgICAgICAgMSA9PT0gJHVzZXJEYXRhQ29udGV4dC5kZWZhdWx0Lklucy5ndWlkZVN0ZXBcclxuICAgICAgICAgICAgICAgID8gJGd1aWRlLmRlZmF1bHQuc2VsZi5zdGFydEd1aWRlVGVzdCh0LCBcIueCueWHu+Wuneefs1wiKVxyXG4gICAgICAgICAgICAgICAgOiAyID09PSAkdXNlckRhdGFDb250ZXh0LmRlZmF1bHQuSW5zLmd1aWRlU3RlcCAmJlxyXG4gICAgICAgICAgICAgICAgICAkZ3VpZGUuZGVmYXVsdC5zZWxmLnN0YXJ0R3VpZGVUZXN0KHRoaXMuYnRuQXV0b1VwZ3JhZGUsIFwi54K55Ye76KOF5aSH5oiW5LiA6ZSu5Y2H57qnXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0LmdldENvbXBvbmVudCgkZ2VtTGlzdEl0ZW0uZGVmYXVsdCkucmVuZGVyKHRoaXMucGFja0xpc3RbZV0pO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLnVwZGF0ZUxpc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJBdGsoKTtcclxuICAgICAgICB0aGlzLmdlbUxpc3Quc2VsZWN0ZWRJZCA9IC0xO1xyXG4gICAgICAgIHRoaXMucGFja0xpc3QgPSAkcm9sZUNvbnRleHQuZGVmYXVsdC5pbnMuc2hvd1BhY2tJbmZvTGlzdCgpO1xyXG4gICAgICAgIHRoaXMuZ2VtTGlzdC5udW1JdGVtcyA9IHRoaXMucGFja0xpc3QubGVuZ3RoO1xyXG4gICAgICAgIHRoaXMuZ2VtTGlzdC51cGRhdGVBbGwoKTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5yZW5kZXJBdGsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHQgPSAwO1xyXG4gICAgICAgIGlmICgkZ2FtZUdlbUluZm8uR2FtZUdlbUluZm8uaW5zLmhhc0dlbSgkZ2FtZUdlbUluZm8uR2VtVHlwZS5BdHRhY2spKSB7XHJcbiAgICAgICAgICAgIHQgPSAkZ2FtZUdlbUluZm8uR2FtZUdlbUluZm8uaW5zLmdldDEoJGdhbWVHZW1JbmZvLkdlbVR5cGUuQXR0YWNrKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdCArPSAkZXF1aXBtZW50Q29udGV4dC5kZWZhdWx0Lklucy5nZXRFcXVpcG1lbnRBdGsoKSArICRlcXVpcG1lbnRDb250ZXh0LmRlZmF1bHQuSW5zLmdldEF0aygpO1xyXG4gICAgICAgIHRoaXMuYXRrLnN0cmluZyA9IFwiXCIgKyB0O1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmNsaWNrQ3JhZnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHJlbW90ZUF1ZGlvLmRlZmF1bHQuaW5zdGFuY2UucGxheUVmZmVjdE11c2ljKFwiQ2xpY2tcIik7XHJcbiAgICAgICAgdmFyIHQgPSAkcm9sZUNvbnRleHQuZGVmYXVsdC5pbnMuZ2V0Q2FuQ29tcG9zZUdlbUxpc3QoKTtcclxuICAgICAgICB0Lmxlbmd0aCA8PSAwXHJcbiAgICAgICAgICAgID8gJHVJTWFuYWdlci5VSU1hbmFnZXIuaW5zdGFuY2Uuc2hvd1RvYXN0KFwi5pqC5peg5ZCI5oiQ5a6d55+zXCIpXHJcbiAgICAgICAgICAgIDogJHBvcHVwTWFuYWdlci5Qb3B1cE1hbmFnZXIuaW5zdGFuY2Uub3BlbihcclxuICAgICAgICAgICAgICAgICAgJGFzc2V0c01hcC5Bc3NldHNNYXAuUG9wVXBCdW5kbGVzLnByZWZhYnMuYXNzZXRzTGlzdC5SZXdhcmRHZW1WaWV3LFxyXG4gICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBnZW1JZHM6IHRcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuY2xpY2tQcm9wcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkcmVtb3RlQXVkaW8uZGVmYXVsdC5pbnN0YW5jZS5wbGF5RWZmZWN0TXVzaWMoXCJDbGlja1wiKTtcclxuICAgICAgICAkcG9wdXBNYW5hZ2VyLlBvcHVwTWFuYWdlci5pbnN0YW5jZS5vcGVuKCRhc3NldHNNYXAuQXNzZXRzTWFwLlBvcFVwQnVuZGxlcy5wcmVmYWJzLmFzc2V0c0xpc3QuR2VtU3RhdHNWaWV3KTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5jbGlja0F1dG9VcGdyYWRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRyZW1vdGVBdWRpby5kZWZhdWx0Lmluc3RhbmNlLnBsYXlFZmZlY3RNdXNpYyhcIkNsaWNrXCIpO1xyXG4gICAgICAgIGlmICghJHVzZXJEYXRhQ29udGV4dC5kZWZhdWx0Lklucy5pc0VuZEd1aWRlKSB7XHJcbiAgICAgICAgICAgICRndWlkZS5kZWZhdWx0LnNlbGYuc3RvcEd1aWRlKCk7XHJcbiAgICAgICAgICAgICR1c2VyRGF0YUNvbnRleHQuZGVmYXVsdC5JbnMuZ3VpZGVFbmQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCRlcXVpcG1lbnRDb250ZXh0LmRlZmF1bHQuSW5zLmNoZWNrRXF1aXBVcGdyYWRlKCkpIHtcclxuICAgICAgICAgICAgdmFyIHQgPSAkZXF1aXBtZW50Q29udGV4dC5kZWZhdWx0Lklucy5hdXRvVXBncmFkZSgpO1xyXG4gICAgICAgICAgICAkZXZlbnRNYW5hZ2VyLmRlZmF1bHQuc2VuZCgkbG9jYWxFdmVudE5hbWUuZGVmYXVsdC5FUVVJUF9VUEdSQURFLCB0KTtcclxuICAgICAgICAgICAgJGV2ZW50TWFuYWdlci5kZWZhdWx0LnNlbmQoJGxvY2FsRXZlbnROYW1lLmRlZmF1bHQuUkVOREVSX0RPVCwgJHN0YXJ0Vmlldy5NZW51VHlwZS5Sb2xlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkdUlNYW5hZ2VyLlVJTWFuYWdlci5pbnN0YW5jZS5zaG93VG9hc3QoXCLmmoLml6DljYfnuqfoo4XlpIdcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIF9fZGVjb3JhdGUoW0MoJGxpc3QuZGVmYXVsdCldLCBlLnByb3RvdHlwZSwgXCJnZW1MaXN0XCIsIHZvaWQgMCk7XHJcbiAgICBfX2RlY29yYXRlKFtDKGNjLkxhYmVsKV0sIGUucHJvdG90eXBlLCBcImF0a1wiLCB2b2lkIDApO1xyXG4gICAgX19kZWNvcmF0ZShbQyhjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcImJ0bkNyYWZ0XCIsIHZvaWQgMCk7XHJcbiAgICBfX2RlY29yYXRlKFtDKGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwiYnRuUHJvcHNcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW0MoY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJidG5BdXRvVXBncmFkZVwiLCB2b2lkIDApO1xyXG4gICAgX19kZWNvcmF0ZShbQyhjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcImJ0blNraW5cIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW0MoJHBsYXllclNraW4uUGxheWVyU2tpbildLCBlLnByb3RvdHlwZSwgXCJwbGF5ZXJTa2luXCIsIHZvaWQgMCk7XHJcbiAgICBfX2RlY29yYXRlKFtDKGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwiYnRuR3VuU0tpblwiLCB2b2lkIDApO1xyXG4gICAgX19kZWNvcmF0ZShbQyhjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcImNoYW5nZUdlbUJ0bnNcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW0MoY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJlcXVpcE5vZGVcIiwgdm9pZCAwKTtcclxuICAgIHJldHVybiBfX2RlY29yYXRlKFtTXSwgZSk7XHJcbn0pKCRpdGVtVmlldy5kZWZhdWx0KTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gSTtcclxuIl19