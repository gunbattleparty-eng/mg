{"version":3,"sources":["assets\\game_script\\scripts\\Bullet_31.js"],"names":["o","$object","require","$assetsLoader","$assetsMap","$resUtil","$countDownUtil","$gamePool","$util","$gameContext","$gameSkillInfo","$enemyStatus","$baseBullet","g","cc","_decorator","_","ccclass","k","property","v","Vec3","ZERO","b","Size","w","t","e","apply","arguments","buttleType","BulletType","thunder_chain","animPrefab","currAtkEnemyCount","currTargetPos","currTarget","targetIsExist","tailNodeArrs","bounceCount","attackEnemy","Map","__extends","prototype","initButtle","i","call","atk","skillParam","skillAtk","Skill4Param","FINAL","speed","count","height","adsorbSize","setScale","v3","node","children","scale","initBullet31","skillId","isUse","getPosition","length","onTrigger","adsorb","object","Trigger","enter","sub","position","addAdsorb","set","stay","CountDownUtil","time","getLastAtkTime","ins","gameRatio","setLastAtkTime","has","x","y","magSqr","get","normalizeSelf","mulSelf","exit","removeAdsorb","updateFrame","isValid","parent","clone","velocity","z","setPosition","attack","getRangeRandomEnemyLayer","getRangeRandomEnemyLayerByPos","destoryBullet","n","instance","PoolKey","THUNDER_CHAIN_ANIMS","instantiate","lowBulletLayer","width","setContentSize","s","r","dirConverAngle","normalize","angle","a","sufferAtk","id","skillSpecialitys","killCount","hitStun","hasDebuff","EnemyDebuffType","STUN","sufferDebuff","type","ALL_ATK_ADD","timeLeft","value","paralysisTime","PARALYSIS","bombRange","createBoom","getButtlePool","thunder_chain_bomb","getRes","BundleNames","Game","AssetsMap","GameBundles","prefabs","assetsList","Bullet_32","ResUtil","getComponent","insert","scheduleOnce","put","removeSelf","__decorate","Prefab","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $object = require(\"./Object\");\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $countDownUtil = require(\"./CountDownUtil\");\r\nvar $gamePool = require(\"./GamePool\");\r\nvar $util = require(\"./Util\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $gameSkillInfo = require(\"./GameSkillInfo\");\r\nvar $enemyStatus = require(\"./EnemyStatus\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar g = cc._decorator;\r\nvar _ = g.ccclass;\r\nvar k = g.property;\r\nvar v = cc.Vec3.ZERO;\r\nvar b = cc.Size.ZERO;\r\nvar w = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.buttleType = $baseBullet.BulletType.thunder_chain;\r\n        e.animPrefab = null;\r\n        e.currAtkEnemyCount = 0;\r\n        e.currTargetPos = null;\r\n        e.currTarget = null;\r\n        e.targetIsExist = !0;\r\n        e.tailNodeArrs = [];\r\n        e.bounceCount = 0;\r\n        e.attackEnemy = new Map();\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.initButtle = function (e, i) {\r\n        t.prototype.initButtle.call(this, e, i);\r\n        this.atk = this.skillParam.skillAtk[$gameSkillInfo.Skill4Param.FINAL];\r\n        this.speed = this.skillParam.speed;\r\n        this.bounceCount = this.skillParam.count;\r\n        b.height = 52;\r\n        if (this.skillParam.adsorbSize > 0) {\r\n            var o = this.skillParam.adsorbSize;\r\n            this.setScale(cc.v3(o, o));\r\n            this.node.children[0].scale = 1 / o;\r\n        }\r\n    };\r\n    e.prototype.initBullet31 = function (t, e) {\r\n        this.skillId = e;\r\n        this.isUse = !1;\r\n        this.currAtkEnemyCount = 0;\r\n        this.targetIsExist = !0;\r\n        this.currTarget = t;\r\n        this.currTargetPos = t.getPosition();\r\n        this.tailNodeArrs.length = 0;\r\n    };\r\n    e.prototype.onTrigger = function (t, e) {\r\n        if (!(this.skillParam.adsorb <= 0)) {\r\n            var i = t.object;\r\n            if (e == $object.Trigger.enter) {\r\n                var o = this.getPosition().sub(i.node.position);\r\n                i.addAdsorb(o);\r\n                this.attackEnemy.set(i, o);\r\n            } else {\r\n                if (e == $object.Trigger.stay) {\r\n                    if (\r\n                        $countDownUtil.CountDownUtil.time - i.getLastAtkTime(4) <=\r\n                        0.1 / $gameContext.default.ins.gameRatio\r\n                    ) {\r\n                        return;\r\n                    }\r\n                    i.setLastAtkTime(4, $countDownUtil.CountDownUtil.time);\r\n                    if (this.attackEnemy.has(i)) {\r\n                        v.x = this.getPosition().x - i.getPosition().x;\r\n                        v.y = this.getPosition().y - i.getPosition().y;\r\n                        v.magSqr() <= 900\r\n                            ? ((this.attackEnemy.get(i).x = 0), (this.attackEnemy.get(i).y = 0))\r\n                            : (v.normalizeSelf().mulSelf(this.skillParam.adsorb),\r\n                              (this.attackEnemy.get(i).x = v.x),\r\n                              (this.attackEnemy.get(i).y = v.y));\r\n                    }\r\n                } else {\r\n                    if (e == $object.Trigger.exit && this.attackEnemy.has(i)) {\r\n                        i.removeAdsorb(this.attackEnemy.get(i));\r\n                        this.attackEnemy.delete(i);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    e.prototype.updateFrame = function (t) {\r\n        if (!this.isUse) {\r\n            if (this.targetIsExist) {\r\n                if (!(cc.isValid(this.currTarget) && this.currTarget.node.parent)) {\r\n                    this.targetIsExist = !1;\r\n                    this.currTargetPos = this.node.position.clone();\r\n                }\r\n            }\r\n            var e = this.getPosition();\r\n            var i = this.velocity;\r\n            v.x = e.x + i.x * t;\r\n            v.y = e.y + i.y * t;\r\n            v.z = e.z + i.z * t;\r\n            this.setPosition(v);\r\n            if (this.node.position.sub(this.currTargetPos).magSqr() < 400) {\r\n                var o = null;\r\n                this.targetIsExist\r\n                    ? (this.attack(), (o = $gameContext.default.ins.getRangeRandomEnemyLayer(this.currTarget.node)))\r\n                    : (o = $gameContext.default.ins.getRangeRandomEnemyLayerByPos(this.currTargetPos));\r\n                this.currAtkEnemyCount++;\r\n                if (!o || this.currAtkEnemyCount >= this.bounceCount) {\r\n                    return void this.destoryBullet();\r\n                }\r\n                this.targetIsExist = !0;\r\n                this.currTarget = o;\r\n                this.currTargetPos = o.getPosition();\r\n            }\r\n            if (this.tailNodeArrs.length < this.currAtkEnemyCount + 1) {\r\n                var n = $gamePool.default.instance.get($gamePool.PoolKey.THUNDER_CHAIN_ANIMS);\r\n                if (!cc.isValid(n)) {\r\n                    n = cc.instantiate(this.animPrefab);\r\n                }\r\n                n.parent = $gameContext.default.ins.lowBulletLayer;\r\n                n.position = this.getPosition().clone();\r\n                b.width = 0;\r\n                n.setContentSize(b);\r\n                this.tailNodeArrs[this.currAtkEnemyCount] = n;\r\n            }\r\n            var s = this.tailNodeArrs[this.currAtkEnemyCount];\r\n            var r = $util.default.dirConverAngle(this.node.position.sub(s.position).normalize());\r\n            s.angle = r;\r\n            b.width = s.width + this.speed * t;\r\n            s.setContentSize(b);\r\n            var a = this.currTargetPos.sub(this.node.position).normalize();\r\n            this.velocity.set(a).mulSelf(this.speed);\r\n        }\r\n    };\r\n    e.prototype.attack = function () {\r\n        this.currTarget.sufferAtk({\r\n            id: 61,\r\n            skillSpecialitys: this.skillSpecialitys,\r\n            atk: this.atk\r\n        })\r\n            ? this.skillParam.killCount > 0 && (this.bounceCount += this.skillParam.killCount)\r\n            : (this.skillParam.hitStun.length > 0 &&\r\n                  this.currTarget.hasDebuff($enemyStatus.EnemyDebuffType.STUN) &&\r\n                  this.currTarget.sufferDebuff({\r\n                      type: $enemyStatus.EnemyDebuffType.ALL_ATK_ADD,\r\n                      timeLeft: this.skillParam.hitStun[0],\r\n                      value: this.skillParam.hitStun[1]\r\n                  }),\r\n              this.skillParam.paralysisTime > 0 &&\r\n                  this.currTarget.sufferDebuff({\r\n                      type: $enemyStatus.EnemyDebuffType.PARALYSIS,\r\n                      timeLeft: this.skillParam.paralysisTime,\r\n                      value: 0\r\n                  }),\r\n              this.skillParam.bombRange > 0 && this.createBoom());\r\n    };\r\n    e.prototype.createBoom = function () {\r\n        var t = $gameContext.default.ins.getButtlePool($baseBullet.BulletType.thunder_chain_bomb);\r\n        if (!t) {\r\n            var e = $assetsLoader.default.instance.getRes(\r\n                $assetsMap.BundleNames.Game,\r\n                $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.Bullet_32\r\n            );\r\n            t = $resUtil.ResUtil.instantiate(e, $gameContext.default.ins.lowBulletLayer.parent).getComponent(\r\n                $baseBullet.default\r\n            );\r\n        }\r\n        t.setPosition(this.currTarget.getPosition());\r\n        t.initButtle(null, this.skillId);\r\n        t.insert($gameContext.default.ins.lowBulletLayer);\r\n    };\r\n    e.prototype.destoryBullet = function () {\r\n        var t = this;\r\n        this.isUse = !0;\r\n        this.scheduleOnce(function () {\r\n            for (var e = 0; e < t.tailNodeArrs.length; e++) {\r\n                $gamePool.default.instance.put($gamePool.PoolKey.THUNDER_CHAIN_ANIMS, t.tailNodeArrs[e]);\r\n            }\r\n            t.removeSelf();\r\n        }, 0.15);\r\n    };\r\n    __decorate([k(cc.Prefab)], e.prototype, \"animPrefab\", void 0);\r\n    return __decorate([_], e);\r\n})($baseBullet.default);\r\nexports.default = w;\r\n"]}