{"version":3,"sources":["assets\\game_script\\scripts\\QQBlock.js"],"names":["o","exports","QQBlock","$aDConfig","require","$baseAd","a","window","qq","l","t","e","apply","arguments","style","__extends","prototype","loadAd","adUnitId","createBlockAd","left","top","size","ADConfig","block_size","orientation","block_orientation","adIns","onLoad","onResize","onError","console","warn","error","showBlock","i","showCallback","errorCallback","isCanShow","isAutoShow","isConsume","reCreateAd","isLoaded","show","n","then","forbiddenBlock","hideBlock","destroyAd","hide","onAdResize","getSystemInfoSync","windowWidth","windowHeight","Math","round","height","width","call","offLoad","offResize","offError","destroy","autoShow","onAdLoad","onAdError","BaseAd"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nexports.QQBlock = void 0;\r\nvar $aDConfig = require(\"./ADConfig\");\r\nvar $baseAd = require(\"./BaseAd\");\r\nvar a = window.qq;\r\nvar l = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.style = null;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.loadAd = function () {\r\n        if (this.adUnitId) {\r\n            if (a && a.createBlockAd) {\r\n                var t = this.style || {};\r\n                var e = {\r\n                    adUnitId: this.adUnitId,\r\n                    style: {\r\n                        left: t.left || 20,\r\n                        top: t.top || 200\r\n                    },\r\n                    size: $aDConfig.ADConfig.qq.block_size,\r\n                    orientation: $aDConfig.ADConfig.qq.block_orientation\r\n                };\r\n                this.adIns = a.createBlockAd(e);\r\n                if (this.adIns.onLoad) {\r\n                    this.adIns.onLoad(this.onLoad);\r\n                }\r\n                if (this.adIns.onResize) {\r\n                    this.adIns.onResize(this.onResize);\r\n                }\r\n                if (this.adIns.onError) {\r\n                    this.adIns.onError(this.onError);\r\n                }\r\n            } else {\r\n                console.warn(\"当前平台不支持创建Block\");\r\n            }\r\n        } else {\r\n            console.error(\"QQ Block ID为空\");\r\n        }\r\n    };\r\n    e.prototype.showBlock = function (t, e, i) {\r\n        var o = this;\r\n        this.showCallback = e;\r\n        this.errorCallback = i;\r\n        if (this.isCanShow) {\r\n            if (!this.adIns) {\r\n                console.warn(this.adUnitId, \":未创建，执行创建\");\r\n                this.isAutoShow = !0;\r\n                this.loadAd();\r\n            }\r\n            if (this.isConsume) {\r\n                this.reCreateAd(!0);\r\n            } else {\r\n                {\r\n                    if (!this.isLoaded) {\r\n                        console.warn(this.adUnitId, \":未加载完成，稍等\");\r\n                        return void (this.isAutoShow = !0);\r\n                    }\r\n                    if (this.adIns && t) {\r\n                        if (void 0 !== t.top) {\r\n                            this.adIns.style.top = t.top;\r\n                        }\r\n                        if (void 0 !== t.left) {\r\n                            this.adIns.style.left = t.left;\r\n                        }\r\n                    }\r\n                    this.style = t;\r\n                    this.isConsume = !1;\r\n                    if (this.adIns.show) {\r\n                        var n = this.adIns.show();\r\n                        n && n.then\r\n                            ? n\r\n                                  .then(function () {\r\n                                      o.isConsume = !0;\r\n                                      if (o.showCallback) {\r\n                                          o.showCallback();\r\n                                      }\r\n                                      o.showCallback = null;\r\n                                  })\r\n                                  .catch(function (t) {\r\n                                      console.warn(o.adUnitId, \":show错误，重新加载\", t);\r\n                                      o.reCreateAd(!0);\r\n                                  })\r\n                            : (console.warn(this.adUnitId, \":show显示失败，重新加载\"), this.reCreateAd(!0));\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            console.warn(this.adUnitId, \":当前广告禁止显示\");\r\n        }\r\n    };\r\n    e.prototype.forbiddenBlock = function (t) {\r\n        this.isCanShow = !t;\r\n        if (t && this.isConsume) {\r\n            this.hideBlock(!1);\r\n        }\r\n    };\r\n    e.prototype.hideBlock = function (t) {\r\n        t ? (this.destroyAd(), this.reCreateAd(!1)) : this.adIns && this.adIns.hide && this.adIns.hide();\r\n    };\r\n    e.prototype.onAdResize = function (t) {\r\n        console.warn(\"onBlockResize\", t);\r\n        var e = a.getSystemInfoSync();\r\n        var i = e.windowWidth;\r\n        var o = e.windowHeight;\r\n        var n = this.style || {};\r\n        null != n.top ? (this.adIns.style.top = n.top) : (this.adIns.style.top = Math.round(o - t.height - 50));\r\n        null != n.left ? (this.adIns.style.left = n.left) : (this.adIns.style.left = Math.round((i - t.width) / 2));\r\n    };\r\n    e.prototype.reCreateAd = function (t) {\r\n        this.destroyAd();\r\n        this.isAutoShow = t;\r\n        this.loadAd();\r\n    };\r\n    e.prototype.destroyAd = function () {\r\n        t.prototype.destroyAd.call(this);\r\n        if (this.adIns) {\r\n            if (this.adIns.offLoad) {\r\n                this.adIns.offLoad(this.onLoad);\r\n            }\r\n            if (this.adIns.offResize) {\r\n                this.adIns.offResize(this.onResize);\r\n            }\r\n            if (this.adIns.offError) {\r\n                this.adIns.offError(this.onError);\r\n            }\r\n            if (this.adIns.destroy) {\r\n                this.adIns.destroy();\r\n            }\r\n            this.adIns = null;\r\n        }\r\n    };\r\n    e.prototype.autoShow = function () {\r\n        if (this.isAutoShow) {\r\n            this.isAutoShow = !1;\r\n            this.showBlock(this.style, this.showCallback, this.errorCallback);\r\n        }\r\n    };\r\n    e.prototype.onAdLoad = function () {\r\n        t.prototype.onAdLoad.call(this);\r\n        this.isConsume = !1;\r\n        this.isLoaded = !0;\r\n        this.autoShow();\r\n    };\r\n    e.prototype.onAdError = function (e) {\r\n        t.prototype.onAdError.call(this, e);\r\n        if (this.errorCallback) {\r\n            this.errorCallback();\r\n        }\r\n        this.destroyAd();\r\n    };\r\n    return e;\r\n})($baseAd.BaseAd);\r\nexports.QQBlock = l;\r\n"]}