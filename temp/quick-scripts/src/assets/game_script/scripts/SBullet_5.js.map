{"version":3,"sources":["assets\\game_script\\scripts\\SBullet_5.js"],"names":["o","$assetsLoader","require","$assetsMap","$resUtil","$gameContext","$baseBullet","d","cc","_decorator","p","ccclass","f","property","Vec3","h","t","e","apply","arguments","buttleType","BulletType","s_bullet_5","leftTime","targetEnemy","targetPos","__extends","prototype","initButtle","speed","winSize","height","ins","skillInfo","skinParam","call","setAngle","addDieCallback","enemyDie","velocity","set","multiplyScalar","getPosition","clone","updateFrame","createBullet","removeDieCallback","removeSelf","i","x","y","z","setPosition","getButtlePool","s_bullet_5_1","instance","getRes","BundleNames","Game","AssetsMap","GameBundles","prefabs","assetsList","SBullet_5_1","ResUtil","instantiate","buttleLayer","parent","getComponent","node","targetY","insert","__decorate","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar d = cc._decorator;\r\nvar p = d.ccclass;\r\nvar f = (d.property, new cc.Vec3());\r\nvar h = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.buttleType = $baseBullet.BulletType.s_bullet_5;\r\n        e.leftTime = 0;\r\n        e.targetEnemy = null;\r\n        e.targetPos = null;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.initButtle = function (e) {\r\n        this.speed = (cc.winSize.height + 60) / $gameContext.default.ins.skillInfo.skinParam[5];\r\n        t.prototype.initButtle.call(this, e, null);\r\n        this.setAngle(0);\r\n        this.leftTime = $gameContext.default.ins.skillInfo.skinParam[5];\r\n        this.targetEnemy.addDieCallback(this.enemyDie, this);\r\n        this.targetPos = null;\r\n        if (e) {\r\n            this.velocity.set(e).multiplyScalar(this.speed);\r\n        }\r\n    };\r\n    e.prototype.enemyDie = function (t) {\r\n        this.targetPos = t.getPosition().clone();\r\n    };\r\n    e.prototype.updateFrame = function (t) {\r\n        if (!(this.leftTime <= 0)) {\r\n            this.leftTime -= t;\r\n            if (this.leftTime <= 0) {\r\n                this.createBullet();\r\n                this.targetEnemy.removeDieCallback(this);\r\n                return this.removeSelf();\r\n            }\r\n            var e = this.getPosition();\r\n            var i = this.velocity;\r\n            f.x = e.x + i.x * t;\r\n            f.y = e.y + i.y * t;\r\n            f.z = e.z + i.z * t;\r\n            this.setPosition(f);\r\n        }\r\n    };\r\n    e.prototype.createBullet = function () {\r\n        if (!this.targetPos) {\r\n            this.targetPos = this.targetEnemy.getPosition().clone();\r\n        }\r\n        var t = $gameContext.default.ins.getButtlePool($baseBullet.BulletType.s_bullet_5_1);\r\n        if (!t) {\r\n            var e = $assetsLoader.default.instance.getRes(\r\n                $assetsMap.BundleNames.Game,\r\n                $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.SBullet_5_1\r\n            );\r\n            t = $resUtil.ResUtil.instantiate(e, $gameContext.default.ins.buttleLayer.parent).getComponent(\r\n                $baseBullet.default\r\n            );\r\n        }\r\n        f.x = this.targetPos.x;\r\n        f.y = this.node.y;\r\n        t.setPosition(f.clone());\r\n        t.targetY = this.targetPos.y;\r\n        f.x = 0;\r\n        f.y = -1;\r\n        t.initButtle(f, null);\r\n        t.insert($gameContext.default.ins.buttleLayer);\r\n    };\r\n    return __decorate([p], e);\r\n})($baseBullet.default);\r\nexports.default = h;\r\n"]}