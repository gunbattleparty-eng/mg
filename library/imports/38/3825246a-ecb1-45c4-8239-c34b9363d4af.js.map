{"version":3,"sources":["assets\\game_script\\scripts\\TTRecorder.js"],"names":["o","window","tt","n","t","_videoPath","_startTime","_stopTime","_onStartCallbackRef","_onStopCallbackRef","prototype","init","onRecorderStart","bind","onRecorderStop","startRecorder","_startCallback","e","getGameRecorderManager","start","duration","onStart","onStop","stopRecorder","console","warn","_stopCallback","stop","getRecordVideoPath","Date","getTime","videoPath","exports"],"mappings":";;;;;;AAAA,IAAIA,CAAC,GAAGC,MAAM,CAACC,EAAf;;AACA,IAAIC,CAAC,GAAI,YAAY;EACjB,SAASC,CAAT,GAAa;IACT,KAAKC,UAAL,GAAkB,EAAlB;IACA,KAAKC,UAAL,GAAkB,CAAC,CAAnB;IACA,KAAKC,SAAL,GAAiB,CAAC,CAAlB;IACA,KAAKC,mBAAL,GAA2B,IAA3B;IACA,KAAKC,kBAAL,GAA0B,IAA1B;EACH;;EACDL,CAAC,CAACM,SAAF,CAAYC,IAAZ,GAAmB,YAAY;IAC3B,KAAKH,mBAAL,GAA2B,KAAKI,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAA3B;IACA,KAAKJ,kBAAL,GAA0B,KAAKK,cAAL,CAAoBD,IAApB,CAAyB,IAAzB,CAA1B;EACH,CAHD;;EAIAT,CAAC,CAACM,SAAF,CAAYK,aAAZ,GAA4B,UAAUX,CAAV,EAAa;IACrC,KAAKY,cAAL,GAAsBZ,CAAtB;IACA,KAAKE,UAAL,GAAkB,CAAC,CAAnB;IACA,KAAKC,SAAL,GAAiB,CAAC,CAAlB;IACA,IAAIU,CAAC,GAAGjB,CAAC,CAACkB,sBAAF,EAAR;IACAD,CAAC,CAACE,KAAF,CAAQ;MACJC,QAAQ,EAAE;IADN,CAAR;IAGAH,CAAC,CAACI,OAAF,CAAU,KAAKb,mBAAf;IACAS,CAAC,CAACK,MAAF,CAAS,KAAKb,kBAAd;EACH,CAVD;;EAWAL,CAAC,CAACM,SAAF,CAAYa,YAAZ,GAA2B,UAAUnB,CAAV,EAAa;IACpCoB,OAAO,CAACC,IAAR,CAAa,MAAb;IACA,KAAKC,aAAL,GAAqBtB,CAArB;IACAJ,CAAC,CAACkB,sBAAF,GAA2BS,IAA3B;EACH,CAJD;;EAKAvB,CAAC,CAACM,SAAF,CAAYkB,kBAAZ,GAAiC,YAAY;IACzC,OAAO,KAAKvB,UAAL,GAAkB,KAAKA,UAAvB,GAAoC,EAA3C;EACH,CAFD;;EAGAD,CAAC,CAACM,SAAF,CAAYE,eAAZ,GAA8B,YAAY;IACtC,KAAKP,UAAL,GAAkB,EAAlB;IACA,KAAKC,UAAL,GAAkB,IAAIuB,IAAJ,GAAWC,OAAX,EAAlB;;IACA,IAAI,KAAKd,cAAT,EAAyB;MACrB,KAAKA,cAAL;IACH;;IACD,KAAKA,cAAL,GAAsB,IAAtB;EACH,CAPD;;EAQAZ,CAAC,CAACM,SAAF,CAAYI,cAAZ,GAA6B,UAAUV,CAAV,EAAa;IACtC,KAAKG,SAAL,GAAiB,IAAIsB,IAAJ,GAAWC,OAAX,EAAjB;IACA,IAAIb,CAAC,GAAG,KAAKV,SAAL,GAAiB,KAAKD,UAA9B;IACA,KAAKD,UAAL,GAAkBY,CAAC,GAAG,GAAJ,GAAU,EAAV,GAAeb,CAAC,CAAC2B,SAAnC;;IACA,IAAI,KAAKL,aAAT,EAAwB;MACpB,KAAKA,aAAL,CAAmB,KAAKrB,UAAxB,EAAoCY,CAApC;IACH;;IACD,KAAKS,aAAL,GAAqB,IAArB;EACH,CARD;;EASA,OAAOtB,CAAP;AACH,CAjDO,EAAR;;AAkDA4B,OAAO,WAAP,GAAkB7B,CAAlB","sourceRoot":"/","sourcesContent":["var o = window.tt;\r\nvar n = (function () {\r\n    function t() {\r\n        this._videoPath = \"\";\r\n        this._startTime = -1;\r\n        this._stopTime = -1;\r\n        this._onStartCallbackRef = null;\r\n        this._onStopCallbackRef = null;\r\n    }\r\n    t.prototype.init = function () {\r\n        this._onStartCallbackRef = this.onRecorderStart.bind(this);\r\n        this._onStopCallbackRef = this.onRecorderStop.bind(this);\r\n    };\r\n    t.prototype.startRecorder = function (t) {\r\n        this._startCallback = t;\r\n        this._startTime = -1;\r\n        this._stopTime = -1;\r\n        var e = o.getGameRecorderManager();\r\n        e.start({\r\n            duration: 300\r\n        });\r\n        e.onStart(this._onStartCallbackRef);\r\n        e.onStop(this._onStopCallbackRef);\r\n    };\r\n    t.prototype.stopRecorder = function (t) {\r\n        console.warn(\"录屏停止\");\r\n        this._stopCallback = t;\r\n        o.getGameRecorderManager().stop();\r\n    };\r\n    t.prototype.getRecordVideoPath = function () {\r\n        return this._videoPath ? this._videoPath : \"\";\r\n    };\r\n    t.prototype.onRecorderStart = function () {\r\n        this._videoPath = \"\";\r\n        this._startTime = new Date().getTime();\r\n        if (this._startCallback) {\r\n            this._startCallback();\r\n        }\r\n        this._startCallback = null;\r\n    };\r\n    t.prototype.onRecorderStop = function (t) {\r\n        this._stopTime = new Date().getTime();\r\n        var e = this._stopTime - this._startTime;\r\n        this._videoPath = e < 3e3 ? \"\" : t.videoPath;\r\n        if (this._stopCallback) {\r\n            this._stopCallback(this._videoPath, e);\r\n        }\r\n        this._stopCallback = null;\r\n    };\r\n    return t;\r\n})();\r\nexports.default = n;\r\n"]}