{"version":3,"sources":["assets\\game_script\\scripts\\Bullet_30.js"],"names":["o","$object","require","$shape","$countDownUtil","$gameContext","$gameSkillInfo","$baseBullet","p","cc","_decorator","f","ccclass","h","property","Vec3","ZERO","m","t","e","apply","arguments","buttleType","BulletType","drat_release","_type","ShapeType","Sphere","isStop","countTime","time","leftTime","r","countSpeed","__extends","prototype","initButtle","i","call","speed","skillParam","Skill4Param","FINAL","releaseSize","setScale","v3","releaseDistance","releaseTime","atk","releaseAtk","onTrigger","isUse","Trigger","stay","object","CountDownUtil","getLastAtkTime","releaseInterval","ins","gameRatio","setLastAtkTime","sufferAtk","id","skillId","skillSpecialitys","updateFrame","removeSelf","move","easeCos","getPosition","velocity","x","y","z","winSize","height","setPosition","Math","cos","PI","__decorate","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $object = require(\"./Object\");\r\nvar $shape = require(\"./Shape\");\r\nvar $countDownUtil = require(\"./CountDownUtil\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $gameSkillInfo = require(\"./GameSkillInfo\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar p = cc._decorator;\r\nvar f = p.ccclass;\r\nvar h = (p.property, cc.Vec3.ZERO);\r\nvar m = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.buttleType = $baseBullet.BulletType.drat_release;\r\n        e._type = $shape.ShapeType.Sphere;\r\n        e.isStop = !1;\r\n        e.countTime = 0;\r\n        e.time = 0;\r\n        e.leftTime = 0;\r\n        e.r = 70;\r\n        e.countSpeed = 0;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.initButtle = function (e, i) {\r\n        t.prototype.initButtle.call(this, e, i);\r\n        this.isStop = !1;\r\n        this.speed = 0;\r\n        this.countSpeed = 1.6 * this.skillParam.speed[$gameSkillInfo.Skill4Param.FINAL];\r\n        var o = this.skillParam.releaseSize;\r\n        this.setScale(cc.v3(o, o));\r\n        this.r = 70 * o;\r\n        this.countTime = this.skillParam.releaseDistance / this.countSpeed;\r\n        this.time = 0;\r\n        this.leftTime = this.skillParam.releaseTime;\r\n        this.atk = this.skillParam.releaseAtk[$gameSkillInfo.Skill4Param.FINAL];\r\n    };\r\n    e.prototype.onTrigger = function (t, e) {\r\n        if (!this.isUse && e == $object.Trigger.stay) {\r\n            var i = t.object;\r\n            if (\r\n                $countDownUtil.CountDownUtil.time - i.getLastAtkTime(9) <=\r\n                this.skillParam.releaseInterval / $gameContext.default.ins.gameRatio\r\n            ) {\r\n                return;\r\n            }\r\n            i.setLastAtkTime(9, $countDownUtil.CountDownUtil.time);\r\n            i.sufferAtk({\r\n                id: this.skillId,\r\n                skillSpecialitys: this.skillSpecialitys,\r\n                atk: this.atk\r\n            });\r\n        }\r\n    };\r\n    e.prototype.updateFrame = function (t) {\r\n        if (!this.isUse) {\r\n            this.leftTime -= t;\r\n            if (this.leftTime <= 0) {\r\n                this.isUse = !0;\r\n                this.removeSelf();\r\n            }\r\n            if (!this.isStop) {\r\n                this.time += t;\r\n                if (this.time >= this.countTime) {\r\n                    this.isStop = !0;\r\n                }\r\n                this.move(t);\r\n            }\r\n        }\r\n    };\r\n    e.prototype.move = function (t) {\r\n        this.speed = this.easeCos(this.time, 0, this.countSpeed, this.countTime);\r\n        var e = this.getPosition();\r\n        var i = this.velocity;\r\n        h.x = e.x + i.x * t * this.speed;\r\n        h.y = e.y + i.y * t * this.speed;\r\n        h.z = e.z + i.z * t * this.speed;\r\n        h.x < -360 + this.r || h.x > 360 - this.r\r\n            ? ((h.x = e.x), (this.isStop = !0))\r\n            : (h.y < -450 + this.r || h.y > cc.winSize.height / 2 - this.r) && ((h.y = e.y), (this.isStop = !0));\r\n        this.setPosition(h);\r\n    };\r\n    e.prototype.easeCos = function (t, e, i, o) {\r\n        return i * Math.cos(((t / o) * Math.PI) / 2) + e;\r\n    };\r\n    return __decorate([f], e);\r\n})($baseBullet.default);\r\nexports.default = m;\r\n"]}