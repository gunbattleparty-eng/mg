{"version":3,"sources":["assets\\game_script\\scripts\\SBullet_6_1.js"],"names":["o","$object","require","$util","$gameContext","$baseBullet","u","cc","_decorator","d","ccclass","p","property","Vec3","f","t","e","apply","arguments","buttleType","BulletType","s_bullet_6_1","targetEnemy","leftTime","findLeftTime","status","angleSpeed","__extends","prototype","initButtle","speed","ins","skillInfo","skinParam","call","velocity","set","multiplyScalar","addDieCallback","dieEnemy","isUse","atk","skinAtk","changeEnemy","getRandomEnemy","updateFrame","removeSelf","move","getPosition","subtract","magSqr","trace","lerpAngleRes","setAngle","angleConverDir","normalizeSelf","mulSelf","dirConverAngle","i","node","angle","Math","abs","x","y","z","winSize","height","setPosition","onTrigger","Trigger","enter","object","sufferAtk","skillSpecialitys","__decorate","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $object = require(\"./Object\");\r\nvar $util = require(\"./Util\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar u = cc._decorator;\r\nvar d = u.ccclass;\r\nvar p = (u.property, new cc.Vec3());\r\nvar f = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.buttleType = $baseBullet.BulletType.s_bullet_6_1;\r\n        e.targetEnemy = null;\r\n        e.leftTime = 0;\r\n        e.findLeftTime = 0;\r\n        e.status = 0;\r\n        e.angleSpeed = 3;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.initButtle = function (e) {\r\n        this.speed = $gameContext.default.ins.skillInfo.skinParam[6];\r\n        t.prototype.initButtle.call(this, e, null);\r\n        if (e) {\r\n            this.velocity.set(e).multiplyScalar(this.speed);\r\n        }\r\n        this.leftTime = $gameContext.default.ins.skillInfo.skinParam[5];\r\n        this.targetEnemy.addDieCallback(this.dieEnemy, this);\r\n        this.isUse = !1;\r\n        this.atk = $gameContext.default.ins.skillInfo.skinAtk;\r\n        this.status = 1;\r\n    };\r\n    e.prototype.dieEnemy = function () {\r\n        this.changeEnemy();\r\n    };\r\n    e.prototype.changeEnemy = function () {\r\n        var t = $gameContext.default.ins.getRandomEnemy(this.targetEnemy);\r\n        t\r\n            ? ((this.targetEnemy = t), this.targetEnemy.addDieCallback(this.dieEnemy, this), (this.status = 1))\r\n            : (this.status = 0);\r\n    };\r\n    e.prototype.updateFrame = function (t) {\r\n        if (!this.isUse) {\r\n            this.leftTime -= t;\r\n            if (this.leftTime <= 0) {\r\n                this.isUse = !0;\r\n                return this.removeSelf();\r\n            }\r\n            0 === this.status\r\n                ? ((this.findLeftTime -= t),\r\n                  this.findLeftTime <= 0 && ((this.findLeftTime = 1.5), this.changeEnemy()),\r\n                  this.move(t))\r\n                : 1 === this.status &&\r\n                  (this.getPosition().subtract(this.targetEnemy.getPosition()).magSqr() <= 900\r\n                      ? this.move(t)\r\n                      : this.trace(t));\r\n        }\r\n    };\r\n    e.prototype.trace = function (t) {\r\n        var e = this.lerpAngleRes(this.targetEnemy.getPosition().subtract(this.getPosition()));\r\n        this.setAngle(e);\r\n        this.velocity.set($util.default.angleConverDir(e).normalizeSelf()).mulSelf(this.speed);\r\n        this.move(t);\r\n    };\r\n    e.prototype.lerpAngleRes = function (t) {\r\n        var e = ($util.default.dirConverAngle(t) + 360) % 360;\r\n        var i = (this.node.angle + 360) % 360;\r\n        return Math.abs(i - e) <= this.angleSpeed\r\n            ? e\r\n            : ((i - e + 360) % 360 < (e - i + 360) % 360 ? (i -= this.angleSpeed) : (i += this.angleSpeed), i);\r\n    };\r\n    e.prototype.move = function (t) {\r\n        var e = this.getPosition();\r\n        var i = this.velocity;\r\n        p.x = e.x + i.x * t;\r\n        p.y = e.y + i.y * t;\r\n        p.z = e.z + i.z * t;\r\n        if (p.x < -335 || p.x > 335) {\r\n            p.x = e.x;\r\n            this.velocity.x = -this.velocity.x;\r\n            var o = $util.default.dirConverAngle(this.velocity);\r\n            this.setAngle(o);\r\n        }\r\n        if (p.y < -365 || p.y > cc.winSize.height / 2 - 25) {\r\n            p.y = e.y;\r\n            this.velocity.y = -this.velocity.y;\r\n            o = $util.default.dirConverAngle(this.velocity);\r\n            this.setAngle(o);\r\n        }\r\n        this.setPosition(p);\r\n    };\r\n    e.prototype.onTrigger = function (t, e) {\r\n        if (e == $object.Trigger.enter) {\r\n            t.object.sufferAtk({\r\n                skillSpecialitys: this.skillSpecialitys,\r\n                atk: this.atk\r\n            });\r\n        }\r\n    };\r\n    return __decorate([d], e);\r\n})($baseBullet.default);\r\nexports.default = f;\r\n"]}