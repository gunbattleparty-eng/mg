{"version":3,"sources":["assets\\game_script\\scripts\\BattleView.js"],"names":["o","$assetsLoader","require","$assetsMap","$eventManager","$popupManager","$uIManager","$platform","$remoteAudio","$util","$battleContext","$configContext","$equipmentContext","$globalParam","$localEventName","$onlineContext","$switchContext","$taskContext","$userDataContext","$gameContext","$coinDiamondView","$itemView","$startView","B","cc","_decorator","x","ccclass","O","property","L","t","e","apply","arguments","levelContent","btnStart","btnPre","btnNext","levelLabel","progressBox","btnTask","btnOnline","btnTip","btnPack","btnSweep","progressLayer","btnEgg","btnRank","btnWeek","bg","bg2","isAnim","anims","__extends","prototype","onLoad","SwitchContext","currVersion","GameVersion","V2","spriteFrame","start","on","RENDER_DOT","renderDot","clickGame","render","clickPre","clickNext","clickTask","clickOnline","Node","EventType","TOUCH_START","touchBox","clickTip","clickPack","clickSweep","active","Ins","getLastRecord","level","clickEgg","clickRank","clickWeek","MenuType","Battle","instance","getAdSwitch2","onDestroy","off","playEffectMusic","PopupManager","open","AssetsMap","PopUpBundles","prefabs","assetsList","WeeklyPassView","Platform","currPlatForm","PlatformEnum","BROWSER","UIManager","showToast","RankView","EggTipView","reuse","ALL","children","hasRedDot","isSign","getSweepTime","getCurrConfigIndex","SweepView","NewPackView","currLevel","TaskView","OnlineView","BattleTipView","countLevel","string","updateMaterialState","renderProgress","renderBox","getRecord","resBlood","getComponent","Label","Math","floor","time","formatDate","opearPower","refreshGameGem","i","getConfigByLevel","deepCopy","Monsterspool","n","length","push","getEgg","lodingView","BundleNames","Game","Enemy","__awaiter","__generator","label","ins","loadLevel","sent","loadResSync","Prefab","replaceView","GameBundles","GameView","removeLoadingView","CoinDiamondView","type","AstType","POWER","canPassBoxIndex","dragonBones","ArmatureDisplay","playAnimation","once","EventObject","COMPLETE","openBox","RewardView","infos","getChildByName","isGainBox","boxStatus","s","r","__decorate","Sprite","SpriteFrame","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $popupManager = require(\"./PopupManager\");\r\nvar $uIManager = require(\"./UIManager\");\r\nvar $platform = require(\"./Platform\");\r\nvar $remoteAudio = require(\"./RemoteAudio\");\r\nvar $util = require(\"./Util\");\r\nvar $battleContext = require(\"./BattleContext\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $equipmentContext = require(\"./EquipmentContext\");\r\nvar $globalParam = require(\"./GlobalParam\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $onlineContext = require(\"./OnlineContext\");\r\nvar $switchContext = require(\"./SwitchContext\");\r\nvar $taskContext = require(\"./TaskContext\");\r\nvar $userDataContext = require(\"./UserDataContext\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $coinDiamondView = require(\"./CoinDiamondView\");\r\nvar $itemView = require(\"./ItemView\");\r\nvar $startView = require(\"./StartView\");\r\nvar B = cc._decorator;\r\nvar x = B.ccclass;\r\nvar O = B.property;\r\nvar L = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.levelContent = null;\r\n        e.btnStart = null;\r\n        e.btnPre = null;\r\n        e.btnNext = null;\r\n        e.levelLabel = null;\r\n        e.progressBox = null;\r\n        e.btnTask = null;\r\n        e.btnOnline = null;\r\n        e.btnTip = null;\r\n        e.btnPack = null;\r\n        e.btnSweep = null;\r\n        e.progressLayer = null;\r\n        e.btnEgg = null;\r\n        e.btnRank = null;\r\n        e.btnWeek = null;\r\n        e.bg = null;\r\n        e.bg2 = null;\r\n        e.isAnim = !1;\r\n        e.anims = [\"stand1\", \"stand3\", \"stand2\"];\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.onLoad = function () {\r\n        if ($switchContext.SwitchContext.currVersion === $switchContext.GameVersion.V2) {\r\n            this.bg.spriteFrame = this.bg2;\r\n        }\r\n    };\r\n    e.prototype.start = function () {\r\n        $eventManager.default.on($localEventName.default.RENDER_DOT, this.renderDot, this);\r\n        this.btnStart.on(\"click\", this.clickGame, this);\r\n        this.render();\r\n        this.btnPre.on(\"click\", this.clickPre, this);\r\n        this.btnNext.on(\"click\", this.clickNext, this);\r\n        this.btnTask.on(\"click\", this.clickTask, this);\r\n        this.btnOnline.on(\"click\", this.clickOnline, this);\r\n        this.progressBox.on(cc.Node.EventType.TOUCH_START, this.touchBox, this);\r\n        this.btnTip.on(\"click\", this.clickTip, this);\r\n        this.btnPack.on(\"click\", this.clickPack, this);\r\n        this.btnSweep.on(\"click\", this.clickSweep, this);\r\n        this.btnSweep.active = $battleContext.default.Ins.getLastRecord().level > 0;\r\n        this.btnEgg.on(\"click\", this.clickEgg, this);\r\n        this.btnRank.on(\"click\", this.clickRank, this);\r\n        this.btnWeek.on(\"click\", this.clickWeek, this);\r\n        this.renderDot($startView.MenuType.Battle);\r\n        if (!$configContext.default.instance.getAdSwitch2(\"open_shop_diamond\")) {\r\n            if ($switchContext.SwitchContext.currVersion === $switchContext.GameVersion.V2) {\r\n                this.btnOnline.active = !1;\r\n                this.btnPack.active = !1;\r\n                this.btnEgg.active = !1;\r\n                this.btnTask.active = !1;\r\n                this.btnRank.active = !1;\r\n            }\r\n            this.btnWeek.active = !1;\r\n        }\r\n    };\r\n    e.prototype.onDestroy = function () {\r\n        $eventManager.default.off($localEventName.default.RENDER_DOT, this.renderDot, this);\r\n        this.btnStart.off(\"click\", this.clickGame, this);\r\n        this.btnPre.off(\"click\", this.clickPre, this);\r\n        this.btnNext.off(\"click\", this.clickNext, this);\r\n        this.btnTask.off(\"click\", this.clickTask, this);\r\n        this.btnOnline.off(\"click\", this.clickOnline, this);\r\n        this.progressBox.off(cc.Node.EventType.TOUCH_START, this.touchBox, this);\r\n        this.btnTip.off(\"click\", this.clickTip, this);\r\n        this.btnPack.off(\"click\", this.clickPack, this);\r\n        this.btnSweep.off(\"click\", this.clickSweep, this);\r\n        this.btnEgg.off(\"click\", this.clickEgg, this);\r\n        this.btnRank.off(\"click\", this.clickRank, this);\r\n        this.btnWeek.off(\"click\", this.clickWeek, this);\r\n    };\r\n    e.prototype.clickWeek = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.WeeklyPassView);\r\n    };\r\n    e.prototype.clickRank = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        if (\r\n            $battleContext.default.Ins.getLastRecord().level < 10 &&\r\n            $platform.Platform.currPlatForm !== $platform.PlatformEnum.BROWSER\r\n        ) {\r\n            return $uIManager.UIManager.instance.showToast(\"通关10关解锁排行榜\");\r\n        }\r\n        $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.RankView);\r\n    };\r\n    e.prototype.clickEgg = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.EggTipView);\r\n    };\r\n    e.prototype.reuse = function () {\r\n        this.renderDot($startView.MenuType.Battle);\r\n    };\r\n    e.prototype.renderDot = function (t) {\r\n        if (!(t !== $startView.MenuType.Battle && t !== $startView.MenuType.ALL)) {\r\n            this.btnOnline.children[0].active = $onlineContext.default.Ins.hasRedDot();\r\n            this.btnTask.children[0].active = $taskContext.default.Ins.hasRedDot();\r\n            this.btnPack.children[1].active = !$userDataContext.default.Ins.isSign();\r\n            this.btnSweep.children[1].active = $userDataContext.default.Ins.getSweepTime() >= 8;\r\n            this.btnEgg.children[1].active = -1 === $userDataContext.default.Ins.getCurrConfigIndex();\r\n        }\r\n    };\r\n    e.prototype.clickSweep = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.SweepView);\r\n    };\r\n    e.prototype.clickPack = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.NewPackView);\r\n    };\r\n    e.prototype.clickPre = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        $battleContext.default.Ins.currLevel--;\r\n        this.render();\r\n    };\r\n    e.prototype.clickNext = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        $battleContext.default.Ins.currLevel++;\r\n        this.render();\r\n    };\r\n    e.prototype.clickTask = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.TaskView);\r\n    };\r\n    e.prototype.clickOnline = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.OnlineView);\r\n    };\r\n    e.prototype.clickTip = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.BattleTipView, {\r\n            level: $battleContext.default.Ins.currLevel\r\n        });\r\n    };\r\n    e.prototype.render = function () {\r\n        var t = $battleContext.default.Ins.getLastRecord().level;\r\n        this.btnPre.active = 1 !== $battleContext.default.Ins.currLevel;\r\n        this.btnNext.active =\r\n            $battleContext.default.Ins.currLevel < $globalParam.default.countLevel &&\r\n            $battleContext.default.Ins.currLevel < t + 2;\r\n        this.levelLabel.string = \"第\" + $battleContext.default.Ins.currLevel + \"关\";\r\n        this.btnStart.active = $battleContext.default.Ins.currLevel < t + 2;\r\n        $util.default.updateMaterialState(this.levelContent, !this.btnStart.active);\r\n        this.renderProgress();\r\n        this.renderBox(!this.btnStart.active);\r\n    };\r\n    e.prototype.renderProgress = function () {\r\n        var t = $battleContext.default.Ins.getRecord($battleContext.default.Ins.currLevel);\r\n        this.progressLayer.children[0].active = !1;\r\n        this.progressLayer.children[1].active = !1;\r\n        if (t.resBlood >= 1) {\r\n            this.progressLayer.children[0].active = !0;\r\n        } else {\r\n            if (t.resBlood > 0) {\r\n                this.progressLayer.children[1].active = !0;\r\n                this.progressLayer.children[1].getComponent(cc.Label).string =\r\n                    \"城墙血量记录：\" + Math.floor(100 * t.resBlood) + \"%\";\r\n            } else {\r\n                if (t.time > 0) {\r\n                    this.progressLayer.children[1].active = !0;\r\n                    var e = $util.default.formatDate(t.time);\r\n                    this.progressLayer.children[1].getComponent(cc.Label).string = \"坚守时间:\" + e[1] + \":\" + e[2];\r\n                }\r\n            }\r\n        }\r\n    };\r\n    e.prototype.clickGame = function () {\r\n        var t = this;\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        if ($userDataContext.default.Ins.opearPower(-5)) {\r\n            $equipmentContext.default.Ins.refreshGameGem();\r\n            var e = [];\r\n            var i = $configContext.default.instance.getConfigByLevel($battleContext.default.Ins.currLevel);\r\n            var o = $util.default.deepCopy(i.Monsterspool);\r\n            for (var n = 0; n < o.length; n++) {\r\n                e.push(\"/prefabs/Enemy_\" + o[n]);\r\n            }\r\n            if (0 === $userDataContext.default.Ins.getEgg(6) && 6 === $battleContext.default.Ins.currLevel) {\r\n                e.push(\"/prefabs/EggEnemy_1\");\r\n            }\r\n            $uIManager.UIManager.instance.lodingView(\r\n                [$assetsMap.BundleNames.Game, $assetsMap.BundleNames.Enemy],\r\n                [$assetsMap.BundleNames.Game],\r\n                function () {\r\n                    return __awaiter(t, void 0, void 0, function () {\r\n                        return __generator(this, function (t) {\r\n                            switch (t.label) {\r\n                                case 0:\r\n                                    return [\r\n                                        4,\r\n                                        $gameContext.default.ins.loadLevel($battleContext.default.Ins.currLevel)\r\n                                    ];\r\n                                case 1:\r\n                                    t.sent();\r\n                                    return [\r\n                                        4,\r\n                                        $assetsLoader.default.instance.loadResSync(\r\n                                            $assetsMap.BundleNames.Enemy,\r\n                                            e,\r\n                                            cc.Prefab\r\n                                        )\r\n                                    ];\r\n                                case 2:\r\n                                    t.sent();\r\n                                    $uIManager.UIManager.instance.replaceView(\r\n                                        $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.GameView\r\n                                    );\r\n                                    $uIManager.UIManager.instance.removeLoadingView();\r\n                                    return [2];\r\n                            }\r\n                        });\r\n                    });\r\n                },\r\n                !1\r\n            );\r\n        } else {\r\n            $popupManager.PopupManager.instance.open(\r\n                $assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.CoinDiamondView,\r\n                {\r\n                    type: $coinDiamondView.AstType.POWER\r\n                }\r\n            );\r\n        }\r\n    };\r\n    e.prototype.touchBox = function () {\r\n        var t = this;\r\n        var e = $battleContext.default.Ins.canPassBoxIndex($battleContext.default.Ins.currLevel);\r\n        if (-1 !== e) {\r\n            $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n            if (this.isAnim) {\r\n                $uIManager.UIManager.instance.showToast(\"动画正在播放中~\");\r\n            } else {\r\n                {\r\n                    this.isAnim = !0;\r\n                    var i = this.progressBox.children[e].getComponent(dragonBones.ArmatureDisplay);\r\n                    i.playAnimation(\"on\", 1);\r\n                    i.once(\r\n                        dragonBones.EventObject.COMPLETE,\r\n                        function () {\r\n                            t.isAnim = !1;\r\n                            var i = $battleContext.default.Ins.openBox($battleContext.default.Ins.currLevel, e);\r\n                            $popupManager.PopupManager.instance.open(\r\n                                $assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.RewardView,\r\n                                {\r\n                                    infos: i\r\n                                }\r\n                            );\r\n                            t.renderBox();\r\n                        },\r\n                        this\r\n                    );\r\n                }\r\n            }\r\n        }\r\n    };\r\n    e.prototype.renderBox = function (t) {\r\n        if (void 0 === t) {\r\n            t = !1;\r\n        }\r\n        var e = $battleContext.default.Ins.currLevel;\r\n        var i = this.progressBox.getChildByName(\"progress_dot\").children;\r\n        for (var o = 0; o < 3; o++) {\r\n            i[o].active = $battleContext.default.Ins.isGainBox(e, o);\r\n            var n = this.anims[$battleContext.default.Ins.boxStatus(e, o)];\r\n            if (t) {\r\n                n = \"stand4\";\r\n            }\r\n            this.progressBox.children[o].getComponent(dragonBones.ArmatureDisplay).playAnimation(n, 0);\r\n        }\r\n        var s = this.progressBox.getChildByName(\"progress_bar\").children;\r\n        var r = $battleContext.default.Ins.getRecord(e);\r\n        s[0].active = r.resBlood >= 0.5;\r\n        s[1].active = r.resBlood >= 1;\r\n    };\r\n    __decorate([O(cc.Node)], e.prototype, \"levelContent\", void 0);\r\n    __decorate([O(cc.Node)], e.prototype, \"btnStart\", void 0);\r\n    __decorate([O(cc.Node)], e.prototype, \"btnPre\", void 0);\r\n    __decorate([O(cc.Node)], e.prototype, \"btnNext\", void 0);\r\n    __decorate([O(cc.Label)], e.prototype, \"levelLabel\", void 0);\r\n    __decorate([O(cc.Node)], e.prototype, \"progressBox\", void 0);\r\n    __decorate([O(cc.Node)], e.prototype, \"btnTask\", void 0);\r\n    __decorate([O(cc.Node)], e.prototype, \"btnOnline\", void 0);\r\n    __decorate([O(cc.Node)], e.prototype, \"btnTip\", void 0);\r\n    __decorate([O(cc.Node)], e.prototype, \"btnPack\", void 0);\r\n    __decorate([O(cc.Node)], e.prototype, \"btnSweep\", void 0);\r\n    __decorate([O(cc.Node)], e.prototype, \"progressLayer\", void 0);\r\n    __decorate([O(cc.Node)], e.prototype, \"btnEgg\", void 0);\r\n    __decorate([O(cc.Node)], e.prototype, \"btnRank\", void 0);\r\n    __decorate([O(cc.Node)], e.prototype, \"btnWeek\", void 0);\r\n    __decorate([O(cc.Sprite)], e.prototype, \"bg\", void 0);\r\n    __decorate([O(cc.SpriteFrame)], e.prototype, \"bg2\", void 0);\r\n    return __decorate([x], e);\r\n})($itemView.default);\r\nexports.default = L;\r\n"]}