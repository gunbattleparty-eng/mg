{"version":3,"sources":["assets\\game_script\\scripts\\Enemy_40.js"],"names":["o","$eventManager","require","$globalParam","$localEventName","$baseBullet","$gameContext","$baseEnemy","$healthBar","f","cc","_decorator","h","ccclass","m","property","y","t","e","apply","arguments","healthBar","createEnemyId","__extends","prototype","initEnemy","i","call","statusManager","clear","specialityAtkAdd","set","BulletSpeciality","physics","config","value","laser","fire","init","hp","hp_num","sufferAttack","isDie","render","dieAnim","Math","abs","getPosition","doorY","skin","node","opacity","createEnemy","ins","removeEnemy","off","dragonBones","EventObject","COMPLETE","timeScale","gameRatio","playAnimation","unscheduleAllCallbacks","once","send","CREATE_ENEMY","v3","x","Avoid_injury","lot","monster_type","bossChooseSKill","removeSelf","__decorate","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $globalParam = require(\"./GlobalParam\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $baseEnemy = require(\"./BaseEnemy\");\r\nvar $healthBar = require(\"./HealthBar\");\r\nvar f = cc._decorator;\r\nvar h = f.ccclass;\r\nvar m = f.property;\r\nvar y = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.healthBar = null;\r\n        e.createEnemyId = 44;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.initEnemy = function (e, i, o) {\r\n        if (void 0 === o) {\r\n            o = 0;\r\n        }\r\n        t.prototype.initEnemy.call(this, e, i, o);\r\n        this.statusManager.clear();\r\n        this.statusManager.specialityAtkAdd.set($baseBullet.BulletSpeciality.physics, this.config.value[0]);\r\n        this.statusManager.specialityAtkAdd.set($baseBullet.BulletSpeciality.laser, this.config.value[1]);\r\n        this.statusManager.specialityAtkAdd.set($baseBullet.BulletSpeciality.fire, this.config.value[2]);\r\n        if (this.healthBar) {\r\n            this.healthBar.init(this.statusManager.hp, e.hp_num);\r\n        }\r\n    };\r\n    e.prototype.sufferAttack = function (e, i) {\r\n        if (this.statusManager.isDie) {\r\n            return !1;\r\n        }\r\n        var o = t.prototype.sufferAttack.call(this, e, i);\r\n        if (this.healthBar) {\r\n            this.healthBar.render(this.statusManager.hp);\r\n        }\r\n        return o;\r\n    };\r\n    e.prototype.dieAnim = function () {\r\n        return Math.abs(this.getPosition().y - $globalParam.default.doorY) >= this.config.value[1]\r\n            ? ((this.skin.node.opacity = 1), this.createEnemy(), !1)\r\n            : t.prototype.dieAnim.call(this);\r\n    };\r\n    e.prototype.createEnemy = function () {\r\n        var t = this;\r\n        $gameContext.default.ins.removeEnemy(this);\r\n        this.skin.off(dragonBones.EventObject.COMPLETE);\r\n        this.skin.timeScale = $gameContext.default.ins.gameRatio;\r\n        this.skin.playAnimation(\"boom\", 1);\r\n        this.unscheduleAllCallbacks();\r\n        this.skin.once(\r\n            dragonBones.EventObject.COMPLETE,\r\n            function () {\r\n                $eventManager.default.send(\r\n                    $localEventName.default.CREATE_ENEMY,\r\n                    t.createEnemyId,\r\n                    cc.v3(t.getPosition().x, t.getPosition().y),\r\n                    t.Avoid_injury,\r\n                    t.lot\r\n                );\r\n                if (!(2 !== t.config.monster_type && 3 !== t.config.monster_type)) {\r\n                    t.bossChooseSKill();\r\n                }\r\n                t.removeSelf();\r\n            },\r\n            this\r\n        );\r\n    };\r\n    __decorate([m($healthBar.default)], e.prototype, \"healthBar\", void 0);\r\n    __decorate([m], e.prototype, \"createEnemyId\", void 0);\r\n    return __decorate([h], e);\r\n})($baseEnemy.default);\r\nexports.default = y;\r\n"]}