{"version":3,"sources":["assets\\game_script\\scripts\\VIVOBanner.js"],"names":["o","exports","VIVOBanner","$baseAd","require","r","window","qg","a","t","e","apply","arguments","style","__extends","prototype","loadAd","adUnitId","createBannerAd","posId","adIns","onLoad","onClose","onHide","onSize","onResize","onError","console","warn","error","showBanner","i","showCallback","errorCallback","isCanShow","isAutoShow","isConsume","reCreateAd","isLoaded","top","left","width","show","n","then","forbiddenBanner","hideBanner","destroyAd","hide","onAdResize","getSystemInfoSync","windowWidth","windowHeight","Math","round","height","setTimeout","call","offLoad","offClose","offSize","offError","destroy","autoShow","onAdLoad","onAdError","onAdHide","hideing","BaseAd"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nexports.VIVOBanner = void 0;\r\nvar $baseAd = require(\"./BaseAd\");\r\nvar r = window.qg;\r\nvar a = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.style = null;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.loadAd = function () {\r\n        if (this.adUnitId) {\r\n            if (r && r.createBannerAd) {\r\n                var t = {\r\n                    posId: this.adUnitId\r\n                };\r\n                this.adIns = r.createBannerAd(t);\r\n                if (this.adIns.onLoad) {\r\n                    this.adIns.onLoad(this.onLoad);\r\n                }\r\n                if (this.adIns.onClose) {\r\n                    this.adIns.onClose(this.onHide);\r\n                }\r\n                if (this.adIns.onSize) {\r\n                    this.adIns.onSize(this.onResize);\r\n                }\r\n                if (this.adIns.onError) {\r\n                    this.adIns.onError(this.onError);\r\n                }\r\n            } else {\r\n                console.warn(\"当前平台不支持创建banner\");\r\n            }\r\n        } else {\r\n            console.error(\"Banner ID为空\");\r\n        }\r\n    };\r\n    e.prototype.showBanner = function (t, e, i) {\r\n        var o = this;\r\n        this.showCallback = e;\r\n        this.errorCallback = i;\r\n        if (this.isCanShow) {\r\n            if (!this.adIns) {\r\n                console.warn(this.adUnitId, \":未创建，执行创建\");\r\n                this.isAutoShow = !0;\r\n                this.loadAd();\r\n            }\r\n            if (this.isConsume) {\r\n                this.reCreateAd(!0);\r\n            } else {\r\n                {\r\n                    if (!this.isLoaded) {\r\n                        console.warn(this.adUnitId, \":未加载完成，稍等\");\r\n                        return void (this.isAutoShow = !0);\r\n                    }\r\n                    if (this.adIns && t) {\r\n                        if (t.top && this.adIns.style) {\r\n                            this.adIns.style.top = t.top;\r\n                        }\r\n                        if (t.left && this.adIns.style) {\r\n                            this.adIns.style.left = t.left;\r\n                        }\r\n                        if (t.width && this.adIns.style) {\r\n                            this.adIns.style.width = t.width;\r\n                        }\r\n                    }\r\n                    this.isConsume = !1;\r\n                    if (this.adIns.show) {\r\n                        var n = this.adIns.show();\r\n                        n && n.then\r\n                            ? n\r\n                                  .then(function () {\r\n                                      o.isConsume = !0;\r\n                                      if (o.showCallback) {\r\n                                          o.showCallback();\r\n                                      }\r\n                                      o.showCallback = null;\r\n                                  })\r\n                                  .catch(function (t) {\r\n                                      console.warn(o.adUnitId, \":show错误，重新加载\", t);\r\n                                      o.reCreateAd(!0);\r\n                                  })\r\n                            : (console.warn(this.adUnitId, \":show显示失败，重新加载\"), this.reCreateAd(!0));\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            console.warn(this.adUnitId, \":当前广告禁止显示\");\r\n        }\r\n    };\r\n    e.prototype.forbiddenBanner = function (t) {\r\n        this.isCanShow = !t;\r\n        if (t && this.isConsume) {\r\n            this.hideBanner(!1);\r\n        }\r\n    };\r\n    e.prototype.hideBanner = function (t) {\r\n        t && this.isConsume\r\n            ? (this.destroyAd(), this.reCreateAd(!1))\r\n            : this.adIns && this.adIns.hide && this.adIns.hide();\r\n    };\r\n    e.prototype.onAdResize = function (t) {\r\n        console.warn(\"onBannerResize\", t, this.adIns);\r\n        var e = r.getSystemInfoSync();\r\n        var i = e.windowWidth;\r\n        var o = e.windowHeight;\r\n        var n = this.style || {};\r\n        this.style = {\r\n            top: n.top || Math.round(o - t.height + 0.1),\r\n            left: Math.round((i - t.width) / 2 + 0.1)\r\n        };\r\n        this.adIns.style = this.style;\r\n        null != n.top ? (this.adIns.style.top = n.top) : (this.adIns.style.top = Math.round(o - t.height + 0.1));\r\n        null != n.left\r\n            ? (this.adIns.style.left = n.left)\r\n            : (this.adIns.style.left = Math.round((i - t.width) / 2 + 0.1));\r\n    };\r\n    e.prototype.reCreateAd = function (t) {\r\n        var e = this;\r\n        this.destroyAd();\r\n        this.isAutoShow = t;\r\n        setTimeout(function () {\r\n            e.loadAd();\r\n        }, 100);\r\n    };\r\n    e.prototype.destroyAd = function () {\r\n        t.prototype.destroyAd.call(this);\r\n        if (this.adIns) {\r\n            if (this.adIns.offLoad) {\r\n                this.adIns.offLoad(this.onLoad);\r\n            }\r\n            if (this.adIns.offClose) {\r\n                this.adIns.offClose(this.onHide);\r\n            }\r\n            if (this.adIns.offSize) {\r\n                this.adIns.offSize(this.onResize);\r\n            }\r\n            if (this.adIns.offError) {\r\n                this.adIns.offError(this.onError);\r\n            }\r\n            if (this.adIns.destroy) {\r\n                this.adIns.destroy();\r\n            }\r\n            this.adIns = null;\r\n        }\r\n    };\r\n    e.prototype.autoShow = function () {\r\n        if (this.isAutoShow) {\r\n            this.isAutoShow = !1;\r\n            this.showBanner(this.style, this.showCallback, this.errorCallback);\r\n        }\r\n    };\r\n    e.prototype.onAdLoad = function () {\r\n        t.prototype.onAdLoad.call(this);\r\n        this.isConsume = !1;\r\n        this.isLoaded = !0;\r\n        this.autoShow();\r\n    };\r\n    e.prototype.onAdError = function (e) {\r\n        t.prototype.onAdError.call(this, e);\r\n        if (this.errorCallback) {\r\n            this.errorCallback();\r\n        }\r\n        this.destroyAd();\r\n    };\r\n    e.prototype.onAdHide = function () {\r\n        t.prototype.onAdHide.call(this);\r\n        this.hideing = !1;\r\n        this.destroyAd();\r\n    };\r\n    return e;\r\n})($baseAd.BaseAd);\r\nexports.VIVOBanner = a;\r\n"]}