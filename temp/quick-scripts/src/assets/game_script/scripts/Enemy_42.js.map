{"version":3,"sources":["assets\\game_script\\scripts\\Enemy_42.js"],"names":["o","$configContext","require","$baseBullet","$gameContext","$baseEnemy","$enemyStatus","$healthBar","p","cc","_decorator","f","ccclass","h","property","m","t","e","apply","arguments","healthBar","flyTime","timeLeft","scaleRatio","isFly","immunity","EnemyDebuffType","FREEZE","PARALYSIS","SLOW","STUN","__extends","prototype","initEnemy","i","call","statusManager","specialityAtkAdd","set","BulletSpeciality","wind","config","value","init","hp","hp_num","n","id","instance","getEnemyConfig","s","speed","addAdsorb","removeAdsorb","sufferDebuff","includes","type","sufferAttack","isDie","render","updateFrame","initSpeed","skin","node","scale","easeSine","speedRatioRight","currRatio","timeScale","ins","gameRatio","Math","sin","PI","__decorate","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $baseEnemy = require(\"./BaseEnemy\");\r\nvar $enemyStatus = require(\"./EnemyStatus\");\r\nvar $healthBar = require(\"./HealthBar\");\r\nvar p = cc._decorator;\r\nvar f = p.ccclass;\r\nvar h = p.property;\r\nvar m = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.healthBar = null;\r\n        e.flyTime = 0.5;\r\n        e.timeLeft = 0;\r\n        e.scaleRatio = 0.5;\r\n        e.isFly = !1;\r\n        e.immunity = [\r\n            $enemyStatus.EnemyDebuffType.FREEZE,\r\n            $enemyStatus.EnemyDebuffType.PARALYSIS,\r\n            $enemyStatus.EnemyDebuffType.SLOW,\r\n            ,\r\n            $enemyStatus.EnemyDebuffType.STUN\r\n        ];\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.initEnemy = function (e, i, o) {\r\n        if (void 0 === o) {\r\n            o = 0;\r\n        }\r\n        t.prototype.initEnemy.call(this, e, i, o);\r\n        this.statusManager.specialityAtkAdd.set($baseBullet.BulletSpeciality.wind, this.config.value[0]);\r\n        if (this.healthBar) {\r\n            this.healthBar.init(this.statusManager.hp, e.hp_num);\r\n        }\r\n        this.timeLeft = 0;\r\n        this.isFly = !0;\r\n        var n = null;\r\n        42 === e.id\r\n            ? (n = $configContext.default.instance.getEnemyConfig(38))\r\n            : 43 === e.id && (n = $configContext.default.instance.getEnemyConfig(39));\r\n        var s = n.value[1] / this.flyTime;\r\n        this.speed = s;\r\n    };\r\n    e.prototype.addAdsorb = function (e) {\r\n        if (!this.isFly) {\r\n            t.prototype.addAdsorb.call(this, e);\r\n        }\r\n    };\r\n    e.prototype.removeAdsorb = function (e) {\r\n        if (!this.isFly) {\r\n            t.prototype.removeAdsorb.call(this, e);\r\n        }\r\n    };\r\n    e.prototype.sufferDebuff = function (e) {\r\n        if (!(this.isFly || this.immunity.includes(e.type))) {\r\n            t.prototype.sufferDebuff.call(this, e);\r\n        }\r\n    };\r\n    e.prototype.sufferAttack = function (e, i) {\r\n        if (this.statusManager.isDie) {\r\n            return !1;\r\n        }\r\n        var o = t.prototype.sufferAttack.call(this, e, i);\r\n        if (this.healthBar) {\r\n            this.healthBar.render(this.statusManager.hp);\r\n        }\r\n        return o;\r\n    };\r\n    e.prototype.updateFrame = function (e) {\r\n        if (!this.statusManager.isDie) {\r\n            if (this.isFly) {\r\n                this.timeLeft += e;\r\n                if (this.timeLeft >= this.flyTime) {\r\n                    this.timeLeft = this.flyTime;\r\n                    this.speed = this.statusManager.initSpeed;\r\n                    this.isFly = !1;\r\n                }\r\n                this.skin.node.scale = this.easeSine(this.timeLeft, 1, this.scaleRatio, this.flyTime);\r\n            }\r\n            t.prototype.updateFrame.call(this, e);\r\n        }\r\n    };\r\n    e.prototype.speedRatioRight = function () {\r\n        if (this.isFly) {\r\n            if (1 !== this.currRatio && 0 !== this.skin.timeScale) {\r\n                this.skin.timeScale = 1;\r\n            }\r\n        } else {\r\n            if ($gameContext.default.ins.gameRatio !== this.currRatio) {\r\n                this.currRatio = $gameContext.default.ins.gameRatio;\r\n                var t = (this.speed / this.statusManager.initSpeed) * this.currRatio;\r\n                if (0 !== this.skin.timeScale) {\r\n                    this.skin.timeScale = t;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    e.prototype.easeSine = function (t, e, i, o) {\r\n        return i * Math.sin((t / o) * Math.PI) + e;\r\n    };\r\n    __decorate([h($healthBar.default)], e.prototype, \"healthBar\", void 0);\r\n    return __decorate([f], e);\r\n})($baseEnemy.default);\r\nexports.default = m;\r\n"]}