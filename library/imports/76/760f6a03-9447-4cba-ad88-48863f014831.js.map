{"version":3,"sources":["assets\\game_script\\scripts\\Bullet_17_1.js"],"names":["o","$object","require","$countDownUtil","$configContext","$gameContext","$gameSkillInfo","$enemyStatus","p","cc","_decorator","f","ccclass","h","property","size","Vec3","ZERO","m","t","e","apply","arguments","targetId","atk","__extends","prototype","refreshBullet17","i","skillParam","ins","skillInfo","getSkillById","x","y","guideLaserWidth","setScale","setAngle","Math","ceil","skillAtk","Skill4Param","FINAL","onTrigger","object","id","node","scaleX","Trigger","stay","enter","CountDownUtil","time","getLastAtkTime","guideLaserAtkInterval","gameRatio","setLastAtkTime","sufferAtk","skillSpecialitys","instance","basicSkillConfigMap","get","skill_tpye","addGuideLaserAtkAdd","guideLaserBurnTime","type","EnemyDebuffType","BURN","timeLeft","value","guideLaserBurnAtk","sufferDebuff","guideLaserBack","BACK","__decorate","cObject","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $object = require(\"./Object\");\r\nvar $countDownUtil = require(\"./CountDownUtil\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $gameSkillInfo = require(\"./GameSkillInfo\");\r\nvar $enemyStatus = require(\"./EnemyStatus\");\r\nvar p = cc._decorator;\r\nvar f = p.ccclass;\r\nvar h = (p.property, cc.size(0, 0), cc.Vec3.ZERO);\r\nvar m = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.targetId = -1;\r\n        e.atk = 0;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.refreshBullet17 = function (t, e, i) {\r\n        if (!this.skillParam) {\r\n            this.skillParam = $gameContext.default.ins.skillInfo.getSkillById(116);\r\n        }\r\n        this.targetId = t;\r\n        h.x = i / 100;\r\n        h.y = this.skillParam.guideLaserWidth;\r\n        this.setScale(h);\r\n        this.setAngle(e);\r\n        this.atk = Math.ceil(0.5 * this.skillParam.skillAtk[$gameSkillInfo.Skill4Param.FINAL]);\r\n    };\r\n    e.prototype.onTrigger = function (t, e) {\r\n        var i = t.object;\r\n        if (!(i.id === this.targetId || this.node.scaleX <= 0)) {\r\n            if (e === $object.Trigger.stay || e === $object.Trigger.enter) {\r\n                if (\r\n                    $countDownUtil.CountDownUtil.time - i.getLastAtkTime(3) <=\r\n                    this.skillParam.guideLaserAtkInterval / $gameContext.default.ins.gameRatio\r\n                ) {\r\n                    return;\r\n                }\r\n                i.setLastAtkTime(3, $countDownUtil.CountDownUtil.time);\r\n                if (\r\n                    i.sufferAtk({\r\n                        id: 116,\r\n                        skillSpecialitys: $configContext.default.instance.basicSkillConfigMap.get(116).skill_tpye,\r\n                        atk: this.atk\r\n                    })\r\n                ) {\r\n                    this.skillParam.addGuideLaserAtkAdd();\r\n                }\r\n            }\r\n            if (e === $object.Trigger.enter) {\r\n                if (this.skillParam.guideLaserBurnTime > 0) {\r\n                    var o = {\r\n                        type: $enemyStatus.EnemyDebuffType.BURN,\r\n                        timeLeft: this.skillParam.guideLaserBurnTime,\r\n                        value: this.skillParam.guideLaserBurnAtk[$gameSkillInfo.Skill4Param.FINAL]\r\n                    };\r\n                    i.sufferDebuff(o);\r\n                }\r\n                if (this.skillParam.guideLaserBack > 0) {\r\n                    o = {\r\n                        type: $enemyStatus.EnemyDebuffType.BACK,\r\n                        timeLeft: -1,\r\n                        value: this.skillParam.guideLaserBack\r\n                    };\r\n                    i.sufferDebuff(o);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return __decorate([f], e);\r\n})($object.cObject);\r\nexports.default = m;\r\n"]}