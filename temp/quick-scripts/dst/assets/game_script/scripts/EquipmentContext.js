
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/EquipmentContext.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '638edlsuDZBA7to00Xtq9SE', 'EquipmentContext');
// game_script/scripts/EquipmentContext.js

"use strict";

exports.EquipmentType = void 0;
var o;

var $assetsMap = require("./AssetsMap");

var $eventManager = require("./EventManager");

var $popupManager = require("./PopupManager");

var $storageUtil = require("./StorageUtil");

var $gameGemInfo = require("./GameGemInfo");

var $configContext = require("./ConfigContext");

var $localEventName = require("./LocalEventName");

var $localName = require("./LocalName");

var $roleContext = require("./RoleContext");

var $taskContext = require("./TaskContext");

var $userDataContext = require("./UserDataContext");

(o = exports.EquipmentType || (exports.EquipmentType = {}))[o.Hat = 1] = "Hat";
o[o.Clothes = 2] = "Clothes";
o[o.Shoes = 3] = "Shoes";
o[o.Armlet = 4] = "Armlet";
o[o.Trousers = 5] = "Trousers";
o[o.Gloves = 6] = "Gloves";

var m = function () {
  function t() {
    this.equipmentMap = new Map();
    this.equipmentAtk = [];
    this.gemMap = new Map();
    this.order = 0;
    this.equipmentMap = $storageUtil.StorageUtil.getItem($localName["default"].EQUIPMENT_INFO, this.equipmentMap);
    this.gemMap = $storageUtil.StorageUtil.getItem($localName["default"].GEM_LIST_INFO, this.gemMap);
    this.order = $storageUtil.StorageUtil.getItem($localName["default"].EQUIPMENT_ORDER, this.order);

    if (0 === this.equipmentMap.size) {
      for (var t = 1; t < 7; t++) {
        this.equipmentMap.set(t, 1);
      }
    }

    for (t = 1; t < 7; t++) {
      this.caculateEquipmentAtk(t);
    }
  }

  Object.defineProperty(t, "Ins", {
    get: function get() {
      if (!t.instance) {
        t.instance = new t();
      }

      return t.instance;
    },
    enumerable: !1,
    configurable: !0
  });

  t.prototype.init = function () {
    this.refreshGameGem();
  };

  t.prototype.getAtk = function () {
    return 100 + $configContext["default"].instance.playerSkinConfigs.find(function (t) {
      return t.id === $roleContext["default"].ins.currSkinInfo.skin;
    }).add_attribute;
  };

  t.prototype.getGemList = function (t, e) {
    if (void 0 === e) {
      e = this.order;
    }

    return this.gemMap.has(e) ? !this.gemMap.get(e)[t - 1] || this.gemMap.get(e)[t - 1].length <= 0 ? [] : this.gemMap.get(e)[t - 1] : [];
  };

  t.prototype.getAllGemList = function (t) {
    if (void 0 === t) {
      t = this.order;
    }

    var e = [];

    for (var i = 1; i <= 6; i++) {
      if (this.gemMap.has(t)) {
        if (!(!this.gemMap.get(t)[i - 1] || this.gemMap.get(t)[i - 1].length <= 0)) {
          e = e.concat(this.gemMap.get(t)[i - 1]);
        }
      }
    }

    return e;
  };

  t.prototype.setGem = function (t, e, i, o) {
    if (void 0 === i) {
      i = -1;
    }

    if (void 0 === o) {
      o = this.order;
    }

    if (!this.gemMap.has(o)) {
      this.gemMap.set(o, []);
    }

    var n = this.gemMap.get(o);

    if (-1 !== i) {
      n[t - 1][i] = e;
    } else {
      if (n[t - 1]) {
        for (var s = 0; s < 5; s++) {
          if (!n[t - 1][s] || -1 === n[t - 1][s]) {
            n[t - 1][s] = e;
            break;
          }
        }
      } else {
        n[t - 1] = [e];
      }
    }

    $roleContext["default"].ins.usePackItem(e, 1);
    $storageUtil.StorageUtil.setItem($localName["default"].GEM_LIST_INFO, this.gemMap);
    this.refreshGameGem();
  };

  t.prototype.removeGem = function (t, e, i) {
    if (void 0 === i) {
      i = this.order;
    }

    var o = this.gemMap.get(i)[t - 1][e];

    if (o) {
      var n = $configContext["default"].instance.gemConfigs.find(function (t) {
        return t.id === o;
      });
      $roleContext["default"].ins.returnPackItem(n, 1);
    }

    this.gemMap.get(i)[t - 1][e] = null;
    $storageUtil.StorageUtil.setItem($localName["default"].GEM_LIST_INFO, this.gemMap);
    this.refreshGameGem();
  };

  t.prototype.hasSameGem = function (t, e, i) {
    if (void 0 === i) {
      i = this.order;
    }

    if (!this.gemMap.has(i) || !this.gemMap.get(i)[t - 1] || this.gemMap.get(i)[t - 1].length <= 0) {
      return !1;
    }

    var o = $configContext["default"].instance.gemConfigs.find(function (t) {
      return t.id === e;
    }).SkillPool;

    var n = function n(e) {
      var n = s.gemMap.get(i)[t - 1][e];

      if (n && $configContext["default"].instance.gemConfigs.find(function (t) {
        return t.id === n;
      }).SkillPool === o) {
        return {
          value: !0
        };
      }
    };

    var s = this;

    for (var r = 0; r < this.gemMap.get(i)[t - 1].length; r++) {
      var a = n(r);

      if ("object" == typeof a) {
        return a.value;
      }
    }

    return !1;
  };

  t.prototype.getPartAndIndexGemId = function (t, e, i) {
    if (void 0 === i) {
      i = this.order;
    }

    return !this.gemMap.has(i) || !this.gemMap.get(i)[t - 1] || this.gemMap.get(i)[t - 1].length <= 0 || !this.gemMap.get(i)[t - 1][e] ? -1 : this.gemMap.get(i)[t - 1][e];
  };

  t.prototype.hasGemTypeByPart = function (t, e) {
    var i = this.getGemList(t);
    return $configContext["default"].instance.gemConfigs.filter(function (t) {
      return i.includes(t.id);
    }).map(function (t) {
      return t.SkillPool;
    }).includes(e);
  };

  t.prototype.gemCount = function (t, e) {
    if (void 0 === e) {
      e = this.order;
    }

    if (!this.gemMap.has(e) || !this.gemMap.get(e)[t - 1] || this.gemMap.get(e)[t - 1].length <= 0) {
      return 0;
    }

    var i = 0;

    for (var o = 0; o < this.gemMap.get(e)[t - 1].length; o++) {
      if (this.gemMap.get(e)[t - 1][o]) {
        i++;
      }
    }

    return i;
  };

  t.prototype.getEquipmentAtk = function () {
    var t = 0;

    for (var e = 0; e < this.equipmentAtk.length; e++) {
      t += this.equipmentAtk[e];
    }

    return t;
  };

  t.prototype.getEquipemtnAtkByPart = function (t) {
    return this.equipmentAtk[t - 1];
  };

  t.prototype.caculateEquipmentAtk = function (t) {
    var e = $configContext["default"].instance.equipmentConfigs.find(function (e) {
      return e.id === t;
    });
    var i = 0;
    var o = 0;

    for (var n = 1; n <= this.equipmentMap.get(t); n++) {
      n > e.level[o] && o < e.level.length - 1 && o++;
      i += e.add_atk[o];
    }

    this.equipmentAtk[t - 1] = i;
    return i;
  };

  t.prototype.getGrade = function (t) {
    var e = $configContext["default"].instance.equipmentConfigs.find(function (e) {
      return e.id === t;
    });
    var i = 0;

    for (var o = 0; o < e.level.length; o++) {
      if (this.equipmentMap.get(t) <= e.level[o]) {
        i = o;
        break;
      }
    }

    return e.Grade[i];
  };

  t.prototype.refreshGameGem = function (t) {
    if (void 0 === t) {
      t = !1;
    }

    $gameGemInfo.GameGemInfo.ins.clear();
    var e = this.gemMap.get(this.order);

    if (e && !(e.length <= 0)) {
      for (var i = 0; i < e.length; i++) {
        var o = e[i];

        if (o) {
          for (var n = 0; n < o.length; n++) {
            var s = o[n];

            if (s && s > 0) {
              $gameGemInfo.GameGemInfo.ins.chooseGem(s);
            }
          }
        }
      }

      if (t) {
        $roleContext["default"].ins.getRobotProps().forEach(function (t, e) {
          $gameGemInfo.GameGemInfo.ins.setGemProp(e, t);
        });
      }
    }
  };

  t.prototype.getEquipmentUpInfo = function (t) {
    var e = $configContext["default"].instance.equipmentConfigs.find(function (e) {
      return e.id === t;
    });
    var i = this.equipmentMap.get(t);

    if (i >= e.level[e.level.length - 1]) {
      return null;
    }

    var o = -1;

    for (var n = 0; n < e.level.length; n++) {
      if (i === e.level[n]) {
        o = n;
        break;
      }
    }

    if (-1 !== o) {
      return {
        type: 0,
        num: e.Gradeup_materialspend[o][0],
        coin: e.Gradeup_materialspend[o][1]
      };
    }

    o = 0;

    for (n = 0; n < e.level.length && !(i < e.level[n]); n++) {
      o = n;
    }

    return -1 !== o ? {
      type: 1,
      num: e.level_materialspend[o][0] * i,
      coin: e.level_materialspend[o][1] * i
    } : null;
  };

  t.prototype.upgradeEquip = function (t, e) {
    $taskContext["default"].Ins.setTaskRecord(6);
    this.equipmentMap.set(t, e);
    this.caculateEquipmentAtk(t);
    $storageUtil.StorageUtil.setItem($localName["default"].EQUIPMENT_INFO, this.equipmentMap);
  };

  t.prototype.upGradeEquipCache = function (t, e) {
    this.equipmentMap.set(t, e);
  };

  t.prototype.checkEquipUpgrade = function () {
    for (var t = 0; t < 6; t++) {
      if (this.checkPartEquipUpgrade(t + 1)) {
        return !0;
      }
    }

    return !1;
  };

  t.prototype.autoUpgrade = function () {
    var e = [];

    for (var i = 1; i <= 6; i++) {
      var o = this.getEquipmentUpInfo(i);

      for (var a = 0; o && $userDataContext["default"].Ins.checkCoin(-o.coin) && (0 !== o.type || $userDataContext["default"].Ins.checkUpgradeStone(-o.num)) && (1 !== o.type || $userDataContext["default"].Ins.checkEquipBook(i, -o.num));) {
        $userDataContext["default"].Ins.opearCoin(-o.coin);
        0 === o.type ? $userDataContext["default"].Ins.opearUpgradeStone(-o.num) : 1 === o.type && $userDataContext["default"].Ins.opearEquipBook(i, -o.num);
        a++;
        var l = t.Ins.equipmentMap.get(i) + 1;
        t.Ins.upGradeEquipCache(i, l);

        if (!e.includes(i)) {
          e.push(i);
        }

        o = this.getEquipmentUpInfo(i);
      }

      var c = t.Ins.equipmentMap.get(i);
      t.Ins.upgradeEquip(i, c);
      $eventManager["default"].send($localEventName["default"].RENDER_GEM);

      if ($userDataContext["default"].Ins.addExp(15 * a, a)) {
        $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.UpgradeView, {
          count: a
        });
        break;
      }
    }

    return e;
  };

  t.prototype.checkPartEquipUpgrade = function (t) {
    var e = this.getEquipmentUpInfo(t);
    return !!(e && $userDataContext["default"].Ins.checkCoin(-e.coin) && (0 === e.type && $userDataContext["default"].Ins.checkUpgradeStone(-e.num) || 1 === e.type && $userDataContext["default"].Ins.checkEquipBook(t, -e.num)));
  };

  t.prototype.changeGemItem = function (t) {
    if (t !== this.order) {
      var e = $roleContext["default"].ins.packList;
      var i = this.getAllGemList();
      var o = this.getAllGemList(t);

      for (var n = 0; n < e.length; n++) {
        i.includes(e[n].id) && (e[n].isUse = !1, e[n].num++);
        o.includes(e[n].id) && (e[n].isUse = !0, e[n].num--);
      }

      $roleContext["default"].ins.save();
      this.order = t;
      this.refreshGameGem();
      $storageUtil.StorageUtil.setItem($localName["default"].EQUIPMENT_ORDER, t);
    }
  };

  return t;
}();

exports["default"] = m;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXEVxdWlwbWVudENvbnRleHQuanMiXSwibmFtZXMiOlsiZXhwb3J0cyIsIkVxdWlwbWVudFR5cGUiLCJvIiwiJGFzc2V0c01hcCIsInJlcXVpcmUiLCIkZXZlbnRNYW5hZ2VyIiwiJHBvcHVwTWFuYWdlciIsIiRzdG9yYWdlVXRpbCIsIiRnYW1lR2VtSW5mbyIsIiRjb25maWdDb250ZXh0IiwiJGxvY2FsRXZlbnROYW1lIiwiJGxvY2FsTmFtZSIsIiRyb2xlQ29udGV4dCIsIiR0YXNrQ29udGV4dCIsIiR1c2VyRGF0YUNvbnRleHQiLCJIYXQiLCJDbG90aGVzIiwiU2hvZXMiLCJBcm1sZXQiLCJUcm91c2VycyIsIkdsb3ZlcyIsIm0iLCJ0IiwiZXF1aXBtZW50TWFwIiwiTWFwIiwiZXF1aXBtZW50QXRrIiwiZ2VtTWFwIiwib3JkZXIiLCJTdG9yYWdlVXRpbCIsImdldEl0ZW0iLCJFUVVJUE1FTlRfSU5GTyIsIkdFTV9MSVNUX0lORk8iLCJFUVVJUE1FTlRfT1JERVIiLCJzaXplIiwic2V0IiwiY2FjdWxhdGVFcXVpcG1lbnRBdGsiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldCIsImluc3RhbmNlIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsInByb3RvdHlwZSIsImluaXQiLCJyZWZyZXNoR2FtZUdlbSIsImdldEF0ayIsInBsYXllclNraW5Db25maWdzIiwiZmluZCIsImlkIiwiaW5zIiwiY3VyclNraW5JbmZvIiwic2tpbiIsImFkZF9hdHRyaWJ1dGUiLCJnZXRHZW1MaXN0IiwiZSIsImhhcyIsImxlbmd0aCIsImdldEFsbEdlbUxpc3QiLCJpIiwiY29uY2F0Iiwic2V0R2VtIiwibiIsInMiLCJ1c2VQYWNrSXRlbSIsInNldEl0ZW0iLCJyZW1vdmVHZW0iLCJnZW1Db25maWdzIiwicmV0dXJuUGFja0l0ZW0iLCJoYXNTYW1lR2VtIiwiU2tpbGxQb29sIiwidmFsdWUiLCJyIiwiYSIsImdldFBhcnRBbmRJbmRleEdlbUlkIiwiaGFzR2VtVHlwZUJ5UGFydCIsImZpbHRlciIsImluY2x1ZGVzIiwibWFwIiwiZ2VtQ291bnQiLCJnZXRFcXVpcG1lbnRBdGsiLCJnZXRFcXVpcGVtdG5BdGtCeVBhcnQiLCJlcXVpcG1lbnRDb25maWdzIiwibGV2ZWwiLCJhZGRfYXRrIiwiZ2V0R3JhZGUiLCJHcmFkZSIsIkdhbWVHZW1JbmZvIiwiY2xlYXIiLCJjaG9vc2VHZW0iLCJnZXRSb2JvdFByb3BzIiwiZm9yRWFjaCIsInNldEdlbVByb3AiLCJnZXRFcXVpcG1lbnRVcEluZm8iLCJ0eXBlIiwibnVtIiwiR3JhZGV1cF9tYXRlcmlhbHNwZW5kIiwiY29pbiIsImxldmVsX21hdGVyaWFsc3BlbmQiLCJ1cGdyYWRlRXF1aXAiLCJJbnMiLCJzZXRUYXNrUmVjb3JkIiwidXBHcmFkZUVxdWlwQ2FjaGUiLCJjaGVja0VxdWlwVXBncmFkZSIsImNoZWNrUGFydEVxdWlwVXBncmFkZSIsImF1dG9VcGdyYWRlIiwiY2hlY2tDb2luIiwiY2hlY2tVcGdyYWRlU3RvbmUiLCJjaGVja0VxdWlwQm9vayIsIm9wZWFyQ29pbiIsIm9wZWFyVXBncmFkZVN0b25lIiwib3BlYXJFcXVpcEJvb2siLCJsIiwicHVzaCIsImMiLCJzZW5kIiwiUkVOREVSX0dFTSIsImFkZEV4cCIsIlBvcHVwTWFuYWdlciIsIm9wZW4iLCJBc3NldHNNYXAiLCJQb3BVcEJ1bmRsZXMiLCJwcmVmYWJzIiwiYXNzZXRzTGlzdCIsIlVwZ3JhZGVWaWV3IiwiY291bnQiLCJjaGFuZ2VHZW1JdGVtIiwicGFja0xpc3QiLCJpc1VzZSIsInNhdmUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUFBLE9BQU8sQ0FBQ0MsYUFBUixHQUF3QixLQUFLLENBQTdCO0FBQ0EsSUFBSUMsQ0FBSjs7QUFDQSxJQUFJQyxVQUFVLEdBQUdDLE9BQU8sQ0FBQyxhQUFELENBQXhCOztBQUNBLElBQUlDLGFBQWEsR0FBR0QsT0FBTyxDQUFDLGdCQUFELENB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QUFHUCxDQUFDLENBQUNFLE1BQXRCLEVBQThCSyxDQUFDLEVBQS9CLEVBQW1DO1FBQy9CSCxDQUFDLENBQUNrQixRQUFGLENBQVd0QixDQUFDLENBQUNPLENBQUQsQ0FBRCxDQUFLYixFQUFoQixNQUF5Qk0sQ0FBQyxDQUFDTyxDQUFELENBQUQsQ0FBS2tFLEtBQUwsR0FBYSxDQUFDLENBQWYsRUFBbUJ6RSxDQUFDLENBQUNPLENBQUQsQ0FBRCxDQUFLaUMsR0FBTCxFQUEzQztRQUNBNUYsQ0FBQyxDQUFDMEUsUUFBRixDQUFXdEIsQ0FBQyxDQUFDTyxDQUFELENBQUQsQ0FBS2IsRUFBaEIsTUFBeUJNLENBQUMsQ0FBQ08sQ0FBRCxDQUFELENBQUtrRSxLQUFMLEdBQWEsQ0FBQyxDQUFmLEVBQW1CekUsQ0FBQyxDQUFDTyxDQUFELENBQUQsQ0FBS2lDLEdBQUwsRUFBM0M7TUFDSDs7TUFDRGxGLFlBQVksV0FBWixDQUFxQnFDLEdBQXJCLENBQXlCK0UsSUFBekI7TUFDQSxLQUFLckcsS0FBTCxHQUFhTCxDQUFiO01BQ0EsS0FBS3NCLGNBQUw7TUFDQXJDLFlBQVksQ0FBQ3FCLFdBQWIsQ0FBeUJvQyxPQUF6QixDQUFpQ3JELFVBQVUsV0FBVixDQUFtQnFCLGVBQXBELEVBQXFFVixDQUFyRTtJQUNIO0VBQ0osQ0FkRDs7RUFlQSxPQUFPQSxDQUFQO0FBQ0gsQ0FoV08sRUFBUjs7QUFpV0F0QixPQUFPLFdBQVAsR0FBa0JxQixDQUFsQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0cy5FcXVpcG1lbnRUeXBlID0gdm9pZCAwO1xyXG52YXIgbztcclxudmFyICRhc3NldHNNYXAgPSByZXF1aXJlKFwiLi9Bc3NldHNNYXBcIik7XHJcbnZhciAkZXZlbnRNYW5hZ2VyID0gcmVxdWlyZShcIi4vRXZlbnRNYW5hZ2VyXCIpO1xyXG52YXIgJHBvcHVwTWFuYWdlciA9IHJlcXVpcmUoXCIuL1BvcHVwTWFuYWdlclwiKTtcclxudmFyICRzdG9yYWdlVXRpbCA9IHJlcXVpcmUoXCIuL1N0b3JhZ2VVdGlsXCIpO1xyXG52YXIgJGdhbWVHZW1JbmZvID0gcmVxdWlyZShcIi4vR2FtZUdlbUluZm9cIik7XHJcbnZhciAkY29uZmlnQ29udGV4dCA9IHJlcXVpcmUoXCIuL0NvbmZpZ0NvbnRleHRcIik7XHJcbnZhciAkbG9jYWxFdmVudE5hbWUgPSByZXF1aXJlKFwiLi9Mb2NhbEV2ZW50TmFtZVwiKTtcclxudmFyICRsb2NhbE5hbWUgPSByZXF1aXJlKFwiLi9Mb2NhbE5hbWVcIik7XHJcbnZhciAkcm9sZUNvbnRleHQgPSByZXF1aXJlKFwiLi9Sb2xlQ29udGV4dFwiKTtcclxudmFyICR0YXNrQ29udGV4dCA9IHJlcXVpcmUoXCIuL1Rhc2tDb250ZXh0XCIpO1xyXG52YXIgJHVzZXJEYXRhQ29udGV4dCA9IHJlcXVpcmUoXCIuL1VzZXJEYXRhQ29udGV4dFwiKTtcclxuKG8gPSBleHBvcnRzLkVxdWlwbWVudFR5cGUgfHwgKGV4cG9ydHMuRXF1aXBtZW50VHlwZSA9IHt9KSlbKG8uSGF0ID0gMSldID0gXCJIYXRcIjtcclxub1soby5DbG90aGVzID0gMildID0gXCJDbG90aGVzXCI7XHJcbm9bKG8uU2hvZXMgPSAzKV0gPSBcIlNob2VzXCI7XHJcbm9bKG8uQXJtbGV0ID0gNCldID0gXCJBcm1sZXRcIjtcclxub1soby5Ucm91c2VycyA9IDUpXSA9IFwiVHJvdXNlcnNcIjtcclxub1soby5HbG92ZXMgPSA2KV0gPSBcIkdsb3Zlc1wiO1xyXG52YXIgbSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiB0KCkge1xyXG4gICAgICAgIHRoaXMuZXF1aXBtZW50TWFwID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuZXF1aXBtZW50QXRrID0gW107XHJcbiAgICAgICAgdGhpcy5nZW1NYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5vcmRlciA9IDA7XHJcbiAgICAgICAgdGhpcy5lcXVpcG1lbnRNYXAgPSAkc3RvcmFnZVV0aWwuU3RvcmFnZVV0aWwuZ2V0SXRlbSgkbG9jYWxOYW1lLmRlZmF1bHQuRVFVSVBNRU5UX0lORk8sIHRoaXMuZXF1aXBtZW50TWFwKTtcclxuICAgICAgICB0aGlzLmdlbU1hcCA9ICRzdG9yYWdlVXRpbC5TdG9yYWdlVXRpbC5nZXRJdGVtKCRsb2NhbE5hbWUuZGVmYXVsdC5HRU1fTElTVF9JTkZPLCB0aGlzLmdlbU1hcCk7XHJcbiAgICAgICAgdGhpcy5vcmRlciA9ICRzdG9yYWdlVXRpbC5TdG9yYWdlVXRpbC5nZXRJdGVtKCRsb2NhbE5hbWUuZGVmYXVsdC5FUVVJUE1FTlRfT1JERVIsIHRoaXMub3JkZXIpO1xyXG4gICAgICAgIGlmICgwID09PSB0aGlzLmVxdWlwbWVudE1hcC5zaXplKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgNzsgdCsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVxdWlwbWVudE1hcC5zZXQodCwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh0ID0gMTsgdCA8IDc7IHQrKykge1xyXG4gICAgICAgICAgICB0aGlzLmNhY3VsYXRlRXF1aXBtZW50QXRrKHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBcIkluc1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghdC5pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdC5pbnN0YW5jZSA9IG5ldyB0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHQuaW5zdGFuY2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiAhMSxcclxuICAgICAgICBjb25maWd1cmFibGU6ICEwXHJcbiAgICB9KTtcclxuICAgIHQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoR2FtZUdlbSgpO1xyXG4gICAgfTtcclxuICAgIHQucHJvdG90eXBlLmdldEF0ayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAxMDAgK1xyXG4gICAgICAgICAgICAkY29uZmlnQ29udGV4dC5kZWZhdWx0Lmluc3RhbmNlLnBsYXllclNraW5Db25maWdzLmZpbmQoZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0LmlkID09PSAkcm9sZUNvbnRleHQuZGVmYXVsdC5pbnMuY3VyclNraW5JbmZvLnNraW47XHJcbiAgICAgICAgICAgIH0pLmFkZF9hdHRyaWJ1dGVcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuICAgIHQucHJvdG90eXBlLmdldEdlbUxpc3QgPSBmdW5jdGlvbiAodCwgZSkge1xyXG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHtcclxuICAgICAgICAgICAgZSA9IHRoaXMub3JkZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmdlbU1hcC5oYXMoZSlcclxuICAgICAgICAgICAgPyAhdGhpcy5nZW1NYXAuZ2V0KGUpW3QgLSAxXSB8fCB0aGlzLmdlbU1hcC5nZXQoZSlbdCAtIDFdLmxlbmd0aCA8PSAwXHJcbiAgICAgICAgICAgICAgICA/IFtdXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuZ2VtTWFwLmdldChlKVt0IC0gMV1cclxuICAgICAgICAgICAgOiBbXTtcclxuICAgIH07XHJcbiAgICB0LnByb3RvdHlwZS5nZXRBbGxHZW1MaXN0ID0gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICBpZiAodm9pZCAwID09PSB0KSB7XHJcbiAgICAgICAgICAgIHQgPSB0aGlzLm9yZGVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZSA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IDY7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5nZW1NYXAuaGFzKHQpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISghdGhpcy5nZW1NYXAuZ2V0KHQpW2kgLSAxXSB8fCB0aGlzLmdlbU1hcC5nZXQodClbaSAtIDFdLmxlbmd0aCA8PSAwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUgPSBlLmNvbmNhdCh0aGlzLmdlbU1hcC5nZXQodClbaSAtIDFdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZTtcclxuICAgIH07XHJcbiAgICB0LnByb3RvdHlwZS5zZXRHZW0gPSBmdW5jdGlvbiAodCwgZSwgaSwgbykge1xyXG4gICAgICAgIGlmICh2b2lkIDAgPT09IGkpIHtcclxuICAgICAgICAgICAgaSA9IC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodm9pZCAwID09PSBvKSB7XHJcbiAgICAgICAgICAgIG8gPSB0aGlzLm9yZGVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuZ2VtTWFwLmhhcyhvKSkge1xyXG4gICAgICAgICAgICB0aGlzLmdlbU1hcC5zZXQobywgW10pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbiA9IHRoaXMuZ2VtTWFwLmdldChvKTtcclxuICAgICAgICBpZiAoLTEgIT09IGkpIHtcclxuICAgICAgICAgICAgblt0IC0gMV1baV0gPSBlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChuW3QgLSAxXSkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCA1OyBzKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW5bdCAtIDFdW3NdIHx8IC0xID09PSBuW3QgLSAxXVtzXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuW3QgLSAxXVtzXSA9IGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5bdCAtIDFdID0gW2VdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRyb2xlQ29udGV4dC5kZWZhdWx0Lmlucy51c2VQYWNrSXRlbShlLCAxKTtcclxuICAgICAgICAkc3RvcmFnZVV0aWwuU3RvcmFnZVV0aWwuc2V0SXRlbSgkbG9jYWxOYW1lLmRlZmF1bHQuR0VNX0xJU1RfSU5GTywgdGhpcy5nZW1NYXApO1xyXG4gICAgICAgIHRoaXMucmVmcmVzaEdhbWVHZW0oKTtcclxuICAgIH07XHJcbiAgICB0LnByb3RvdHlwZS5yZW1vdmVHZW0gPSBmdW5jdGlvbiAodCwgZSwgaSkge1xyXG4gICAgICAgIGlmICh2b2lkIDAgPT09IGkpIHtcclxuICAgICAgICAgICAgaSA9IHRoaXMub3JkZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBvID0gdGhpcy5nZW1NYXAuZ2V0KGkpW3QgLSAxXVtlXTtcclxuICAgICAgICBpZiAobykge1xyXG4gICAgICAgICAgICB2YXIgbiA9ICRjb25maWdDb250ZXh0LmRlZmF1bHQuaW5zdGFuY2UuZ2VtQ29uZmlncy5maW5kKGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5pZCA9PT0gbztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICRyb2xlQ29udGV4dC5kZWZhdWx0Lmlucy5yZXR1cm5QYWNrSXRlbShuLCAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nZW1NYXAuZ2V0KGkpW3QgLSAxXVtlXSA9IG51bGw7XHJcbiAgICAgICAgJHN0b3JhZ2VVdGlsLlN0b3JhZ2VVdGlsLnNldEl0ZW0oJGxvY2FsTmFtZS5kZWZhdWx0LkdFTV9MSVNUX0lORk8sIHRoaXMuZ2VtTWFwKTtcclxuICAgICAgICB0aGlzLnJlZnJlc2hHYW1lR2VtKCk7XHJcbiAgICB9O1xyXG4gICAgdC5wcm90b3R5cGUuaGFzU2FtZUdlbSA9IGZ1bmN0aW9uICh0LCBlLCBpKSB7XHJcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gaSkge1xyXG4gICAgICAgICAgICBpID0gdGhpcy5vcmRlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmdlbU1hcC5oYXMoaSkgfHwgIXRoaXMuZ2VtTWFwLmdldChpKVt0IC0gMV0gfHwgdGhpcy5nZW1NYXAuZ2V0KGkpW3QgLSAxXS5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gITE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBvID0gJGNvbmZpZ0NvbnRleHQuZGVmYXVsdC5pbnN0YW5jZS5nZW1Db25maWdzLmZpbmQoZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHQuaWQgPT09IGU7XHJcbiAgICAgICAgfSkuU2tpbGxQb29sO1xyXG4gICAgICAgIHZhciBuID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdmFyIG4gPSBzLmdlbU1hcC5nZXQoaSlbdCAtIDFdW2VdO1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICBuICYmXHJcbiAgICAgICAgICAgICAgICAkY29uZmlnQ29udGV4dC5kZWZhdWx0Lmluc3RhbmNlLmdlbUNvbmZpZ3MuZmluZChmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmlkID09PSBuO1xyXG4gICAgICAgICAgICAgICAgfSkuU2tpbGxQb29sID09PSBvXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogITBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBzID0gdGhpcztcclxuICAgICAgICBmb3IgKHZhciByID0gMDsgciA8IHRoaXMuZ2VtTWFwLmdldChpKVt0IC0gMV0ubGVuZ3RoOyByKyspIHtcclxuICAgICAgICAgICAgdmFyIGEgPSBuKHIpO1xyXG4gICAgICAgICAgICBpZiAoXCJvYmplY3RcIiA9PSB0eXBlb2YgYSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGEudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICExO1xyXG4gICAgfTtcclxuICAgIHQucHJvdG90eXBlLmdldFBhcnRBbmRJbmRleEdlbUlkID0gZnVuY3Rpb24gKHQsIGUsIGkpIHtcclxuICAgICAgICBpZiAodm9pZCAwID09PSBpKSB7XHJcbiAgICAgICAgICAgIGkgPSB0aGlzLm9yZGVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gIXRoaXMuZ2VtTWFwLmhhcyhpKSB8fFxyXG4gICAgICAgICAgICAhdGhpcy5nZW1NYXAuZ2V0KGkpW3QgLSAxXSB8fFxyXG4gICAgICAgICAgICB0aGlzLmdlbU1hcC5nZXQoaSlbdCAtIDFdLmxlbmd0aCA8PSAwIHx8XHJcbiAgICAgICAgICAgICF0aGlzLmdlbU1hcC5nZXQoaSlbdCAtIDFdW2VdXHJcbiAgICAgICAgICAgID8gLTFcclxuICAgICAgICAgICAgOiB0aGlzLmdlbU1hcC5nZXQoaSlbdCAtIDFdW2VdO1xyXG4gICAgfTtcclxuICAgIHQucHJvdG90eXBlLmhhc0dlbVR5cGVCeVBhcnQgPSBmdW5jdGlvbiAodCwgZSkge1xyXG4gICAgICAgIHZhciBpID0gdGhpcy5nZXRHZW1MaXN0KHQpO1xyXG4gICAgICAgIHJldHVybiAkY29uZmlnQ29udGV4dC5kZWZhdWx0Lmluc3RhbmNlLmdlbUNvbmZpZ3NcclxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGkuaW5jbHVkZXModC5pZCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0LlNraWxsUG9vbDtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmluY2x1ZGVzKGUpO1xyXG4gICAgfTtcclxuICAgIHQucHJvdG90eXBlLmdlbUNvdW50ID0gZnVuY3Rpb24gKHQsIGUpIHtcclxuICAgICAgICBpZiAodm9pZCAwID09PSBlKSB7XHJcbiAgICAgICAgICAgIGUgPSB0aGlzLm9yZGVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuZ2VtTWFwLmhhcyhlKSB8fCAhdGhpcy5nZW1NYXAuZ2V0KGUpW3QgLSAxXSB8fCB0aGlzLmdlbU1hcC5nZXQoZSlbdCAtIDFdLmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgbyA9IDA7IG8gPCB0aGlzLmdlbU1hcC5nZXQoZSlbdCAtIDFdLmxlbmd0aDsgbysrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdlbU1hcC5nZXQoZSlbdCAtIDFdW29dKSB7XHJcbiAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGk7XHJcbiAgICB9O1xyXG4gICAgdC5wcm90b3R5cGUuZ2V0RXF1aXBtZW50QXRrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ID0gMDtcclxuICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IHRoaXMuZXF1aXBtZW50QXRrLmxlbmd0aDsgZSsrKSB7XHJcbiAgICAgICAgICAgIHQgKz0gdGhpcy5lcXVpcG1lbnRBdGtbZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfTtcclxuICAgIHQucHJvdG90eXBlLmdldEVxdWlwZW10bkF0a0J5UGFydCA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXF1aXBtZW50QXRrW3QgLSAxXTtcclxuICAgIH07XHJcbiAgICB0LnByb3RvdHlwZS5jYWN1bGF0ZUVxdWlwbWVudEF0ayA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdmFyIGUgPSAkY29uZmlnQ29udGV4dC5kZWZhdWx0Lmluc3RhbmNlLmVxdWlwbWVudENvbmZpZ3MuZmluZChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZS5pZCA9PT0gdDtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgdmFyIG8gPSAwO1xyXG4gICAgICAgIGZvciAodmFyIG4gPSAxOyBuIDw9IHRoaXMuZXF1aXBtZW50TWFwLmdldCh0KTsgbisrKSB7XHJcbiAgICAgICAgICAgIG4gPiBlLmxldmVsW29dICYmIG8gPCBlLmxldmVsLmxlbmd0aCAtIDEgJiYgbysrO1xyXG4gICAgICAgICAgICBpICs9IGUuYWRkX2F0a1tvXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lcXVpcG1lbnRBdGtbdCAtIDFdID0gaTtcclxuICAgICAgICByZXR1cm4gaTtcclxuICAgIH07XHJcbiAgICB0LnByb3RvdHlwZS5nZXRHcmFkZSA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdmFyIGUgPSAkY29uZmlnQ29udGV4dC5kZWZhdWx0Lmluc3RhbmNlLmVxdWlwbWVudENvbmZpZ3MuZmluZChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZS5pZCA9PT0gdDtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgbyA9IDA7IG8gPCBlLmxldmVsLmxlbmd0aDsgbysrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVxdWlwbWVudE1hcC5nZXQodCkgPD0gZS5sZXZlbFtvXSkge1xyXG4gICAgICAgICAgICAgICAgaSA9IG87XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZS5HcmFkZVtpXTtcclxuICAgIH07XHJcbiAgICB0LnByb3RvdHlwZS5yZWZyZXNoR2FtZUdlbSA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCkge1xyXG4gICAgICAgICAgICB0ID0gITE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRnYW1lR2VtSW5mby5HYW1lR2VtSW5mby5pbnMuY2xlYXIoKTtcclxuICAgICAgICB2YXIgZSA9IHRoaXMuZ2VtTWFwLmdldCh0aGlzLm9yZGVyKTtcclxuICAgICAgICBpZiAoZSAmJiAhKGUubGVuZ3RoIDw9IDApKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG8gPSBlW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKG8pIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMDsgbiA8IG8ubGVuZ3RoOyBuKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBvW25dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocyAmJiBzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGdhbWVHZW1JbmZvLkdhbWVHZW1JbmZvLmlucy5jaG9vc2VHZW0ocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHQpIHtcclxuICAgICAgICAgICAgICAgICRyb2xlQ29udGV4dC5kZWZhdWx0Lmlucy5nZXRSb2JvdFByb3BzKCkuZm9yRWFjaChmdW5jdGlvbiAodCwgZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRnYW1lR2VtSW5mby5HYW1lR2VtSW5mby5pbnMuc2V0R2VtUHJvcChlLCB0KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHQucHJvdG90eXBlLmdldEVxdWlwbWVudFVwSW5mbyA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdmFyIGUgPSAkY29uZmlnQ29udGV4dC5kZWZhdWx0Lmluc3RhbmNlLmVxdWlwbWVudENvbmZpZ3MuZmluZChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZS5pZCA9PT0gdDtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgaSA9IHRoaXMuZXF1aXBtZW50TWFwLmdldCh0KTtcclxuICAgICAgICBpZiAoaSA+PSBlLmxldmVsW2UubGV2ZWwubGVuZ3RoIC0gMV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBvID0gLTE7XHJcbiAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBlLmxldmVsLmxlbmd0aDsgbisrKSB7XHJcbiAgICAgICAgICAgIGlmIChpID09PSBlLmxldmVsW25dKSB7XHJcbiAgICAgICAgICAgICAgICBvID0gbjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgtMSAhPT0gbykge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogMCxcclxuICAgICAgICAgICAgICAgIG51bTogZS5HcmFkZXVwX21hdGVyaWFsc3BlbmRbb11bMF0sXHJcbiAgICAgICAgICAgICAgICBjb2luOiBlLkdyYWRldXBfbWF0ZXJpYWxzcGVuZFtvXVsxXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBvID0gMDtcclxuICAgICAgICBmb3IgKG4gPSAwOyBuIDwgZS5sZXZlbC5sZW5ndGggJiYgIShpIDwgZS5sZXZlbFtuXSk7IG4rKykge1xyXG4gICAgICAgICAgICBvID0gbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIC0xICE9PSBvXHJcbiAgICAgICAgICAgID8ge1xyXG4gICAgICAgICAgICAgICAgICB0eXBlOiAxLFxyXG4gICAgICAgICAgICAgICAgICBudW06IGUubGV2ZWxfbWF0ZXJpYWxzcGVuZFtvXVswXSAqIGksXHJcbiAgICAgICAgICAgICAgICAgIGNvaW46IGUubGV2ZWxfbWF0ZXJpYWxzcGVuZFtvXVsxXSAqIGlcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuICAgIH07XHJcbiAgICB0LnByb3RvdHlwZS51cGdyYWRlRXF1aXAgPSBmdW5jdGlvbiAodCwgZSkge1xyXG4gICAgICAgICR0YXNrQ29udGV4dC5kZWZhdWx0Lklucy5zZXRUYXNrUmVjb3JkKDYpO1xyXG4gICAgICAgIHRoaXMuZXF1aXBtZW50TWFwLnNldCh0LCBlKTtcclxuICAgICAgICB0aGlzLmNhY3VsYXRlRXF1aXBtZW50QXRrKHQpO1xyXG4gICAgICAgICRzdG9yYWdlVXRpbC5TdG9yYWdlVXRpbC5zZXRJdGVtKCRsb2NhbE5hbWUuZGVmYXVsdC5FUVVJUE1FTlRfSU5GTywgdGhpcy5lcXVpcG1lbnRNYXApO1xyXG4gICAgfTtcclxuICAgIHQucHJvdG90eXBlLnVwR3JhZGVFcXVpcENhY2hlID0gZnVuY3Rpb24gKHQsIGUpIHtcclxuICAgICAgICB0aGlzLmVxdWlwbWVudE1hcC5zZXQodCwgZSk7XHJcbiAgICB9O1xyXG4gICAgdC5wcm90b3R5cGUuY2hlY2tFcXVpcFVwZ3JhZGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCA2OyB0KyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tQYXJ0RXF1aXBVcGdyYWRlKHQgKyAxKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAhMTtcclxuICAgIH07XHJcbiAgICB0LnByb3RvdHlwZS5hdXRvVXBncmFkZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZSA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IDY7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgbyA9IHRoaXMuZ2V0RXF1aXBtZW50VXBJbmZvKGkpO1xyXG4gICAgICAgICAgICBmb3IgKFxyXG4gICAgICAgICAgICAgICAgdmFyIGEgPSAwO1xyXG4gICAgICAgICAgICAgICAgbyAmJlxyXG4gICAgICAgICAgICAgICAgJHVzZXJEYXRhQ29udGV4dC5kZWZhdWx0Lklucy5jaGVja0NvaW4oLW8uY29pbikgJiZcclxuICAgICAgICAgICAgICAgICgwICE9PSBvLnR5cGUgfHwgJHVzZXJEYXRhQ29udGV4dC5kZWZhdWx0Lklucy5jaGVja1VwZ3JhZGVTdG9uZSgtby5udW0pKSAmJlxyXG4gICAgICAgICAgICAgICAgKDEgIT09IG8udHlwZSB8fCAkdXNlckRhdGFDb250ZXh0LmRlZmF1bHQuSW5zLmNoZWNrRXF1aXBCb29rKGksIC1vLm51bSkpO1xyXG5cclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAkdXNlckRhdGFDb250ZXh0LmRlZmF1bHQuSW5zLm9wZWFyQ29pbigtby5jb2luKTtcclxuICAgICAgICAgICAgICAgIDAgPT09IG8udHlwZVxyXG4gICAgICAgICAgICAgICAgICAgID8gJHVzZXJEYXRhQ29udGV4dC5kZWZhdWx0Lklucy5vcGVhclVwZ3JhZGVTdG9uZSgtby5udW0pXHJcbiAgICAgICAgICAgICAgICAgICAgOiAxID09PSBvLnR5cGUgJiYgJHVzZXJEYXRhQ29udGV4dC5kZWZhdWx0Lklucy5vcGVhckVxdWlwQm9vayhpLCAtby5udW0pO1xyXG4gICAgICAgICAgICAgICAgYSsrO1xyXG4gICAgICAgICAgICAgICAgdmFyIGwgPSB0Lklucy5lcXVpcG1lbnRNYXAuZ2V0KGkpICsgMTtcclxuICAgICAgICAgICAgICAgIHQuSW5zLnVwR3JhZGVFcXVpcENhY2hlKGksIGwpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlLmluY2x1ZGVzKGkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wdXNoKGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbyA9IHRoaXMuZ2V0RXF1aXBtZW50VXBJbmZvKGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBjID0gdC5JbnMuZXF1aXBtZW50TWFwLmdldChpKTtcclxuICAgICAgICAgICAgdC5JbnMudXBncmFkZUVxdWlwKGksIGMpO1xyXG4gICAgICAgICAgICAkZXZlbnRNYW5hZ2VyLmRlZmF1bHQuc2VuZCgkbG9jYWxFdmVudE5hbWUuZGVmYXVsdC5SRU5ERVJfR0VNKTtcclxuICAgICAgICAgICAgaWYgKCR1c2VyRGF0YUNvbnRleHQuZGVmYXVsdC5JbnMuYWRkRXhwKDE1ICogYSwgYSkpIHtcclxuICAgICAgICAgICAgICAgICRwb3B1cE1hbmFnZXIuUG9wdXBNYW5hZ2VyLmluc3RhbmNlLm9wZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgJGFzc2V0c01hcC5Bc3NldHNNYXAuUG9wVXBCdW5kbGVzLnByZWZhYnMuYXNzZXRzTGlzdC5VcGdyYWRlVmlldyxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiBhXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlO1xyXG4gICAgfTtcclxuICAgIHQucHJvdG90eXBlLmNoZWNrUGFydEVxdWlwVXBncmFkZSA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdmFyIGUgPSB0aGlzLmdldEVxdWlwbWVudFVwSW5mbyh0KTtcclxuICAgICAgICByZXR1cm4gISEoXHJcbiAgICAgICAgICAgIGUgJiZcclxuICAgICAgICAgICAgJHVzZXJEYXRhQ29udGV4dC5kZWZhdWx0Lklucy5jaGVja0NvaW4oLWUuY29pbikgJiZcclxuICAgICAgICAgICAgKCgwID09PSBlLnR5cGUgJiYgJHVzZXJEYXRhQ29udGV4dC5kZWZhdWx0Lklucy5jaGVja1VwZ3JhZGVTdG9uZSgtZS5udW0pKSB8fFxyXG4gICAgICAgICAgICAgICAgKDEgPT09IGUudHlwZSAmJiAkdXNlckRhdGFDb250ZXh0LmRlZmF1bHQuSW5zLmNoZWNrRXF1aXBCb29rKHQsIC1lLm51bSkpKVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG4gICAgdC5wcm90b3R5cGUuY2hhbmdlR2VtSXRlbSA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgaWYgKHQgIT09IHRoaXMub3JkZXIpIHtcclxuICAgICAgICAgICAgdmFyIGUgPSAkcm9sZUNvbnRleHQuZGVmYXVsdC5pbnMucGFja0xpc3Q7XHJcbiAgICAgICAgICAgIHZhciBpID0gdGhpcy5nZXRBbGxHZW1MaXN0KCk7XHJcbiAgICAgICAgICAgIHZhciBvID0gdGhpcy5nZXRBbGxHZW1MaXN0KHQpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBuID0gMDsgbiA8IGUubGVuZ3RoOyBuKyspIHtcclxuICAgICAgICAgICAgICAgIGkuaW5jbHVkZXMoZVtuXS5pZCkgJiYgKChlW25dLmlzVXNlID0gITEpLCBlW25dLm51bSsrKTtcclxuICAgICAgICAgICAgICAgIG8uaW5jbHVkZXMoZVtuXS5pZCkgJiYgKChlW25dLmlzVXNlID0gITApLCBlW25dLm51bS0tKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkcm9sZUNvbnRleHQuZGVmYXVsdC5pbnMuc2F2ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLm9yZGVyID0gdDtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoR2FtZUdlbSgpO1xyXG4gICAgICAgICAgICAkc3RvcmFnZVV0aWwuU3RvcmFnZVV0aWwuc2V0SXRlbSgkbG9jYWxOYW1lLmRlZmF1bHQuRVFVSVBNRU5UX09SREVSLCB0KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHQ7XHJcbn0pKCk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IG07XHJcbiJdfQ==