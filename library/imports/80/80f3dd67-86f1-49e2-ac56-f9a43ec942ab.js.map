{"version":3,"sources":["assets\\game_script\\scripts\\HWBanner.js"],"names":["o","exports","HWBanner","$baseAd","require","r","window","qg","a","t","e","apply","arguments","style","isOpenPreLoad","__extends","prototype","loadAd","adUnitId","createBannerAd","getSystemInfoSync","console","log","JSON","stringify","i","safeArea","height","top","left","width","adIns","onLoad","onClose","onAdClose","onError","setTimeout","isLoaded","autoShow","warn","error","onAdLoad","call","showCallback","showBanner","errorCallback","isCanShow","isAutoShow","isConsume","reCreateAd","show","forbiddenBanner","hideBanner","destroyAd","hide","offLoad","offClose","offSize","onResize","offError","destroy","onAdError","showing","closeCallback","onAdHide","hideing","BaseAd"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nexports.HWBanner = void 0;\r\nvar $baseAd = require(\"./BaseAd\");\r\nvar r = window.qg;\r\nvar a = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.style = null;\r\n        e.isOpenPreLoad = !1;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.loadAd = function () {\r\n        var t = this;\r\n        if (this.adUnitId) {\r\n            if (r && r.createBannerAd) {\r\n                var e = r.getSystemInfoSync();\r\n                console.log(\"on getSystemInfoSync: success =\" + JSON.stringify(e));\r\n                var i = e.safeArea.height;\r\n                var o = {\r\n                    adUnitId: this.adUnitId,\r\n                    style: {\r\n                        top: i - 57,\r\n                        left: 0,\r\n                        height: 57,\r\n                        width: 360\r\n                    }\r\n                };\r\n                this.adIns = r.createBannerAd(o);\r\n                if (this.adIns.onLoad) {\r\n                    this.adIns.onLoad(this.onLoad);\r\n                }\r\n                if (this.adIns.onClose) {\r\n                    this.adIns.onClose(this.onAdClose);\r\n                }\r\n                if (this.adIns.onError) {\r\n                    this.adIns.onError(this.onError);\r\n                }\r\n                setTimeout(function () {\r\n                    t.isLoaded = !0;\r\n                    t.autoShow();\r\n                }, 1e3);\r\n            } else {\r\n                console.warn(\"当前平台不支持创建banner\");\r\n            }\r\n        } else {\r\n            console.error(\"Banner ID为空\");\r\n        }\r\n    };\r\n    e.prototype.onAdLoad = function () {\r\n        t.prototype.onAdLoad.call(this);\r\n        if (this.showCallback) {\r\n            this.showCallback();\r\n        }\r\n        this.showCallback = null;\r\n    };\r\n    e.prototype.showBanner = function (t, e, i) {\r\n        this.showCallback = e;\r\n        this.errorCallback = i;\r\n        if (this.isCanShow) {\r\n            if (!this.adIns) {\r\n                console.warn(this.adUnitId, \":未创建，执行创建\");\r\n                this.isAutoShow = !0;\r\n                this.loadAd();\r\n            }\r\n            return this.isConsume\r\n                ? (console.log(\"banner 已消耗重新创建\"), this.reCreateAd(!0))\r\n                : this.isLoaded\r\n                ? ((this.isConsume = !1),\r\n                  this.adIns.show ? ((this.isConsume = !0), this.adIns.show(), void console.log(\"显示banner\")) : void 0)\r\n                : (console.warn(this.adUnitId, \":未加载完成，稍等\"), void (this.isAutoShow = !0));\r\n        }\r\n        console.warn(this.adUnitId, \":当前广告禁止显示\");\r\n    };\r\n    e.prototype.forbiddenBanner = function (t) {\r\n        this.isCanShow = !t;\r\n        if (t && this.isConsume) {\r\n            this.hideBanner(!1);\r\n        }\r\n    };\r\n    e.prototype.hideBanner = function (t) {\r\n        t && this.isConsume\r\n            ? (this.destroyAd(), this.reCreateAd(!1))\r\n            : this.adIns && this.adIns.hide && this.adIns.hide();\r\n    };\r\n    e.prototype.reCreateAd = function (t) {\r\n        var e = this;\r\n        this.destroyAd();\r\n        this.isAutoShow = t;\r\n        setTimeout(function () {\r\n            e.loadAd();\r\n        }, 100);\r\n    };\r\n    e.prototype.destroyAd = function () {\r\n        t.prototype.destroyAd.call(this);\r\n        if (this.adIns) {\r\n            if (this.adIns.offLoad) {\r\n                this.adIns.offLoad(this.onLoad);\r\n            }\r\n            if (this.adIns.offClose) {\r\n                this.adIns.offClose(this.onAdClose);\r\n            }\r\n            if (this.adIns.offSize) {\r\n                this.adIns.offSize(this.onResize);\r\n            }\r\n            if (this.adIns.offError) {\r\n                this.adIns.offError(this.onError);\r\n            }\r\n            if (this.adIns.destroy) {\r\n                this.adIns.destroy();\r\n            }\r\n            this.adIns = null;\r\n        }\r\n    };\r\n    e.prototype.autoShow = function () {\r\n        if (this.isAutoShow) {\r\n            this.isAutoShow = !1;\r\n            this.showBanner(this.style, this.showCallback, this.errorCallback);\r\n        }\r\n    };\r\n    e.prototype.onAdError = function (e) {\r\n        t.prototype.onAdError.call(this, e);\r\n        this.showing = !1;\r\n        if (this.errorCallback) {\r\n            this.errorCallback();\r\n        }\r\n        this.errorCallback = null;\r\n        this.destroyAd();\r\n    };\r\n    e.prototype.onAdClose = function () {\r\n        t.prototype.onAdClose.call(this);\r\n        this.showing = !1;\r\n        if (this.closeCallback) {\r\n            this.closeCallback();\r\n        }\r\n        this.closeCallback = null;\r\n        this.destroyAd();\r\n        if (this.isOpenPreLoad) {\r\n            this.reCreateAd(!1);\r\n        }\r\n    };\r\n    e.prototype.onAdHide = function () {\r\n        t.prototype.onAdHide.call(this);\r\n        this.showing = !1;\r\n        this.hideing = !1;\r\n        if (this.isOpenPreLoad) {\r\n            this.reCreateAd(!1);\r\n        }\r\n    };\r\n    return e;\r\n})($baseAd.BaseAd);\r\nexports.HWBanner = a;\r\n"]}