{"version":3,"sources":["assets\\game_script\\scripts\\ShopView.js"],"names":["o","$eventManager","require","$uIManager","$platform","$remoteAudio","$configContext","$localEventName","$shopContext","$itemView","$startView","m","cc","_decorator","y","ccclass","g","property","_","t","e","apply","arguments","boxItem","resItem","diamondItem","btnLayer","redDotLayer","currItemIndex","__extends","prototype","start","on","RENDER_DOT","renderDot","children","length","clickItem","renderItems","MenuType","ALL","reuse","unuse","off","onDestroy","Battle","active","Ins","hasResRedDot","hasDiamondRedDot","indexOf","node","i","Platform","currPlatForm","PlatformEnum","TOU_TIAO","WECHAT","instance","getAdSwitch","playEffectMusic","UIManager","showToast","opacity","__decorate","Node","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $uIManager = require(\"./UIManager\");\r\nvar $platform = require(\"./Platform\");\r\nvar $remoteAudio = require(\"./RemoteAudio\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $shopContext = require(\"./ShopContext\");\r\nvar $itemView = require(\"./ItemView\");\r\nvar $startView = require(\"./StartView\");\r\nvar m = cc._decorator;\r\nvar y = m.ccclass;\r\nvar g = m.property;\r\nvar _ = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.boxItem = null;\r\n        e.resItem = null;\r\n        e.diamondItem = null;\r\n        e.btnLayer = null;\r\n        e.redDotLayer = null;\r\n        e.currItemIndex = 0;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.start = function () {\r\n        $eventManager.default.on($localEventName.default.RENDER_DOT, this.renderDot, this);\r\n        for (var t = 0; t < this.btnLayer.children.length; t++) {\r\n            this.btnLayer.children[t].on(\"click\", this.clickItem, this);\r\n        }\r\n        this.renderItems();\r\n        this.renderDot($startView.MenuType.ALL);\r\n    };\r\n    e.prototype.reuse = function () {\r\n        $eventManager.default.on($localEventName.default.RENDER_DOT, this.renderDot, this);\r\n        this.renderItems();\r\n        this.renderDot($startView.MenuType.ALL);\r\n    };\r\n    e.prototype.unuse = function () {\r\n        $eventManager.default.off($localEventName.default.RENDER_DOT, this.renderDot, this);\r\n    };\r\n    e.prototype.onDestroy = function () {\r\n        $eventManager.default.off($localEventName.default.RENDER_DOT, this.renderDot, this);\r\n    };\r\n    e.prototype.renderDot = function (t) {\r\n        if (!(t !== $startView.MenuType.Battle && t !== $startView.MenuType.ALL)) {\r\n            this.redDotLayer.children[0].active = !1;\r\n            this.redDotLayer.children[1].active = $shopContext.default.Ins.hasResRedDot();\r\n            this.redDotLayer.children[2].active = $shopContext.default.Ins.hasDiamondRedDot();\r\n        }\r\n    };\r\n    e.prototype.clickItem = function (t) {\r\n        var e = this.btnLayer.children.indexOf(t.node);\r\n        var i = \"\";\r\n        $platform.Platform.currPlatForm === $platform.PlatformEnum.TOU_TIAO\r\n            ? (i = \"tt_open_shop_diamond\")\r\n            : $platform.Platform.currPlatForm === $platform.PlatformEnum.WECHAT && (i = \"wx_open_shop_diamond\");\r\n        2 !== e || \"\" === i || $configContext.default.instance.getAdSwitch(i)\r\n            ? e !== this.currItemIndex &&\r\n              ($remoteAudio.default.instance.playEffectMusic(\"Click\"), (this.currItemIndex = e), this.renderItems())\r\n            : $uIManager.UIManager.instance.showToast(\"敬请期待\");\r\n    };\r\n    e.prototype.renderItems = function () {\r\n        var t = \"\";\r\n        $platform.Platform.currPlatForm === $platform.PlatformEnum.TOU_TIAO\r\n            ? (t = \"tt_open_shop_diamond\")\r\n            : $platform.Platform.currPlatForm === $platform.PlatformEnum.WECHAT && (t = \"wx_open_shop_diamond\");\r\n        if (2 !== this.currItemIndex || \"\" === t || $configContext.default.instance.getAdSwitch(t)) {\r\n            for (var e = 0; e < this.btnLayer.children.length; e++) {\r\n                this.btnLayer.children[e].opacity = this.currItemIndex === e ? 255 : 0;\r\n            }\r\n            this.boxItem.active = 0 === this.currItemIndex;\r\n            this.resItem.active = 1 === this.currItemIndex;\r\n            this.diamondItem.active = 2 === this.currItemIndex;\r\n        } else {\r\n            $uIManager.UIManager.instance.showToast(\"敬请期待\");\r\n        }\r\n    };\r\n    __decorate([g(cc.Node)], e.prototype, \"boxItem\", void 0);\r\n    __decorate([g(cc.Node)], e.prototype, \"resItem\", void 0);\r\n    __decorate([g(cc.Node)], e.prototype, \"diamondItem\", void 0);\r\n    __decorate([g(cc.Node)], e.prototype, \"btnLayer\", void 0);\r\n    __decorate([g(cc.Node)], e.prototype, \"redDotLayer\", void 0);\r\n    return __decorate([y], e);\r\n})($itemView.default);\r\nexports.default = _;\r\n"]}