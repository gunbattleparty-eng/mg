{"version":3,"sources":["assets\\game_script\\scripts\\Gun_7.js"],"names":["o","$assetsLoader","require","$assetsMap","$resUtil","$eventManager","$remoteAudio","$configContext","$globalParam","$localEventName","$baseBullet","$bullet_17","$gameContext","$gameSkillInfo","$baseGun","_","cc","Vec3","ZERO","k","t","e","i","call","status","bullet","currTargetEnemys","targetPos","atkLeft","atkEndLeft","skillId","isAtkMaser","skillParam","ins","skillInfo","getSkillById","__extends","prototype","initBullet","instance","getRes","BundleNames","Game","AssetsMap","GameBundles","prefabs","assetsList","Bullet_17","ResUtil","instantiate","buttleLayer","parent","getComponent","skillSpecialitys","basicSkillConfigMap","get","skill_tpye","node","active","updateF","isGamePuase","timeLeft","skillCD","Skill4Param","FINAL","send","RENDER_SKILL_CD_INFO","startGun","guideLaserTime","finding","attacking","position","sub","normalize","velocity","set","multiplyScalar","guideLaserSpeed","x","y","getPosition","magSqr","render","map","endSend","guideLaserAtkInterval","length","sufferAtk","id","atk","guideLaserMaserAtk","skillAtk","addGuideLaserAtkAdd","guideLaserBoomAtk","createButtleBoom","guideLaserIsThunder","createTunder","getRandomEnemys","pointNode","guideLaserRefractCount","skillAtkRange","initButtle","insert","setPosition","clone","atkMaserAndLock","enemyDie","indexOf","guideLaserRefractRange","addDieCallback","slice","getButtlePool","BulletType","thunder_bullet","Bullet_9","playEffectMusic","targetEnemy","isExtra","initParam","guideLaserThunderAtk","setAnimation","guide_laser_boom","Bullet_18","lowBulletLayer","add","v3","removeSelf","forEach","removeDieCallback","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $remoteAudio = require(\"./RemoteAudio\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $globalParam = require(\"./GlobalParam\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar $bullet_17 = require(\"./Bullet_17\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $gameSkillInfo = require(\"./GameSkillInfo\");\r\nvar $baseGun = require(\"./BaseGun\");\r\nvar _ = cc.Vec3.ZERO;\r\nvar k = (function (t) {\r\n    function e(e) {\r\n        var i = t.call(this, e) || this;\r\n        i.status = 0;\r\n        i.bullet = null;\r\n        i.currTargetEnemys = [];\r\n        i.targetPos = cc.Vec3.ZERO;\r\n        i.atkLeft = 0;\r\n        i.atkEndLeft = 0;\r\n        i.skillId = 116;\r\n        i.isAtkMaser = !1;\r\n        i.skillParam = $gameContext.default.ins.skillInfo.getSkillById(i.skillId);\r\n        return i;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.initBullet = function () {\r\n        var t = $assetsLoader.default.instance.getRes(\r\n            $assetsMap.BundleNames.Game,\r\n            $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.Bullet_17\r\n        );\r\n        this.bullet = $resUtil.ResUtil.instantiate(t, $gameContext.default.ins.buttleLayer.parent).getComponent(\r\n            $bullet_17.default\r\n        );\r\n        this.bullet.skillSpecialitys = $configContext.default.instance.basicSkillConfigMap.get(this.skillId).skill_tpye;\r\n        this.bullet.node.active = !1;\r\n    };\r\n    e.prototype.updateF = function (e) {\r\n        t.prototype.updateF.call(this, e);\r\n        if (!$globalParam.default.isGamePuase) {\r\n            0 === this.status\r\n                ? ((this.timeLeft -= e),\r\n                  this.timeLeft <= 0\r\n                      ? ((this.timeLeft = this.skillParam.skillCD[$gameSkillInfo.Skill4Param.FINAL]),\r\n                        $eventManager.default.send($localEventName.default.RENDER_SKILL_CD_INFO, this.skillId, 0, -1),\r\n                        this.startGun()\r\n                            ? ((this.timeLeft = this.skillParam.skillCD[$gameSkillInfo.Skill4Param.FINAL]),\r\n                              (this.atkEndLeft = this.skillParam.guideLaserTime),\r\n                              (this.status = 2),\r\n                              $eventManager.default.send(\r\n                                  $localEventName.default.RENDER_SKILL_CD_INFO,\r\n                                  this.skillId,\r\n                                  1,\r\n                                  -1\r\n                              ))\r\n                            : (this.timeLeft = 0))\r\n                      : $eventManager.default.send(\r\n                            $localEventName.default.RENDER_SKILL_CD_INFO,\r\n                            this.skillId,\r\n                            this.timeLeft / this.skillParam.skillCD[$gameSkillInfo.Skill4Param.FINAL],\r\n                            -1\r\n                        ))\r\n                : 1 === this.status\r\n                ? this.finding(e)\r\n                : 2 === this.status && this.attacking(e);\r\n        }\r\n    };\r\n    e.prototype.finding = function (t) {\r\n        this.currTargetEnemys[0].node.position.sub(this.targetPos).normalize(_);\r\n        this.bullet.velocity.set(_).multiplyScalar(this.skillParam.guideLaserSpeed);\r\n        this.targetPos.x += this.bullet.velocity.x * t;\r\n        this.targetPos.y += this.bullet.velocity.y * t;\r\n        this.targetPos.sub(this.currTargetEnemys[0].getPosition()).magSqr() <= 900\r\n            ? (this.bullet.render(\r\n                  this.currTargetEnemys.map(function (t) {\r\n                      return t.getPosition();\r\n                  }),\r\n                  this.currTargetEnemys\r\n              ),\r\n              (this.status = 2))\r\n            : this.bullet.render([this.targetPos], null);\r\n    };\r\n    e.prototype.attacking = function (t) {\r\n        this.atkEndLeft -= t;\r\n        if (this.atkEndLeft <= 0) {\r\n            this.endSend(!0);\r\n        } else {\r\n            this.bullet.render(\r\n                this.currTargetEnemys.map(function (t) {\r\n                    return t.getPosition();\r\n                }),\r\n                this.currTargetEnemys\r\n            );\r\n            this.atkLeft -= t;\r\n            if (this.atkLeft <= 0) {\r\n                this.atkLeft = this.skillParam.guideLaserAtkInterval;\r\n                for (var e = 0; e < this.currTargetEnemys.length; e++) {\r\n                    this.currTargetEnemys[e].sufferAtk({\r\n                        id: this.skillId,\r\n                        skillSpecialitys: this.bullet.skillSpecialitys,\r\n                        atk:\r\n                            0 === e\r\n                                ? this.skillParam.guideLaserMaserAtk[$gameSkillInfo.Skill4Param.FINAL]\r\n                                : this.skillParam.skillAtk[$gameSkillInfo.Skill4Param.FINAL]\r\n                    }) && this.skillParam.addGuideLaserAtkAdd();\r\n                    0 === e &&\r\n                        this.isAtkMaser &&\r\n                        ((this.isAtkMaser = !1),\r\n                        this.skillParam.guideLaserBoomAtk[$gameSkillInfo.Skill4Param.FINAL] > 0 &&\r\n                            this.createButtleBoom(),\r\n                        this.skillParam.guideLaserIsThunder && this.createTunder(this.currTargetEnemys[e]));\r\n                }\r\n            }\r\n        }\r\n    };\r\n    e.prototype.startGun = function () {\r\n        var t = $gameContext.default.ins.getRandomEnemys(\r\n            this.pointNode,\r\n            this.skillParam.guideLaserRefractCount,\r\n            this.skillParam.skillAtkRange[$gameSkillInfo.Skill4Param.FINAL]\r\n        );\r\n        return !(\r\n            t.length <= 0 ||\r\n            ((this.atkLeft = this.skillParam.guideLaserAtkInterval),\r\n            (this.currTargetEnemys.length = 0),\r\n            (this.currTargetEnemys = t),\r\n            this.bullet.initButtle(null, this.skillId),\r\n            this.bullet.insert($gameContext.default.ins.buttleLayer),\r\n            this.bullet.setPosition(this.pointNode.position.clone()),\r\n            (this.bullet.node.active = !0),\r\n            this.atkMaserAndLock(),\r\n            (this.status = 2),\r\n            0)\r\n        );\r\n    };\r\n    e.prototype.enemyDie = function (t) {\r\n        var e;\r\n        var i = this.currTargetEnemys.indexOf(t);\r\n        if (-1 !== i) {\r\n            0 === i\r\n                ? ((this.targetPos = t.getPosition().clone()),\r\n                  (e = $gameContext.default.ins.getRandomEnemys(\r\n                      this.pointNode,\r\n                      this.skillParam.guideLaserRefractCount,\r\n                      99999\r\n                  )).length <= 0\r\n                      ? this.endSend(!0)\r\n                      : (this.endSend(), (this.currTargetEnemys = e), this.atkMaserAndLock(), (this.status = 1)))\r\n                : (e = $gameContext.default.ins.getRandomEnemys(\r\n                      this.currTargetEnemys[i - 1].node,\r\n                      1,\r\n                      this.skillParam.guideLaserRefractRange\r\n                  )).length > 0\r\n                ? ((this.currTargetEnemys[i] = e[0]), this.currTargetEnemys[i].addDieCallback(this.enemyDie, this))\r\n                : this.currTargetEnemys.slice(i, 1);\r\n        }\r\n    };\r\n    e.prototype.atkMaserAndLock = function () {\r\n        this.isAtkMaser = !0;\r\n        for (var t = 0; t < this.currTargetEnemys.length; t++) {\r\n            this.currTargetEnemys[t].addDieCallback(this.enemyDie, this);\r\n        }\r\n    };\r\n    e.prototype.createTunder = function (t) {\r\n        var e = $gameContext.default.ins.getButtlePool($baseBullet.BulletType.thunder_bullet);\r\n        if (!e) {\r\n            var i = $assetsLoader.default.instance.getRes(\r\n                $assetsMap.BundleNames.Game,\r\n                $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.Bullet_9\r\n            );\r\n            (e = $resUtil.ResUtil.instantiate(i, $gameContext.default.ins.buttleLayer.parent).getComponent(\r\n                $baseBullet.default\r\n            )).skillSpecialitys = $configContext.default.instance.basicSkillConfigMap.get(61).skill_tpye;\r\n        }\r\n        e.setPosition(t.node.position.clone());\r\n        $remoteAudio.default.instance.playEffectMusic(\"Lightningstrike\");\r\n        e.targetEnemy = t;\r\n        e.targetPos = t.getPosition().clone();\r\n        e.isExtra = !0;\r\n        e.initButtle(null, 61);\r\n        e.initParam(this.skillParam.guideLaserThunderAtk[$gameSkillInfo.Skill4Param.FINAL]);\r\n        e.insert($gameContext.default.ins.buttleLayer);\r\n        e.setAnimation(\"\");\r\n    };\r\n    e.prototype.createButtleBoom = function () {\r\n        var t = $gameContext.default.ins.getButtlePool($baseBullet.BulletType.guide_laser_boom);\r\n        if (!t) {\r\n            var e = $assetsLoader.default.instance.getRes(\r\n                $assetsMap.BundleNames.Game,\r\n                $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.Bullet_18\r\n            );\r\n            t = $resUtil.ResUtil.instantiate(e, $gameContext.default.ins.lowBulletLayer.parent).getComponent(\r\n                $baseBullet.default\r\n            );\r\n        }\r\n        t.setPosition(this.currTargetEnemys[0].node.position.add(cc.v3(0, 30)));\r\n        t.initButtle(null, this.skillId);\r\n        t.insert($gameContext.default.ins.lowBulletLayer);\r\n        t.setAnimation(null);\r\n    };\r\n    e.prototype.endSend = function (t) {\r\n        var e = this;\r\n        if (void 0 === t) {\r\n            t = !1;\r\n        }\r\n        if (t) {\r\n            this.bullet.removeSelf(!1);\r\n            this.bullet.node.parent = null;\r\n            this.bullet.node.active = !1;\r\n            this.atkEndLeft = this.skillParam.guideLaserTime;\r\n            this.status = 0;\r\n            this.timeLeft = this.skillParam.skillCD[$gameSkillInfo.Skill4Param.FINAL];\r\n        }\r\n        this.currTargetEnemys.forEach(function (t) {\r\n            if (t) {\r\n                t.removeDieCallback(e);\r\n            }\r\n        });\r\n        this.currTargetEnemys.length = 0;\r\n    };\r\n    return e;\r\n})($baseGun.default);\r\nexports.default = k;\r\n"]}