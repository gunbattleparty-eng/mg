{"version":3,"sources":["assets\\game_script\\scripts\\TTBanner.js"],"names":["o","exports","TTBanner","$baseAd","require","r","window","tt","a","t","e","apply","arguments","isOpenPreLoad","style","__extends","prototype","loadAd","adUnitId","createBannerAd","getSystemInfoSync","i","windowWidth","windowHeight","n","left","top","width","Math","floor","adIns","onLoad","onResize","onError","console","warn","error","showBanner","showCallback","errorCallback","isCanShow","isAutoShow","isConsume","reCreateAd","isLoaded","show","then","forbiddenBanner","hideBanner","destroyAd","hide","onAdResize","call","s","round","height","offLoad","offResize","offError","destroy","autoShow","onAdLoad","onAdError","BaseAd"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nexports.TTBanner = void 0;\r\nvar $baseAd = require(\"./BaseAd\");\r\nvar r = window.tt;\r\nvar a = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.isOpenPreLoad = !1;\r\n        e.style = null;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.loadAd = function () {\r\n        if (this.adUnitId) {\r\n            if (r && r.createBannerAd) {\r\n                var t = this.style || {};\r\n                var e = r.getSystemInfoSync();\r\n                var i = e.windowWidth;\r\n                var o = e.windowHeight;\r\n                var n = {\r\n                    adUnitId: this.adUnitId,\r\n                    style: {\r\n                        left: t.left || 0,\r\n                        top: t.top || o - 300,\r\n                        width: t.width || Math.floor(i)\r\n                    }\r\n                };\r\n                this.adIns = r.createBannerAd(n);\r\n                if (this.adIns.onLoad) {\r\n                    this.adIns.onLoad(this.onLoad);\r\n                }\r\n                if (this.adIns.onResize) {\r\n                    this.adIns.onResize(this.onResize);\r\n                }\r\n                if (this.adIns.onError) {\r\n                    this.adIns.onError(this.onError);\r\n                }\r\n            } else {\r\n                console.warn(\"当前平台不支持创建banner\");\r\n            }\r\n        } else {\r\n            console.error(\"头条Banner ID为空\");\r\n        }\r\n    };\r\n    e.prototype.showBanner = function (t, e, i) {\r\n        var o = this;\r\n        this.showCallback = e;\r\n        this.errorCallback = i;\r\n        if (this.isCanShow) {\r\n            if (!this.adIns) {\r\n                console.warn(this.adUnitId, \":未创建，执行创建\");\r\n                this.isAutoShow = !0;\r\n                return this.loadAd();\r\n            }\r\n            if (this.isConsume) {\r\n                this.reCreateAd(!0);\r\n            } else {\r\n                {\r\n                    if (!this.isLoaded) {\r\n                        console.warn(this.adUnitId, \":未加载完成，稍等\");\r\n                        return void (this.isAutoShow = !0);\r\n                    }\r\n                    if (this.adIns && t) {\r\n                        if (void 0 !== t.top) {\r\n                            this.adIns.style.top = t.top;\r\n                        }\r\n                        if (void 0 !== t.left) {\r\n                            this.adIns.style.left = t.left;\r\n                        }\r\n                        if (void 0 !== t.width) {\r\n                            this.adIns.style.width = t.width;\r\n                        }\r\n                    }\r\n                    this.isConsume = !1;\r\n                    if (this.adIns.show) {\r\n                        var n = this.adIns.show();\r\n                        n && n.then\r\n                            ? n\r\n                                  .then(function () {\r\n                                      o.isConsume = !0;\r\n                                      if (o.showCallback) {\r\n                                          o.showCallback();\r\n                                      }\r\n                                      o.showCallback = null;\r\n                                  })\r\n                                  .catch(function (t) {\r\n                                      console.warn(o.adUnitId, \":show错误，重新加载\", t);\r\n                                      o.reCreateAd(!0);\r\n                                  })\r\n                            : (console.warn(this.adUnitId, \":show显示失败，重新加载\"), this.reCreateAd(!0));\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            console.warn(this.adUnitId, \":当前广告禁止显示\");\r\n        }\r\n    };\r\n    e.prototype.forbiddenBanner = function (t) {\r\n        this.isCanShow = !t;\r\n        if (t && this.isConsume) {\r\n            this.hideBanner(!1);\r\n        }\r\n    };\r\n    e.prototype.hideBanner = function (t) {\r\n        t && this.isConsume\r\n            ? (this.destroyAd(), this.reCreateAd(!1))\r\n            : this.adIns && this.adIns.hide && this.adIns.hide();\r\n    };\r\n    e.prototype.onAdResize = function (e) {\r\n        t.prototype.onAdResize.call(this, e);\r\n        var i = r.getSystemInfoSync();\r\n        var o = i.windowWidth;\r\n        var n = i.windowHeight;\r\n        var s = this.style || {};\r\n        null != s.top ? (this.adIns.style.top = s.top) : (this.adIns.style.top = Math.round(n - e.height + 0.1));\r\n        null != s.left\r\n            ? (this.adIns.style.left = s.left)\r\n            : (this.adIns.style.left = Math.round((o - e.width) / 2 + 0.1));\r\n    };\r\n    e.prototype.reCreateAd = function (t) {\r\n        this.destroyAd();\r\n        this.isAutoShow = t;\r\n        this.loadAd();\r\n    };\r\n    e.prototype.destroyAd = function () {\r\n        t.prototype.destroyAd.call(this);\r\n        if (this.adIns) {\r\n            if (this.adIns.offLoad) {\r\n                this.adIns.offLoad(this.onLoad);\r\n            }\r\n            if (this.adIns.offResize) {\r\n                this.adIns.offResize(this.onResize);\r\n            }\r\n            if (this.adIns.offError) {\r\n                this.adIns.offError(this.onError);\r\n            }\r\n            if (this.adIns.destroy) {\r\n                this.adIns.destroy();\r\n            }\r\n            this.adIns = null;\r\n        }\r\n    };\r\n    e.prototype.autoShow = function () {\r\n        if (this.isAutoShow) {\r\n            this.isAutoShow = !1;\r\n            this.showBanner(this.style, this.showCallback, this.errorCallback);\r\n        }\r\n    };\r\n    e.prototype.onAdLoad = function () {\r\n        t.prototype.onAdLoad.call(this);\r\n        this.isConsume = !1;\r\n        this.isLoaded = !0;\r\n        this.autoShow();\r\n    };\r\n    e.prototype.onAdError = function (e) {\r\n        t.prototype.onAdError.call(this, e);\r\n        if (this.errorCallback) {\r\n            this.errorCallback();\r\n        }\r\n        this.destroyAd();\r\n    };\r\n    return e;\r\n})($baseAd.BaseAd);\r\nexports.TTBanner = a;\r\n"]}