
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/AudioPlayer.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '58581C5T+JJyb3V8RItv/vj', 'AudioPlayer');
// game_script/scripts/AudioPlayer.js

"use strict";

var o = function () {
  function t() {}

  Object.defineProperty(t, "masterVolume", {
    get: function get() {
      return this._masterVolume;
    },
    enumerable: !1,
    configurable: !0
  });
  Object.defineProperty(t, "musicVolume", {
    get: function get() {
      return this._musicVolume;
    },
    enumerable: !1,
    configurable: !0
  });
  Object.defineProperty(t, "effectVolume", {
    get: function get() {
      return this._effectVolume;
    },
    enumerable: !1,
    configurable: !0
  });

  t.setMasterVolume = function (t) {
    t < 0 ? t = 0 : t > 1 && (t = 1);
    this._masterVolume = t;
    this.setMusicVolume(this._musicVolume);
    this.setEffectVolume(this._effectVolume);
  };

  t.setVolume = function (t) {
    this.setMusicVolume(t);
    this.setEffectVolume(t);
  };

  t.setMusicVolume = function (t) {
    t < 0 ? t = 0 : t > 1 && (t = 1);
    this._musicVolume = t;
    var e = this._masterVolume * t;

    this._music.forEach(function (t) {
      return cc.audioEngine.setVolume(t, e);
    });
  };

  t.setEffectVolume = function (t) {
    t < 0 ? t = 0 : t > 1 && (t = 1);
    this._effectVolume = t;
    var e = this._masterVolume * t;

    this._effect.forEach(function (t, i) {
      return cc.audioEngine.setVolume(i, e);
    });
  };

  t.playMusic = function (t) {
    if (this._music.has(t)) {
      this.stopMusic(t);
    }

    var e = cc.audioEngine.play(t, !0, this._masterVolume * this._musicVolume);

    this._music.set(t, e);
  };

  t.stopMusic = function (t) {
    if (this._music.has(t)) {
      cc.audioEngine.stop(this._music.get(t));

      this._music["delete"](t);
    }
  };

  t.stopAllMusic = function () {
    var t = this;

    this._music.forEach(function (e, i) {
      return t.stopMusic(i);
    });
  };

  t.pauseMusic = function (t) {
    if (this._music.has(t)) {
      cc.audioEngine.pause(this._music.get(t));
    }
  };

  t.pauseAllMusic = function () {
    var t = this;

    this._music.forEach(function (e, i) {
      return t.pauseMusic(i);
    });
  };

  t.resumeMusic = function (t) {
    if (this._music.has(t)) {
      cc.audioEngine.resume(this._music.get(t));
    }
  };

  t.resumeAllMusic = function () {
    var t = this;

    this._music.forEach(function (e, i) {
      return t.resumeMusic(i);
    });
  };

  t.playEffect = function (t, e) {
    var i = this;
    var o = cc.audioEngine.play(t, e, this._masterVolume * this._effectVolume);

    this._effect.set(o, t);

    if (!e) {
      cc.audioEngine.setFinishCallback(o, function () {
        return i._effect["delete"](o);
      });
    }
  };

  t.stopEffect = function (t) {
    var e = this;

    this._effect.forEach(function (i, o) {
      if (i === t) {
        cc.audioEngine.stop(o);

        e._effect["delete"](o);
      }
    });
  };

  t.stopAllEffect = function () {
    var t = this;

    this._effect.forEach(function (e, i) {
      cc.audioEngine.stop(i);

      t._effect["delete"](i);
    });
  };

  t.pauseEffect = function (t) {
    this._effect.forEach(function (e, i) {
      return e === t && cc.audioEngine.pause(i);
    });
  };

  t.pauseAllEffect = function () {
    this._effect.forEach(function (t, e) {
      return cc.audioEngine.pause(e);
    });
  };

  t.resumeEffect = function (t) {
    this._effect.forEach(function (e, i) {
      return e === t && cc.audioEngine.resume(i);
    });
  };

  t.resumeAllEffect = function () {
    this._effect.forEach(function (t, e) {
      return cc.audioEngine.resume(e);
    });
  };

  t.stopAll = function () {
    this.stopAllMusic();
    this.stopAllEffect();
  };

  t.pauseAll = function () {
    this.pauseAllMusic();
    this.pauseAllEffect();
  };

  t.resumeAll = function () {
    this.resumeAllMusic();
    this.resumeAllEffect();
  };

  t.mute = function () {
    this.setMasterVolume(0);
  };

  t._music = new Map();
  t._effect = new Map();
  t._masterVolume = 1;
  t._musicVolume = 1;
  t._effectVolume = 1;
  return t;
}();

exports["default"] = o;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXEF1ZGlvUGxheWVyLmpzIl0sIm5hbWVzIjpbIm8iLCJ0IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXQiLCJfbWFzdGVyVm9sdW1lIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIl9tdXNpY1ZvbHVtZSIsIl9lZmZlY3RWb2x1bWUiLCJzZXRNYXN0ZXJWb2x1bWUiLCJzZXRNdXNpY1ZvbHVtZSIsInNldEVmZmVjdFZvbHVtZSIsInNldFZvbHVtZSIsImUiLCJfbXVzaWMiLCJmb3JFYWNoIiwiY2MiLCJhdWRpb0VuZ2luZSIsIl9lZmZlY3QiLCJpIiwicGxheU11c2ljIiwiaGFzIiwic3RvcE11c2ljIiwicGxheSIsInNldCIsInN0b3AiLCJzdG9wQWxsTXVzaWMiLCJwYXVzZU11c2ljIiwicGF1c2UiLCJwYXVzZUFsbE11c2ljIiwicmVzdW1lTXVzaWMiLCJyZXN1bWUiLCJyZXN1bWVBbGxNdXNpYyIsInBsYXlFZmZlY3QiLCJzZXRGaW5pc2hDYWxsYmFjayIsInN0b3BFZmZlY3QiLCJzdG9wQWxsRWZmZWN0IiwicGF1c2VFZmZlY3QiLCJwYXVzZUFsbEVmZmVjdCIsInJlc3VtZUVmZmVjdCIsInJlc3VtZUFsbEVmZmVjdCIsInN0b3BBbGwiLCJwYXVzZUFsbCIsInJlc3VtZUFsbCIsIm11dGUiLCJNYXAiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUMsR0FBSSxZQUFZO0VBQ2pCLFNBQVNDLENBQVQsR0FBYSxDQUFFOztFQUNmQyxNQUFNLENBQUNDLGNBQVAsQ0FBc0JGLENBQXRCLEVBQXlCLGNBQXpCLEVBQXlDO0lBQ3JDRyxHQUFHLEVBQUUsZUFBWTtNQUNiLE9BQU8sS0FBS0MsYUFBWjtJQUNILENBSG9DO0lBSXJDQyxVQUFVLEVBQUUsQ0FBQyxDQUp3QjtJQUtyQ0MsWUFBWSxFQUFFLENBQUM7RUFMc0IsQ0FBekM7RUFPQUws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QixZQUFZO0lBQzVCLEtBQUt0QixPQUFMLENBQWFILE9BQWIsQ0FBcUIsVUFBVWYsQ0FBVixFQUFhYSxDQUFiLEVBQWdCO01BQ2pDLE9BQU9HLEVBQUUsQ0FBQ0MsV0FBSCxDQUFlYyxNQUFmLENBQXNCbEIsQ0FBdEIsQ0FBUDtJQUNILENBRkQ7RUFHSCxDQUpEOztFQUtBYixDQUFDLENBQUN5QyxPQUFGLEdBQVksWUFBWTtJQUNwQixLQUFLZixZQUFMO0lBQ0EsS0FBS1UsYUFBTDtFQUNILENBSEQ7O0VBSUFwQyxDQUFDLENBQUMwQyxRQUFGLEdBQWEsWUFBWTtJQUNyQixLQUFLYixhQUFMO0lBQ0EsS0FBS1MsY0FBTDtFQUNILENBSEQ7O0VBSUF0QyxDQUFDLENBQUMyQyxTQUFGLEdBQWMsWUFBWTtJQUN0QixLQUFLWCxjQUFMO0lBQ0EsS0FBS1EsZUFBTDtFQUNILENBSEQ7O0VBSUF4QyxDQUFDLENBQUM0QyxJQUFGLEdBQVMsWUFBWTtJQUNqQixLQUFLbkMsZUFBTCxDQUFxQixDQUFyQjtFQUNILENBRkQ7O0VBR0FULENBQUMsQ0FBQ2MsTUFBRixHQUFXLElBQUkrQixHQUFKLEVBQVg7RUFDQTdDLENBQUMsQ0FBQ2tCLE9BQUYsR0FBWSxJQUFJMkIsR0FBSixFQUFaO0VBQ0E3QyxDQUFDLENBQUNJLGFBQUYsR0FBa0IsQ0FBbEI7RUFDQUosQ0FBQyxDQUFDTyxZQUFGLEdBQWlCLENBQWpCO0VBQ0FQLENBQUMsQ0FBQ1EsYUFBRixHQUFrQixDQUFsQjtFQUNBLE9BQU9SLENBQVA7QUFDSCxDQTdKTyxFQUFSOztBQThKQThDLE9BQU8sV0FBUCxHQUFrQi9DLENBQWxCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbyA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiB0KCkge31cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBcIm1hc3RlclZvbHVtZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXN0ZXJWb2x1bWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiAhMSxcclxuICAgICAgICBjb25maWd1cmFibGU6ICEwXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBcIm11c2ljVm9sdW1lXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX211c2ljVm9sdW1lO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogITEsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMFxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgXCJlZmZlY3RWb2x1bWVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZWZmZWN0Vm9sdW1lO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogITEsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMFxyXG4gICAgfSk7XHJcbiAgICB0LnNldE1hc3RlclZvbHVtZSA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdCA8IDAgPyAodCA9IDApIDogdCA+IDEgJiYgKHQgPSAxKTtcclxuICAgICAgICB0aGlzLl9tYXN0ZXJWb2x1bWUgPSB0O1xyXG4gICAgICAgIHRoaXMuc2V0TXVzaWNWb2x1bWUodGhpcy5fbXVzaWNWb2x1bWUpO1xyXG4gICAgICAgIHRoaXMuc2V0RWZmZWN0Vm9sdW1lKHRoaXMuX2VmZmVjdFZvbHVtZSk7XHJcbiAgICB9O1xyXG4gICAgdC5zZXRWb2x1bWUgPSBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIHRoaXMuc2V0TXVzaWNWb2x1bWUodCk7XHJcbiAgICAgICAgdGhpcy5zZXRFZmZlY3RWb2x1bWUodCk7XHJcbiAgICB9O1xyXG4gICAgdC5zZXRNdXNpY1ZvbHVtZSA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdCA8IDAgPyAodCA9IDApIDogdCA+IDEgJiYgKHQgPSAxKTtcclxuICAgICAgICB0aGlzLl9tdXNpY1ZvbHVtZSA9IHQ7XHJcbiAgICAgICAgdmFyIGUgPSB0aGlzLl9tYXN0ZXJWb2x1bWUgKiB0O1xyXG4gICAgICAgIHRoaXMuX211c2ljLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNjLmF1ZGlvRW5naW5lLnNldFZvbHVtZSh0LCBlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB0LnNldEVmZmVjdFZvbHVtZSA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdCA8IDAgPyAodCA9IDApIDogdCA+IDEgJiYgKHQgPSAxKTtcclxuICAgICAgICB0aGlzLl9lZmZlY3RWb2x1bWUgPSB0O1xyXG4gICAgICAgIHZhciBlID0gdGhpcy5fbWFzdGVyVm9sdW1lICogdDtcclxuICAgICAgICB0aGlzLl9lZmZlY3QuZm9yRWFjaChmdW5jdGlvbiAodCwgaSkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2MuYXVkaW9FbmdpbmUuc2V0Vm9sdW1lKGksIGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHQucGxheU11c2ljID0gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICBpZiAodGhpcy5fbXVzaWMuaGFzKHQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcE11c2ljKHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZSA9IGNjLmF1ZGlvRW5naW5lLnBsYXkodCwgITAsIHRoaXMuX21hc3RlclZvbHVtZSAqIHRoaXMuX211c2ljVm9sdW1lKTtcclxuICAgICAgICB0aGlzLl9tdXNpYy5zZXQodCwgZSk7XHJcbiAgICB9O1xyXG4gICAgdC5zdG9wTXVzaWMgPSBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9tdXNpYy5oYXModCkpIHtcclxuICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUuc3RvcCh0aGlzLl9tdXNpYy5nZXQodCkpO1xyXG4gICAgICAgICAgICB0aGlzLl9tdXNpYy5kZWxldGUodCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHQuc3RvcEFsbE11c2ljID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ID0gdGhpcztcclxuICAgICAgICB0aGlzLl9tdXNpYy5mb3JFYWNoKGZ1bmN0aW9uIChlLCBpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0LnN0b3BNdXNpYyhpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB0LnBhdXNlTXVzaWMgPSBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9tdXNpYy5oYXModCkpIHtcclxuICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUucGF1c2UodGhpcy5fbXVzaWMuZ2V0KHQpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdC5wYXVzZUFsbE11c2ljID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ID0gdGhpcztcclxuICAgICAgICB0aGlzLl9tdXNpYy5mb3JFYWNoKGZ1bmN0aW9uIChlLCBpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0LnBhdXNlTXVzaWMoaSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdC5yZXN1bWVNdXNpYyA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX211c2ljLmhhcyh0KSkge1xyXG4gICAgICAgICAgICBjYy5hdWRpb0VuZ2luZS5yZXN1bWUodGhpcy5fbXVzaWMuZ2V0KHQpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdC5yZXN1bWVBbGxNdXNpYyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdCA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5fbXVzaWMuZm9yRWFjaChmdW5jdGlvbiAoZSwgaSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdC5yZXN1bWVNdXNpYyhpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB0LnBsYXlFZmZlY3QgPSBmdW5jdGlvbiAodCwgZSkge1xyXG4gICAgICAgIHZhciBpID0gdGhpcztcclxuICAgICAgICB2YXIgbyA9IGNjLmF1ZGlvRW5naW5lLnBsYXkodCwgZSwgdGhpcy5fbWFzdGVyVm9sdW1lICogdGhpcy5fZWZmZWN0Vm9sdW1lKTtcclxuICAgICAgICB0aGlzLl9lZmZlY3Quc2V0KG8sIHQpO1xyXG4gICAgICAgIGlmICghZSkge1xyXG4gICAgICAgICAgICBjYy5hdWRpb0VuZ2luZS5zZXRGaW5pc2hDYWxsYmFjayhvLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaS5fZWZmZWN0LmRlbGV0ZShvKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHQuc3RvcEVmZmVjdCA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdmFyIGUgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuX2VmZmVjdC5mb3JFYWNoKGZ1bmN0aW9uIChpLCBvKSB7XHJcbiAgICAgICAgICAgIGlmIChpID09PSB0KSB7XHJcbiAgICAgICAgICAgICAgICBjYy5hdWRpb0VuZ2luZS5zdG9wKG8pO1xyXG4gICAgICAgICAgICAgICAgZS5fZWZmZWN0LmRlbGV0ZShvKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHQuc3RvcEFsbEVmZmVjdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdCA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5fZWZmZWN0LmZvckVhY2goZnVuY3Rpb24gKGUsIGkpIHtcclxuICAgICAgICAgICAgY2MuYXVkaW9FbmdpbmUuc3RvcChpKTtcclxuICAgICAgICAgICAgdC5fZWZmZWN0LmRlbGV0ZShpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB0LnBhdXNlRWZmZWN0ID0gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICB0aGlzLl9lZmZlY3QuZm9yRWFjaChmdW5jdGlvbiAoZSwgaSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZSA9PT0gdCAmJiBjYy5hdWRpb0VuZ2luZS5wYXVzZShpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB0LnBhdXNlQWxsRWZmZWN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2VmZmVjdC5mb3JFYWNoKGZ1bmN0aW9uICh0LCBlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYy5hdWRpb0VuZ2luZS5wYXVzZShlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB0LnJlc3VtZUVmZmVjdCA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdGhpcy5fZWZmZWN0LmZvckVhY2goZnVuY3Rpb24gKGUsIGkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGUgPT09IHQgJiYgY2MuYXVkaW9FbmdpbmUucmVzdW1lKGkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHQucmVzdW1lQWxsRWZmZWN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2VmZmVjdC5mb3JFYWNoKGZ1bmN0aW9uICh0LCBlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYy5hdWRpb0VuZ2luZS5yZXN1bWUoZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdC5zdG9wQWxsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc3RvcEFsbE11c2ljKCk7XHJcbiAgICAgICAgdGhpcy5zdG9wQWxsRWZmZWN0KCk7XHJcbiAgICB9O1xyXG4gICAgdC5wYXVzZUFsbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnBhdXNlQWxsTXVzaWMoKTtcclxuICAgICAgICB0aGlzLnBhdXNlQWxsRWZmZWN0KCk7XHJcbiAgICB9O1xyXG4gICAgdC5yZXN1bWVBbGwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5yZXN1bWVBbGxNdXNpYygpO1xyXG4gICAgICAgIHRoaXMucmVzdW1lQWxsRWZmZWN0KCk7XHJcbiAgICB9O1xyXG4gICAgdC5tdXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc2V0TWFzdGVyVm9sdW1lKDApO1xyXG4gICAgfTtcclxuICAgIHQuX211c2ljID0gbmV3IE1hcCgpO1xyXG4gICAgdC5fZWZmZWN0ID0gbmV3IE1hcCgpO1xyXG4gICAgdC5fbWFzdGVyVm9sdW1lID0gMTtcclxuICAgIHQuX211c2ljVm9sdW1lID0gMTtcclxuICAgIHQuX2VmZmVjdFZvbHVtZSA9IDE7XHJcbiAgICByZXR1cm4gdDtcclxufSkoKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gbztcclxuIl19