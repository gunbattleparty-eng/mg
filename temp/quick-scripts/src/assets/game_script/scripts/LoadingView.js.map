{"version":3,"sources":["assets\\game_script\\scripts\\LoadingView.js"],"names":["o","$switchContext","require","$uIParam","$uIView","c","cc","_decorator","u","ccclass","d","property","p","t","e","apply","arguments","uiType","LayerType","WAITING","progressBar","bgSp","bg2","targetProgress","completedCB","isCompleted","__extends","prototype","onResetView","SwitchContext","currVersion","GameVersion","V2","spriteFrame","registerCB","bind","setProgress","progress","removeToScreen","update","misc","lerp","__decorate","ProgressBar","Sprite","SpriteFrame","UIView","exports"],"mappings":";;;;;;AAAA,IAAIA,CAAJ;;AACA,IAAIC,cAAc,GAAGC,OAAO,CAAC,iBAAD,CAA5B;;AACA,IAAIC,QAAQ,GAAGD,OAAO,CAAC,WAAD,CAAtB;;AACA,IAAIE,OAAO,GAAGF,OAAO,CAAC,UAAD,CAArB;;AACA,IAAIG,CAAC,GAAGC,EAAE,CAACC,UAAX;AACA,IAAIC,CAAC,GAAGH,CAAC,CAACI,OAAV;AACA,IAAIC,CAAC,GAAGL,CAAC,CAACM,QAAV;;AACA,IAAIC,CAAC,GAAI,UAAUC,CAAV,EAAa;EAClB,SAASC,CAAT,GAAa;IACT,IAAIA,CAAC,GAAI,SAASD,CAAT,IAAcA,CAAC,CAACE,KAAF,CAAQ,IAAR,EAAcC,SAAd,CAAf,IAA4C,IAApD;IACAF,CAAC,CAACG,MAAF,GAAWd,QAAQ,CAACe,SAAT,CAAmBC,OAA9B;IACAL,CAAC,CAACM,WAAF,GAAgB,IAAhB;IACAN,CAAC,CAACO,IAAF,GAAS,IAAT;IACAP,CAAC,CAACQ,GAAF,GAAQ,IAAR;IACAR,CAAC,CAACS,cAAF,GAAmB,CAAnB;IACAT,CAAC,CAACU,WAAF,GAAgB,IAAhB;IACAV,CAAC,CAACW,WAAF,GAAgB,CAAC,CAAjB;IACA,OAAOX,CAAP;EACH;;EACDY,SAAS,CAACZ,CAAD,EAAID,CAAJ,CAAT;;EACAC,CAAC,CAACa,SAAF,CAAYC,WAAZ,GAA0B,YAAY;IAClC,IAAI3B,cAAc,CAAC4B,aAAf,CAA6BC,WAA7B,KAA6C7B,cAAc,CAAC8B,WAAf,CAA2BC,EAAxE,IAA8E,KAAKV,GAAvF,EAA4F;MACxF,KAAKD,IAAL,CAAUY,WAAV,GAAwB,KAAKX,GAA7B;IACH;EACJ,CAJD;;EAKAR,CAAC,CAACa,SAAF,CAAYO,UAAZ,GAAyB,UAAUrB,CAAV,EAAaC,CAAb,EAAgB;IACrC,KAAKU,WAAL,GAAmBX,CAAC,CAACsB,IAAF,CAAOrB,CAAP,CAAnB;EACH,CAFD;;EAGAA,CAAC,CAACa,SAAF,CAAYS,WAAZ,GAA0B,UAAUvB,CAAV,EAAaC,CAAb,EAAgB;IACtC,IAAI,KAAK,CAAL,KAAWA,CAAf,EAAkB;MACdA,CAAC,GAAG,CAAC,CAAL;IACH;;IACDA,CAAC,IACO,KAAKS,cAAL,GAAsBV,CAAvB,EAA4B,KAAKO,WAAL,CAAiBiB,QAAjB,GAA4BxB,CAD9D,IAEK,KAAKU,cAAL,GAAsBV,CAAtB,KAA4B,KAAKU,cAAL,GAAsBV,CAAlD,CAFN;EAGH,CAPD;;EAQAC,CAAC,CAACa,SAAF,CAAYW,cAAZ,GAA6B,YAAY;IACrC,KAAKf,cAAL,GAAsB,CAAtB;IACA,KAAKC,WAAL,GAAmB,IAAnB;IACA,KAAKC,WAAL,GAAmB,CAAC,CAApB;IACA,KAAKL,WAAL,CAAiBiB,QAAjB,GAA4B,CAA5B;EACH,CALD;;EAMAvB,CAAC,CAACa,SAAF,CAAYY,MAAZ,GAAqB,UAAU1B,CAAV,EAAa;IAC9B,KAAKO,WAAL,CAAiBiB,QAAjB,GAA4B/B,EAAE,CAACkC,IAAH,CAAQC,IAAR,CAAa,KAAKrB,WAAL,CAAiBiB,QAA9B,EAAwC,KAAKd,cAA7C,EAA6D,KAAKV,CAAlE,CAA5B;;IACA,IAAI,KAAKO,WAAL,CAAiBiB,QAAjB,IAA6B,IAA7B,IAAqC,CAAC,KAAKZ,WAA3C,IAA0D,KAAKD,WAAnE,EAAgF;MAC5E,KAAKC,WAAL,GAAmB,CAAC,CAApB;MACA,KAAKD,WAAL;IACH;EACJ,CAND;;EAOAkB,UAAU,CAAC,CAAChC,CAAC,CAACJ,EAAE,CAACqC,WAAJ,CAAF,CAAD,EAAsB7B,CAAC,CAACa,SAAxB,EAAmC,aAAnC,EAAkD,KAAK,CAAvD,CAAV;;EACAe,UAAU,CAAC,CAAChC,CAAC,CAACJ,EAAE,CAACsC,MAAJ,CAAF,CAAD,EAAiB9B,CAAC,CAACa,SAAnB,EAA8B,MAA9B,EAAsC,KAAK,CAA3C,CAAV;;EACAe,UAAU,CAAC,CAAChC,CAAC,CAACJ,EAAE,CAACuC,WAAJ,CAAF,CAAD,EAAsB/B,CAAC,CAACa,SAAxB,EAAmC,KAAnC,EAA0C,KAAK,CAA/C,CAAV;;EACA,OAAOe,UAAU,CAAC,CAAClC,CAAD,CAAD,EAAMM,CAAN,CAAjB;AACH,CA9CO,CA8CLV,OAAO,CAAC0C,MA9CH,CAAR;;AA+CAC,OAAO,WAAP,GAAkBnC,CAAlB","sourceRoot":"/","sourcesContent":["var o;\r\nvar $switchContext = require(\"./SwitchContext\");\r\nvar $uIParam = require(\"./UIParam\");\r\nvar $uIView = require(\"./UIView\");\r\nvar c = cc._decorator;\r\nvar u = c.ccclass;\r\nvar d = c.property;\r\nvar p = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.uiType = $uIParam.LayerType.WAITING;\r\n        e.progressBar = null;\r\n        e.bgSp = null;\r\n        e.bg2 = null;\r\n        e.targetProgress = 0;\r\n        e.completedCB = null;\r\n        e.isCompleted = !1;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.onResetView = function () {\r\n        if ($switchContext.SwitchContext.currVersion === $switchContext.GameVersion.V2 && this.bg2) {\r\n            this.bgSp.spriteFrame = this.bg2;\r\n        }\r\n    };\r\n    e.prototype.registerCB = function (t, e) {\r\n        this.completedCB = t.bind(e);\r\n    };\r\n    e.prototype.setProgress = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = !1;\r\n        }\r\n        e\r\n            ? ((this.targetProgress = t), (this.progressBar.progress = t))\r\n            : this.targetProgress < t && (this.targetProgress = t);\r\n    };\r\n    e.prototype.removeToScreen = function () {\r\n        this.targetProgress = 0;\r\n        this.completedCB = null;\r\n        this.isCompleted = !1;\r\n        this.progressBar.progress = 0;\r\n    };\r\n    e.prototype.update = function (t) {\r\n        this.progressBar.progress = cc.misc.lerp(this.progressBar.progress, this.targetProgress, 10 * t);\r\n        if (this.progressBar.progress >= 0.98 && !this.isCompleted && this.completedCB) {\r\n            this.isCompleted = !0;\r\n            this.completedCB();\r\n        }\r\n    };\r\n    __decorate([d(cc.ProgressBar)], e.prototype, \"progressBar\", void 0);\r\n    __decorate([d(cc.Sprite)], e.prototype, \"bgSp\", void 0);\r\n    __decorate([d(cc.SpriteFrame)], e.prototype, \"bg2\", void 0);\r\n    return __decorate([u], e);\r\n})($uIView.UIView);\r\nexports.default = p;\r\n"]}