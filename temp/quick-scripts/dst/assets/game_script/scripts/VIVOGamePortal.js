
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/VIVOGamePortal.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'c5144qXRQxK4LST33LLldIP', 'VIVOGamePortal');
// game_script/scripts/VIVOGamePortal.js

"use strict";

var o;

var $baseAd = require("./BaseAd");

var r = window.qg;

var a = function (t) {
  function e() {
    return null !== t && t.apply(this, arguments) || this;
  }

  __extends(e, t);

  e.prototype.loadAd = function () {
    if (this.adUnitId) {
      if (r && r.createBoxPortalAd) {
        var t = {
          posId: this.adUnitId,
          marginTop: 300
        };
        this.adIns = r.createBoxPortalAd(t);

        if (this.adIns.onLoad) {
          this.adIns.onLoad(this.onLoad);
        }

        if (this.adIns.onClose) {
          this.adIns.onClose(this.onClose);
        }

        if (this.adIns.onError) {
          this.adIns.onError(this.onError);
        }

        this.isLoaded = !1;
      } else {
        console.warn("当前平台不支持创建OPPOGamePortal");
      }
    } else {
      console.error("GamePortal ID为空");
    }
  };

  e.prototype.showGamePortal = function (t, e, i) {
    var o = this;
    this.showCallback = t;
    this.closeCallback = e;
    this.errorCallback = i;
    return this.adIns ? this.isLoaded ? void (this.showing ? console.warn(this.adUnitId, ":正在显示中，不给显示") : this.adIns ? this.adIns.show && this.adIns.show().then(function () {
      o.showing = !0;

      if (o.showCallback) {
        o.showCallback();
      }

      o.showCallback = null;
    })["catch"](function (t) {
      o.showing = !1;
      console.warn("interstitial show error:", t);
      o.destroyAd();
    }) : (console.warn("interstitial,interstitial对象未创建,将在创建完成后自动显示"), this.reCreateAd(!0))) : (console.warn(this.adUnitId, ":未加载完成，稍等"), void (this.isAutoShow = !0)) : (console.warn(this.adUnitId, ":未创建，执行创建"), this.isAutoShow = !0, this.loadAd());
  };

  e.prototype.hideGamePortal = function (t, e) {
    var i = this;
    this.adIns ? this.adIns.hide && this.adIns.hide().then(function () {
      i.showing = !1;

      if (t) {
        t();
      }
    })["catch"](function (t) {
      if (e) {
        e();
      }

      console.error("隐藏GamePortal错误", t);
    }) : console.error("GamePortal实例", this.adIns, "为空");
  };

  e.prototype.reCreateAd = function (t) {
    this.destroyAd();
    this.isAutoShow = t;
    this.loadAd();
  };

  e.prototype.destroyAd = function () {
    t.prototype.destroyAd.call(this);

    if (this.adIns) {
      if (this.adIns.offLoad) {
        this.adIns.offLoad(this.onLoad);
      }

      if (this.adIns.offClose) {
        this.adIns.offClose(this.onClose);
      }

      if (this.adIns.offError) {
        this.adIns.offError(this.onError);
      }

      if (this.adIns.destroy) {
        this.adIns.destroy();
      }

      this.adIns = null;
    }
  };

  e.prototype.onAdLoad = function () {
    t.prototype.onAdLoad.call(this);
    this.isConsume = !1;
    this.isLoaded = !0;
    this.autoShow();
  };

  e.prototype.onAdError = function (e) {
    t.prototype.onAdError.call(this, e);
    this.showing = !1;

    if (this.errorCallback) {
      this.errorCallback();
    }

    this.destroyAd();
  };

  e.prototype.onAdClose = function () {
    t.prototype.onAdClose.call(this);
    this.showing = !1;

    if (this.closeCallback) {
      this.closeCallback();
    }

    this.reCreateAd(!1);
  };

  e.prototype.autoShow = function () {
    if (this.isAutoShow) {
      this.isAutoShow = !1;
      this.showGamePortal(this.showCallback, this.closeCallback, this.errorCallback);
    }
  };

  return e;
}($baseAd.BaseAd);

exports["default"] = a;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXFZJVk9HYW1lUG9ydGFsLmpzIl0sIm5hbWVzIjpbIm8iLCIkYmFzZUFkIiwicmVxdWlyZSIsInIiLCJ3aW5kb3ciLCJxZyIsImEiLCJ0IiwiZSIsImFwcGx5IiwiYXJndW1lbnRzIiwiX19leHRlbmRzIiwicHJvdG90eXBlIiwibG9hZEFkIiwiYWRVbml0SWQiLCJjcmVhdGVCb3hQb3J0YWxBZCIsInBvc0lkIiwibWFyZ2luVG9wIiwiYWRJbnMiLCJvbkxvYWQiLCJvbkNsb3NlIiwib25FcnJvciIsImlzTG9hZGVkIiwiY29uc29sZSIsIndhcm4iLCJlcnJvciIsInNob3dHYW1lUG9ydGFsIiwiaSIsInNob3dDYWxsYmFjayIsImNsb3NlQ2FsbGJhY2siLCJlcnJvckNhbGxiYWNrIiwic2hvd2luZyIsInNob3ciLCJ0aGVuIiwiZGVzdHJveUFkIiwicmVDcmVhdGVBZCIsImlzQXV0b1Nob3ciLCJoaWRlR2FtZVBvcnRhbCIsImhpZGUiLCJjYWxsIiwib2ZmTG9hZCIsIm9mZkNsb3NlIiwib2ZmRXJyb3IiLCJkZXN0cm95Iiwib25BZExvYWQiLCJpc0NvbnN1bWUiLCJhdXRvU2hvdyIsIm9uQWRFcnJvciIsIm9uQWRDbG9zZSIsIkJhc2VBZCIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsQ0FBSjs7QUFDQSxJQUFJQyxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxVQUFELENBQXJCOztBQUNBLElBQUlDLENBQUMsR0FBR0MsTUFBTSxDQUFDQyxFQUFmOztBQUNBLElBQUlDLENBQUMsR0FBSSxVQUFVQyxDQUFWLEVBQWE7RUFDbEIsU0FBU0MsQ0FBVCxHQUFhO0lBQ1QsT0FBUSxTQUFTRCxDQUFULElBQWNBLENBQUMsQ0FBQ0UsS0FBRixDQUFRLElBQVIsRUFBY0MsU0FBZCxDQUFmLElBQTRDLElBQW5EO0VBQ0g7O0VBQ0RDLFNBQVMsQ0FBQ0gsQ0FBRCxFQUFJRCxD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S1YsVUFBVCxFQUFxQjtNQUNqQixLQUFLQSxVQUFMLEdBQWtCLENBQUMsQ0FBbkI7TUFDQSxLQUFLVixjQUFMLENBQW9CLEtBQUtFLFlBQXpCLEVBQXVDLEtBQUtDLGFBQTVDLEVBQTJELEtBQUtDLGFBQWhFO0lBQ0g7RUFDSixDQUxEOztFQU1BLE9BQU90QixDQUFQO0FBQ0gsQ0FwSU8sQ0FvSUxQLE9BQU8sQ0FBQ2dELE1BcElILENBQVI7O0FBcUlBQyxPQUFPLFdBQVAsR0FBa0I1QyxDQUFsQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIG87XHJcbnZhciAkYmFzZUFkID0gcmVxdWlyZShcIi4vQmFzZUFkXCIpO1xyXG52YXIgciA9IHdpbmRvdy5xZztcclxudmFyIGEgPSAoZnVuY3Rpb24gKHQpIHtcclxuICAgIGZ1bmN0aW9uIGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIChudWxsICE9PSB0ICYmIHQuYXBwbHkodGhpcywgYXJndW1lbnRzKSkgfHwgdGhpcztcclxuICAgIH1cclxuICAgIF9fZXh0ZW5kcyhlLCB0KTtcclxuICAgIGUucHJvdG90eXBlLmxvYWRBZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5hZFVuaXRJZCkge1xyXG4gICAgICAgICAgICBpZiAociAmJiByLmNyZWF0ZUJveFBvcnRhbEFkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NJZDogdGhpcy5hZFVuaXRJZCxcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6IDMwMFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRJbnMgPSByLmNyZWF0ZUJveFBvcnRhbEFkKHQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYWRJbnMub25Mb2FkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZElucy5vbkxvYWQodGhpcy5vbkxvYWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYWRJbnMub25DbG9zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRJbnMub25DbG9zZSh0aGlzLm9uQ2xvc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYWRJbnMub25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRJbnMub25FcnJvcih0aGlzLm9uRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRlZCA9ICExO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwi5b2T5YmN5bmz5Y+w5LiN5pSv5oyB5Yib5bu6T1BQT0dhbWVQb3J0YWxcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiR2FtZVBvcnRhbCBJROS4uuepulwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuc2hvd0dhbWVQb3J0YWwgPSBmdW5jdGlvbiAodCwgZSwgaSkge1xyXG4gICAgICAgIHZhciBvID0gdGhpcztcclxuICAgICAgICB0aGlzLnNob3dDYWxsYmFjayA9IHQ7XHJcbiAgICAgICAgdGhpcy5jbG9zZUNhbGxiYWNrID0gZTtcclxuICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2sgPSBpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFkSW5zXHJcbiAgICAgICAgICAgID8gdGhpcy5pc0xvYWRlZFxyXG4gICAgICAgICAgICAgICAgPyB2b2lkICh0aGlzLnNob3dpbmdcclxuICAgICAgICAgICAgICAgICAgICAgID8gY29uc29sZS53YXJuKHRoaXMuYWRVbml0SWQsIFwiOuato+WcqOaYvuekuuS4re+8jOS4jee7meaYvuekulwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmFkSW5zXHJcbiAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuYWRJbnMuc2hvdyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkSW5zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2hvdygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5zaG93aW5nID0gITA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8uc2hvd0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uc2hvd0NhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uc2hvd0NhbGxiYWNrID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnNob3dpbmcgPSAhMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJpbnRlcnN0aXRpYWwgc2hvdyBlcnJvcjpcIiwgdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5kZXN0cm95QWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICA6IChjb25zb2xlLndhcm4oXCJpbnRlcnN0aXRpYWwsaW50ZXJzdGl0aWFs5a+56LGh5pyq5Yib5bu6LOWwhuWcqOWIm+W7uuWujOaIkOWQjuiHquWKqOaYvuekulwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZUNyZWF0ZUFkKCEwKSkpXHJcbiAgICAgICAgICAgICAgICA6IChjb25zb2xlLndhcm4odGhpcy5hZFVuaXRJZCwgXCI65pyq5Yqg6L295a6M5oiQ77yM56iN562JXCIpLCB2b2lkICh0aGlzLmlzQXV0b1Nob3cgPSAhMCkpXHJcbiAgICAgICAgICAgIDogKGNvbnNvbGUud2Fybih0aGlzLmFkVW5pdElkLCBcIjrmnKrliJvlu7rvvIzmiafooYzliJvlu7pcIiksICh0aGlzLmlzQXV0b1Nob3cgPSAhMCksIHRoaXMubG9hZEFkKCkpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmhpZGVHYW1lUG9ydGFsID0gZnVuY3Rpb24gKHQsIGUpIHtcclxuICAgICAgICB2YXIgaSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5hZEluc1xyXG4gICAgICAgICAgICA/IHRoaXMuYWRJbnMuaGlkZSAmJlxyXG4gICAgICAgICAgICAgIHRoaXMuYWRJbnNcclxuICAgICAgICAgICAgICAgICAgLmhpZGUoKVxyXG4gICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpLnNob3dpbmcgPSAhMTtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIumakOiXj0dhbWVQb3J0YWzplJnor69cIiwgdCk7XHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIDogY29uc29sZS5lcnJvcihcIkdhbWVQb3J0YWzlrp7kvotcIiwgdGhpcy5hZElucywgXCLkuLrnqbpcIik7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUucmVDcmVhdGVBZCA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95QWQoKTtcclxuICAgICAgICB0aGlzLmlzQXV0b1Nob3cgPSB0O1xyXG4gICAgICAgIHRoaXMubG9hZEFkKCk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuZGVzdHJveUFkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHQucHJvdG90eXBlLmRlc3Ryb3lBZC5jYWxsKHRoaXMpO1xyXG4gICAgICAgIGlmICh0aGlzLmFkSW5zKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFkSW5zLm9mZkxvYWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRJbnMub2ZmTG9hZCh0aGlzLm9uTG9hZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuYWRJbnMub2ZmQ2xvc2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRJbnMub2ZmQ2xvc2UodGhpcy5vbkNsb3NlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5hZElucy5vZmZFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZElucy5vZmZFcnJvcih0aGlzLm9uRXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFkSW5zLmRlc3Ryb3kpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRJbnMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuYWRJbnMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5vbkFkTG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0LnByb3RvdHlwZS5vbkFkTG9hZC5jYWxsKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaXNDb25zdW1lID0gITE7XHJcbiAgICAgICAgdGhpcy5pc0xvYWRlZCA9ICEwO1xyXG4gICAgICAgIHRoaXMuYXV0b1Nob3coKTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5vbkFkRXJyb3IgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHQucHJvdG90eXBlLm9uQWRFcnJvci5jYWxsKHRoaXMsIGUpO1xyXG4gICAgICAgIHRoaXMuc2hvd2luZyA9ICExO1xyXG4gICAgICAgIGlmICh0aGlzLmVycm9yQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGVzdHJveUFkKCk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUub25BZENsb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHQucHJvdG90eXBlLm9uQWRDbG9zZS5jYWxsKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc2hvd2luZyA9ICExO1xyXG4gICAgICAgIGlmICh0aGlzLmNsb3NlQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZUNhbGxiYWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVDcmVhdGVBZCghMSk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuYXV0b1Nob3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNBdXRvU2hvdykge1xyXG4gICAgICAgICAgICB0aGlzLmlzQXV0b1Nob3cgPSAhMTtcclxuICAgICAgICAgICAgdGhpcy5zaG93R2FtZVBvcnRhbCh0aGlzLnNob3dDYWxsYmFjaywgdGhpcy5jbG9zZUNhbGxiYWNrLCB0aGlzLmVycm9yQ2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gZTtcclxufSkoJGJhc2VBZC5CYXNlQWQpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBhO1xyXG4iXX0=