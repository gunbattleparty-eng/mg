{"version":3,"sources":["assets\\game_script\\scripts\\RoleShopView.js"],"names":["o","$assetsLoader","require","$assetsMap","$resUtil","$list","$popupManager","$uIManager","$uIView","$util","$configContext","$roleContext","$userDataContext","$startView","$playerSkin","$roleShopItem","v","cc","_decorator","b","ccclass","w","property","A","t","e","apply","arguments","nameLabel","atkLable","playerSkin","skillSp","btnSure","list","shardSp","shardProccess","btnBack","eggAnim","gainLabel","skillDescLabel","descIcon","currSkinId","__extends","prototype","onLoad","ins","currSkinInfo","skin","renderPlayer","onResetView","numItems","instance","playerSkinConfigs","length","selectedId","addEvent","on","clickSure","clickBack","Ins","getEgg","node","parent","Node","EventType","TOUCH_START","touchEgg","removeEvent","off","gun","active","getChildByName","playAnimation","once","dragonBones","EventObject","COMPLETE","PopupManager","open","AssetsMap","PopUpBundles","prefabs","assetsList","SkinShardView","closeCallback","updateAll","UIManager","replaceView","StartBundles","StartView","type","MenuType","Role","renderItem","getComponent","render","onListSelected","playerSKinId","i","find","id","getPlayerSkinInfo","string","name","add_attribute","changePlayerSkin","loadRes","BundleNames","Public_Res","SpriteFrame","isValid","spriteFrame","ResUtil","assignWith","Sprite","skill_describe","isHave","updateMaterialState","Button","interactable","getComponentInChildren","Label","get_describe","shard","shard_num","setCurrInfo","setPlayerSKinInfo","__decorate","PlayerSkin","ArmatureDisplay","UIView","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $list = require(\"./List\");\r\nvar $popupManager = require(\"./PopupManager\");\r\nvar $uIManager = require(\"./UIManager\");\r\nvar $uIView = require(\"./UIView\");\r\nvar $util = require(\"./Util\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $roleContext = require(\"./RoleContext\");\r\nvar $userDataContext = require(\"./UserDataContext\");\r\nvar $startView = require(\"./StartView\");\r\nvar $playerSkin = require(\"./PlayerSkin\");\r\nvar $roleShopItem = require(\"./RoleShopItem\");\r\nvar v = cc._decorator;\r\nvar b = v.ccclass;\r\nvar w = v.property;\r\nvar A = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.nameLabel = null;\r\n        e.atkLable = null;\r\n        e.playerSkin = null;\r\n        e.skillSp = null;\r\n        e.btnSure = null;\r\n        e.list = null;\r\n        e.shardSp = null;\r\n        e.shardProccess = null;\r\n        e.btnBack = null;\r\n        e.eggAnim = null;\r\n        e.gainLabel = null;\r\n        e.skillDescLabel = null;\r\n        e.descIcon = null;\r\n        e.currSkinId = -1;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.onLoad = function () {\r\n        var t = 1 === $roleContext.default.ins.currSkinInfo.skin ? 2 : $roleContext.default.ins.currSkinInfo.skin;\r\n        this.renderPlayer(t);\r\n    };\r\n    e.prototype.onResetView = function () {\r\n        this.list.numItems = $configContext.default.instance.playerSkinConfigs.length - 1;\r\n        this.list.selectedId = 0;\r\n    };\r\n    e.prototype.addEvent = function () {\r\n        this.btnSure.on(\"click\", this.clickSure, this);\r\n        this.btnBack.on(\"click\", this.clickBack, this);\r\n        if (0 === $userDataContext.default.Ins.getEgg(3)) {\r\n            this.eggAnim.node.parent.on(cc.Node.EventType.TOUCH_START, this.touchEgg, this);\r\n        }\r\n    };\r\n    e.prototype.removeEvent = function () {\r\n        this.btnSure.off(\"click\", this.clickSure, this);\r\n        this.btnBack.off(\"click\", this.clickBack, this);\r\n    };\r\n    e.prototype.touchEgg = function () {\r\n        var t = this;\r\n        if (\r\n            2 === this.currSkinId &&\r\n            2 === $roleContext.default.ins.currSkinInfo.gun &&\r\n            0 === $userDataContext.default.Ins.getEgg(3)\r\n        ) {\r\n            this.eggAnim.node.active = !0;\r\n            this.node.getChildByName(\"mask\").active = !0;\r\n            this.eggAnim.playAnimation(\"stand\", 1);\r\n            this.eggAnim.once(\r\n                dragonBones.EventObject.COMPLETE,\r\n                function () {\r\n                    t.node.getChildByName(\"mask\").active = !1;\r\n                    t.eggAnim.node.active = !1;\r\n                    $popupManager.PopupManager.instance.open(\r\n                        $assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.SkinShardView,\r\n                        null,\r\n                        {\r\n                            closeCallback: function () {\r\n                                if (0 !== $userDataContext.default.Ins.getEgg(3)) {\r\n                                    t.renderPlayer(t.currSkinId);\r\n                                    t.list.updateAll();\r\n                                }\r\n                            }\r\n                        }\r\n                    );\r\n                },\r\n                this\r\n            );\r\n        }\r\n    };\r\n    e.prototype.clickBack = function () {\r\n        $uIManager.UIManager.instance.replaceView($assetsMap.AssetsMap.StartBundles.prefabs.assetsList.StartView, {\r\n            type: $startView.MenuType.Role\r\n        });\r\n    };\r\n    e.prototype.renderItem = function (t, e) {\r\n        t.getComponent($roleShopItem.default).render($configContext.default.instance.playerSkinConfigs[e + 1]);\r\n    };\r\n    e.prototype.onListSelected = function (t) {\r\n        if (t) {\r\n            var e = t.getComponent($roleShopItem.default).playerSKinId;\r\n            this.renderPlayer(e);\r\n        }\r\n    };\r\n    e.prototype.renderPlayer = function (t) {\r\n        var e = this;\r\n        this.currSkinId = t;\r\n        var i = $configContext.default.instance.playerSkinConfigs.find(function (e) {\r\n            return e.id === t;\r\n        });\r\n        var o = $roleContext.default.ins.getPlayerSkinInfo(t);\r\n        this.nameLabel.string = i.name;\r\n        this.atkLable.string = \"+\" + i.add_attribute;\r\n        this.playerSkin.changePlayerSkin(t);\r\n        $assetsLoader.default.instance.loadRes(\r\n            $assetsMap.BundleNames.Public_Res,\r\n            [\"/cd_icon/pf\" + i.id],\r\n            cc.SpriteFrame,\r\n            null,\r\n            function (t, i) {\r\n                var o = i[0];\r\n                if (o && cc.isValid(e.skillSp)) {\r\n                    e.skillSp.spriteFrame = $resUtil.ResUtil.assignWith(o, e.node);\r\n                    e.descIcon.getComponent(cc.Sprite).spriteFrame = o;\r\n                }\r\n            }\r\n        );\r\n        this.shardSp.node.active = !1;\r\n        this.shardProccess.node.active = !1;\r\n        this.skillDescLabel.string = i.skill_describe;\r\n        this.gainLabel.node.parent.active = !1;\r\n        o.isHave\r\n            ? ((this.descIcon.active = !0),\r\n              (this.skillDescLabel.node.parent.active = !0),\r\n              (this.skillSp.node.parent.active = !1),\r\n              $roleContext.default.ins.currSkinInfo.skin === t\r\n                  ? ((this.btnSure.active = !0),\r\n                    $util.default.updateMaterialState(this.btnSure, !1),\r\n                    (this.btnSure.getComponent(cc.Button).interactable = !0),\r\n                    (this.btnSure.getComponentInChildren(cc.Label).string = \"卸下\"))\r\n                  : ($util.default.updateMaterialState(this.btnSure, !1),\r\n                    (this.btnSure.getComponent(cc.Button).interactable = !0),\r\n                    (this.btnSure.getComponentInChildren(cc.Label).string = \"使用\")))\r\n            : ((this.gainLabel.node.parent.active = !0),\r\n              (this.skillSp.node.parent.active = !0),\r\n              (this.descIcon.active = !1),\r\n              (this.skillDescLabel.node.parent.active = !1),\r\n              (this.shardSp.node.active = !0),\r\n              (this.shardProccess.node.active = !0),\r\n              (this.gainLabel.string = i.get_describe),\r\n              $assetsLoader.default.instance.loadRes(\r\n                  $assetsMap.BundleNames.Public_Res,\r\n                  [\"/role_shard/sp\" + t],\r\n                  cc.SpriteFrame,\r\n                  null,\r\n                  function (t, i) {\r\n                      var o = i[0];\r\n                      if (o && cc.isValid(e.shardSp)) {\r\n                          e.shardSp.spriteFrame = $resUtil.ResUtil.assignWith(o, e.node);\r\n                      }\r\n                  }\r\n              ),\r\n              (this.shardProccess.string = o.shard + \"/\" + i.shard_num),\r\n              o.shard >= i.shard_num\r\n                  ? ($util.default.updateMaterialState(this.btnSure, !1),\r\n                    (this.btnSure.getComponent(cc.Button).interactable = !0),\r\n                    (this.btnSure.getComponentInChildren(cc.Label).string = \"激活\"))\r\n                  : ($util.default.updateMaterialState(this.btnSure, !0),\r\n                    (this.btnSure.getComponent(cc.Button).interactable = !1),\r\n                    (this.btnSure.getComponentInChildren(cc.Label).string = \"激活\")));\r\n    };\r\n    e.prototype.clickSure = function () {\r\n        var t = this;\r\n        var e = $roleContext.default.ins.getPlayerSkinInfo(this.currSkinId);\r\n        var i = $configContext.default.instance.playerSkinConfigs.find(function (e) {\r\n            return e.id === t.currSkinId;\r\n        });\r\n        if (this.currSkinId === $roleContext.default.ins.currSkinInfo.skin) {\r\n            $roleContext.default.ins.currSkinInfo.skin = 1;\r\n            $roleContext.default.ins.setCurrInfo($roleContext.default.ins.currSkinInfo);\r\n            this.renderPlayer(2);\r\n            return void this.list.updateAll();\r\n        }\r\n        e.isHave\r\n            ? $roleContext.default.ins.currSkinInfo.skin !== this.currSkinId &&\r\n              (($roleContext.default.ins.currSkinInfo.skin = this.currSkinId),\r\n              $roleContext.default.ins.setCurrInfo($roleContext.default.ins.currSkinInfo),\r\n              this.renderPlayer(this.currSkinId),\r\n              this.list.updateAll())\r\n            : e.shard >= i.shard_num &&\r\n              ((e.isHave = !0),\r\n              (e.shard -= i.shard_num),\r\n              $roleContext.default.ins.setPlayerSKinInfo(e),\r\n              this.renderPlayer(this.currSkinId),\r\n              this.list.updateAll());\r\n    };\r\n    __decorate([w(cc.Label)], e.prototype, \"nameLabel\", void 0);\r\n    __decorate([w(cc.Label)], e.prototype, \"atkLable\", void 0);\r\n    __decorate([w($playerSkin.PlayerSkin)], e.prototype, \"playerSkin\", void 0);\r\n    __decorate([w(cc.Sprite)], e.prototype, \"skillSp\", void 0);\r\n    __decorate([w(cc.Node)], e.prototype, \"btnSure\", void 0);\r\n    __decorate([w($list.default)], e.prototype, \"list\", void 0);\r\n    __decorate([w(cc.Sprite)], e.prototype, \"shardSp\", void 0);\r\n    __decorate([w(cc.Label)], e.prototype, \"shardProccess\", void 0);\r\n    __decorate([w(cc.Node)], e.prototype, \"btnBack\", void 0);\r\n    __decorate([w(dragonBones.ArmatureDisplay)], e.prototype, \"eggAnim\", void 0);\r\n    __decorate([w(cc.Label)], e.prototype, \"gainLabel\", void 0);\r\n    __decorate([w(cc.Label)], e.prototype, \"skillDescLabel\", void 0);\r\n    __decorate([w(cc.Node)], e.prototype, \"descIcon\", void 0);\r\n    return __decorate([b], e);\r\n})($uIView.UIView);\r\nexports.default = A;\r\n"]}