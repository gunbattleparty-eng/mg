
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/TTNewRecordingBtnView.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '9f22f178g5EVqMOD+rWic3F', 'TTNewRecordingBtnView');
// game_script/scripts/TTNewRecordingBtnView.js

"use strict";

var o;

var $uIManager = require("./UIManager");

var $platform = require("./Platform");

var $aD = require("./AD");

var $aDConfig = require("./ADConfig");

var u = cc._decorator;
var d = u.ccclass;
var p = u.property;

var f = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.startRecordNode = null;
    e.recordingNode = null;
    e.shardRecordNode = null;
    return e;
  }

  __extends(e, t);

  e.prototype.start = function () {
    this.node.active = !1;

    if ($platform.Platform.currPlatForm === $platform.PlatformEnum.TOU_TIAO) {
      this.node.active = !0;
      this.startRecordNode.active = !0;
      this.startRecordNode.on("click", this.ttStartRecord, this);
      this.recordingNode.on("click", this.ttEndRecord, this);
      this.shardRecordNode.on("click", this.ttshareRecor, this);
    }
  };

  e.prototype.onDestroy = function () {
    this.startRecordNode.off("click", this.ttStartRecord, this);
    this.recordingNode.off("click", this.ttEndRecord, this);
    this.shardRecordNode.off("click", this.ttshareRecor, this);

    if ($platform.Platform.currPlatForm === $platform.PlatformEnum.TOU_TIAO) {
      $aD["default"].toutiao.stopRecorder();
    }
  };

  e.prototype.ttStartRecord = function () {
    console.log("=============录屏开始==============");
    $aD["default"].toutiao.startRecorder();
    this.recordingNode.active = !0;
    this.startRecordNode.active = !1;
    this.autoStop();
  };

  e.prototype.ttEndRecord = function () {
    var t = this;
    console.log("=============停止录屏==============");
    this.autoStop();
    this.startRecordNode.active = !1;
    $aD["default"].toutiao.stopRecorder(function (e, i) {
      t.recordingNode.active = !1;
      i <= 3e3 ? ($uIManager.UIManager.instance.showToast("录屏失败：录屏时长低于 3 秒"), t.startRecordNode.active = !0) : t.shardRecordNode.active = !0;
    });
  };

  e.prototype.ttshareRecor = function () {
    console.log("=============点击分享==============");
    var t = $aD["default"].toutiao.getRecordVideoPath();

    if ("" === t) {
      $uIManager.UIManager.instance.showToast("录屏失败：录屏时长低于 3 秒");
      this.startRecordNode.active = !0;
      return void (this.shardRecordNode.active = !1);
    }

    $aD["default"].toutiao.share({
      share_title: $aDConfig.ADConfig.tt.share_title,
      share_desc: $aDConfig.ADConfig.tt.share_desc,
      share_imageUrl: $aDConfig.ADConfig.tt.share_desc,
      videoPath: t,
      success: function success() {}
    });
    this.shardRecordNode.active = !1;
    this.startRecordNode.active = !0;
  };

  e.prototype.autoStop = function () {
    var t = this;
    this.unschedule(this.autoStop);
    this.scheduleOnce(function () {
      $uIManager.UIManager.instance.showToast("录屏超过300秒,自动暂停");
      t.ttEndRecord();
    }, 299);
  };

  __decorate([p(cc.Node)], e.prototype, "startRecordNode", void 0);

  __decorate([p(cc.Node)], e.prototype, "recordingNode", void 0);

  __decorate([p(cc.Node)], e.prototype, "shardRecordNode", void 0);

  return __decorate([d], e);
}(cc.Component);

exports["default"] = f;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXFRUTmV3UmVjb3JkaW5nQnRuVmlldy5qcyJdLCJuYW1lcyI6WyJvIiwiJHVJTWFuYWdlciIsInJlcXVpcmUiLCIkcGxhdGZvcm0iLCIkYUQiLCIkYURDb25maWciLCJ1IiwiY2MiLCJfZGVjb3JhdG9yIiwiZCIsImNjY2xhc3MiLCJwIiwicHJvcGVydHkiLCJmIiwidCIsImUiLCJhcHBseSIsImFyZ3VtZW50cyIsInN0YXJ0UmVjb3JkTm9kZSIsInJlY29yZGluZ05vZGUiLCJzaGFyZFJlY29yZE5vZGUiLCJfX2V4dGVuZHMiLCJwcm90b3R5cGUiLCJzdGFydCIsIm5vZGUiLCJhY3RpdmUiLCJQbGF0Zm9ybSIsImN1cnJQbGF0Rm9ybSIsIlBsYXRmb3JtRW51bSIsIlRPVV9USUFPIiwib24iLCJ0dFN0YXJ0UmVjb3JkIiwidHRFbmRSZWNvcmQiLCJ0dHNoYXJlUmVjb3IiLCJvbkRlc3Ryb3kiLCJvZmYiLCJ0b3V0aWFvIiwic3RvcFJlY29yZGVyIiwiY29uc29sZSIsImxvZyIsInN0YXJ0UmVjb3JkZXIiLCJhdXRvU3RvcCIsImkiLCJVSU1hbmFnZXIiLCJpbnN0YW5jZSIsInNob3dUb2FzdCIsImdldFJlY29yZFZpZGVvUGF0aCIsInNoYXJlIiwic2hhcmVfdGl0bGUiLCJBRENvbmZpZyIsInR0Iiwic2hhcmVfZGVzYyIsInNoYXJlX2ltYWdlVXJsIiwidmlkZW9QYXRoIiwic3VjY2VzcyIsInVuc2NoZWR1bGUiLCJzY2hlZHVsZU9uY2UiLCJfX2RlY29yYXRlIiwiTm9kZSIsIkNvbXBvbmVudCIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsQ0FBSjs7QUFDQSxJQUFJQyxVQUFVLEdBQUdDLE9BQU8sQ0FBQyxhQUFELENBQXhCOztBQUNBLElBQUlDLFNBQVMsR0FBR0QsT0FBTyxDQUFDLFlBQUQsQ0FBdkI7O0FBQ0EsSUFBSUUsR0FBRyxHQUFHRixPQUFP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RCxTQTdFRSxDQUFSOztBQThFQUMsT0FBTyxXQUFQLEdBQWtCL0MsQ0FBbEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBvO1xyXG52YXIgJHVJTWFuYWdlciA9IHJlcXVpcmUoXCIuL1VJTWFuYWdlclwiKTtcclxudmFyICRwbGF0Zm9ybSA9IHJlcXVpcmUoXCIuL1BsYXRmb3JtXCIpO1xyXG52YXIgJGFEID0gcmVxdWlyZShcIi4vQURcIik7XHJcbnZhciAkYURDb25maWcgPSByZXF1aXJlKFwiLi9BRENvbmZpZ1wiKTtcclxudmFyIHUgPSBjYy5fZGVjb3JhdG9yO1xyXG52YXIgZCA9IHUuY2NjbGFzcztcclxudmFyIHAgPSB1LnByb3BlcnR5O1xyXG52YXIgZiA9IChmdW5jdGlvbiAodCkge1xyXG4gICAgZnVuY3Rpb24gZSgpIHtcclxuICAgICAgICB2YXIgZSA9IChudWxsICE9PSB0ICYmIHQuYXBwbHkodGhpcywgYXJndW1lbnRzKSkgfHwgdGhpcztcclxuICAgICAgICBlLnN0YXJ0UmVjb3JkTm9kZSA9IG51bGw7XHJcbiAgICAgICAgZS5yZWNvcmRpbmdOb2RlID0gbnVsbDtcclxuICAgICAgICBlLnNoYXJkUmVjb3JkTm9kZSA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIGU7XHJcbiAgICB9XHJcbiAgICBfX2V4dGVuZHMoZSwgdCk7XHJcbiAgICBlLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gITE7XHJcbiAgICAgICAgaWYgKCRwbGF0Zm9ybS5QbGF0Zm9ybS5jdXJyUGxhdEZvcm0gPT09ICRwbGF0Zm9ybS5QbGF0Zm9ybUVudW0uVE9VX1RJQU8pIHtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9ICEwO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0UmVjb3JkTm9kZS5hY3RpdmUgPSAhMDtcclxuICAgICAgICAgICAgdGhpcy5zdGFydFJlY29yZE5vZGUub24oXCJjbGlja1wiLCB0aGlzLnR0U3RhcnRSZWNvcmQsIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLnJlY29yZGluZ05vZGUub24oXCJjbGlja1wiLCB0aGlzLnR0RW5kUmVjb3JkLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5zaGFyZFJlY29yZE5vZGUub24oXCJjbGlja1wiLCB0aGlzLnR0c2hhcmVSZWNvciwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLm9uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnN0YXJ0UmVjb3JkTm9kZS5vZmYoXCJjbGlja1wiLCB0aGlzLnR0U3RhcnRSZWNvcmQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMucmVjb3JkaW5nTm9kZS5vZmYoXCJjbGlja1wiLCB0aGlzLnR0RW5kUmVjb3JkLCB0aGlzKTtcclxuICAgICAgICB0aGlzLnNoYXJkUmVjb3JkTm9kZS5vZmYoXCJjbGlja1wiLCB0aGlzLnR0c2hhcmVSZWNvciwgdGhpcyk7XHJcbiAgICAgICAgaWYgKCRwbGF0Zm9ybS5QbGF0Zm9ybS5jdXJyUGxhdEZvcm0gPT09ICRwbGF0Zm9ybS5QbGF0Zm9ybUVudW0uVE9VX1RJQU8pIHtcclxuICAgICAgICAgICAgJGFELmRlZmF1bHQudG91dGlhby5zdG9wUmVjb3JkZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUudHRTdGFydFJlY29yZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIj09PT09PT09PT09PT3lvZXlsY/lvIDlp4s9PT09PT09PT09PT09PVwiKTtcclxuICAgICAgICAkYUQuZGVmYXVsdC50b3V0aWFvLnN0YXJ0UmVjb3JkZXIoKTtcclxuICAgICAgICB0aGlzLnJlY29yZGluZ05vZGUuYWN0aXZlID0gITA7XHJcbiAgICAgICAgdGhpcy5zdGFydFJlY29yZE5vZGUuYWN0aXZlID0gITE7XHJcbiAgICAgICAgdGhpcy5hdXRvU3RvcCgpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLnR0RW5kUmVjb3JkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ID0gdGhpcztcclxuICAgICAgICBjb25zb2xlLmxvZyhcIj09PT09PT09PT09PT3lgZzmraLlvZXlsY89PT09PT09PT09PT09PVwiKTtcclxuICAgICAgICB0aGlzLmF1dG9TdG9wKCk7XHJcbiAgICAgICAgdGhpcy5zdGFydFJlY29yZE5vZGUuYWN0aXZlID0gITE7XHJcbiAgICAgICAgJGFELmRlZmF1bHQudG91dGlhby5zdG9wUmVjb3JkZXIoZnVuY3Rpb24gKGUsIGkpIHtcclxuICAgICAgICAgICAgdC5yZWNvcmRpbmdOb2RlLmFjdGl2ZSA9ICExO1xyXG4gICAgICAgICAgICBpIDw9IDNlM1xyXG4gICAgICAgICAgICAgICAgPyAoJHVJTWFuYWdlci5VSU1hbmFnZXIuaW5zdGFuY2Uuc2hvd1RvYXN0KFwi5b2V5bGP5aSx6LSl77ya5b2V5bGP5pe26ZW/5L2O5LqOIDMg56eSXCIpLFxyXG4gICAgICAgICAgICAgICAgICAodC5zdGFydFJlY29yZE5vZGUuYWN0aXZlID0gITApKVxyXG4gICAgICAgICAgICAgICAgOiAodC5zaGFyZFJlY29yZE5vZGUuYWN0aXZlID0gITApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLnR0c2hhcmVSZWNvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIj09PT09PT09PT09PT3ngrnlh7vliIbkuqs9PT09PT09PT09PT09PVwiKTtcclxuICAgICAgICB2YXIgdCA9ICRhRC5kZWZhdWx0LnRvdXRpYW8uZ2V0UmVjb3JkVmlkZW9QYXRoKCk7XHJcbiAgICAgICAgaWYgKFwiXCIgPT09IHQpIHtcclxuICAgICAgICAgICAgJHVJTWFuYWdlci5VSU1hbmFnZXIuaW5zdGFuY2Uuc2hvd1RvYXN0KFwi5b2V5bGP5aSx6LSl77ya5b2V5bGP5pe26ZW/5L2O5LqOIDMg56eSXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0UmVjb3JkTm9kZS5hY3RpdmUgPSAhMDtcclxuICAgICAgICAgICAgcmV0dXJuIHZvaWQgKHRoaXMuc2hhcmRSZWNvcmROb2RlLmFjdGl2ZSA9ICExKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJGFELmRlZmF1bHQudG91dGlhby5zaGFyZSh7XHJcbiAgICAgICAgICAgIHNoYXJlX3RpdGxlOiAkYURDb25maWcuQURDb25maWcudHQuc2hhcmVfdGl0bGUsXHJcbiAgICAgICAgICAgIHNoYXJlX2Rlc2M6ICRhRENvbmZpZy5BRENvbmZpZy50dC5zaGFyZV9kZXNjLFxyXG4gICAgICAgICAgICBzaGFyZV9pbWFnZVVybDogJGFEQ29uZmlnLkFEQ29uZmlnLnR0LnNoYXJlX2Rlc2MsXHJcbiAgICAgICAgICAgIHZpZGVvUGF0aDogdCxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkge31cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnNoYXJkUmVjb3JkTm9kZS5hY3RpdmUgPSAhMTtcclxuICAgICAgICB0aGlzLnN0YXJ0UmVjb3JkTm9kZS5hY3RpdmUgPSAhMDtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5hdXRvU3RvcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdCA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy51bnNjaGVkdWxlKHRoaXMuYXV0b1N0b3ApO1xyXG4gICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHVJTWFuYWdlci5VSU1hbmFnZXIuaW5zdGFuY2Uuc2hvd1RvYXN0KFwi5b2V5bGP6LaF6L+HMzAw56eSLOiHquWKqOaaguWBnFwiKTtcclxuICAgICAgICAgICAgdC50dEVuZFJlY29yZCgpO1xyXG4gICAgICAgIH0sIDI5OSk7XHJcbiAgICB9O1xyXG4gICAgX19kZWNvcmF0ZShbcChjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcInN0YXJ0UmVjb3JkTm9kZVwiLCB2b2lkIDApO1xyXG4gICAgX19kZWNvcmF0ZShbcChjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcInJlY29yZGluZ05vZGVcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW3AoY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJzaGFyZFJlY29yZE5vZGVcIiwgdm9pZCAwKTtcclxuICAgIHJldHVybiBfX2RlY29yYXRlKFtkXSwgZSk7XHJcbn0pKGNjLkNvbXBvbmVudCk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IGY7XHJcbiJdfQ==