{"version":3,"sources":["assets\\game_script\\scripts\\WechatCustomAd.js"],"names":["o","$baseAd","require","r","window","wx","a","t","e","apply","arguments","isOpenPreLoad","style","__extends","prototype","setOpenPreLoadCustomAd","loadAd","adUnitId","createCustomAd","adIntervals","left","top","width","fixed","adIns","onLoad","onClose","onHide","onError","console","warn","error","showCustomAd","i","n","showCallback","closeCallback","errorCallback","isCanShow","isAutoShow","hideing","isLoaded","showing","isConsume","show","s","then","reCreateAd","destroyAd","call","offLoad","offHide","offClose","offError","destroy","autoShow","onAdLoad","onAdError","log","onAdClose","onAdHide","BaseAd","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $baseAd = require(\"./BaseAd\");\r\nvar r = window.wx;\r\nvar a = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.isOpenPreLoad = !1;\r\n        e.style = null;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.setOpenPreLoadCustomAd = function (t) {\r\n        this.isOpenPreLoad = !0;\r\n        this.style = t;\r\n    };\r\n    e.prototype.loadAd = function () {\r\n        if (this.adUnitId) {\r\n            if (r && r.createCustomAd) {\r\n                var t = {\r\n                    adUnitId: this.adUnitId,\r\n                    adIntervals: 0,\r\n                    style: {\r\n                        left: this.style.left || 0,\r\n                        top: this.style.top || 0,\r\n                        width: this.style.width || null,\r\n                        fixed: !0\r\n                    }\r\n                };\r\n                this.adIns = r.createCustomAd(t);\r\n                if (this.adIns.onLoad) {\r\n                    this.adIns.onLoad(this.onLoad);\r\n                }\r\n                if (this.adIns.onClose) {\r\n                    this.adIns.onClose(this.onClose);\r\n                }\r\n                if (this.adIns.onHide) {\r\n                    this.adIns.onHide(this.onHide);\r\n                }\r\n                if (this.adIns.onError) {\r\n                    this.adIns.onError(this.onError);\r\n                }\r\n            } else {\r\n                console.warn(\"当前平台不支持创建customAd\");\r\n            }\r\n        } else {\r\n            console.error(\"Customer ID为空\");\r\n        }\r\n    };\r\n    e.prototype.showCustomAd = function (t, e, i, o) {\r\n        var n = this;\r\n        this.showCallback = e;\r\n        this.closeCallback = i;\r\n        this.errorCallback = o;\r\n        this.style = t;\r\n        if (this.isCanShow) {\r\n            if (!this.adIns) {\r\n                console.warn(this.adUnitId, \":未创建，执行创建\");\r\n                this.isAutoShow = !0;\r\n                return void this.loadAd();\r\n            }\r\n            if (this.hideing || !this.isLoaded) {\r\n                console.warn(this.adUnitId, \":正在隐藏或加载中，稍等\");\r\n                return void (this.isAutoShow = !0);\r\n            }\r\n            this.showing = !1;\r\n            this.isConsume = !0;\r\n            if (this.adIns.show) {\r\n                var s = this.adIns.show();\r\n                s && s.then\r\n                    ? s\r\n                          .then(function () {\r\n                              n.showing = !0;\r\n                              if (n.showCallback) {\r\n                                  n.showCallback();\r\n                              }\r\n                              n.showCallback = null;\r\n                          })\r\n                          .catch(function (t) {\r\n                              console.warn(n.adUnitId, \":show错误，重新加载\", t);\r\n                              n.reCreateAd(!0);\r\n                          })\r\n                    : (console.warn(this.adUnitId, \":show显示失败，重新加载\"), this.reCreateAd(!0));\r\n            } else {\r\n                console.error(this.adUnitId, \":未知错误\");\r\n            }\r\n        } else {\r\n            console.warn(this.adUnitId, \":当前广告禁止显示\", this.isCanShow);\r\n        }\r\n    };\r\n    e.prototype.destroyAd = function () {\r\n        t.prototype.destroyAd.call(this);\r\n        if (this.adIns) {\r\n            if (this.adIns.offLoad) {\r\n                this.adIns.offLoad(this.onLoad);\r\n            }\r\n            if (this.adIns.offHide) {\r\n                this.adIns.offLoad(this.onHide);\r\n            }\r\n            if (this.adIns.offClose) {\r\n                this.adIns.offClose(this.onClose);\r\n            }\r\n            if (this.adIns.offError) {\r\n                this.adIns.offError(this.onError);\r\n            }\r\n            if (this.adIns.destroy) {\r\n                this.adIns.destroy();\r\n            }\r\n            this.adIns = null;\r\n        }\r\n    };\r\n    e.prototype.autoShow = function () {\r\n        if (this.isAutoShow) {\r\n            this.isAutoShow = !1;\r\n            this.showCustomAd(this.style, this.showCallback, this.closeCallback, this.errorCallback);\r\n        }\r\n    };\r\n    e.prototype.onAdLoad = function (e) {\r\n        t.prototype.onAdLoad.call(this, e);\r\n        this.isConsume = !1;\r\n        this.isLoaded = !0;\r\n        this.autoShow();\r\n    };\r\n    e.prototype.onAdError = function (t) {\r\n        console.log(\"原生模板onAdError\", this.adUnitId, t);\r\n        this.showing = !1;\r\n        if (this.errorCallback) {\r\n            this.errorCallback();\r\n        }\r\n        this.destroyAd();\r\n    };\r\n    e.prototype.onAdClose = function () {\r\n        console.log(\":===onAdClose===\");\r\n        this.showing = !1;\r\n        if (this.closeCallback) {\r\n            this.closeCallback();\r\n        }\r\n    };\r\n    e.prototype.onAdHide = function () {\r\n        console.log(\":===onAdHide===\");\r\n        this.showing = !1;\r\n        this.hideing = !1;\r\n        if (this.closeCallback) {\r\n            this.closeCallback();\r\n        }\r\n    };\r\n    return e;\r\n})($baseAd.BaseAd);\r\nexports.default = a;\r\n"]}