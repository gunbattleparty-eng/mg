{"version":3,"sources":["assets\\game_script\\scripts\\TouchBlocker.js"],"names":["o","r","cc","_decorator","a","ccclass","l","property","c","t","e","apply","arguments","target","isBlockAll","isPassAll","__extends","prototype","onLoad","registerEvent","start","reset","onDestroy","unregisterEvent","node","on","Node","EventType","TOUCH_START","onTouchEvent","TOUCH_MOVE","TOUCH_END","targetOff","setSwallowTouches","isValid","getBoundingBoxToWorld","contains","getLocation","stopPropagationImmediate","blockAll","passAll","setTarget","_touchListener","__decorate","type","Component","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar r = cc._decorator;\r\nvar a = r.ccclass;\r\nvar l = r.property;\r\nvar c = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.target = null;\r\n        e.isBlockAll = !1;\r\n        e.isPassAll = !1;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.onLoad = function () {\r\n        this.registerEvent();\r\n    };\r\n    e.prototype.start = function () {\r\n        this.reset();\r\n    };\r\n    e.prototype.onDestroy = function () {\r\n        this.unregisterEvent();\r\n    };\r\n    e.prototype.registerEvent = function () {\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.onTouchEvent, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchEvent, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_END, this.onTouchEvent, this);\r\n    };\r\n    e.prototype.unregisterEvent = function () {\r\n        this.node.targetOff(this);\r\n    };\r\n    e.prototype.reset = function () {\r\n        this.setSwallowTouches(!1);\r\n    };\r\n    e.prototype.onTouchEvent = function (t) {\r\n        if (!this.isPassAll) {\r\n            !this.isBlockAll && this.target\r\n                ? cc.isValid(this.target) &&\r\n                  (this.target.getBoundingBoxToWorld().contains(t.getLocation()) || t.stopPropagationImmediate())\r\n                : t.stopPropagationImmediate();\r\n        }\r\n    };\r\n    e.prototype.blockAll = function () {\r\n        this.isBlockAll = !0;\r\n        this.isPassAll = !1;\r\n    };\r\n    e.prototype.passAll = function () {\r\n        this.isPassAll = !0;\r\n        this.isBlockAll = !1;\r\n    };\r\n    e.prototype.setTarget = function (t) {\r\n        this.target = t;\r\n        this.isBlockAll = !1;\r\n        this.isPassAll = !1;\r\n    };\r\n    e.prototype.setSwallowTouches = function (t) {\r\n        if (this.node._touchListener) {\r\n            this.node._touchListener.setSwallowTouches(t);\r\n        }\r\n    };\r\n    __decorate(\r\n        [\r\n            l({\r\n                type: cc.Node\r\n            })\r\n        ],\r\n        e.prototype,\r\n        \"target\",\r\n        void 0\r\n    );\r\n    return __decorate([a], e);\r\n})(cc.Component);\r\nexports.default = c;\r\n"]}