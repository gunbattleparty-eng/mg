{"version":3,"sources":["assets\\game_script\\scripts\\Bullet_13.js"],"names":["o","$object","require","$countDownUtil","$seedUtil","$gameContext","$gameSkillInfo","$enemyStatus","$baseBullet","f","cc","_decorator","h","ccclass","m","property","t","e","apply","arguments","buttleType","BulletType","car","attackAtks","Set","isGem","anim","__extends","prototype","initButtle","i","call","setAngle","clear","Skill4Param","BASIC","FINAL","atk","skillParam","skillAtk","speed","carSpeed","velocity","set","multiplyScalar","node","children","getComponent","Animation","setAnimation","carSkin","play","onTrigger","object","Trigger","enter","has","add","carBack","id","type","EnemyDebuffType","BACK","timeLeft","value","sufferDebuff","carBurnTime","n","skillId","BURN","carBurnAtk","carBurnAdd","Math","ceil","config","HP","carSlowTime","SLOW","carSlowAdd","s","carStunParam","length","probability","STUN","carEnemyAtkAddParam","ALL_ATK_ADD","stay","CountDownUtil","time","getLastAtkTime","carAtkInterval","ins","gameRatio","setLastAtkTime","sufferAtk","skillSpecialitys","bulletBuff","BulletBuff","freeze_damage","carSuffFreezeAdd","__decorate","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $object = require(\"./Object\");\r\nvar $countDownUtil = require(\"./CountDownUtil\");\r\nvar $seedUtil = require(\"./SeedUtil\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $gameSkillInfo = require(\"./GameSkillInfo\");\r\nvar $enemyStatus = require(\"./EnemyStatus\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar f = cc._decorator;\r\nvar h = f.ccclass;\r\nvar m =\r\n    (f.property,\r\n    (function (t) {\r\n        function e() {\r\n            var e = (null !== t && t.apply(this, arguments)) || this;\r\n            e.buttleType = $baseBullet.BulletType.car;\r\n            e.attackAtks = new Set();\r\n            e.isGem = !1;\r\n            e.anim = null;\r\n            return e;\r\n        }\r\n        __extends(e, t);\r\n        e.prototype.initButtle = function (e, i) {\r\n            t.prototype.initButtle.call(this, e, i);\r\n            this.setAngle(0);\r\n            this.attackAtks.clear();\r\n            var o = this.isGem ? $gameSkillInfo.Skill4Param.BASIC : $gameSkillInfo.Skill4Param.FINAL;\r\n            this.atk = this.skillParam.skillAtk[o];\r\n            this.speed = this.skillParam.carSpeed[o];\r\n            this.velocity.set(e).multiplyScalar(this.speed);\r\n            if (!this.anim) {\r\n                this.anim = this.node.children[0].getComponent(cc.Animation);\r\n            }\r\n            this.setAnimation(\"\");\r\n        };\r\n        e.prototype.setAnimation = function (t) {\r\n            t = \"bullet_13\";\r\n            this.isGem\r\n                ? (t = \"bullet_13\")\r\n                : 1 === this.skillParam.carSkin\r\n                ? (t = \"bullet_13_1\")\r\n                : 2 === this.skillParam.carSkin\r\n                ? (t = \"bullet_13_2\")\r\n                : 3 === this.skillParam.carSkin && (t = \"bullet_13_3\");\r\n            this.anim.play(t);\r\n        };\r\n        e.prototype.onTrigger = function (t, e) {\r\n            var i = t.object;\r\n            if (e === $object.Trigger.enter) {\r\n                if (this.attackAtks.has(i)) {\r\n                    return;\r\n                }\r\n                this.attackAtks.add(i);\r\n                if (this.isGem) {\r\n                    return;\r\n                }\r\n                if (this.skillParam.carBack[$gameSkillInfo.Skill4Param.FINAL] > 0) {\r\n                    var o = {\r\n                        id: 81,\r\n                        type: $enemyStatus.EnemyDebuffType.BACK,\r\n                        timeLeft: -1,\r\n                        value: this.skillParam.carBack[$gameSkillInfo.Skill4Param.FINAL]\r\n                    };\r\n                    i.sufferDebuff(o);\r\n                }\r\n                if (this.skillParam.carBurnTime > 0) {\r\n                    var n = {\r\n                        id: this.skillId,\r\n                        type: $enemyStatus.EnemyDebuffType.BURN,\r\n                        timeLeft: this.skillParam.carBurnTime,\r\n                        value: this.skillParam.carBurnAtk[$gameSkillInfo.Skill4Param.FINAL]\r\n                    };\r\n                    if (this.skillParam.carBurnAdd > 0) {\r\n                        n.value += Math.ceil(i.config.HP * this.skillParam.carBurnAdd);\r\n                    }\r\n                    i.sufferDebuff(n);\r\n                }\r\n                if (this.skillParam.carSlowTime > 0) {\r\n                    n = {\r\n                        id: this.skillId,\r\n                        type: $enemyStatus.EnemyDebuffType.SLOW,\r\n                        timeLeft: this.skillParam.carSlowTime,\r\n                        value: this.skillParam.carSlowAdd\r\n                    };\r\n                    i.sufferDebuff(n);\r\n                }\r\n                for (var s = 0; s < this.skillParam.carStunParam.length; s++) {\r\n                    var f = this.skillParam.carStunParam;\r\n                    if ($seedUtil.default.probability(100 * f[s][0])) {\r\n                        var h = {\r\n                            id: this.skillId,\r\n                            type: $enemyStatus.EnemyDebuffType.STUN,\r\n                            timeLeft: f[s][1],\r\n                            value: 0\r\n                        };\r\n                        i.sufferDebuff(h);\r\n                    }\r\n                }\r\n                for (s = 0; s < this.skillParam.carEnemyAtkAddParam.length; s++) {\r\n                    f = this.skillParam.carEnemyAtkAddParam;\r\n                    h = {\r\n                        id: this.skillId,\r\n                        type: $enemyStatus.EnemyDebuffType.ALL_ATK_ADD,\r\n                        timeLeft: f[s][0],\r\n                        value: f[s][1]\r\n                    };\r\n                    i.sufferDebuff(h);\r\n                }\r\n            } else {\r\n                if (e === $object.Trigger.stay) {\r\n                    if (\r\n                        $countDownUtil.CountDownUtil.time - i.getLastAtkTime(0) <=\r\n                        this.skillParam.carAtkInterval / $gameContext.default.ins.gameRatio\r\n                    ) {\r\n                        return;\r\n                    }\r\n                    i.setLastAtkTime(0, $countDownUtil.CountDownUtil.time);\r\n                    i.sufferAtk({\r\n                        id: this.isGem ? -2 : this.skillId,\r\n                        skillSpecialitys: this.skillSpecialitys,\r\n                        bulletBuff: $baseBullet.BulletBuff.freeze_damage,\r\n                        value: this.skillParam.carSuffFreezeAdd,\r\n                        atk: this.atk\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        return __decorate([h], e);\r\n    })($baseBullet.default));\r\nexports.default = m;\r\n"]}