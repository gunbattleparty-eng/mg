{"version":3,"sources":["assets\\game_script\\scripts\\ListItem.js"],"names":["o","r","a","l","cc","_decorator","c","ccclass","u","property","d","disallowMultiple","p","menu","f","executionOrder","NONE","TOGGLE","SWITCH","h","t","e","apply","arguments","selectedMode","selectedFlag","selectedSpriteFrame","_unselectedSpriteFrame","adaptiveSize","_selected","_eventReg","__extends","Object","defineProperty","prototype","get","set","active","getComponent","Sprite","spriteFrame","enumerable","configurable","_btnCom","node","Button","onLoad","onDestroy","off","Node","EventType","SIZE_CHANGED","_onSizeChange","_registerEvent","btnCom","list","clickEvents","unshift","createEvt","on","_onItemAdaptive","i","isValid","comName","name","match","pop","replace","Component","EventHandler","target","component","handler","showAni","n","tween","to","scale","by","y","height","x","width","call","_delSingleItem","displayData","length","id","listId","splice","start","onClickThis","selectedId","__decorate","type","Enum","visible","SpriteFrame","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar r;\r\nvar a;\r\nvar l = cc._decorator;\r\nvar c = l.ccclass;\r\nvar u = l.property;\r\nvar d = l.disallowMultiple;\r\nvar p = l.menu;\r\nvar f = l.executionOrder;\r\n(a = r || (r = {}))[(a.NONE = 0)] = \"NONE\";\r\na[(a.TOGGLE = 1)] = \"TOGGLE\";\r\na[(a.SWITCH = 2)] = \"SWITCH\";\r\nvar h = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.selectedMode = r.NONE;\r\n        e.selectedFlag = null;\r\n        e.selectedSpriteFrame = null;\r\n        e._unselectedSpriteFrame = null;\r\n        e.adaptiveSize = !1;\r\n        e._selected = !1;\r\n        e._eventReg = !1;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    Object.defineProperty(e.prototype, \"selected\", {\r\n        get: function () {\r\n            return this._selected;\r\n        },\r\n        set: function (t) {\r\n            this._selected = t;\r\n            if (this.selectedFlag) {\r\n                switch (this.selectedMode) {\r\n                    case r.TOGGLE:\r\n                        this.selectedFlag.active = t;\r\n                        break;\r\n                    case r.SWITCH:\r\n                        var e = this.selectedFlag.getComponent(cc.Sprite);\r\n                        if (e) {\r\n                            e.spriteFrame = t ? this.selectedSpriteFrame : this._unselectedSpriteFrame;\r\n                        }\r\n                }\r\n            }\r\n        },\r\n        enumerable: !1,\r\n        configurable: !0\r\n    });\r\n    Object.defineProperty(e.prototype, \"btnCom\", {\r\n        get: function () {\r\n            if (!this._btnCom) {\r\n                this._btnCom = this.node.getComponent(cc.Button);\r\n            }\r\n            return this._btnCom;\r\n        },\r\n        enumerable: !1,\r\n        configurable: !0\r\n    });\r\n    e.prototype.onLoad = function () {\r\n        if (this.selectedMode == r.SWITCH) {\r\n            var t = this.selectedFlag.getComponent(cc.Sprite);\r\n            this._unselectedSpriteFrame = t.spriteFrame;\r\n        }\r\n    };\r\n    e.prototype.onDestroy = function () {\r\n        this.node.off(cc.Node.EventType.SIZE_CHANGED, this._onSizeChange, this);\r\n    };\r\n    e.prototype._registerEvent = function () {\r\n        if (!this._eventReg) {\r\n            if (this.btnCom && this.list.selectedMode > 0) {\r\n                this.btnCom.clickEvents.unshift(this.createEvt(this, \"onClickThis\"));\r\n            }\r\n            if (this.adaptiveSize) {\r\n                this.node.on(cc.Node.EventType.SIZE_CHANGED, this._onSizeChange, this);\r\n            }\r\n            this._eventReg = !0;\r\n        }\r\n    };\r\n    e.prototype._onSizeChange = function () {\r\n        this.list._onItemAdaptive(this.node);\r\n    };\r\n    e.prototype.createEvt = function (t, e, i) {\r\n        if (void 0 === i) {\r\n            i = null;\r\n        }\r\n        if (t.isValid) {\r\n            t.comName =\r\n                t.comName ||\r\n                t.name\r\n                    .match(/\\<(.*?)\\>/g)\r\n                    .pop()\r\n                    .replace(/\\<|>/g, \"\");\r\n            var o = new cc.Component.EventHandler();\r\n            o.target = i || t.node;\r\n            o.component = t.comName;\r\n            o.handler = e;\r\n            return o;\r\n        }\r\n    };\r\n    e.prototype.showAni = function (t, e, i) {\r\n        var o;\r\n        var n = this;\r\n        switch (t) {\r\n            case 0:\r\n                o = cc\r\n                    .tween(n.node)\r\n                    .to(0.2, {\r\n                        scale: 0.7\r\n                    })\r\n                    .by(0.3, {\r\n                        y: 2 * n.node.height\r\n                    });\r\n                break;\r\n            case 1:\r\n                o = cc\r\n                    .tween(n.node)\r\n                    .to(0.2, {\r\n                        scale: 0.7\r\n                    })\r\n                    .by(0.3, {\r\n                        x: 2 * n.node.width\r\n                    });\r\n                break;\r\n            case 2:\r\n                o = cc\r\n                    .tween(n.node)\r\n                    .to(0.2, {\r\n                        scale: 0.7\r\n                    })\r\n                    .by(0.3, {\r\n                        y: -2 * n.node.height\r\n                    });\r\n                break;\r\n            case 3:\r\n                o = cc\r\n                    .tween(n.node)\r\n                    .to(0.2, {\r\n                        scale: 0.7\r\n                    })\r\n                    .by(0.3, {\r\n                        x: -2 * n.node.width\r\n                    });\r\n                break;\r\n            default:\r\n                o = cc.tween(n.node).to(0.3, {\r\n                    scale: 0.1\r\n                });\r\n        }\r\n        if (e || i) {\r\n            o.call(function () {\r\n                if (i) {\r\n                    n.list._delSingleItem(n.node);\r\n                    for (var t = n.list.displayData.length - 1; t >= 0; t--) {\r\n                        if (n.list.displayData[t].id == n.listId) {\r\n                            n.list.displayData.splice(t, 1);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                e();\r\n            });\r\n        }\r\n        o.start();\r\n    };\r\n    e.prototype.onClickThis = function () {\r\n        this.list.selectedId = this.listId;\r\n    };\r\n    __decorate(\r\n        [\r\n            u({\r\n                type: cc.Enum(r)\r\n            })\r\n        ],\r\n        e.prototype,\r\n        \"selectedMode\",\r\n        void 0\r\n    );\r\n    __decorate(\r\n        [\r\n            u({\r\n                type: cc.Node,\r\n                visible: function () {\r\n                    return this.selectedMode > r.NONE;\r\n                }\r\n            })\r\n        ],\r\n        e.prototype,\r\n        \"selectedFlag\",\r\n        void 0\r\n    );\r\n    __decorate(\r\n        [\r\n            u({\r\n                type: cc.SpriteFrame,\r\n                visible: function () {\r\n                    return this.selectedMode == r.SWITCH;\r\n                }\r\n            })\r\n        ],\r\n        e.prototype,\r\n        \"selectedSpriteFrame\",\r\n        void 0\r\n    );\r\n    __decorate([u({})], e.prototype, \"adaptiveSize\", void 0);\r\n    return __decorate([c, d(), p(\"自定义组件/List Item\"), f(-5001)], e);\r\n})(cc.Component);\r\nexports.default = h;\r\n"]}