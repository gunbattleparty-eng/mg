{"version":3,"sources":["assets\\game_script\\scripts\\Shape.js"],"names":["o","exports","ShapeSupport","cPolygon","cSphere","cBox","cShape","ShapeType","s","r","$aILib","require","l","cc","Vec3","Box","Sphere","Polygon","c","t","e","radius","height","type","point2Ds","size","x","y","z","center","aabb","prototype","updateAABB","i","n","a","u","d","p","f","h","Math","abs","m","g","_","k","v","b","w","A","S","C","I","P","R","B","call","__extends","length","Vec2","isIdentity","obbIntersect","getCenter","getHalfSize","getRotMat3","subtract","sphereAABBDistance","getRaidus","sphereOBBDistance","getRotation","lengthSqr","polygonPolygon","getPoints","polygonCircle"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nexports.ShapeSupport = exports.cPolygon = exports.cSphere = exports.cBox = exports.cShape = exports.ShapeType = void 0;\r\nvar s;\r\nvar r;\r\nvar $aILib = require(\"./AILib\");\r\nvar l = cc.Vec3;\r\n(r = s = exports.ShapeType || (exports.ShapeType = {}))[(r.Box = 1)] = \"Box\";\r\nr[(r.Sphere = 2)] = \"Sphere\";\r\nr[(r.Polygon = 4)] = \"Polygon\";\r\nvar c = (function () {\r\n    function t(t, e) {\r\n        this.radius = 0;\r\n        this.height = 0;\r\n        this.type = s.Box;\r\n        this.point2Ds = [];\r\n        this.size = {\r\n            x: 0,\r\n            y: 0,\r\n            z: 0\r\n        };\r\n        this.center = {\r\n            x: 0,\r\n            y: 0,\r\n            z: 0\r\n        };\r\n        this.aabb = [0, 0, 0, 0, 0, 0];\r\n        this.type = e;\r\n        this.center.x = t.x;\r\n        this.center.y = t.y;\r\n        this.center.z = t.z;\r\n    }\r\n    t.prototype.updateAABB = function (t, e, i) {\r\n        if (void 0 === i) {\r\n            i = !0;\r\n        }\r\n        var o = this.size;\r\n        var n = this.center;\r\n        var s = t.x;\r\n        var r = t.y;\r\n        var a = t.z;\r\n        var l = n.x;\r\n        var c = n.y;\r\n        var u = n.z;\r\n        var d = 0.5 * o.x;\r\n        var p = 0.5 * o.y;\r\n        var f = 0.5 * o.z;\r\n        var h = this.aabb;\r\n        if (i) {\r\n            d = Math.abs(d * s);\r\n            p = Math.abs(p * r);\r\n            f = Math.abs(f * a);\r\n            h[0] = l * s - d;\r\n            h[1] = c * r - p;\r\n            h[2] = u * a - f;\r\n            h[3] = l * s + d;\r\n            h[4] = c * r + p;\r\n            h[5] = u * a + f;\r\n        } else {\r\n            {\r\n                var m = e.m;\r\n                var y = m[0] * s;\r\n                var g = m[1] * s;\r\n                var _ = m[2] * s;\r\n                var k = m[3] * r;\r\n                var v = m[4] * r;\r\n                var b = m[5] * r;\r\n                var w = m[6] * a;\r\n                var A = m[7] * a;\r\n                var S = m[8] * a;\r\n                var C = y * l + k * c + w * u;\r\n                var I = g * l + v * c + A * u;\r\n                var P = _ * l + b * c + S * u;\r\n                var R = Math.abs(y) * d + Math.abs(k) * p + Math.abs(w) * f;\r\n                var B = Math.abs(g) * d + Math.abs(v) * p + Math.abs(A) * f;\r\n                var x = Math.abs(_) * d + Math.abs(b) * p + Math.abs(S) * f;\r\n                h[0] = C - R;\r\n                h[1] = I - B;\r\n                h[2] = P - x;\r\n                h[3] = C + R;\r\n                h[4] = I + B;\r\n                h[5] = P + x;\r\n            }\r\n        }\r\n        return h;\r\n    };\r\n    return t;\r\n})();\r\nexports.cShape = c;\r\nvar u = (function (t) {\r\n    function e(e, i) {\r\n        var o = t.call(this, e, s.Box) || this;\r\n        o.size.x = i.x;\r\n        o.size.y = i.y;\r\n        o.size.z = i.z;\r\n        return o;\r\n    }\r\n    __extends(e, t);\r\n    return e;\r\n})(c);\r\nexports.cBox = u;\r\nvar d = (function (t) {\r\n    function e(e, i) {\r\n        var o = t.call(this, e, s.Sphere) || this;\r\n        o.radius = i;\r\n        o.size.x = 2 * i;\r\n        o.size.y = 2 * i;\r\n        o.size.z = 2 * i;\r\n        return o;\r\n    }\r\n    __extends(e, t);\r\n    return e;\r\n})(c);\r\nexports.cSphere = d;\r\nvar p = (function (t) {\r\n    function e(e, i) {\r\n        var o = t.call(this, e, s.Polygon) || this;\r\n        o.point2Ds = i;\r\n        var n = i[0].x;\r\n        var r = i[0].y;\r\n        var a = n;\r\n        var l = r;\r\n        var c = i.length;\r\n        for (var u = 1; u < c; u++) {\r\n            var d = i[u].x;\r\n            var p = i[u].y;\r\n            n >= d ? (n = d) : a <= d && (a = d);\r\n            r >= p ? (r = p) : l <= p && (l = p);\r\n        }\r\n        o.size.x = a - n;\r\n        o.size.y = l - r;\r\n        o.size.z = 0;\r\n        return o;\r\n    }\r\n    __extends(e, t);\r\n    return e;\r\n})(c);\r\nexports.cPolygon = p;\r\nvar f = new cc.Vec3();\r\nvar h = new cc.Vec2();\r\nexports.ShapeSupport = [];\r\nexports.ShapeSupport[s.Box | s.Box] = function (t, e) {\r\n    return (\r\n        !(!t.isIdentity || !e.isIdentity) ||\r\n        $aILib.obbIntersect(\r\n            t.getCenter(),\r\n            t.getHalfSize(),\r\n            t.getRotMat3(),\r\n            e.getCenter(),\r\n            e.getHalfSize(),\r\n            e.getRotMat3()\r\n        )\r\n    );\r\n};\r\nexports.ShapeSupport[s.Box | s.Sphere] = function (t, e) {\r\n    return t.isIdentity\r\n        ? (l.subtract(f, e.getCenter(), t.getCenter()), $aILib.sphereAABBDistance(f, e.getRaidus(), t.getHalfSize()))\r\n        : $aILib.sphereOBBDistance(e.getCenter(), e.getRaidus(), t.getCenter(), t.getRotation(), t.getHalfSize());\r\n};\r\nexports.ShapeSupport[s.Sphere | s.Sphere] = function (t, e) {\r\n    var i = t.getCenter();\r\n    var o = e.getCenter();\r\n    l.subtract(f, i, o);\r\n    var n = f.lengthSqr();\r\n    var s = t.getRaidus() + e.getRaidus();\r\n    return n <= s * s;\r\n};\r\nexports.ShapeSupport[s.Box | s.Polygon] = function (t, e) {\r\n    return $aILib.default.polygonPolygon(t.getPoints(), e.getPoints());\r\n};\r\nexports.ShapeSupport[s.Sphere | s.Polygon] = function (t, e) {\r\n    var i = t.getCenter();\r\n    var o = t.getRaidus();\r\n    h.x = i.x;\r\n    h.y = i.y;\r\n    return $aILib.default.polygonCircle(e.getPoints(), h, o);\r\n};\r\nexports.ShapeSupport[s.Polygon | s.Polygon] = function (t, e) {\r\n    return $aILib.default.polygonPolygon(t.getPoints(), e.getPoints());\r\n};\r\n"]}