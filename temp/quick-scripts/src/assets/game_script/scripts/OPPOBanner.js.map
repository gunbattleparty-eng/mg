{"version":3,"sources":["assets\\game_script\\scripts\\OPPOBanner.js"],"names":["o","exports","OPPOBanner","$aDConfig","require","$baseAd","a","window","qg","l","t","e","apply","arguments","style","__extends","prototype","loadAd","adUnitId","createBannerAd","left","top","width","ADConfig","oppo","banner_width","height","adIns","onLoad","onHide","onResize","onError","console","warn","showBanner","i","showCallback","errorCallback","isCanShow","hideing","isAutoShow","isConsume","reCreateAd","isLoaded","showing","show","n","then","hideBanner","destroyAd","hide","forbiddenBanner","autoShow","onAdLoad","log","onAdError","error","onAdHide","call","offLoad","offHide","offResize","offError","BaseAd"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nexports.OPPOBanner = void 0;\r\nvar $aDConfig = require(\"./ADConfig\");\r\nvar $baseAd = require(\"./BaseAd\");\r\nvar a = window.qg;\r\nvar l = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.style = null;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.loadAd = function () {\r\n        if (this.adUnitId) {\r\n            if (a && a.createBannerAd) {\r\n                var t = this.style || {};\r\n                var e = {\r\n                    adUnitId: this.adUnitId,\r\n                    style: {\r\n                        left: t.left || 0,\r\n                        top: t.top || 0,\r\n                        width: t.width || $aDConfig.ADConfig.oppo.banner_width,\r\n                        height: 0\r\n                    }\r\n                };\r\n                this.adIns = a.createBannerAd(e);\r\n                if (this.adIns.onLoad) {\r\n                    this.adIns.onLoad(this.onLoad);\r\n                }\r\n                if (this.adIns.onHide) {\r\n                    this.adIns.onHide(this.onHide);\r\n                }\r\n                if (this.adIns.onResize) {\r\n                    this.adIns.onResize(this.onResize);\r\n                }\r\n                if (this.adIns.onError) {\r\n                    this.adIns.onError(this.onError);\r\n                }\r\n            } else {\r\n                console.warn(\"当前平台不支持创建banner\");\r\n            }\r\n        } else {\r\n            console.warn(\"OPPOBanner ID为空\");\r\n        }\r\n    };\r\n    e.prototype.showBanner = function (t, e, i) {\r\n        var o = this;\r\n        this.showCallback = e;\r\n        this.errorCallback = i;\r\n        if (this.isCanShow) {\r\n            if (this.hideing) {\r\n                console.warn(this.adUnitId, \":正在影藏中稍后显示\");\r\n                return void (this.isAutoShow = !0);\r\n            }\r\n            if (!this.adIns) {\r\n                console.warn(this.adUnitId, \":未创建，执行创建\");\r\n                this.isAutoShow = !0;\r\n                return this.loadAd();\r\n            }\r\n            if (this.isConsume) {\r\n                return this.reCreateAd(!0);\r\n            }\r\n            if (!this.isLoaded) {\r\n                console.warn(this.adUnitId, \":未加载完成，稍等\");\r\n                return void (this.isAutoShow = !0);\r\n            }\r\n            if (this.adIns && t) {\r\n                if (void 0 !== t.top) {\r\n                    this.adIns.style.top = t.top;\r\n                }\r\n                if (void 0 !== t.left) {\r\n                    this.adIns.style.left = t.left;\r\n                }\r\n                if (void 0 !== t.width) {\r\n                    this.adIns.style.width = t.width;\r\n                }\r\n            }\r\n            this.showing = !1;\r\n            this.isConsume = !1;\r\n            if (this.adIns.show) {\r\n                var n = this.adIns.show();\r\n                n && n.then\r\n                    ? n\r\n                          .then(function () {\r\n                              o.isConsume = !0;\r\n                              o.showing = !0;\r\n                              if (o.showCallback) {\r\n                                  o.showCallback();\r\n                              }\r\n                              o.showCallback = null;\r\n                          })\r\n                          .catch(function (t) {\r\n                              console.warn(o.adUnitId, \":执行显示错误错误，重新加载\", t);\r\n                              o.reCreateAd(!0);\r\n                          })\r\n                    : (console.warn(this.adUnitId, \":执行显示错误显示失败，重新加载\"), this.reCreateAd(!0));\r\n            }\r\n        } else {\r\n            console.warn(this.adUnitId, \":当前广告禁止显示\");\r\n        }\r\n    };\r\n    e.prototype.hideBanner = function (t) {\r\n        t && this.isConsume\r\n            ? (this.destroyAd(), this.reCreateAd(!1))\r\n            : this.adIns && this.adIns.hide && this.adIns.hide();\r\n    };\r\n    e.prototype.forbiddenBanner = function (t) {\r\n        this.isCanShow = !t;\r\n        if (t && this.isConsume) {\r\n            this.hideBanner(!1);\r\n        }\r\n    };\r\n    e.prototype.autoShow = function () {\r\n        if (this.isAutoShow) {\r\n            this.isAutoShow = !1;\r\n            this.showBanner(this.style, this.showCallback, this.errorCallback);\r\n        }\r\n    };\r\n    e.prototype.onAdLoad = function () {\r\n        console.log(this.adUnitId, \":===onAdload===\");\r\n        this.isConsume = !1;\r\n        this.isLoaded = !0;\r\n        this.autoShow();\r\n    };\r\n    e.prototype.onAdError = function (t) {\r\n        console.error(\"onAdError\", this.adUnitId, t);\r\n        if (this.errorCallback) {\r\n            this.errorCallback();\r\n        }\r\n        this.destroyAd();\r\n    };\r\n    e.prototype.onAdHide = function () {\r\n        console.log(this.adUnitId, \"===onAdHide===\");\r\n        this.hideing = !1;\r\n        this.autoShow();\r\n    };\r\n    e.prototype.destroyAd = function () {\r\n        t.prototype.destroyAd.call(this);\r\n        if (this.adIns) {\r\n            if (this.adIns.offLoad) {\r\n                this.adIns.offLoad(this.onLoad);\r\n            }\r\n            if (this.adIns.offHide) {\r\n                this.adIns.offHide(this.onHide);\r\n            }\r\n            if (this.adIns.offResize) {\r\n                this.adIns.offResize(this.onResize);\r\n            }\r\n            if (this.adIns.offError) {\r\n                this.adIns.offError(this.onError);\r\n            }\r\n        }\r\n    };\r\n    return e;\r\n})($baseAd.BaseAd);\r\nexports.OPPOBanner = l;\r\n"]}