{"version":3,"sources":["assets\\game_script\\scripts\\BaseEnemy.js"],"names":["o","$object","require","$assetsLoader","$assetsMap","$resManager","$resUtil","$eventManager","$componentProxy","$popupManager","$remoteAudio","$gamePool","$seedUtil","$globalParam","$localEventName","$baseBullet","$gameContext","$gameGemInfo","$enemyStatus","A","cc","_decorator","S","ccclass","C","property","Vec3","I","P","t","e","apply","arguments","skin","debuffLayer","statusManager","currRatio","isDoor","residueDis","config","leftCDTime","sortTemp","lastAtkTimes","burnAnim","freezeAnim","paralysisAnim","stunAnim","recoverAnim","isCanAtk","isAttacking","atkAddTemp","Avoid_injury","criticalHit","atkRange","duration","_time","lot","dieCallbacks","Map","id","isCriticalHit","__extends","prototype","initEnemy","i","node","getChildByName","getComponent","dragonBones","ArmatureDisplay","globID","Ins","pushObj","clearDebuffAnim","clearStatus","proxyEnemy","initSpeed","speed","velocity","x","y","ins","getCurrEnemyAdd","hp","Math","ceil","HP","initHp","atk","GameGemInfo","hasGem","GemType","CriticalHit","get1","onDoor","atkspeed","playAnimation","isDie","hasDebuff","debuffTypeMap","has","getLastAtkTime","setLastAtkTime","sufferAtk","MaxBloodCritical","probability","CriticalHurt","atkCaculatePre","atkCaculatePost","instance","playEffectMusicRestrict","sufferAttack","bulletBuff","BulletBuff","burn_boom","createBoom","atkCaculateGem","Enemy70Hurt","Befor5Hurt","DebuffEnemyHurt","EnemyDebuffType","BURN","FREEZE","PARALYSIS","SLOW","STUN","BoomHurt","skillSpecialitys","includes","BulletSpeciality","boom","WallDefAndEnemyAddHurt","get2","monster_type","KillEnemy","SkillAddHurt","skillInfo","skillCount","DistanceHurtAdd","position","TransferCreatePoint","sufferDebuff","type","BACK","value","timeLeft","WallAddAtk","doorInitHp","doorLeftHp","CriticalADDHurt","AtkFloat","randomFloat","AddMaxHurt","atk_life","IgnoreRehurt","freeze_damage","paralysis_damage","length","specialityAtkAdd","get","allDamage","floor","hurtStatistics","getAnimPos","send","HURT_ANIM","getPosition","atktype","height","getButtlePool","BulletType","enemy_boom","getRes","BundleNames","Game","AssetsMap","GameBundles","prefabs","assetsList","Bullet_16","ResUtil","instantiate","lowBulletLayer","parent","setPosition","add","v3","initButtle","insert","setAnimation","addDebuff","removeDebuff","clearDebuff","addAdsorb","currAdsorbDir","push","ADSORB","removeAdsorb","indexOf","splice","addDieCallback","set","callback","target","removeDieCallback","updateFrame","doorY","playSufferAtkAnim","updateF","attack","ADD_EXP","EX","dieAnim","removeSelf","move","speedRatioRight","gameRatio","timeScale","isValid","opacity","KillEnemyAddWallBlood1","ADD_HP_DOOR","KillEnemyAddWallBlood2","forEach","clear","removeObj","putEnemyPool","zIndex","z","caculateVelocity","misc","clampf","normalizeSelf","multiplyScalar","scheduleOnce","attackAnim","once","EventObject","COMPLETE","ATK_DOOR","endDebuffAnim","RECOVER","removeEnemy","ENEMY_DIE","unscheduleAllCallbacks","bossChooseSKill","is_reward","killBossSkills","randomFrom","reward_num","isGamePuase","PopupManager","open","PopUpBundles","BossSkillView","skillIds","randomCount","closeCallback","startDebuffAnim","PoolKey","ResManager","Burn","enemyLayer","scale","STOP_ANIM","playLoop","Freeze","n","Paralysis","s","Stun","r","Heal","put","unschedule","off","__decorate","cObject","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $object = require(\"./Object\");\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resManager = require(\"./ResManager\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $componentProxy = require(\"./ComponentProxy\");\r\nvar $popupManager = require(\"./PopupManager\");\r\nvar $remoteAudio = require(\"./RemoteAudio\");\r\nvar $gamePool = require(\"./GamePool\");\r\nvar $seedUtil = require(\"./SeedUtil\");\r\nvar $globalParam = require(\"./GlobalParam\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $gameGemInfo = require(\"./GameGemInfo\");\r\nvar $enemyStatus = require(\"./EnemyStatus\");\r\nvar A = cc._decorator;\r\nvar S = A.ccclass;\r\nvar C = (A.property, new cc.Vec3());\r\nvar I = new cc.Vec3();\r\nvar P = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.skin = null;\r\n        e.debuffLayer = null;\r\n        e.statusManager = null;\r\n        e.currRatio = 1;\r\n        e.isDoor = !1;\r\n        e.residueDis = 0;\r\n        e.config = null;\r\n        e.leftCDTime = 0;\r\n        e.sortTemp = 0;\r\n        e.lastAtkTimes = [];\r\n        e.burnAnim = null;\r\n        e.freezeAnim = null;\r\n        e.paralysisAnim = null;\r\n        e.stunAnim = null;\r\n        e.recoverAnim = null;\r\n        e.isCanAtk = !1;\r\n        e.isAttacking = !1;\r\n        e.atkAddTemp = 0;\r\n        e.Avoid_injury = 0;\r\n        e.criticalHit = 5;\r\n        e.atkRange = 0;\r\n        e.duration = 0.3;\r\n        e._time = 0;\r\n        e.lot = 0;\r\n        e.dieCallbacks = new Map();\r\n        e.id = 0;\r\n        e.isCriticalHit = !1;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.initEnemy = function (t, e, i) {\r\n        if (void 0 === i) {\r\n            i = 0;\r\n        }\r\n        if (!this.skin) {\r\n            this.skin = this.node.getChildByName(\"skin\").getComponent(dragonBones.ArmatureDisplay);\r\n        }\r\n        this.id = ++$globalParam.default.globID;\r\n        this.debuffLayer = this.node.getChildByName(\"debuff\");\r\n        this.lot = i;\r\n        this.Avoid_injury = e;\r\n        this.config = t;\r\n        $componentProxy.default.Ins.pushObj(this);\r\n        if (!this.statusManager) {\r\n            this.statusManager = new $enemyStatus.default();\r\n        }\r\n        this.clearDebuffAnim();\r\n        this.clearStatus(!1);\r\n        this.statusManager.proxyEnemy = this;\r\n        this.statusManager.initSpeed = this.config.speed;\r\n        this.speed = this.config.speed;\r\n        this.velocity.x = 0;\r\n        this.velocity.y = -1;\r\n        var o = $gameContext.default.ins.getCurrEnemyAdd(this.config.id);\r\n        this.statusManager.hp = Math.ceil(this.config.HP * (1 + o[0]));\r\n        this.statusManager.initHp = this.statusManager.hp;\r\n        this.statusManager.atk = Math.ceil(this.config.atk * (1 + o[1]));\r\n        this.criticalHit = 0.05;\r\n        if ($gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.CriticalHit)) {\r\n            this.criticalHit = 0.05 + $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.CriticalHit);\r\n        }\r\n    };\r\n    e.prototype.onDoor = function (t) {\r\n        t && !this.isDoor\r\n            ? ((this.leftCDTime = this.config.atkspeed),\r\n              (this.isDoor = !0),\r\n              (this.residueDis = 0),\r\n              this.skin.playAnimation(\"stand\", 0),\r\n              (this.isCanAtk = !0))\r\n            : !t && this.isDoor && ((this.isDoor = !1), (this.isCanAtk = !1));\r\n    };\r\n    e.prototype.isDie = function () {\r\n        return this.statusManager.isDie;\r\n    };\r\n    e.prototype.hasDebuff = function (t) {\r\n        return this.statusManager.debuffTypeMap.has(t);\r\n    };\r\n    e.prototype.getLastAtkTime = function (t) {\r\n        return this.lastAtkTimes ? this.lastAtkTimes[t] : 0;\r\n    };\r\n    e.prototype.setLastAtkTime = function (t, e) {\r\n        if (!this.lastAtkTimes) {\r\n            this.lastAtkTimes = [];\r\n        }\r\n        this.lastAtkTimes[t] = e;\r\n    };\r\n    e.prototype.sufferAtk = function (t) {\r\n        if (this.statusManager.isDie) {\r\n            return !1;\r\n        }\r\n        this.isCriticalHit = !1;\r\n        if (\r\n            ($gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.MaxBloodCritical) &&\r\n                this.statusManager.initHp === this.statusManager.hp) ||\r\n            $seedUtil.default.probability(1e3 * this.criticalHit, 1e3)\r\n        ) {\r\n            this.isCriticalHit = !0;\r\n            t.atk = Math.ceil(t.atk * (1.5 + $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.CriticalHurt)));\r\n        }\r\n        var e = this.atkCaculatePre(t);\r\n        t.atk = Math.ceil(t.atk * (1 + e));\r\n        this.atkCaculatePost(t);\r\n        1 === t.id\r\n            ? $remoteAudio.default.instance.playEffectMusicRestrict(\"gunhit\", 0.3)\r\n            : 41 === t.id && $remoteAudio.default.instance.playEffectMusicRestrict(\"icehit\", 0.3);\r\n        return (\r\n            !!this.sufferAttack(t.id, t.atk) &&\r\n            (t && t.bulletBuff === $baseBullet.BulletBuff.burn_boom && this.createBoom(), !0)\r\n        );\r\n    };\r\n    e.prototype.atkCaculateGem = function (t) {\r\n        if (\r\n            $gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.Enemy70Hurt) &&\r\n            this.statusManager.hp >= 0.7 * this.statusManager.initHp\r\n        ) {\r\n            this.atkAddTemp += $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.Enemy70Hurt);\r\n        }\r\n        if ($gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.Befor5Hurt) && this.lot <= 5) {\r\n            this.atkAddTemp += $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.Befor5Hurt);\r\n        }\r\n        if (\r\n            $gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.DebuffEnemyHurt) &&\r\n            (this.statusManager.debuffTypeMap.has($enemyStatus.EnemyDebuffType.BURN) ||\r\n                this.statusManager.debuffTypeMap.has($enemyStatus.EnemyDebuffType.FREEZE) ||\r\n                this.statusManager.debuffTypeMap.has($enemyStatus.EnemyDebuffType.PARALYSIS) ||\r\n                this.statusManager.debuffTypeMap.has($enemyStatus.EnemyDebuffType.SLOW) ||\r\n                this.statusManager.debuffTypeMap.has($enemyStatus.EnemyDebuffType.STUN))\r\n        ) {\r\n            this.atkAddTemp += $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.DebuffEnemyHurt);\r\n        }\r\n        if (\r\n            $gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.BoomHurt) &&\r\n            t.skillSpecialitys.includes($baseBullet.BulletSpeciality.boom)\r\n        ) {\r\n            this.atkAddTemp += $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.BoomHurt);\r\n        }\r\n        if ($gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.WallDefAndEnemyAddHurt)) {\r\n            this.atkAddTemp += $gameGemInfo.GameGemInfo.ins.get2($gameGemInfo.GemType.WallDefAndEnemyAddHurt)[1];\r\n        }\r\n        if (\r\n            1 === this.config.monster_type &&\r\n            $gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.KillEnemy) &&\r\n            $seedUtil.default.probability(1e3 * $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.KillEnemy), 1e3)\r\n        ) {\r\n            t.atk = this.statusManager.hp;\r\n        }\r\n        if ($gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.SkillAddHurt)) {\r\n            this.atkAddTemp +=\r\n                $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.SkillAddHurt) *\r\n                ($gameContext.default.ins.skillInfo.skillCount > 4 ? 4 : $gameContext.default.ins.skillInfo.skillCount);\r\n        }\r\n        if (this.residueDis <= 400 && $gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.DistanceHurtAdd)) {\r\n            this.atkAddTemp += $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.DistanceHurtAdd);\r\n        }\r\n        if (\r\n            1 === this.config.monster_type &&\r\n            this.node.position.y <= 650 &&\r\n            $gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.TransferCreatePoint) &&\r\n            $seedUtil.default.probability(\r\n                1e3 * $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.TransferCreatePoint),\r\n                1e3\r\n            )\r\n        ) {\r\n            var e = 720 - this.node.position.y;\r\n            if (e > 0) {\r\n                this.sufferDebuff({\r\n                    type: $enemyStatus.EnemyDebuffType.BACK,\r\n                    value: e,\r\n                    timeLeft: 1\r\n                });\r\n            }\r\n        }\r\n        if (\r\n            $gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.WallAddAtk) &&\r\n            $gameGemInfo.GameGemInfo.ins.get2($gameGemInfo.GemType.WallAddAtk)[0] *\r\n                $gameContext.default.ins.doorInitHp >\r\n                $gameContext.default.ins.doorLeftHp\r\n        ) {\r\n            this.atkAddTemp += $gameGemInfo.GameGemInfo.ins.get2($gameGemInfo.GemType.WallAddAtk)[1];\r\n        }\r\n        if (this.isCriticalHit && $gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.CriticalADDHurt)) {\r\n            t.atk += Math.ceil(\r\n                this.statusManager.initHp * $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.CriticalADDHurt)\r\n            );\r\n        }\r\n        if ($gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.AtkFloat)) {\r\n            var i = $seedUtil.default.randomFloat(\r\n                -0.3,\r\n                $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.AtkFloat)\r\n            );\r\n            if (i < 0) {\r\n                t.atk += Math.ceil(-i * t.atk);\r\n            }\r\n            this.atkAddTemp += i;\r\n        }\r\n    };\r\n    e.prototype.atkCaculatePost = function (t) {\r\n        if ($gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.AddMaxHurt)) {\r\n            t.atk += Math.ceil(\r\n                this.statusManager.initHp * $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.AddMaxHurt)\r\n            );\r\n        }\r\n        if (t.bulletBuff && t.bulletBuff === $baseBullet.BulletBuff.atk_life) {\r\n            t.atk += Math.ceil(this.statusManager.initHp * t.value);\r\n        }\r\n    };\r\n    e.prototype.atkCaculatePre = function (t) {\r\n        var e = !1;\r\n        if (\r\n            $gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.IgnoreRehurt) &&\r\n            $seedUtil.default.probability(\r\n                1e3 * $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.IgnoreRehurt),\r\n                1e3\r\n            )\r\n        ) {\r\n            e = !0;\r\n        }\r\n        this.atkAddTemp = 0;\r\n        if (\r\n            t.bulletBuff &&\r\n            ((t.bulletBuff === $baseBullet.BulletBuff.freeze_damage &&\r\n                this.statusManager.debuffTypeMap.has($enemyStatus.EnemyDebuffType.FREEZE)) ||\r\n                (t.bulletBuff === $baseBullet.BulletBuff.paralysis_damage &&\r\n                    this.statusManager.debuffTypeMap.has($enemyStatus.EnemyDebuffType.PARALYSIS)))\r\n        ) {\r\n            this.atkAddTemp += t.value;\r\n        }\r\n        for (var i = 0; i < t.skillSpecialitys.length; i++) {\r\n            if (this.statusManager.specialityAtkAdd.has(t.skillSpecialitys[i])) {\r\n                var o = this.statusManager.specialityAtkAdd.get(t.skillSpecialitys[i]);\r\n                if (o < 0) {\r\n                    if (e) {\r\n                        continue;\r\n                    }\r\n                    t.atk = Math.ceil((1 + o) * t.atk);\r\n                } else {\r\n                    this.atkAddTemp += o;\r\n                }\r\n            }\r\n        }\r\n        this.atkCaculateGem(t);\r\n        if (this.statusManager.allDamage > 0) {\r\n            this.atkAddTemp += this.statusManager.allDamage;\r\n        }\r\n        return this.atkAddTemp;\r\n    };\r\n    e.prototype.sufferAttack = function (t, e) {\r\n        if (this.statusManager.isDie) {\r\n            return !1;\r\n        }\r\n        if ((e = Math.floor(e * (1 - this.Avoid_injury))) > 0 && t > 0) {\r\n            $gameContext.default.ins.hurtStatistics(t, e);\r\n        }\r\n        var i = this.statusManager.hp;\r\n        this.statusManager.hp -= e;\r\n        if (-1 !== t) {\r\n            if (this._time <= 0) {\r\n                this._time = 0.3;\r\n            }\r\n            var o = this.getAnimPos();\r\n            -1 !== t && this.isCriticalHit\r\n                ? $eventManager.default.send($localEventName.default.HURT_ANIM, o, e, 1, 1)\r\n                : $eventManager.default.send($localEventName.default.HURT_ANIM, o, e, 0);\r\n        }\r\n        if (this.statusManager.hp < 0) {\r\n            this.statusManager.hp = 0;\r\n        }\r\n        return i > 0 && this.statusManager.hp <= 0;\r\n    };\r\n    e.prototype.getAnimPos = function () {\r\n        var t = this.getPosition();\r\n        I.x = t.x;\r\n        2 === this.config.atktype ? (I.y = t.y) : (I.y = t.y + this.skin.node.y + this.skin.node.height);\r\n        return I;\r\n    };\r\n    e.prototype.createBoom = function () {\r\n        var t = $gameContext.default.ins.getButtlePool($baseBullet.BulletType.enemy_boom);\r\n        if (!t) {\r\n            var e = $assetsLoader.default.instance.getRes(\r\n                $assetsMap.BundleNames.Game,\r\n                $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.Bullet_16\r\n            );\r\n            t = $resUtil.ResUtil.instantiate(e, $gameContext.default.ins.lowBulletLayer.parent).getComponent(\r\n                $baseBullet.default\r\n            );\r\n        }\r\n        t.setPosition(this.getPosition().add(cc.v3(0, 30)));\r\n        t.initButtle(null, 23);\r\n        t.insert($gameContext.default.ins.lowBulletLayer);\r\n        t.setAnimation(null);\r\n    };\r\n    e.prototype.sufferDebuff = function (t) {\r\n        if (!this.statusManager.isDie) {\r\n            this.statusManager.addDebuff(t);\r\n        }\r\n    };\r\n    e.prototype.removeDebuff = function (t, e) {\r\n        this.statusManager.clearDebuff(t, e);\r\n    };\r\n    e.prototype.addAdsorb = function (t) {\r\n        if (1 === this.statusManager.currAdsorbDir.push(t)) {\r\n            this.sufferDebuff({\r\n                type: $enemyStatus.EnemyDebuffType.ADSORB,\r\n                timeLeft: -1,\r\n                value: 0\r\n            });\r\n        }\r\n    };\r\n    e.prototype.removeAdsorb = function (t) {\r\n        if (0 !== this.statusManager.currAdsorbDir.length) {\r\n            var e = this.statusManager.currAdsorbDir.indexOf(t);\r\n            if (-1 !== e) {\r\n                this.statusManager.currAdsorbDir.splice(e, 1);\r\n            }\r\n            if (0 === this.statusManager.currAdsorbDir.length) {\r\n                this.statusManager.clearDebuff($enemyStatus.EnemyDebuffType.ADSORB);\r\n            }\r\n        }\r\n    };\r\n    e.prototype.addDieCallback = function (t, e) {\r\n        this.dieCallbacks.set(e, {\r\n            callback: t,\r\n            target: e\r\n        });\r\n    };\r\n    e.prototype.removeDieCallback = function (t) {\r\n        this.dieCallbacks.delete(t);\r\n    };\r\n    e.prototype.updateFrame = function (t) {\r\n        if (!this.statusManager.isDie) {\r\n            1 === this.config.atktype\r\n                ? this.onDoor(this.getPosition().y <= $globalParam.default.doorY)\r\n                : this.onDoor(this.residueDis <= this.atkRange);\r\n            this.playSufferAtkAnim(t);\r\n            this.statusManager.updateF(t);\r\n            if (this.isCanAtk && !this.isAttacking) {\r\n                this.leftCDTime -= t;\r\n                if (this.leftCDTime <= 0) {\r\n                    this.leftCDTime = this.config.atkspeed;\r\n                    this.attack();\r\n                }\r\n            }\r\n            if (this.statusManager.hp <= 0) {\r\n                this.statusManager.isDie = !0;\r\n                $eventManager.default.send($localEventName.default.ADD_EXP, this.config.EX);\r\n                if (this.dieAnim()) {\r\n                    this.removeSelf();\r\n                }\r\n            }\r\n            if (this.debuffLayer) {\r\n                C.x = this.getPosition().x + this.debuffLayer.position.x;\r\n                C.y = this.getPosition().y + this.debuffLayer.position.y;\r\n                if (this.burnAnim) {\r\n                    this.burnAnim.setPosition(C);\r\n                }\r\n                if (this.recoverAnim) {\r\n                    this.recoverAnim.setPosition(C);\r\n                }\r\n                if (this.freezeAnim) {\r\n                    this.freezeAnim.setPosition(C);\r\n                }\r\n                if (this.paralysisAnim) {\r\n                    this.paralysisAnim.setPosition(C);\r\n                }\r\n                if (this.stunAnim) {\r\n                    this.stunAnim.setPosition(C);\r\n                }\r\n            }\r\n            if (!this.isDoor) {\r\n                this.move(t);\r\n                this.speedRatioRight();\r\n            }\r\n        }\r\n    };\r\n    e.prototype.speedRatioRight = function () {\r\n        if ($gameContext.default.ins.gameRatio !== this.currRatio) {\r\n            this.currRatio = $gameContext.default.ins.gameRatio;\r\n            var t = (this.speed / this.statusManager.initSpeed) * this.currRatio;\r\n            if (this.velocity.y > 0) {\r\n                t = 1;\r\n            }\r\n            if (0 !== this.skin.timeScale) {\r\n                this.skin.timeScale = t;\r\n            }\r\n        }\r\n    };\r\n    e.prototype.playSufferAtkAnim = function (t) {\r\n        if (cc.isValid(this.skin) && this._time > 0) {\r\n            this._time -= t;\r\n            if (this._time <= 0) {\r\n                this._time = 0;\r\n            }\r\n            this._time = this._time < 0 ? 0 : this._time;\r\n            var e = Math.ceil((255 * this._time) / this.duration);\r\n            if (e < 1) {\r\n                e = 1;\r\n            }\r\n            this.skin.node.opacity = e;\r\n        }\r\n    };\r\n    e.prototype.removeSelf = function () {\r\n        if ($gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.KillEnemyAddWallBlood1)) {\r\n            $eventManager.default.send(\r\n                $localEventName.default.ADD_HP_DOOR,\r\n                $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.KillEnemyAddWallBlood1)\r\n            );\r\n        }\r\n        if (\r\n            this.config.monster_type > 1 &&\r\n            $gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.KillEnemyAddWallBlood2)\r\n        ) {\r\n            $eventManager.default.send(\r\n                $localEventName.default.ADD_HP_DOOR,\r\n                $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.KillEnemyAddWallBlood2)\r\n            );\r\n        }\r\n        var t = this;\r\n        this.dieCallbacks.forEach(function (e) {\r\n            if (e && e.callback && e.target) {\r\n                e.callback.apply(e.target, [t]);\r\n            }\r\n        });\r\n        this.dieCallbacks.clear();\r\n        this.clearStatus(!0);\r\n        this.clearDebuffAnim();\r\n        $componentProxy.default.Ins.removeObj(this);\r\n        $gameContext.default.ins.putEnemyPool(this);\r\n    };\r\n    e.prototype.move = function (t) {\r\n        this.residueDis = Math.floor(this.node.y + 400);\r\n        this.node.zIndex = 5e3 - Math.floor(this.residueDis);\r\n        var e = this.getPosition();\r\n        var i = this.velocity;\r\n        C.x = e.x + i.x * t;\r\n        C.y = e.y + i.y * t;\r\n        C.z = e.z + i.z * t;\r\n        if (C.y >= 720 && this.velocity.y > 0) {\r\n            this.statusManager.clearDebuff($enemyStatus.EnemyDebuffType.BACK);\r\n            return void (this.velocity.y = -1);\r\n        }\r\n        if (C.y < $globalParam.default.doorY && i.y < 0) {\r\n            C.y = $globalParam.default.doorY;\r\n        }\r\n        if (C.x < -360) {\r\n            C.x = -360;\r\n        }\r\n        if (C.x > 360) {\r\n            C.x = 360;\r\n        }\r\n        this.setPosition(C);\r\n        this.caculateVelocity();\r\n    };\r\n    e.prototype.caculateVelocity = function () {\r\n        if (this.statusManager.hasDebuff($enemyStatus.EnemyDebuffType.ADSORB)) {\r\n            C.x = 0;\r\n            C.y = 0;\r\n            for (var t = 0; t < this.statusManager.currAdsorbDir.length; t++) {\r\n                C.x += this.statusManager.currAdsorbDir[t].x;\r\n                C.y += this.statusManager.currAdsorbDir[t].y;\r\n            }\r\n            C.x = cc.misc.clampf(C.x, -100, 100);\r\n            C.y = cc.misc.clampf(C.y, -100, 100);\r\n            this.velocity.x = C.x;\r\n            this.velocity.y = C.y;\r\n        } else {\r\n            this.velocity.normalizeSelf().multiplyScalar(this.speed);\r\n        }\r\n    };\r\n    e.prototype.attack = function () {\r\n        var t = this;\r\n        if (this.isCanAtk) {\r\n            this.isAttacking = !0;\r\n            this.skin.playAnimation(\"hit\", 1);\r\n            this.scheduleOnce(this.attackAnim, 0.066);\r\n            this.skin.once(\r\n                dragonBones.EventObject.COMPLETE,\r\n                function () {\r\n                    t.isAttacking = !1;\r\n                    t.skin.playAnimation(\"stand\", 0);\r\n                },\r\n                this\r\n            );\r\n        }\r\n    };\r\n    e.prototype.attackAnim = function () {\r\n        $eventManager.default.send($localEventName.default.ATK_DOOR, this.statusManager.atk);\r\n    };\r\n    e.prototype.clearDebuffAnim = function () {\r\n        if (this.burnAnim) {\r\n            this.endDebuffAnim($enemyStatus.EnemyDebuffType.BURN);\r\n        }\r\n        if (this.freezeAnim) {\r\n            this.endDebuffAnim($enemyStatus.EnemyDebuffType.FREEZE);\r\n        }\r\n        if (this.paralysisAnim) {\r\n            this.endDebuffAnim($enemyStatus.EnemyDebuffType.PARALYSIS);\r\n        }\r\n        if (this.stunAnim) {\r\n            this.endDebuffAnim($enemyStatus.EnemyDebuffType.STUN);\r\n        }\r\n        if (this.recoverAnim) {\r\n            this.endDebuffAnim($enemyStatus.EnemyDebuffType.RECOVER);\r\n        }\r\n    };\r\n    e.prototype.dieAnim = function () {\r\n        $gameContext.default.ins.removeEnemy(this);\r\n        C.x = 0;\r\n        C.y = this.debuffLayer.y;\r\n        $eventManager.default.send($localEventName.default.ENEMY_DIE, this.getPosition().add(C));\r\n        this.unscheduleAllCallbacks();\r\n        $remoteAudio.default.instance.playEffectMusicRestrict(\"die\", 0.3);\r\n        if (!(2 !== this.config.monster_type && 3 !== this.config.monster_type)) {\r\n            this.bossChooseSKill();\r\n        }\r\n        return !0;\r\n    };\r\n    e.prototype.bossChooseSKill = function () {\r\n        if (1 === this.config.is_reward) {\r\n            var t = $gameContext.default.ins.killBossSkills();\r\n            if (!(t.length <= 0)) {\r\n                var e = $seedUtil.default.randomFrom(this.config.reward_num[0], this.config.reward_num[1]);\r\n                $globalParam.default.isGamePuase = !0;\r\n                $popupManager.PopupManager.instance.open(\r\n                    $assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.BossSkillView,\r\n                    {\r\n                        skillIds: t,\r\n                        randomCount: e\r\n                    },\r\n                    {\r\n                        closeCallback: function () {\r\n                            $globalParam.default.isGamePuase = !1;\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    };\r\n    e.prototype.startDebuffAnim = function (t) {\r\n        var e;\r\n        if (!(this.statusManager.hp <= 0)) {\r\n            if (t === $enemyStatus.EnemyDebuffType.BURN) {\r\n                if (cc.isValid(this.burnAnim)) {\r\n                    return;\r\n                }\r\n                var i = $gamePool.default.instance.get($gamePool.PoolKey.BURN);\r\n                if (!i) {\r\n                    i = $resUtil.ResUtil.instantiate(\r\n                        $resManager.ResManager.instance.get($assetsMap.AssetsMap.GameBundles.prefabs.assetsList.Burn),\r\n                        $gameContext.default.ins.enemyLayer.parent\r\n                    );\r\n                }\r\n                this.burnAnim = i;\r\n                i.parent = $gameContext.default.ins.debuffLayer;\r\n                i.zIndex = this.node.zIndex;\r\n                i.setPosition(this.getPosition().add(this.debuffLayer.position));\r\n                i.scale = this.debuffLayer.scale;\r\n            } else {\r\n                if (t === $enemyStatus.EnemyDebuffType.STOP_ANIM) {\r\n                    if (0 !== (null === (e = this.skin) || void 0 === e ? void 0 : e.timeScale)) {\r\n                        this.playLoop(null, 0);\r\n                    }\r\n                } else {\r\n                    if (t === $enemyStatus.EnemyDebuffType.FREEZE) {\r\n                        if (cc.isValid(this.freezeAnim)) {\r\n                            return;\r\n                        }\r\n                        var o = $gamePool.default.instance.get($gamePool.PoolKey.FREEZE);\r\n                        if (!o) {\r\n                            o = $resUtil.ResUtil.instantiate(\r\n                                $resManager.ResManager.instance.get(\r\n                                    $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.Freeze\r\n                                ),\r\n                                $gameContext.default.ins.enemyLayer.parent\r\n                            );\r\n                        }\r\n                        this.freezeAnim = o;\r\n                        o.parent = $gameContext.default.ins.debuffLayer;\r\n                        o.zIndex = this.node.zIndex;\r\n                        o.setPosition(this.getPosition().add(this.debuffLayer.position));\r\n                        o.scale = this.debuffLayer.scale;\r\n                    } else {\r\n                        if (t === $enemyStatus.EnemyDebuffType.PARALYSIS) {\r\n                            var n = $gamePool.default.instance.get($gamePool.PoolKey.PARALYSIS);\r\n                            if (!n) {\r\n                                n = $resUtil.ResUtil.instantiate(\r\n                                    $resManager.ResManager.instance.get(\r\n                                        $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.Paralysis\r\n                                    ),\r\n                                    $gameContext.default.ins.enemyLayer.parent\r\n                                );\r\n                            }\r\n                            this.paralysisAnim = n;\r\n                            n.parent = $gameContext.default.ins.debuffLayer;\r\n                            n.zIndex = this.node.zIndex;\r\n                            n.setPosition(this.getPosition().add(this.debuffLayer.position));\r\n                            n.scale = this.debuffLayer.scale;\r\n                        } else {\r\n                            if (t === $enemyStatus.EnemyDebuffType.STUN) {\r\n                                if (cc.isValid(this.stunAnim)) {\r\n                                    return;\r\n                                }\r\n                                var s = $gamePool.default.instance.get($gamePool.PoolKey.STUN);\r\n                                if (!s) {\r\n                                    s = $resUtil.ResUtil.instantiate(\r\n                                        $resManager.ResManager.instance.get(\r\n                                            $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.Stun\r\n                                        ),\r\n                                        $gameContext.default.ins.enemyLayer.parent\r\n                                    );\r\n                                }\r\n                                this.stunAnim = s;\r\n                                s.parent = $gameContext.default.ins.debuffLayer;\r\n                                s.zIndex = this.node.zIndex;\r\n                                s.setPosition(this.getPosition().add(this.debuffLayer.position));\r\n                                s.scale = this.debuffLayer.scale;\r\n                            } else {\r\n                                if (t === $enemyStatus.EnemyDebuffType.RECOVER) {\r\n                                    if (cc.isValid(this.recoverAnim)) {\r\n                                        return;\r\n                                    }\r\n                                    var r = $gamePool.default.instance.get($gamePool.PoolKey.RECOVER);\r\n                                    if (!r) {\r\n                                        r = $resUtil.ResUtil.instantiate(\r\n                                            $resManager.ResManager.instance.get(\r\n                                                $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.Heal\r\n                                            ),\r\n                                            $gameContext.default.ins.enemyLayer.parent\r\n                                        );\r\n                                    }\r\n                                    this.recoverAnim = r;\r\n                                    r.parent = $gameContext.default.ins.debuffLayer;\r\n                                    r.zIndex = this.node.zIndex;\r\n                                    r.setPosition(this.getPosition().add(this.debuffLayer.position));\r\n                                    r.scale = this.debuffLayer.scale;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    e.prototype.endDebuffAnim = function (t) {\r\n        var e;\r\n        if (t === $enemyStatus.EnemyDebuffType.BURN && this.burnAnim) {\r\n            $gamePool.default.instance.put($gamePool.PoolKey.BURN, this.burnAnim);\r\n            this.burnAnim = null;\r\n        } else {\r\n            if (t === $enemyStatus.EnemyDebuffType.STOP_ANIM) {\r\n                var i = (this.speed / this.statusManager.initSpeed) * this.currRatio;\r\n                if ((null === (e = this.skin) || void 0 === e ? void 0 : e.timeScale) <= 0) {\r\n                    this.playLoop(null, i);\r\n                }\r\n            } else {\r\n                t === $enemyStatus.EnemyDebuffType.FREEZE && this.freezeAnim\r\n                    ? ($gamePool.default.instance.put($gamePool.PoolKey.FREEZE, this.freezeAnim),\r\n                      (this.freezeAnim = null))\r\n                    : t === $enemyStatus.EnemyDebuffType.PARALYSIS && this.paralysisAnim\r\n                    ? ($gamePool.default.instance.put($gamePool.PoolKey.PARALYSIS, this.paralysisAnim),\r\n                      (this.paralysisAnim = null))\r\n                    : t === $enemyStatus.EnemyDebuffType.STUN && this.stunAnim\r\n                    ? ($gamePool.default.instance.put($gamePool.PoolKey.STUN, this.stunAnim), (this.stunAnim = null))\r\n                    : t === $enemyStatus.EnemyDebuffType.RECOVER &&\r\n                      this.recoverAnim &&\r\n                      ($gamePool.default.instance.put($gamePool.PoolKey.RECOVER, this.recoverAnim),\r\n                      (this.recoverAnim = null));\r\n            }\r\n        }\r\n    };\r\n    e.prototype.clearStatus = function (t) {\r\n        this.isDoor = !1;\r\n        this.lastAtkTimes.length = 0;\r\n        this.statusManager.clear();\r\n        this.dieCallbacks.clear();\r\n        if (t) {\r\n            this.skin.timeScale = this.currRatio;\r\n            this.skin.playAnimation(\"run\", 0);\r\n        }\r\n        this.residueDis = 5e3;\r\n        this.isCanAtk = !1;\r\n        this.isAttacking = !1;\r\n        if (this.skin) {\r\n            this._time = 0;\r\n            this.skin.node.opacity = 1;\r\n        }\r\n    };\r\n    e.prototype.playLoop = function (t, e) {\r\n        if (!this.statusManager.isDie) {\r\n            this.isAttacking = !1;\r\n            this.unschedule(this.attackAnim);\r\n            if (this.skin) {\r\n                this.skin.off(dragonBones.EventObject.COMPLETE);\r\n                this.skin.timeScale = e;\r\n                if (t) {\r\n                    this.skin.playAnimation(t, 0);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return __decorate([S], e);\r\n})($object.cObject);\r\nexports.default = P;\r\n"]}