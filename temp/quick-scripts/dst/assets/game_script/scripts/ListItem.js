
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/ListItem.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '3ad11WlW7ZIEKjSkgcHOEtT', 'ListItem');
// game_script/scripts/ListItem.js

"use strict";

var o;
var r;
var a;
var l = cc._decorator;
var c = l.ccclass;
var u = l.property;
var d = l.disallowMultiple;
var p = l.menu;
var f = l.executionOrder;
(a = r || (r = {}))[a.NONE = 0] = "NONE";
a[a.TOGGLE = 1] = "TOGGLE";
a[a.SWITCH = 2] = "SWITCH";

var h = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.selectedMode = r.NONE;
    e.selectedFlag = null;
    e.selectedSpriteFrame = null;
    e._unselectedSpriteFrame = null;
    e.adaptiveSize = !1;
    e._selected = !1;
    e._eventReg = !1;
    return e;
  }

  __extends(e, t);

  Object.defineProperty(e.prototype, "selected", {
    get: function get() {
      return this._selected;
    },
    set: function set(t) {
      this._selected = t;

      if (this.selectedFlag) {
        switch (this.selectedMode) {
          case r.TOGGLE:
            this.selectedFlag.active = t;
            break;

          case r.SWITCH:
            var e = this.selectedFlag.getComponent(cc.Sprite);

            if (e) {
              e.spriteFrame = t ? this.selectedSpriteFrame : this._unselectedSpriteFrame;
            }

        }
      }
    },
    enumerable: !1,
    configurable: !0
  });
  Object.defineProperty(e.prototype, "btnCom", {
    get: function get() {
      if (!this._btnCom) {
        this._btnCom = this.node.getComponent(cc.Button);
      }

      return this._btnCom;
    },
    enumerable: !1,
    configurable: !0
  });

  e.prototype.onLoad = function () {
    if (this.selectedMode == r.SWITCH) {
      var t = this.selectedFlag.getComponent(cc.Sprite);
      this._unselectedSpriteFrame = t.spriteFrame;
    }
  };

  e.prototype.onDestroy = function () {
    this.node.off(cc.Node.EventType.SIZE_CHANGED, this._onSizeChange, this);
  };

  e.prototype._registerEvent = function () {
    if (!this._eventReg) {
      if (this.btnCom && this.list.selectedMode > 0) {
        this.btnCom.clickEvents.unshift(this.createEvt(this, "onClickThis"));
      }

      if (this.adaptiveSize) {
        this.node.on(cc.Node.EventType.SIZE_CHANGED, this._onSizeChange, this);
      }

      this._eventReg = !0;
    }
  };

  e.prototype._onSizeChange = function () {
    this.list._onItemAdaptive(this.node);
  };

  e.prototype.createEvt = function (t, e, i) {
    if (void 0 === i) {
      i = null;
    }

    if (t.isValid) {
      t.comName = t.comName || t.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g, "");
      var o = new cc.Component.EventHandler();
      o.target = i || t.node;
      o.component = t.comName;
      o.handler = e;
      return o;
    }
  };

  e.prototype.showAni = function (t, e, i) {
    var o;
    var n = this;

    switch (t) {
      case 0:
        o = cc.tween(n.node).to(0.2, {
          scale: 0.7
        }).by(0.3, {
          y: 2 * n.node.height
        });
        break;

      case 1:
        o = cc.tween(n.node).to(0.2, {
          scale: 0.7
        }).by(0.3, {
          x: 2 * n.node.width
        });
        break;

      case 2:
        o = cc.tween(n.node).to(0.2, {
          scale: 0.7
        }).by(0.3, {
          y: -2 * n.node.height
        });
        break;

      case 3:
        o = cc.tween(n.node).to(0.2, {
          scale: 0.7
        }).by(0.3, {
          x: -2 * n.node.width
        });
        break;

      default:
        o = cc.tween(n.node).to(0.3, {
          scale: 0.1
        });
    }

    if (e || i) {
      o.call(function () {
        if (i) {
          n.list._delSingleItem(n.node);

          for (var t = n.list.displayData.length - 1; t >= 0; t--) {
            if (n.list.displayData[t].id == n.listId) {
              n.list.displayData.splice(t, 1);
              break;
            }
          }
        }

        e();
      });
    }

    o.start();
  };

  e.prototype.onClickThis = function () {
    this.list.selectedId = this.listId;
  };

  __decorate([u({
    type: cc.Enum(r)
  })], e.prototype, "selectedMode", void 0);

  __decorate([u({
    type: cc.Node,
    visible: function visible() {
      return this.selectedMode > r.NONE;
    }
  })], e.prototype, "selectedFlag", void 0);

  __decorate([u({
    type: cc.SpriteFrame,
    visible: function visible() {
      return this.selectedMode == r.SWITCH;
    }
  })], e.prototype, "selectedSpriteFrame", void 0);

  __decorate([u({})], e.prototype, "adaptiveSize", void 0);

  return __decorate([c, d(), p("自定义组件/List Item"), f(-5001)], e);
}(cc.Component);

exports["default"] = h;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXExpc3RJdGVtLmpzIl0sIm5hbWVzIjpbIm8iLCJyIiwiYSIsImwiLCJjYyIsIl9kZWNvcmF0b3IiLCJjIiwiY2NjbGFzcyIsInUiLCJwcm9wZXJ0eSIsImQiLCJkaXNhbGxvd011bHRpcGxlIiwicCIsIm1lbnUiLCJmIiwiZXhlY3V0aW9uT3JkZXIiLCJOT05FIiwiVE9HR0xFIiwiU1dJVENIIiwiaCIsInQiLCJlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJzZWxlY3RlZE1vZGUiLCJzZWxlY3RlZEZsYWciLCJzZWxlY3RlZFNwcml0ZUZyYW1lIiwiX3Vuc2VsZWN0ZWRTcHJpdGVGcmFtZSIsImFkYXB0aXZlU2l6ZSIsIl9zZWxlY3RlZCIsIl9ldmVudFJlZyIsIl9fZXh0ZW5kcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwicHJvdG90eXBlIiwiZ2V0Iiwic2V0IiwiYWN0aXZlIiwiZ2V0Q29tcG9uZW50IiwiU3ByaXRlIiwic3ByaXRlRnJhbWUiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwiX2J0bkNvbSIsIm5vZGUiLCJCdXR0b24iLCJvbkxvYWQiLCJvbkRlc3Ryb3kiLCJvZmYiLCJOb2RlIiwiRXZlbnRUeXBlIiwiU0laRV9DSEFOR0VEIiwiX29uU2l6ZUNoYW5nZSIsIl9yZWdpc3RlckV2ZW50IiwiYnRuQ29tIiwibGlzdCIsImNsaWNrRXZlbnRzIiwidW5zaGlmdCIsImNyZWF0ZUV2dCIsIm9uIiwiX29uSXRlbUFkYXB0aXZlIiwiaSIsImlzVmFsaWQiLCJjb21OYW1lIiwibmFtZSIsIm1hdGNoIiwicG9wIiwicmVwbGFjZSIsIkNvbXBvbmVudCIsIkV2ZW50SGFuZGxlciIsInRhcmdldCIsImNvbXBvbmVudCIsImhhbmRsZXIiLCJzaG93QW5pIiwibiIsInR3ZWVuIiwidG8iLCJzY2FsZSIsImJ5IiwieSIsImhlaWdodCIsIngiLCJ3aWR0aCIsImNhbGwiLCJfZGVsU2luZ2xlSXRlbSIsImRpc3BsYXlEYXRhIiwibGVuZ3RoIiwiaWQiLCJsaXN0SWQiLCJzcGxpY2UiLCJzdGFydCIsIm9uQ2xpY2tUaGlzIiwic2VsZWN0ZWRJZCIsIl9fZGVjb3JhdGUiLCJ0eXBlIiwiRW51bSIsInZpc2libGUiLCJTcHJpdGVGcmFtZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsQ0FBSjtBQUNBLElBQUlDLENBQUo7QUFDQSxJQUFJQyxDQUFKO0FBQ0EsSUFBSUMsQ0FBQyxHQUFHQyxFQUFFLENBQUNDLFVBQVg7QUFDQSxJQUFJQyxDQUFDLEdBQUdILENBQUMsQ0FBQ0ksT0FBVjtBQUNBLElBQUlDLENBQUMsR0FBR0wsQ0FBQyxDQUFDTSxRQUFWO0FBQ0EsSUFBSUMsQ0FBQyxHQUFHUCxDQUFDLENBQUNRLGdCQUFWO0FBQ0EsSUFBSUMsQ0FBQyxHQUFHVCxDQUFDLENBQUNVLElBQVY7QUFDQSxJQUFJQyxDQUFDLEdBQUdYLENBQUMsQ0FBQ1ksY0FBVjtBQUNBLENBQUNiLENBQUMsR0FBR0QsQ0FBQyxLQUFLQSxDQUFDLEdBQUcsRUFBVCxDQUFOLEVBQXFCQyxDQUFDLENBQUNjLElBQUYsR0FBUyxDQUE5QixJQUFvQyxNQUFwQztBQUNBZCxDQUFDLENBQUVBLENBQUMsQ0FBQ2UsTUFBRixHQUFXLENBQWIsQ0FBRCxHQUFvQixRQUFwQjtBQUNBZixDQUFDLENBQUVBLENBQUMsQ0FBQ2dCLE1BQUYsR0FBVyxDQUFiLENBQUQsR0FBb0IsUUFBcEI7O0FBQ0EsSUFBSUMsQ0FBQyxHQUFJLFVBQVVDLENBQVYsRUFBYTtFQUNsQixTQUFTQyxDQUFULEdBQWE7SUFDVCxJQUFJQSxDQUFDLEdBQUksU0FBU0QsQ0FBVCxJQUFjQSxDQUFDLENBQUNFLEtBQUYsQ0FBUSxJQUFSLEVBQWNDLFNBQWQsQ0FBZixJQUE0QyxJQUFwRDtJQUNBRixDQUFDLENBQUNHLFlBQUYsR0FBaUJ2QixDQUFDLENBQUNlLElBQW5CO0lBQ0FLLENBQUMsQ0FBQ0ksWUFBRixHQUFpQixJ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InNvdXJjZXNDb250ZW50IjpbInZhciBvO1xyXG52YXIgcjtcclxudmFyIGE7XHJcbnZhciBsID0gY2MuX2RlY29yYXRvcjtcclxudmFyIGMgPSBsLmNjY2xhc3M7XHJcbnZhciB1ID0gbC5wcm9wZXJ0eTtcclxudmFyIGQgPSBsLmRpc2FsbG93TXVsdGlwbGU7XHJcbnZhciBwID0gbC5tZW51O1xyXG52YXIgZiA9IGwuZXhlY3V0aW9uT3JkZXI7XHJcbihhID0gciB8fCAociA9IHt9KSlbKGEuTk9ORSA9IDApXSA9IFwiTk9ORVwiO1xyXG5hWyhhLlRPR0dMRSA9IDEpXSA9IFwiVE9HR0xFXCI7XHJcbmFbKGEuU1dJVENIID0gMildID0gXCJTV0lUQ0hcIjtcclxudmFyIGggPSAoZnVuY3Rpb24gKHQpIHtcclxuICAgIGZ1bmN0aW9uIGUoKSB7XHJcbiAgICAgICAgdmFyIGUgPSAobnVsbCAhPT0gdCAmJiB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIHx8IHRoaXM7XHJcbiAgICAgICAgZS5zZWxlY3RlZE1vZGUgPSByLk5PTkU7XHJcbiAgICAgICAgZS5zZWxlY3RlZEZsYWcgPSBudWxsO1xyXG4gICAgICAgIGUuc2VsZWN0ZWRTcHJpdGVGcmFtZSA9IG51bGw7XHJcbiAgICAgICAgZS5fdW5zZWxlY3RlZFNwcml0ZUZyYW1lID0gbnVsbDtcclxuICAgICAgICBlLmFkYXB0aXZlU2l6ZSA9ICExO1xyXG4gICAgICAgIGUuX3NlbGVjdGVkID0gITE7XHJcbiAgICAgICAgZS5fZXZlbnRSZWcgPSAhMTtcclxuICAgICAgICByZXR1cm4gZTtcclxuICAgIH1cclxuICAgIF9fZXh0ZW5kcyhlLCB0KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwgXCJzZWxlY3RlZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWQgPSB0O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEZsYWcpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5zZWxlY3RlZE1vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIHIuVE9HR0xFOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRmxhZy5hY3RpdmUgPSB0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIHIuU1dJVENIOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMuc2VsZWN0ZWRGbGFnLmdldENvbXBvbmVudChjYy5TcHJpdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zcHJpdGVGcmFtZSA9IHQgPyB0aGlzLnNlbGVjdGVkU3ByaXRlRnJhbWUgOiB0aGlzLl91bnNlbGVjdGVkU3ByaXRlRnJhbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogITEsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMFxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIFwiYnRuQ29tXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9idG5Db20pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2J0bkNvbSA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoY2MuQnV0dG9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYnRuQ29tO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogITEsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMFxyXG4gICAgfSk7XHJcbiAgICBlLnByb3RvdHlwZS5vbkxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRNb2RlID09IHIuU1dJVENIKSB7XHJcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcy5zZWxlY3RlZEZsYWcuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Vuc2VsZWN0ZWRTcHJpdGVGcmFtZSA9IHQuc3ByaXRlRnJhbWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLm9uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm5vZGUub2ZmKGNjLk5vZGUuRXZlbnRUeXBlLlNJWkVfQ0hBTkdFRCwgdGhpcy5fb25TaXplQ2hhbmdlLCB0aGlzKTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5fcmVnaXN0ZXJFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2V2ZW50UmVnKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJ0bkNvbSAmJiB0aGlzLmxpc3Quc2VsZWN0ZWRNb2RlID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5idG5Db20uY2xpY2tFdmVudHMudW5zaGlmdCh0aGlzLmNyZWF0ZUV2dCh0aGlzLCBcIm9uQ2xpY2tUaGlzXCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5hZGFwdGl2ZVNpemUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5TSVpFX0NIQU5HRUQsIHRoaXMuX29uU2l6ZUNoYW5nZSwgdGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fZXZlbnRSZWcgPSAhMDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuX29uU2l6ZUNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxpc3QuX29uSXRlbUFkYXB0aXZlKHRoaXMubm9kZSk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuY3JlYXRlRXZ0ID0gZnVuY3Rpb24gKHQsIGUsIGkpIHtcclxuICAgICAgICBpZiAodm9pZCAwID09PSBpKSB7XHJcbiAgICAgICAgICAgIGkgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodC5pc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgIHQuY29tTmFtZSA9XHJcbiAgICAgICAgICAgICAgICB0LmNvbU5hbWUgfHxcclxuICAgICAgICAgICAgICAgIHQubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIC5tYXRjaCgvXFw8KC4qPylcXD4vZylcclxuICAgICAgICAgICAgICAgICAgICAucG9wKClcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFw8fD4vZywgXCJcIik7XHJcbiAgICAgICAgICAgIHZhciBvID0gbmV3IGNjLkNvbXBvbmVudC5FdmVudEhhbmRsZXIoKTtcclxuICAgICAgICAgICAgby50YXJnZXQgPSBpIHx8IHQubm9kZTtcclxuICAgICAgICAgICAgby5jb21wb25lbnQgPSB0LmNvbU5hbWU7XHJcbiAgICAgICAgICAgIG8uaGFuZGxlciA9IGU7XHJcbiAgICAgICAgICAgIHJldHVybiBvO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5zaG93QW5pID0gZnVuY3Rpb24gKHQsIGUsIGkpIHtcclxuICAgICAgICB2YXIgbztcclxuICAgICAgICB2YXIgbiA9IHRoaXM7XHJcbiAgICAgICAgc3dpdGNoICh0KSB7XHJcbiAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgIG8gPSBjY1xyXG4gICAgICAgICAgICAgICAgICAgIC50d2VlbihuLm5vZGUpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRvKDAuMiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogMC43XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuYnkoMC4zLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IDIgKiBuLm5vZGUuaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgbyA9IGNjXHJcbiAgICAgICAgICAgICAgICAgICAgLnR3ZWVuKG4ubm9kZSlcclxuICAgICAgICAgICAgICAgICAgICAudG8oMC4yLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiAwLjdcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5ieSgwLjMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeDogMiAqIG4ubm9kZS53aWR0aFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIG8gPSBjY1xyXG4gICAgICAgICAgICAgICAgICAgIC50d2VlbihuLm5vZGUpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRvKDAuMiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogMC43XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuYnkoMC4zLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IC0yICogbi5ub2RlLmhlaWdodFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgIG8gPSBjY1xyXG4gICAgICAgICAgICAgICAgICAgIC50d2VlbihuLm5vZGUpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRvKDAuMiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogMC43XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuYnkoMC4zLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6IC0yICogbi5ub2RlLndpZHRoXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIG8gPSBjYy50d2VlbihuLm5vZGUpLnRvKDAuMywge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlOiAwLjFcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZSB8fCBpKSB7XHJcbiAgICAgICAgICAgIG8uY2FsbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG4ubGlzdC5fZGVsU2luZ2xlSXRlbShuLm5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSBuLmxpc3QuZGlzcGxheURhdGEubGVuZ3RoIC0gMTsgdCA+PSAwOyB0LS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4ubGlzdC5kaXNwbGF5RGF0YVt0XS5pZCA9PSBuLmxpc3RJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5saXN0LmRpc3BsYXlEYXRhLnNwbGljZSh0LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgby5zdGFydCgpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLm9uQ2xpY2tUaGlzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubGlzdC5zZWxlY3RlZElkID0gdGhpcy5saXN0SWQ7XHJcbiAgICB9O1xyXG4gICAgX19kZWNvcmF0ZShcclxuICAgICAgICBbXHJcbiAgICAgICAgICAgIHUoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogY2MuRW51bShyKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgZS5wcm90b3R5cGUsXHJcbiAgICAgICAgXCJzZWxlY3RlZE1vZGVcIixcclxuICAgICAgICB2b2lkIDBcclxuICAgICk7XHJcbiAgICBfX2RlY29yYXRlKFxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgdSh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICAgICAgdmlzaWJsZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkTW9kZSA+IHIuTk9ORTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICBdLFxyXG4gICAgICAgIGUucHJvdG90eXBlLFxyXG4gICAgICAgIFwic2VsZWN0ZWRGbGFnXCIsXHJcbiAgICAgICAgdm9pZCAwXHJcbiAgICApO1xyXG4gICAgX19kZWNvcmF0ZShcclxuICAgICAgICBbXHJcbiAgICAgICAgICAgIHUoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgICAgICAgICB2aXNpYmxlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRNb2RlID09IHIuU1dJVENIO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgZS5wcm90b3R5cGUsXHJcbiAgICAgICAgXCJzZWxlY3RlZFNwcml0ZUZyYW1lXCIsXHJcbiAgICAgICAgdm9pZCAwXHJcbiAgICApO1xyXG4gICAgX19kZWNvcmF0ZShbdSh7fSldLCBlLnByb3RvdHlwZSwgXCJhZGFwdGl2ZVNpemVcIiwgdm9pZCAwKTtcclxuICAgIHJldHVybiBfX2RlY29yYXRlKFtjLCBkKCksIHAoXCLoh6rlrprkuYnnu4Tku7YvTGlzdCBJdGVtXCIpLCBmKC01MDAxKV0sIGUpO1xyXG59KShjYy5Db21wb25lbnQpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBoO1xyXG4iXX0=