{"version":3,"sources":["assets\\game_script\\scripts\\RemoteAudio.js"],"names":["$assetsLoader","require","$assetsMap","$countDownUtil","$audioPlayer","a","t","musicMap","Map","timeRecord","currLoopMusic","isPlayingBgm","isMastering","prototype","playMusic","e","has","get","instance","loadRes","BundleNames","Public_Res","cc","AudioClip","i","o","n","isValid","addRef","set","playEffectMusic","playEffect","s","playEffectMusicRestrict","CountDownUtil","time","stopEffectMusic","stopEffect","stopAllEffectMusic","stopAllEffect","clearLoopEffect","clear","playLoopEffect","stopLoopEffect","pauseAllEffectMusic","pauseAllEffect","resumeAllEffectMusic","resumeAllEffect","releaseEffect","decRef","playBGM","stopAllMusic","stopBGM","stopAll","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $countDownUtil = require(\"./CountDownUtil\");\r\nvar $audioPlayer = require(\"./AudioPlayer\");\r\nvar a = (function () {\r\n    function t() {\r\n        this.musicMap = new Map();\r\n        this.timeRecord = new Map();\r\n        this.currLoopMusic = new Map();\r\n        this.isPlayingBgm = !1;\r\n        this.isMastering = !0;\r\n    }\r\n    t.prototype.playMusic = function (t) {\r\n        var e = this;\r\n        this.musicMap.has(t)\r\n            ? $audioPlayer.default.playMusic(this.musicMap.get(t))\r\n            : $assetsLoader.default.instance.loadRes(\r\n                  $assetsMap.BundleNames.Public_Res,\r\n                  [\"/sounds/\" + t],\r\n                  cc.AudioClip,\r\n                  null,\r\n                  function (i, o) {\r\n                      var n = o[0];\r\n                      if (cc.isValid(n)) {\r\n                          n.addRef();\r\n                          e.musicMap.set(t, n);\r\n                          $audioPlayer.default.playMusic(e.musicMap.get(t));\r\n                      }\r\n                  }\r\n              );\r\n    };\r\n    t.prototype.playEffectMusic = function (t, e) {\r\n        var i = this;\r\n        if (void 0 === e) {\r\n            e = !1;\r\n        }\r\n        this.musicMap.has(t)\r\n            ? ($audioPlayer.default.playEffect(this.musicMap.get(t), e),\r\n              e && this.currLoopMusic.set(t, this.musicMap.get(t)))\r\n            : $assetsLoader.default.instance.loadRes(\r\n                  $assetsMap.BundleNames.Public_Res,\r\n                  [\"/sounds/\" + t],\r\n                  cc.AudioClip,\r\n                  null,\r\n                  function (o, n) {\r\n                      var s = n[0];\r\n                      if (cc.isValid(s)) {\r\n                          s.addRef();\r\n                          i.musicMap.set(t, s);\r\n                          $audioPlayer.default.playEffect(s, e);\r\n                          if (e) {\r\n                              i.currLoopMusic.set(t, i.musicMap.get(t));\r\n                          }\r\n                      }\r\n                  }\r\n              );\r\n    };\r\n    t.prototype.playEffectMusicRestrict = function (t, e) {\r\n        var i = $countDownUtil.CountDownUtil.time;\r\n        if (!(this.timeRecord.has(t) && i - this.timeRecord.get(t) < e)) {\r\n            this.playEffectMusic(t);\r\n            this.timeRecord.set(t, i);\r\n        }\r\n    };\r\n    t.prototype.stopEffectMusic = function (t) {\r\n        if (this.musicMap.has(t)) {\r\n            $audioPlayer.default.stopEffect(this.musicMap.get(t));\r\n        }\r\n    };\r\n    t.prototype.stopAllEffectMusic = function () {\r\n        $audioPlayer.default.stopAllEffect();\r\n    };\r\n    t.prototype.clearLoopEffect = function () {\r\n        this.currLoopMusic.clear();\r\n    };\r\n    t.prototype.playLoopEffect = function (t) {\r\n        if (!this.currLoopMusic.has(t)) {\r\n            this.playEffectMusic(t, !0);\r\n        }\r\n    };\r\n    t.prototype.stopLoopEffect = function (t) {\r\n        if (this.currLoopMusic.has(t)) {\r\n            this.stopEffectMusic(t);\r\n            this.currLoopMusic.delete(t);\r\n        }\r\n    };\r\n    t.prototype.pauseAllEffectMusic = function () {\r\n        $audioPlayer.default.pauseAllEffect();\r\n    };\r\n    t.prototype.resumeAllEffectMusic = function () {\r\n        $audioPlayer.default.resumeAllEffect();\r\n    };\r\n    t.prototype.releaseEffect = function (t) {\r\n        if (this.musicMap.has(t)) {\r\n            this.musicMap.get(t).decRef();\r\n        }\r\n    };\r\n    t.prototype.playBGM = function (t, e) {\r\n        if (void 0 === t) {\r\n            t = !0;\r\n        }\r\n        if (void 0 === e) {\r\n            e = \"\";\r\n        }\r\n        if (!(this.isMastering && t && this.isPlayingBgm)) {\r\n            this.stopAllEffectMusic();\r\n            $audioPlayer.default.stopAllMusic();\r\n            this.isMastering = t;\r\n            t ? this.playMusic(\"BGM\") : this.playMusic(e);\r\n            this.isPlayingBgm = !0;\r\n        }\r\n    };\r\n    t.prototype.stopBGM = function () {\r\n        this.isPlayingBgm = !1;\r\n        $audioPlayer.default.stopAll();\r\n    };\r\n    t.instance = new t();\r\n    return t;\r\n})();\r\nexports.default = a;\r\n"]}