{"version":3,"sources":["assets\\game_script\\scripts\\WeeklyPassView.js"],"names":["o","$list","require","$popupView","$platform","$aD","$adService","$configContext","$weekCardService","$weeklyPassItem","h","cc","_decorator","m","ccclass","y","property","g","t","e","apply","arguments","page1","page2","list","btnAd","__extends","prototype","onResetView","active","Ins","isLock","numItems","instance","weekCardConfigs","length","getComponentInChildren","Label","string","weekCardInfo","lockNum","addEvent","on","clickAd","removeEvent","off","refresh","renderItem","i","getComponent","render","showRewardedVideo","Platform","currPlatForm","PlatformEnum","TOU_TIAO","toutiao","report","unlock","__decorate","Node","PopupView","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $list = require(\"./List\");\r\nvar $popupView = require(\"./PopupView\");\r\nvar $platform = require(\"./Platform\");\r\nvar $aD = require(\"./AD\");\r\nvar $adService = require(\"./AdService\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $weekCardService = require(\"./WeekCardService\");\r\nvar $weeklyPassItem = require(\"./WeeklyPassItem\");\r\nvar h = cc._decorator;\r\nvar m = h.ccclass;\r\nvar y = h.property;\r\nvar g = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.page1 = null;\r\n        e.page2 = null;\r\n        e.list = null;\r\n        e.btnAd = null;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.onResetView = function () {\r\n        this.page1.active = !$weekCardService.default.Ins.isLock();\r\n        this.page2.active = $weekCardService.default.Ins.isLock();\r\n        if (this.page2.active) {\r\n            this.list.numItems = $configContext.default.instance.weekCardConfigs.length;\r\n        }\r\n        this.btnAd.getComponentInChildren(cc.Label).string =\r\n            \"领取(\" + $weekCardService.default.Ins.weekCardInfo.lockNum + \"/5)\";\r\n    };\r\n    e.prototype.addEvent = function () {\r\n        this.btnAd.on(\"click\", this.clickAd, this);\r\n    };\r\n    e.prototype.removeEvent = function () {\r\n        this.btnAd.off(\"click\", this.clickAd, this);\r\n    };\r\n    e.prototype.refresh = function () {\r\n        this.page1.active = !$weekCardService.default.Ins.isLock();\r\n        this.page2.active = $weekCardService.default.Ins.isLock();\r\n        if (this.page2.active) {\r\n            this.list.numItems = $configContext.default.instance.weekCardConfigs.length;\r\n        }\r\n        this.btnAd.getComponentInChildren(cc.Label).string =\r\n            \"领取(\" + $weekCardService.default.Ins.weekCardInfo.lockNum + \"/5)\";\r\n    };\r\n    e.prototype.renderItem = function (t, e) {\r\n        var i = $configContext.default.instance.weekCardConfigs[e];\r\n        t.getComponent($weeklyPassItem.default).render(i);\r\n    };\r\n    e.prototype.clickAd = function () {\r\n        var t = this;\r\n        $adService.default.Ins.showRewardedVideo(function () {\r\n            if ($platform.Platform.currPlatForm === $platform.PlatformEnum.TOU_TIAO) {\r\n                $aD.default.toutiao.report(\"week_reward\");\r\n            }\r\n            $weekCardService.default.Ins.unlock();\r\n            t.refresh();\r\n        });\r\n    };\r\n    __decorate([y(cc.Node)], e.prototype, \"page1\", void 0);\r\n    __decorate([y(cc.Node)], e.prototype, \"page2\", void 0);\r\n    __decorate([y($list.default)], e.prototype, \"list\", void 0);\r\n    __decorate([y(cc.Node)], e.prototype, \"btnAd\", void 0);\r\n    return __decorate([m], e);\r\n})($popupView.PopupView);\r\nexports.default = g;\r\n"]}