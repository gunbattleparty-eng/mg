{"version":3,"sources":["assets\\game_script\\scripts\\StartView.js"],"names":["o","exports","MenuType","r","a","$assetsMap","require","$resManager","$eventManager","$popupManager","$uIManager","$uIView","$guide","$remoteAudio","$configContext","$equipmentContext","$globalParam","$localEventName","$onlineContext","$roleContext","$shopContext","$skillContext","$taskContext","$userDataContext","$gameSkillInfo","$rankService","$itemView","$shopView","x","cc","_decorator","O","ccclass","L","property","Shop","Role","Battle","Skill","ALL","E","t","e","apply","arguments","btnLayers","content","nodePool","currType","skillInfo","__extends","prototype","onResetView","i","isChangeLoding","UIManager","instance","changeLoadingView","AssetsMap","ResourcesBundle","prefabs","assetsList","GameLoadingView","uiParam","param","type","ext","skip","isUpgrade","PopupManager","open","PopUpBundles","UpgradeView","count","n","renderDot","Ins","isEndGuide","isFirstComeStart","reportRankData","RankTypeEnum","Level","isSign","getAdSwitch2","NewPackView","ins","packList","length","guideEnd","self","startGuideTest","children","addEvent","on","CHOOSE_SKILL","testChooseSKill","MENU","RENDER_DOT","clickItem","removeEvent","off","playEffectMusic","getComponent","dragonBones","ArmatureDisplay","playAnimation","getItem","node","unuse","parent","currItemIndex","isNew","reuse","renderItems","addToScreen","playBGM","isStartView","removeToScreen","destroy","indexOf","showToast","ResManager","get","StartBundles","RoleView","instantiate","BattleView","SkillView","ShopView","checkEquipUpgrade","isCanComposeGem","hasGunSkinDot","hasPlayerSkinDot","active","hasRobotSkinDot","checkAllSKillUpgrade","hasRedDot","getSweepTime","getCurrConfigIndex","hasResRedDot","hasDiamondRedDot","GameSkillInfo","chooseSkill","__decorate","Node","UIView"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nexports.MenuType = void 0;\r\nvar r;\r\nvar a;\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resManager = require(\"./ResManager\");\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $popupManager = require(\"./PopupManager\");\r\nvar $uIManager = require(\"./UIManager\");\r\nvar $uIView = require(\"./UIView\");\r\nvar $guide = require(\"./Guide\");\r\nvar $remoteAudio = require(\"./RemoteAudio\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $equipmentContext = require(\"./EquipmentContext\");\r\nvar $globalParam = require(\"./GlobalParam\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $onlineContext = require(\"./OnlineContext\");\r\nvar $roleContext = require(\"./RoleContext\");\r\nvar $shopContext = require(\"./ShopContext\");\r\nvar $skillContext = require(\"./SkillContext\");\r\nvar $taskContext = require(\"./TaskContext\");\r\nvar $userDataContext = require(\"./UserDataContext\");\r\nvar $gameSkillInfo = require(\"./GameSkillInfo\");\r\nvar $rankService = require(\"./RankService\");\r\nvar $itemView = require(\"./ItemView\");\r\nvar $shopView = require(\"./ShopView\");\r\nvar x = cc._decorator;\r\nvar O = x.ccclass;\r\nvar L = x.property;\r\n(a = r = exports.MenuType || (exports.MenuType = {}))[(a.Shop = 0)] = \"Shop\";\r\na[(a.Role = 1)] = \"Role\";\r\na[(a.Battle = 2)] = \"Battle\";\r\na[(a.Skill = 3)] = \"Skill\";\r\na[(a.ALL = 4)] = \"ALL\";\r\nvar E = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.btnLayers = null;\r\n        e.content = null;\r\n        e.nodePool = [];\r\n        e.currType = r.Battle;\r\n        e.skillInfo = null;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.onResetView = function () {\r\n        var t;\r\n        var e;\r\n        var i;\r\n        if (!$globalParam.default.isChangeLoding) {\r\n            $globalParam.default.isChangeLoding = !0;\r\n            $uIManager.UIManager.instance.changeLoadingView(\r\n                $assetsMap.AssetsMap.ResourcesBundle.prefabs.assetsList.GameLoadingView\r\n            );\r\n        }\r\n        var o = null === (t = this.uiParam.param) || void 0 === t ? void 0 : t.type;\r\n        if (void 0 !== o) {\r\n            (null === (e = this.uiParam.param) || void 0 === e ? void 0 : e.ext)\r\n                ? this.skip(o, this.uiParam.param.ext)\r\n                : this.skip(o);\r\n        }\r\n        if (null === (i = this.uiParam.param) || void 0 === i ? void 0 : i.isUpgrade) {\r\n            $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.UpgradeView, {\r\n                count: 1\r\n            });\r\n        }\r\n        for (var n = 0; n < 4; n++) {\r\n            this.renderDot(n);\r\n        }\r\n        $userDataContext.default.Ins.isEndGuide\r\n            ? $globalParam.default.isFirstComeStart ||\r\n              ($rankService.default.instance.reportRankData($rankService.RankTypeEnum.Level),\r\n              ($globalParam.default.isFirstComeStart = !0),\r\n              !$userDataContext.default.Ins.isSign() &&\r\n                  $configContext.default.instance.getAdSwitch2(\"open_shop_diamond\") &&\r\n                  $popupManager.PopupManager.instance.open(\r\n                      $assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.NewPackView\r\n                  ))\r\n            : 0 === $roleContext.default.ins.packList.length\r\n            ? $userDataContext.default.Ins.guideEnd()\r\n            : $guide.default.self.startGuideTest(this.btnLayers.children[1], \"点击角色\");\r\n    };\r\n    e.prototype.addEvent = function () {\r\n        $eventManager.default.on($localEventName.default.CHOOSE_SKILL, this.testChooseSKill, this);\r\n        $eventManager.default.on($localEventName.default.MENU, this.skip, this);\r\n        $eventManager.default.on($localEventName.default.RENDER_DOT, this.renderDot, this);\r\n        for (var t = 0; t < this.btnLayers.children.length; t++) {\r\n            this.btnLayers.children[t].on(\"click\", this.clickItem, this);\r\n        }\r\n    };\r\n    e.prototype.removeEvent = function () {\r\n        $eventManager.default.off($localEventName.default.CHOOSE_SKILL, this.testChooseSKill, this);\r\n        $eventManager.default.off($localEventName.default.MENU, this.skip, this);\r\n        $eventManager.default.off($localEventName.default.RENDER_DOT, this.renderDot, this);\r\n        for (var t = 0; t < this.btnLayers.children.length; t++) {\r\n            this.btnLayers.children[t].off(\"click\", this.clickItem, this);\r\n        }\r\n    };\r\n    e.prototype.skip = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = -1;\r\n        }\r\n        this.renderDot(t);\r\n        if (t !== this.currType) {\r\n            $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n            this.btnLayers.children[this.currType].children[0]\r\n                .getComponent(dragonBones.ArmatureDisplay)\r\n                .playAnimation(\"stand\", 0);\r\n            this.btnLayers.children[t].children[0].getComponent(dragonBones.ArmatureDisplay).playAnimation(\"on\", 0);\r\n            var i = this.getItem(t);\r\n            if (i.node) {\r\n                this.nodePool[this.currType] = this.content.children[0];\r\n                this.content.children[0].getComponent($itemView.default).unuse();\r\n                this.content.children[0].parent = null;\r\n                i.node.parent = this.content;\r\n                this.currType = t;\r\n            }\r\n            if (-1 !== e) {\r\n                i.node.getComponent($shopView.default).currItemIndex = e - 1;\r\n            }\r\n            if (!i.isNew) {\r\n                i.node.getComponent($itemView.default).reuse();\r\n            }\r\n        } else {\r\n            if (-1 !== e) {\r\n                var o = this.content.children[0].getComponent($shopView.default);\r\n                o.currItemIndex = e - 1;\r\n                o.renderItems();\r\n            }\r\n        }\r\n    };\r\n    e.prototype.addToScreen = function () {\r\n        $remoteAudio.default.instance.playBGM();\r\n        $globalParam.default.isStartView = !0;\r\n    };\r\n    e.prototype.removeToScreen = function () {\r\n        $globalParam.default.isStartView = !1;\r\n        for (var t = 0; t < this.nodePool.length; t++) {\r\n            if (this.nodePool[t]) {\r\n                this.nodePool[t].destroy();\r\n            }\r\n        }\r\n        this.nodePool.length = 0;\r\n    };\r\n    e.prototype.clickItem = function (t) {\r\n        var e = this.btnLayers.children.indexOf(t.node);\r\n        if (4 === e) {\r\n            return $uIManager.UIManager.instance.showToast(\"敬请期待\");\r\n        }\r\n        this.skip(e);\r\n    };\r\n    e.prototype.getItem = function (t) {\r\n        var e = {\r\n            node: null,\r\n            isNew: !1\r\n        };\r\n        e.isNew = !0;\r\n        if (this.nodePool[t]) {\r\n            e.node = this.nodePool[t];\r\n            this.nodePool[t] = null;\r\n            e.isNew = !1;\r\n        } else {\r\n            if (t === r.Role) {\r\n                var i = $resManager.ResManager.instance.get(\r\n                    $assetsMap.AssetsMap.StartBundles.prefabs.assetsList.RoleView\r\n                );\r\n                e.node = cc.instantiate(i);\r\n            } else {\r\n                t === r.Battle\r\n                    ? ((i = $resManager.ResManager.instance.get(\r\n                          $assetsMap.AssetsMap.StartBundles.prefabs.assetsList.BattleView\r\n                      )),\r\n                      (e.node = cc.instantiate(i)))\r\n                    : t === r.Skill\r\n                    ? ((i = $resManager.ResManager.instance.get(\r\n                          $assetsMap.AssetsMap.StartBundles.prefabs.assetsList.SkillView\r\n                      )),\r\n                      (e.node = cc.instantiate(i)))\r\n                    : t === r.Shop &&\r\n                      ((i = $resManager.ResManager.instance.get(\r\n                          $assetsMap.AssetsMap.StartBundles.prefabs.assetsList.ShopView\r\n                      )),\r\n                      (e.node = cc.instantiate(i)));\r\n            }\r\n        }\r\n        return e;\r\n    };\r\n    e.prototype.renderDot = function (t) {\r\n        var e;\r\n        var i = !1;\r\n        if (!(t !== r.ALL && t !== r.Role)) {\r\n            i =\r\n                $equipmentContext.default.Ins.checkEquipUpgrade() ||\r\n                $roleContext.default.ins.isCanComposeGem() ||\r\n                $roleContext.default.ins.hasGunSkinDot() ||\r\n                $roleContext.default.ins.hasPlayerSkinDot();\r\n            (e = this.btnLayers.children[r.Role]).children[e.children.length - 1].active = i;\r\n        }\r\n        if (!(t !== r.ALL && t !== r.Skill)) {\r\n            i = $roleContext.default.ins.hasRobotSkinDot() || $skillContext.default.Ins.checkAllSKillUpgrade();\r\n            (e = this.btnLayers.children[r.Skill]).children[e.children.length - 1].active = i;\r\n        }\r\n        if (!(t !== r.ALL && t !== r.Battle)) {\r\n            i =\r\n                $onlineContext.default.Ins.hasRedDot() ||\r\n                $taskContext.default.Ins.hasRedDot() ||\r\n                !$userDataContext.default.Ins.isSign() ||\r\n                $userDataContext.default.Ins.getSweepTime() >= 8 ||\r\n                -1 === $userDataContext.default.Ins.getCurrConfigIndex();\r\n            (e = this.btnLayers.children[r.Battle]).children[e.children.length - 1].active = i;\r\n        }\r\n        if (!(t !== r.ALL && t !== r.Shop)) {\r\n            i = $shopContext.default.Ins.hasResRedDot() || $shopContext.default.Ins.hasDiamondRedDot();\r\n            (e = this.btnLayers.children[r.Shop]).children[e.children.length - 1].active = i;\r\n        }\r\n    };\r\n    e.prototype.testChooseSKill = function (t) {\r\n        if (!this.skillInfo) {\r\n            this.skillInfo = new $gameSkillInfo.GameSkillInfo();\r\n        }\r\n        this.skillInfo.chooseSkill(t);\r\n    };\r\n    __decorate([L(cc.Node)], e.prototype, \"btnLayers\", void 0);\r\n    __decorate([L(cc.Node)], e.prototype, \"content\", void 0);\r\n    return __decorate([O], e);\r\n})($uIView.UIView);\r\nexports.default = E;\r\n"]}