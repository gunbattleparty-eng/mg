{"version":3,"sources":["assets\\game_script\\scripts\\RBullet_4.js"],"names":["o","$object","require","$countDownUtil","$util","$gameContext","$gameSkillInfo","$enemyStatus","$baseBullet","f","cc","_decorator","h","ccclass","m","property","Vec3","y","t","e","apply","arguments","buttleType","BulletType","r_bullet_4","timeLeft","__extends","prototype","initButtle","speed","ins","skillInfo","robotParam","call","atk","Math","ceil","skillParam","skillAtk","Skill4Param","FINAL","isUse","velocity","set","multiplyScalar","updateFrame","removeSelf","move","getPosition","i","x","z","n","dirConverAngle","setAngle","winSize","height","s","getRandomEnemy","sub","normalize","setPosition","onTrigger","object","Trigger","enter","sufferAtk","skillSpecialitys","id","type","EnemyDebuffType","FREEZE","value","sufferDebuff","stay","CountDownUtil","time","getLastAtkTime","gameRatio","setLastAtkTime","lerpAngleRes","v2","signAngle","PI","node","angle","abs","misc","lerp","__decorate","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $object = require(\"./Object\");\r\nvar $countDownUtil = require(\"./CountDownUtil\");\r\nvar $util = require(\"./Util\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $gameSkillInfo = require(\"./GameSkillInfo\");\r\nvar $enemyStatus = require(\"./EnemyStatus\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar f = cc._decorator;\r\nvar h = f.ccclass;\r\nvar m = (f.property, new cc.Vec3());\r\nvar y = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.buttleType = $baseBullet.BulletType.r_bullet_4;\r\n        e.timeLeft = 0;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.initButtle = function (e) {\r\n        this.speed = $gameContext.default.ins.skillInfo.robotParam[3];\r\n        t.prototype.initButtle.call(this, e, null);\r\n        this.atk = Math.ceil(\r\n            $gameContext.default.ins.skillInfo.robotParam[0] *\r\n                this.skillParam.skillAtk[$gameSkillInfo.Skill4Param.FINAL]\r\n        );\r\n        this.timeLeft = $gameContext.default.ins.skillInfo.robotParam[5];\r\n        this.isUse = !1;\r\n        if (e) {\r\n            this.velocity.set(e).multiplyScalar(this.speed);\r\n        }\r\n    };\r\n    e.prototype.updateFrame = function (t) {\r\n        if (!(this.timeLeft <= 0)) {\r\n            this.timeLeft -= t;\r\n            if (this.timeLeft <= 0) {\r\n                this.timeLeft = 0;\r\n                return this.removeSelf();\r\n            }\r\n            this.move(t);\r\n        }\r\n    };\r\n    e.prototype.move = function (t) {\r\n        var e = this.getPosition();\r\n        var i = this.velocity;\r\n        var o = !1;\r\n        m.x = e.x + i.x * t;\r\n        m.y = e.y + i.y * t;\r\n        m.z = e.z + i.z * t;\r\n        if (m.x < -310 || m.x > 310) {\r\n            m.x = e.x;\r\n            this.velocity.x = -this.velocity.x;\r\n            var n = $util.default.dirConverAngle(this.velocity);\r\n            this.setAngle(n);\r\n            o = !0;\r\n        }\r\n        if (m.y < -300 || m.y > cc.winSize.height / 2 - 50) {\r\n            m.y = e.y;\r\n            this.velocity.y = -this.velocity.y;\r\n            n = $util.default.dirConverAngle(this.velocity);\r\n            this.setAngle(n);\r\n            o = !0;\r\n        }\r\n        if (o) {\r\n            var s = $gameContext.default.ins.getRandomEnemy();\r\n            if (s) {\r\n                this.velocity = s.getPosition().sub(this.getPosition()).normalize();\r\n                this.velocity.multiplyScalar(this.speed);\r\n                n = $util.default.dirConverAngle(this.velocity);\r\n                this.setAngle(n);\r\n            }\r\n        }\r\n        this.setPosition(m);\r\n    };\r\n    e.prototype.onTrigger = function (t, e) {\r\n        if (!this.isUse) {\r\n            var i = t.object;\r\n            if (e == $object.Trigger.enter) {\r\n                i.sufferAtk({\r\n                    skillSpecialitys: [],\r\n                    atk: this.atk\r\n                });\r\n                var o = {\r\n                    id: -1,\r\n                    type: $enemyStatus.EnemyDebuffType.FREEZE,\r\n                    timeLeft: $gameContext.default.ins.skillInfo.robotParam[4],\r\n                    value: -1\r\n                };\r\n                i.sufferDebuff(o);\r\n            } else {\r\n                if (e === $object.Trigger.stay) {\r\n                    if (\r\n                        $countDownUtil.CountDownUtil.time - i.getLastAtkTime(5) <=\r\n                        $gameContext.default.ins.skillInfo.robotParam[6] / $gameContext.default.ins.gameRatio\r\n                    ) {\r\n                        return;\r\n                    }\r\n                    i.setLastAtkTime(5, $countDownUtil.CountDownUtil.time);\r\n                    i.sufferAtk({\r\n                        skillSpecialitys: [],\r\n                        atk: this.atk\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    };\r\n    e.prototype.lerpAngleRes = function (t) {\r\n        var e = (180 * cc.v2(0, 1).signAngle(cc.v2(t))) / Math.PI;\r\n        e = e < 0 ? 360 + e : e;\r\n        var i = this.node.angle < 0 ? 360 + this.node.angle : this.node.angle;\r\n        i %= 360;\r\n        if (Math.abs(i - e) <= 10) {\r\n            return e;\r\n        }\r\n        var o = i - e;\r\n        o = o < 0 ? 360 + o : o;\r\n        var n = e - i;\r\n        n = n < 0 ? 360 + n : n;\r\n        var s = cc.misc.lerp(0, Math.abs(e - i), 0.1);\r\n        o < n ? (i -= s) : (i += s);\r\n        return i;\r\n    };\r\n    return __decorate([h], e);\r\n})($baseBullet.default);\r\nexports.default = y;\r\n"]}