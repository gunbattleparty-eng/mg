{"version":3,"sources":["assets\\game_script\\scripts\\Enemy_2.js"],"names":["o","$eventManager","require","$localEventName","$baseBullet","$gameContext","$baseEnemy","d","cc","_decorator","p","ccclass","f","property","t","e","apply","arguments","isAnim","isPulseLaserKill","__extends","prototype","initEnemy","i","call","statusManager","specialityAtkAdd","set","BulletSpeciality","fire","config","value","thunder","sufferAtk","bulletBuff","BulletBuff","not_split","dieAnim","ins","removeEnemy","isDie","splitAnim","debuffLayer","active","skin","off","dragonBones","EventObject","COMPLETE","timeScale","gameRatio","playAnimation","once","getPosition","x","send","CREATE_ENEMY","v3","y","Avoid_injury","lot","unscheduleAllCallbacks","monster_type","bossChooseSKill","removeSelf","__decorate","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $baseEnemy = require(\"./BaseEnemy\");\r\nvar d = cc._decorator;\r\nvar p = d.ccclass;\r\nvar f =\r\n    (d.property,\r\n    (function (t) {\r\n        function e() {\r\n            var e = (null !== t && t.apply(this, arguments)) || this;\r\n            e.isAnim = !1;\r\n            e.isPulseLaserKill = !1;\r\n            return e;\r\n        }\r\n        __extends(e, t);\r\n        e.prototype.initEnemy = function (e, i, o) {\r\n            if (void 0 === o) {\r\n                o = 0;\r\n            }\r\n            t.prototype.initEnemy.call(this, e, i, o);\r\n            this.isPulseLaserKill = !1;\r\n            this.isAnim = !1;\r\n            this.statusManager.specialityAtkAdd.set($baseBullet.BulletSpeciality.fire, this.config.value[0]);\r\n            this.statusManager.specialityAtkAdd.set($baseBullet.BulletSpeciality.thunder, this.config.value[1]);\r\n        };\r\n        e.prototype.sufferAtk = function (e) {\r\n            return (\r\n                !this.isAnim &&\r\n                !!t.prototype.sufferAtk.call(this, e) &&\r\n                (e.bulletBuff && e.bulletBuff === $baseBullet.BulletBuff.not_split && (this.isPulseLaserKill = !0), !0)\r\n            );\r\n        };\r\n        e.prototype.dieAnim = function () {\r\n            $gameContext.default.ins.removeEnemy(this);\r\n            this.isAnim = !0;\r\n            this.statusManager.isDie = !0;\r\n            return this.isPulseLaserKill ? t.prototype.dieAnim.call(this) : (this.splitAnim(), !1);\r\n        };\r\n        e.prototype.splitAnim = function () {\r\n            var t = this;\r\n            this.debuffLayer.active = !1;\r\n            this.skin.off(dragonBones.EventObject.COMPLETE);\r\n            this.skin.timeScale = $gameContext.default.ins.gameRatio;\r\n            this.skin.playAnimation(\"fenlie\", 1);\r\n            this.skin.once(\r\n                dragonBones.EventObject.COMPLETE,\r\n                function () {\r\n                    if (t.getPosition().x - 40 >= -360) {\r\n                        $eventManager.default.send(\r\n                            $localEventName.default.CREATE_ENEMY,\r\n                            3,\r\n                            cc.v3(t.getPosition().x - 25, t.getPosition().y),\r\n                            t.Avoid_injury,\r\n                            t.lot\r\n                        );\r\n                    }\r\n                    if (t.getPosition().x + 40 < 360) {\r\n                        $eventManager.default.send(\r\n                            $localEventName.default.CREATE_ENEMY,\r\n                            3,\r\n                            cc.v3(t.getPosition().x + 25, t.getPosition().y),\r\n                            t.Avoid_injury,\r\n                            t.lot\r\n                        );\r\n                    }\r\n                    t.isAnim = !1;\r\n                    t.unscheduleAllCallbacks();\r\n                    if (!(2 !== t.config.monster_type && 3 !== t.config.monster_type)) {\r\n                        t.bossChooseSKill();\r\n                    }\r\n                    t.removeSelf();\r\n                },\r\n                this\r\n            );\r\n        };\r\n        return __decorate([p], e);\r\n    })($baseEnemy.default));\r\nexports.default = f;\r\n"]}