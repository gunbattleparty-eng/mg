
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/GemListItem.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'add5eSp01VOz458pHKwgBWT', 'GemListItem');
// game_script/scripts/GemListItem.js

"use strict";

var o;

var $assetsLoader = require("./AssetsLoader");

var $assetsMap = require("./AssetsMap");

var $resUtil = require("./ResUtil");

var $listItem = require("./ListItem");

var $popupManager = require("./PopupManager");

var $configContext = require("./ConfigContext");

var $equipmentContext = require("./EquipmentContext");

var $globalParam = require("./GlobalParam");

var h = cc._decorator;
var m = h.ccclass;
var y = h.property;

var g = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.gemIcon = null;
    e.partIcon = null;
    e.countLable = null;
    e.maskNode = null;
    e.lockNode = null;
    e.id = -1;
    return e;
  }

  __extends(e, t);

  e.prototype.render = function (t) {
    var e = this;

    if (this.id !== t.id) {
      $assetsLoader["default"].instance.loadRes($assetsMap.BundleNames.Public, ["/textures/gem/g" + t.part + "_" + t.grade, "/textures/gem/zb" + t.part, "/textures/gem/k" + t.grade], cc.SpriteFrame, null, function (t, i) {
        var o = i[0];

        if (o && cc.isValid(e.gemIcon)) {
          e.gemIcon.spriteFrame = $resUtil.ResUtil.assignWith(o, e.node);
          e.partIcon.spriteFrame = $resUtil.ResUtil.assignWith(i[1], e.node);
          e.node.children[1].getComponent(cc.Sprite).spriteFrame = $resUtil.ResUtil.assignWith(i[2], e.node);
        }
      });
    }

    this.id = t.id;
    this.countLable.string = t.num.toString();
    var i = $configContext["default"].instance.gemConfigs.find(function (e) {
      return e.id === t.id;
    });
    this.maskNode.active = $equipmentContext["default"].Ins.hasGemTypeByPart(t.part, i.SkillPool);
    this.lockNode.active = t.isLock;
  };

  e.prototype.start = function () {
    this.node.on(cc.Node.EventType.TOUCH_END, this.touchItem, this);
  };

  e.prototype.touchItem = function () {
    if (this.id !== $globalParam["default"].currGemIdInfo) {
      $globalParam["default"].currGemIdInfo = this.id;
      $popupManager.PopupManager.instance.closeAll();
      $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.GemInfoView, {
        gemId: this.id
      });
    }
  };

  __decorate([y(cc.Sprite)], e.prototype, "gemIcon", void 0);

  __decorate([y(cc.Sprite)], e.prototype, "partIcon", void 0);

  __decorate([y(cc.Label)], e.prototype, "countLable", void 0);

  __decorate([y(cc.Node)], e.prototype, "maskNode", void 0);

  __decorate([y(cc.Node)], e.prototype, "lockNode", void 0);

  return __decorate([m], e);
}($listItem["default"]);

exports["default"] = g;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXEdlbUxpc3RJdGVtLmpzIl0sIm5hbWVzIjpbIm8iLCIkYXNzZXRzTG9hZGVyIiwicmVxdWlyZSIsIiRhc3NldHNNYXAiLCIkcmVzVXRpbCIsIiRsaXN0SXRlbSIsIiRwb3B1cE1hbmFnZXIiLCIkY29uZmlnQ29udGV4dCIsIiRlcXVpcG1lbnRDb250ZXh0IiwiJGdsb2JhbFBhcmFtIiwiaCIsImNjIiwiX2RlY29yYXRvciIsIm0iLCJjY2NsYXNzIiwieSIsInByb3BlcnR5IiwiZyIsInQiLCJlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJnZW1JY29uIiwicGFydEljb24iLCJjb3VudExhYmxlIiwibWFza05vZGUiLCJsb2NrTm9kZSIsImlkIiwiX19leHRlbmRzIiwicHJvdG90eXBlIiwicmVuZGVyIiwiaW5zdGFuY2UiLCJsb2FkUmVzIiwiQnVuZGxlTmFtZXMiLCJQdWJsaWMiLCJwYXJ0IiwiZ3JhZGUiLCJTcHJpdGVGcmFtZSIsImkiLCJpc1ZhbGlkIiwic3ByaXRlRnJhbWUiLCJSZXNVdGlsIiwiYXNzaWduV2l0aCIsIm5vZGUiLCJjaGlsZHJlbiIsImdldENvbXBvbmVudCIsIlNwcml0ZSIsInN0cmluZyIsIm51bSIsInRvU3RyaW5nIiwiZ2VtQ29uZmlncyIsImZpbmQiLCJhY3RpdmUiLCJJbnMiLCJoYXNHZW1UeXBlQnlQYXJ0IiwiU2tpbGxQb29sIiwiaXNMb2NrIiwic3RhcnQiLCJvbiIsIk5vZGUiLCJFdmVudFR5cGUiLCJUT1VDSF9FTkQiLCJ0b3VjaEl0ZW0iLCJjdXJyR2VtSWRJbmZvIiwiUG9wdXBNYW5hZ2VyIiwiY2xvc2VBbGwiLCJvcGVuIiwiQXNzZXRzTWFwIiwiUG9wVXBCdW5kbGVzIiwicHJlZmFicyIsImFzc2V0c0xpc3QiLCJHZW1JbmZvVmlldyIsImdlbUlkIiwiX19kZWNvcmF0ZSIsIkxhYmVsIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFB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QU1NLENBQU4sQ0FBakI7QUFDSCxDQTNETyxDQTJETGQsU0FBUyxXQTNESixDQUFSOztBQTREQXNFLE9BQU8sV0FBUCxHQUFrQjFELENBQWxCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbztcclxudmFyICRhc3NldHNMb2FkZXIgPSByZXF1aXJlKFwiLi9Bc3NldHNMb2FkZXJcIik7XHJcbnZhciAkYXNzZXRzTWFwID0gcmVxdWlyZShcIi4vQXNzZXRzTWFwXCIpO1xyXG52YXIgJHJlc1V0aWwgPSByZXF1aXJlKFwiLi9SZXNVdGlsXCIpO1xyXG52YXIgJGxpc3RJdGVtID0gcmVxdWlyZShcIi4vTGlzdEl0ZW1cIik7XHJcbnZhciAkcG9wdXBNYW5hZ2VyID0gcmVxdWlyZShcIi4vUG9wdXBNYW5hZ2VyXCIpO1xyXG52YXIgJGNvbmZpZ0NvbnRleHQgPSByZXF1aXJlKFwiLi9Db25maWdDb250ZXh0XCIpO1xyXG52YXIgJGVxdWlwbWVudENvbnRleHQgPSByZXF1aXJlKFwiLi9FcXVpcG1lbnRDb250ZXh0XCIpO1xyXG52YXIgJGdsb2JhbFBhcmFtID0gcmVxdWlyZShcIi4vR2xvYmFsUGFyYW1cIik7XHJcbnZhciBoID0gY2MuX2RlY29yYXRvcjtcclxudmFyIG0gPSBoLmNjY2xhc3M7XHJcbnZhciB5ID0gaC5wcm9wZXJ0eTtcclxudmFyIGcgPSAoZnVuY3Rpb24gKHQpIHtcclxuICAgIGZ1bmN0aW9uIGUoKSB7XHJcbiAgICAgICAgdmFyIGUgPSAobnVsbCAhPT0gdCAmJiB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIHx8IHRoaXM7XHJcbiAgICAgICAgZS5nZW1JY29uID0gbnVsbDtcclxuICAgICAgICBlLnBhcnRJY29uID0gbnVsbDtcclxuICAgICAgICBlLmNvdW50TGFibGUgPSBudWxsO1xyXG4gICAgICAgIGUubWFza05vZGUgPSBudWxsO1xyXG4gICAgICAgIGUubG9ja05vZGUgPSBudWxsO1xyXG4gICAgICAgIGUuaWQgPSAtMTtcclxuICAgICAgICByZXR1cm4gZTtcclxuICAgIH1cclxuICAgIF9fZXh0ZW5kcyhlLCB0KTtcclxuICAgIGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdmFyIGUgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLmlkICE9PSB0LmlkKSB7XHJcbiAgICAgICAgICAgICRhc3NldHNMb2FkZXIuZGVmYXVsdC5pbnN0YW5jZS5sb2FkUmVzKFxyXG4gICAgICAgICAgICAgICAgJGFzc2V0c01hcC5CdW5kbGVOYW1lcy5QdWJsaWMsXHJcbiAgICAgICAgICAgICAgICBbXCIvdGV4dHVyZXMvZ2VtL2dcIiArIHQucGFydCArIFwiX1wiICsgdC5ncmFkZSwgXCIvdGV4dHVyZXMvZ2VtL3piXCIgKyB0LnBhcnQsIFwiL3RleHR1cmVzL2dlbS9rXCIgKyB0LmdyYWRlXSxcclxuICAgICAgICAgICAgICAgIGNjLlNwcml0ZUZyYW1lLFxyXG4gICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh0LCBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvICYmIGNjLmlzVmFsaWQoZS5nZW1JY29uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLmdlbUljb24uc3ByaXRlRnJhbWUgPSAkcmVzVXRpbC5SZXNVdGlsLmFzc2lnbldpdGgobywgZS5ub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5wYXJ0SWNvbi5zcHJpdGVGcmFtZSA9ICRyZXNVdGlsLlJlc1V0aWwuYXNzaWduV2l0aChpWzFdLCBlLm5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLm5vZGUuY2hpbGRyZW5bMV0uZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSAkcmVzVXRpbC5SZXNVdGlsLmFzc2lnbldpdGgoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpWzJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5ub2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlkID0gdC5pZDtcclxuICAgICAgICB0aGlzLmNvdW50TGFibGUuc3RyaW5nID0gdC5udW0udG9TdHJpbmcoKTtcclxuICAgICAgICB2YXIgaSA9ICRjb25maWdDb250ZXh0LmRlZmF1bHQuaW5zdGFuY2UuZ2VtQ29uZmlncy5maW5kKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlLmlkID09PSB0LmlkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMubWFza05vZGUuYWN0aXZlID0gJGVxdWlwbWVudENvbnRleHQuZGVmYXVsdC5JbnMuaGFzR2VtVHlwZUJ5UGFydCh0LnBhcnQsIGkuU2tpbGxQb29sKTtcclxuICAgICAgICB0aGlzLmxvY2tOb2RlLmFjdGl2ZSA9IHQuaXNMb2NrO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsIHRoaXMudG91Y2hJdGVtLCB0aGlzKTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS50b3VjaEl0ZW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaWQgIT09ICRnbG9iYWxQYXJhbS5kZWZhdWx0LmN1cnJHZW1JZEluZm8pIHtcclxuICAgICAgICAgICAgJGdsb2JhbFBhcmFtLmRlZmF1bHQuY3VyckdlbUlkSW5mbyA9IHRoaXMuaWQ7XHJcbiAgICAgICAgICAgICRwb3B1cE1hbmFnZXIuUG9wdXBNYW5hZ2VyLmluc3RhbmNlLmNsb3NlQWxsKCk7XHJcbiAgICAgICAgICAgICRwb3B1cE1hbmFnZXIuUG9wdXBNYW5hZ2VyLmluc3RhbmNlLm9wZW4oJGFzc2V0c01hcC5Bc3NldHNNYXAuUG9wVXBCdW5kbGVzLnByZWZhYnMuYXNzZXRzTGlzdC5HZW1JbmZvVmlldywge1xyXG4gICAgICAgICAgICAgICAgZ2VtSWQ6IHRoaXMuaWRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIF9fZGVjb3JhdGUoW3koY2MuU3ByaXRlKV0sIGUucHJvdG90eXBlLCBcImdlbUljb25cIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW3koY2MuU3ByaXRlKV0sIGUucHJvdG90eXBlLCBcInBhcnRJY29uXCIsIHZvaWQgMCk7XHJcbiAgICBfX2RlY29yYXRlKFt5KGNjLkxhYmVsKV0sIGUucHJvdG90eXBlLCBcImNvdW50TGFibGVcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW3koY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJtYXNrTm9kZVwiLCB2b2lkIDApO1xyXG4gICAgX19kZWNvcmF0ZShbeShjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcImxvY2tOb2RlXCIsIHZvaWQgMCk7XHJcbiAgICByZXR1cm4gX19kZWNvcmF0ZShbbV0sIGUpO1xyXG59KSgkbGlzdEl0ZW0uZGVmYXVsdCk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IGc7XHJcbiJdfQ==