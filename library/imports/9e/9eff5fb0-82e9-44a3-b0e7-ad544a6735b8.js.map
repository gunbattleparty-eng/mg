{"version":3,"sources":["assets\\game_script\\scripts\\Enemy_15.js"],"names":["o","$globalParam","require","$baseBullet","$enemyStatus","$enemy_2","$healthBar","d","cc","_decorator","p","ccclass","f","property","h","t","e","apply","arguments","healthBar","hpStatus","addTime","hpLeft","__extends","prototype","initEnemy","i","call","isPulseLaserKill","statusManager","specialityAtkAdd","clear","set","BulletSpeciality","fire","config","value","thunder","Math","ceil","initHp","init","hp","hp_num","sufferAttack","isDie","render","sufferAtk","isAnim","startDebuffAnim","EnemyDebuffType","RECOVER","schedule","recoverHp","id","isGamePuase","min","endDebuffAnim","unschedule","__decorate","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $globalParam = require(\"./GlobalParam\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar $enemyStatus = require(\"./EnemyStatus\");\r\nvar $enemy_2 = require(\"./Enemy_2\");\r\nvar $healthBar = require(\"./HealthBar\");\r\nvar d = cc._decorator;\r\nvar p = d.ccclass;\r\nvar f = d.property;\r\nvar h = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.healthBar = null;\r\n        e.hpStatus = 0;\r\n        e.addTime = 0;\r\n        e.hpLeft = 0;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.initEnemy = function (e, i, o) {\r\n        if (void 0 === o) {\r\n            o = 0;\r\n        }\r\n        t.prototype.initEnemy.call(this, e, i, o);\r\n        this.isPulseLaserKill = !1;\r\n        this.statusManager.specialityAtkAdd.clear();\r\n        this.statusManager.specialityAtkAdd.set($baseBullet.BulletSpeciality.fire, this.config.value[2]);\r\n        this.statusManager.specialityAtkAdd.set($baseBullet.BulletSpeciality.thunder, this.config.value[3]);\r\n        this.hpLeft = Math.ceil(this.statusManager.initHp * this.config.value[1]);\r\n        if (this.healthBar) {\r\n            this.healthBar.init(this.statusManager.hp, e.hp_num);\r\n        }\r\n    };\r\n    e.prototype.sufferAttack = function (e, i) {\r\n        if (this.statusManager.isDie) {\r\n            return !1;\r\n        }\r\n        var o = t.prototype.sufferAttack.call(this, e, i);\r\n        if (this.healthBar) {\r\n            this.healthBar.render(this.statusManager.hp);\r\n        }\r\n        return o;\r\n    };\r\n    e.prototype.sufferAtk = function (e) {\r\n        return (\r\n            !this.isAnim &&\r\n            (0 === this.hpStatus &&\r\n                ((this.hpStatus = 1),\r\n                this.startDebuffAnim($enemyStatus.EnemyDebuffType.RECOVER),\r\n                this.schedule(this.recoverHp, 1)),\r\n            !!t.prototype.sufferAtk.call(this, e) && (100 === e.id && (this.isPulseLaserKill = !0), !0))\r\n        );\r\n    };\r\n    e.prototype.recoverHp = function () {\r\n        if (!$globalParam.default.isGamePuase) {\r\n            var t = this.statusManager.initHp - this.statusManager.hp;\r\n            if (0 !== t) {\r\n                t = Math.min(t, this.hpLeft);\r\n                this.hpLeft -= t;\r\n                this.addTime--;\r\n                if (this.addTime <= 0 || this.hpLeft <= 0) {\r\n                    this.hpStatus = 2;\r\n                }\r\n                if (2 === this.hpStatus) {\r\n                    this.endDebuffAnim($enemyStatus.EnemyDebuffType.RECOVER);\r\n                    this.unschedule(this.recoverHp);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    __decorate([f($healthBar.default)], e.prototype, \"healthBar\", void 0);\r\n    return __decorate([p], e);\r\n})($enemy_2.default);\r\nexports.default = h;\r\n"]}