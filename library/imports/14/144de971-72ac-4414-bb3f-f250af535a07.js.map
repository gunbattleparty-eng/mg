{"version":3,"sources":["assets\\game_script\\scripts\\Enemy_4.js"],"names":["o","$seedUtil","require","$globalParam","$baseBullet","$baseEnemy","$enemyStatus","d","cc","_decorator","p","ccclass","f","property","Vec3","h","t","e","apply","arguments","px","isTrigger","initSpeed","__extends","prototype","clearStatus","call","initEnemy","i","statusManager","specialityAtkAdd","set","BulletSpeciality","ice","config","value","move","node","zIndex","Math","floor","residueDis","y","getPosition","n","velocity","x","z","clearDebuff","EnemyDebuffType","BACK","doorY","setPosition","caculateVelocity","probability","tryRecoverSpeed","scheduleOnce","closeSpeed","__decorate","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $seedUtil = require(\"./SeedUtil\");\r\nvar $globalParam = require(\"./GlobalParam\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar $baseEnemy = require(\"./BaseEnemy\");\r\nvar $enemyStatus = require(\"./EnemyStatus\");\r\nvar d = cc._decorator;\r\nvar p = d.ccclass;\r\nvar f = (d.property, new cc.Vec3());\r\nvar h = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.px = 0;\r\n        e.isTrigger = !1;\r\n        e.initSpeed = 0;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.clearStatus = function (e) {\r\n        t.prototype.clearStatus.call(this, e);\r\n        this.px = 0;\r\n        this.isTrigger = !1;\r\n    };\r\n    e.prototype.initEnemy = function (e, i, o) {\r\n        if (void 0 === o) {\r\n            o = 0;\r\n        }\r\n        t.prototype.initEnemy.call(this, e, i, o);\r\n        this.statusManager.specialityAtkAdd.set($baseBullet.BulletSpeciality.ice, this.config.value[0]);\r\n    };\r\n    e.prototype.move = function (e) {\r\n        var i = this;\r\n        this.node.zIndex = 5e3 - Math.floor(this.residueDis);\r\n        this.residueDis = Math.floor(this.node.y + 400);\r\n        var o = this.getPosition();\r\n        var n = this.velocity;\r\n        f.x = o.x + n.x * e;\r\n        f.y = o.y + n.y * e;\r\n        f.z = o.z + n.z * e;\r\n        if (f.y >= 720 && this.velocity.y > 0) {\r\n            this.statusManager.clearDebuff($enemyStatus.EnemyDebuffType.BACK);\r\n            return void (this.velocity.y = -1);\r\n        }\r\n        if (f.y < $globalParam.default.doorY && n.y < 0) {\r\n            f.y = $globalParam.default.doorY;\r\n        }\r\n        if (f.x < -360) {\r\n            f.x = -360;\r\n        }\r\n        if (f.x > 360) {\r\n            f.x = 360;\r\n        }\r\n        this.setPosition(f);\r\n        t.prototype.caculateVelocity.call(this);\r\n        this.px += -n.y * e;\r\n        if (this.px >= 500 && !this.isTrigger) {\r\n            this.isTrigger = !0;\r\n            if ($seedUtil.default.probability(100 * this.config.value[1])) {\r\n                this.initSpeed = this.statusManager.initSpeed;\r\n                this.statusManager.initSpeed = Math.floor(this.statusManager.initSpeed * (1 + this.config.value[2]));\r\n                this.statusManager.tryRecoverSpeed();\r\n                this.scheduleOnce(function () {\r\n                    i.closeSpeed();\r\n                }, this.config.value[3]);\r\n            }\r\n        }\r\n    };\r\n    e.prototype.closeSpeed = function () {\r\n        this.statusManager.initSpeed = this.initSpeed;\r\n        this.statusManager.tryRecoverSpeed();\r\n    };\r\n    return __decorate([p], e);\r\n})($baseEnemy.default);\r\nexports.default = h;\r\n"]}