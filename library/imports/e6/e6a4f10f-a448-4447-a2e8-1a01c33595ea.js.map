{"version":3,"sources":["assets\\game_script\\scripts\\ResManager.js"],"names":["exports","ResManager","$assetsLoader","require","l","t","assetsMap","Map","bundleCacheRecord","prototype","getAssets","hasAssest","get","console","log","has","hasBundleLoadedAssets","e","warn","i","o","length","isLoaded","putAssets","error","bundle","assetsType","path","set","push","instance","getRes","isBundleLoaded","cc","assetManager","getBundle","isResLoaded","releaseBundle","releaseAll","forEach","loadBundles","__awaiter","s","r","c","__generator","u","label","n","loadBundleSync","sent","loadArray","d","p","f","includes","toString","size","h","preLoadRes","a","__values","next","done","m","__read","value","call","loadResSync"],"mappings":"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","sourceRoot":"/","sourcesContent":["exports.ResManager = void 0;\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar l = (function () {\r\n    function t() {\r\n        this.assetsMap = new Map();\r\n        this.bundleCacheRecord = new Map();\r\n    }\r\n    t.prototype.getAssets = function (t) {\r\n        return this.hasAssest(t) ? this.assetsMap.get(t) : (console.log(\"资源不存在\", t), null);\r\n    };\r\n    t.prototype.hasAssest = function (t) {\r\n        return this.assetsMap.has(t);\r\n    };\r\n    t.prototype.hasBundleLoadedAssets = function (t) {\r\n        var e = !0;\r\n        if (!this.bundleCacheRecord.has(t)) {\r\n            console.warn(\"Bundle 不存在\", t);\r\n            return !0;\r\n        }\r\n        var i = this.bundleCacheRecord.get(t);\r\n        for (var o = 0; o < i.length; o++) {\r\n            if (!i[o].isLoaded) {\r\n                e = !1;\r\n                break;\r\n            }\r\n        }\r\n        return e;\r\n    };\r\n    t.prototype.putAssets = function (t, e, i) {\r\n        if (this.hasAssest(i)) {\r\n            return console.error(\"资源名称重复，请勿重复使用名称,\", i);\r\n        }\r\n        var o = {\r\n            bundle: t,\r\n            assetsType: e,\r\n            path: i,\r\n            isLoaded: !1\r\n        };\r\n        this.assetsMap.set(i, o);\r\n        if (!this.bundleCacheRecord.has(t)) {\r\n            this.bundleCacheRecord.set(t, []);\r\n        }\r\n        this.bundleCacheRecord.get(t).push(o);\r\n    };\r\n    t.prototype.get = function (t) {\r\n        var e = this.getAssets(t);\r\n        return e ? $assetsLoader.default.instance.getRes(e.bundle, t, e.assetsType) : null;\r\n    };\r\n    t.prototype.isBundleLoaded = function (t) {\r\n        return !!cc.assetManager.getBundle(t);\r\n    };\r\n    t.prototype.isResLoaded = function (t) {\r\n        return !!this.assetsMap.has(t) && this.assetsMap.get(t).isLoaded;\r\n    };\r\n    t.prototype.releaseBundle = function (t) {\r\n        if (this.isBundleLoaded(t)) {\r\n            cc.assetManager.getBundle(t).releaseAll();\r\n            this.assetsMap.forEach(function (e) {\r\n                if (e.bundle === t) {\r\n                    e.isLoaded = !1;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    t.prototype.loadBundles = function (t, e, i) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var o;\r\n            var s;\r\n            var r;\r\n            var l;\r\n            var c;\r\n            return __generator(this, function (u) {\r\n                switch (u.label) {\r\n                    case 0:\r\n                        for (o = [], c = 0; c < t.length; c++) {\r\n                            if (!cc.assetManager.getBundle(t[c])) {\r\n                                o.push(t[c]);\r\n                            }\r\n                        }\r\n                        if (0 === o.length) {\r\n                            if (i) {\r\n                                i();\r\n                            }\r\n                            return [2];\r\n                        }\r\n                        s = o.length;\r\n                        r = 0;\r\n                        l = function (t) {\r\n                            return __generator(this, function (n) {\r\n                                switch (n.label) {\r\n                                    case 0:\r\n                                        return [\r\n                                            4,\r\n                                            $assetsLoader.default.instance.loadBundleSync(\r\n                                                o[t],\r\n                                                function (i) {\r\n                                                    e((t + i) / s);\r\n                                                },\r\n                                                function () {\r\n                                                    if (++r >= s) {\r\n                                                        console.log(o, \"bundle加载完成\");\r\n                                                        if (i) {\r\n                                                            i();\r\n                                                        }\r\n                                                    }\r\n                                                }\r\n                                            )\r\n                                        ];\r\n                                    case 1:\r\n                                        n.sent();\r\n                                        return [2];\r\n                                }\r\n                            });\r\n                        };\r\n                        c = 0;\r\n                        u.label = 1;\r\n                    case 1:\r\n                        return c < o.length ? [5, l(c)] : [3, 4];\r\n                    case 2:\r\n                        u.sent();\r\n                        u.label = 3;\r\n                    case 3:\r\n                        c++;\r\n                        return [3, 1];\r\n                    case 4:\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    t.prototype.loadArray = function (t, e, i, l, c) {\r\n        if (void 0 === l) {\r\n            l = !1;\r\n        }\r\n        if (void 0 === c) {\r\n            c = this.assetsMap;\r\n        }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var o;\r\n            var u;\r\n            var d;\r\n            var p;\r\n            var f;\r\n            return __generator(this, function () {\r\n                o = new Map();\r\n                u = new Map();\r\n                d = 0;\r\n                c.forEach(function (e) {\r\n                    if (t.includes(e.bundle)) {\r\n                        if (!o.has(e.bundle)) {\r\n                            o.set(e.bundle, new Map());\r\n                        }\r\n                        var i = o.get(e.bundle);\r\n                        if (!i.has(e.assetsType)) {\r\n                            i.set(e.assetsType, []);\r\n                            var n = e.bundle + e.assetsType.toString();\r\n                            u.set(n, 0);\r\n                            d++;\r\n                        }\r\n                        i.get(e.assetsType).push(e.path);\r\n                    }\r\n                });\r\n                p = u.size;\r\n                f = 0;\r\n                o.forEach(function (o, n) {\r\n                    o.forEach(function (o, h) {\r\n                        l\r\n                            ? $assetsLoader.default.instance.preLoadRes(\r\n                                  n,\r\n                                  o,\r\n                                  h,\r\n                                  function (t, i) {\r\n                                      var o;\r\n                                      var a;\r\n                                      var l = n + h.toString();\r\n                                      u.set(l, t / i);\r\n                                      var c = 0;\r\n                                      try {\r\n                                          var d = __values(u);\r\n                                          for (var f = d.next(); !f.done; f = d.next()) {\r\n                                              var m = __read(f.value, 2);\r\n                                              m[0];\r\n                                              c += m[1];\r\n                                          }\r\n                                      } catch (t) {\r\n                                          o = {\r\n                                              error: t\r\n                                          };\r\n                                      } finally {\r\n                                          try {\r\n                                              if (f && !f.done && (a = d.return)) {\r\n                                                  a.call(d);\r\n                                              }\r\n                                          } finally {\r\n                                              if (o) {\r\n                                                  throw o.error;\r\n                                              }\r\n                                          }\r\n                                      }\r\n                                      if (e) {\r\n                                          e(c / p);\r\n                                      }\r\n                                  },\r\n                                  function () {\r\n                                      if (++f >= d) {\r\n                                          console.log(t, \"bundle资源预加载完成\");\r\n                                          if (i) {\r\n                                              i();\r\n                                          }\r\n                                      }\r\n                                  }\r\n                              )\r\n                            : $assetsLoader.default.instance.loadResSync(\r\n                                  n,\r\n                                  o,\r\n                                  h,\r\n                                  function (t, i) {\r\n                                      var o;\r\n                                      var a;\r\n                                      var l = n + h.toString();\r\n                                      u.set(l, t / i);\r\n                                      var c = 0;\r\n                                      try {\r\n                                          var d = __values(u);\r\n                                          for (var f = d.next(); !f.done; f = d.next()) {\r\n                                              var m = __read(f.value, 2);\r\n                                              m[0];\r\n                                              c += m[1];\r\n                                          }\r\n                                      } catch (t) {\r\n                                          o = {\r\n                                              error: t\r\n                                          };\r\n                                      } finally {\r\n                                          try {\r\n                                              if (f && !f.done && (a = d.return)) {\r\n                                                  a.call(d);\r\n                                              }\r\n                                          } finally {\r\n                                              if (o) {\r\n                                                  throw o.error;\r\n                                              }\r\n                                          }\r\n                                      }\r\n                                      if (e) {\r\n                                          e(c / p);\r\n                                      }\r\n                                  },\r\n                                  function () {\r\n                                      if (++f >= d) {\r\n                                          o.forEach(function (t) {\r\n                                              if (c.has(t)) {\r\n                                                  c.get(t).isLoaded = !0;\r\n                                              }\r\n                                          });\r\n                                          console.log(t, \"bundle资源加载完成\");\r\n                                          if (i) {\r\n                                              i();\r\n                                          }\r\n                                      }\r\n                                  }\r\n                              );\r\n                    });\r\n                });\r\n                return [2];\r\n            });\r\n        });\r\n    };\r\n    t.instance = new t();\r\n    return t;\r\n})();\r\nexports.ResManager = l;\r\n"]}