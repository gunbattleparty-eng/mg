{"version":3,"sources":["assets\\game_script\\scripts\\EquipmentInfoView.js"],"names":["o","$assetsLoader","require","$assetsMap","$resUtil","$eventManager","$popupManager","$uIManager","$popupView","$remoteAudio","$configContext","$equipmentContext","$localEventName","$roleContext","$userDataContext","$gameGemInfo","$startView","$coinDiamondView","$equipmentGemDescItem","A","cc","_decorator","S","ccclass","C","property","I","t","e","apply","arguments","titleLabel","eIconSp","gemInfos","atkLable","gradeLabel","btnUpgrade","btnUpgradeAuto","upgradeInfoLayer","gemDescItem","upgradeAnim","euipmentPart","colors","Color","fromHEX","partNames","__extends","prototype","onResetView","uiParam","param","part","string","render","renderDot","addEvent","on","clickUpgradeEquipt","clickAutoUpgrade","children","length","getChildByName","gem_index","Node","EventType","TOUCH_START","lockOrUnlockGem","i","clickUnload","RENDER_GEM","renderGems","removeEvent","off","Ins","getGrade","instance","loadRes","BundleNames","Public","SpriteFrame","isValid","spriteFrame","ResUtil","assignWith","node","getComponent","Sprite","getEquipemtnAtkByPart","equipmentMap","get","renderMaterials","checkPartEquipUpgrade","active","getGemList","n","s","c","u","gemConfigs","find","id","Grade","d","GameGemInfo","ins","getGemDesc","substring","Label","p","getPackInfo","isLock","getEquipmentUpInfo","coin","toString","color","getEquipBookByPart","type","upgradeStone","Public_Res","num","playEffectMusic","checkCoin","checkUpgradeStone","checkEquipBook","opearCoin","opearUpgradeStone","opearEquipBook","upgradeEquip","playAnim","send","RENDER_DOT","MenuType","Role","addExp","PopupManager","open","AssetsMap","PopUpBundles","prefabs","assetsList","UpgradeView","UIManager","showToast","CoinDiamondView","AstType","COIN","playAnimation","once","dragonBones","EventObject","COMPLETE","EQUIP_UPGRADE","upGradeEquipCache","count","clickGemItem","indexOf","target","getPartAndIndexGemId","parent","lockAndUnlock","removeGem","__decorate","ArmatureDisplay","PopupView","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $popupManager = require(\"./PopupManager\");\r\nvar $uIManager = require(\"./UIManager\");\r\nvar $popupView = require(\"./PopupView\");\r\nvar $remoteAudio = require(\"./RemoteAudio\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $equipmentContext = require(\"./EquipmentContext\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $roleContext = require(\"./RoleContext\");\r\nvar $userDataContext = require(\"./UserDataContext\");\r\nvar $gameGemInfo = require(\"./GameGemInfo\");\r\nvar $startView = require(\"./StartView\");\r\nvar $coinDiamondView = require(\"./CoinDiamondView\");\r\nvar $equipmentGemDescItem = require(\"./EquipmentGemDescItem\");\r\nvar A = cc._decorator;\r\nvar S = A.ccclass;\r\nvar C = A.property;\r\nvar I = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.titleLabel = null;\r\n        e.eIconSp = null;\r\n        e.gemInfos = null;\r\n        e.atkLable = null;\r\n        e.gradeLabel = null;\r\n        e.btnUpgrade = null;\r\n        e.btnUpgradeAuto = null;\r\n        e.upgradeInfoLayer = null;\r\n        e.gemDescItem = null;\r\n        e.upgradeAnim = null;\r\n        e.euipmentPart = null;\r\n        e.colors = [new cc.Color().fromHEX(\"#13613B\"), new cc.Color().fromHEX(\"#9C2A2E\")];\r\n        e.partNames = [\"帽子\", \"上衣\", \"鞋子\", \"护臂\", \"裤子\", \"手套\"];\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.onResetView = function () {\r\n        this.euipmentPart = this.uiParam.param.part;\r\n        this.titleLabel.string = this.partNames[this.euipmentPart - 1];\r\n        this.render();\r\n        this.renderDot();\r\n    };\r\n    e.prototype.addEvent = function () {\r\n        this.btnUpgrade.on(\"click\", this.clickUpgradeEquipt, this);\r\n        this.btnUpgradeAuto.on(\"click\", this.clickAutoUpgrade, this);\r\n        for (var t = 0; t < this.gemInfos.children.length; t++) {\r\n            var e = this.gemInfos.children[t].children[1].getChildByName(\"lock\");\r\n            e.gem_index = t;\r\n            e.on(cc.Node.EventType.TOUCH_START, this.lockOrUnlockGem, this);\r\n            var i = this.gemInfos.children[t].children[1].getChildByName(\"xiexia2\");\r\n            i.gem_index = t;\r\n            i.on(\"click\", this.clickUnload, this);\r\n        }\r\n        $eventManager.default.on($localEventName.default.RENDER_GEM, this.renderGems, this);\r\n    };\r\n    e.prototype.removeEvent = function () {\r\n        this.btnUpgrade.off(\"click\", this.clickUpgradeEquipt, this);\r\n        this.btnUpgradeAuto.off(\"click\", this.clickAutoUpgrade, this);\r\n        for (var t = 0; t < this.gemInfos.children.length; t++) {\r\n            this.gemInfos.children[t].children[1]\r\n                .getChildByName(\"lock\")\r\n                .off(cc.Node.EventType.TOUCH_START, this.lockOrUnlockGem, this);\r\n            this.gemInfos.children[t].children[1].getChildByName(\"xiexia2\").off(\"click\", this.clickUnload, this);\r\n        }\r\n        $eventManager.default.off($localEventName.default.RENDER_GEM, this.renderGems, this);\r\n    };\r\n    e.prototype.render = function () {\r\n        var t = this;\r\n        var e = $equipmentContext.default.Ins.getGrade(this.euipmentPart);\r\n        $assetsLoader.default.instance.loadRes(\r\n            $assetsMap.BundleNames.Public,\r\n            [\"/textures/gem/e_\" + this.euipmentPart + \"_\" + e, \"/textures/gem/k\" + e],\r\n            cc.SpriteFrame,\r\n            null,\r\n            function (e, i) {\r\n                if (i[0] && cc.isValid(t.eIconSp)) {\r\n                    t.eIconSp.spriteFrame = $resUtil.ResUtil.assignWith(i[1], t.node);\r\n                    t.eIconSp.node.children[0].getComponent(cc.Sprite).spriteFrame = $resUtil.ResUtil.assignWith(\r\n                        i[0],\r\n                        t.node\r\n                    );\r\n                }\r\n            }\r\n        );\r\n        var i = $equipmentContext.default.Ins.getEquipemtnAtkByPart(this.euipmentPart);\r\n        this.atkLable.string = \"攻击力：\" + i;\r\n        this.gradeLabel.string = \"等级：\" + $equipmentContext.default.Ins.equipmentMap.get(this.euipmentPart);\r\n        this.renderGems();\r\n        this.renderMaterials();\r\n    };\r\n    e.prototype.renderDot = function () {\r\n        var t = $equipmentContext.default.Ins.checkPartEquipUpgrade(this.euipmentPart);\r\n        this.btnUpgrade.children[1].active = t;\r\n        this.btnUpgradeAuto.children[1].active = t;\r\n    };\r\n    e.prototype.renderGems = function () {\r\n        var t = this;\r\n        var e = $equipmentContext.default.Ins.getGemList(this.euipmentPart);\r\n        var i = function (i) {\r\n            var n = o.gemInfos.children[i];\r\n            if (e && e.length > i && e[i]) {\r\n                var s = e[i];\r\n                n.children[0].active = !1;\r\n                n.children[1].active = !0;\r\n                var c = n.children[1].children[0].getComponent(cc.Sprite);\r\n                var u = $configContext.default.instance.gemConfigs.find(function (t) {\r\n                    return t.id === s;\r\n                });\r\n                $assetsLoader.default.instance.loadRes(\r\n                    $assetsMap.BundleNames.Public,\r\n                    [\"/textures/gem/g\" + u.part + \"_\" + u.Grade],\r\n                    cc.SpriteFrame,\r\n                    null,\r\n                    function (e, i) {\r\n                        var o = i[0];\r\n                        if (o && cc.isValid(c)) {\r\n                            c.spriteFrame = $resUtil.ResUtil.assignWith(o, t.node);\r\n                        }\r\n                    }\r\n                );\r\n                var d = $gameGemInfo.GameGemInfo.ins.getGemDesc(u);\r\n                if (d.length >= 15) {\r\n                    d = d.substring(0, 13) + \"...\";\r\n                }\r\n                n.children[1].children[1].getComponent(cc.Label).string = d;\r\n                var p = $roleContext.default.ins.getPackInfo(s);\r\n                n.children[1].children[2].children[1].active = p.isLock;\r\n            } else {\r\n                n.children[0].active = !0;\r\n                n.children[1].active = !1;\r\n            }\r\n        };\r\n        var o = this;\r\n        for (var n = 0; n < 5; n++) {\r\n            i(n);\r\n        }\r\n    };\r\n    e.prototype.renderMaterials = function () {\r\n        var t = this;\r\n        var e = $equipmentContext.default.Ins.getEquipmentUpInfo(this.euipmentPart);\r\n        if (e) {\r\n            this.upgradeInfoLayer.active = !0;\r\n            var i = this.upgradeInfoLayer.getChildByName(\"coin_layer\");\r\n            i.children[0].getComponent(cc.Label).string = $userDataContext.default.Ins.coin.toString();\r\n            i.children[1].getComponent(cc.Label).string = \"/\" + e.coin;\r\n            e.coin <= $userDataContext.default.Ins.coin\r\n                ? (i.children[0].color = this.colors[0])\r\n                : (i.children[0].color = this.colors[1]);\r\n            var o = $userDataContext.default.Ins.getEquipBookByPart(this.euipmentPart);\r\n            var n = this.upgradeInfoLayer.getChildByName(\"icon\").getComponent(cc.Sprite);\r\n            var s = \"/equipment_icon/zb\" + this.euipmentPart;\r\n            if (0 === e.type) {\r\n                s = \"/equipment_icon/upgrade_eq\";\r\n                o = $userDataContext.default.Ins.upgradeStone;\r\n            }\r\n            $assetsLoader.default.instance.loadRes(\r\n                $assetsMap.BundleNames.Public_Res,\r\n                [s],\r\n                cc.SpriteFrame,\r\n                null,\r\n                function (e, i) {\r\n                    var o = i[0];\r\n                    if (o && cc.isValid(n)) {\r\n                        n.spriteFrame = $resUtil.ResUtil.assignWith(o, t.node);\r\n                    }\r\n                }\r\n            );\r\n            var c = this.upgradeInfoLayer.getChildByName(\"materials_layer\");\r\n            c.children[0].getComponent(cc.Label).string = o.toString();\r\n            c.children[1].getComponent(cc.Label).string = \"/\" + e.num;\r\n            e.num <= o ? (c.children[0].color = this.colors[0]) : (c.children[0].color = this.colors[1]);\r\n        } else {\r\n            this.upgradeInfoLayer.active = !1;\r\n        }\r\n    };\r\n    e.prototype.clickUpgradeEquipt = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        var t = $equipmentContext.default.Ins.getEquipmentUpInfo(this.euipmentPart);\r\n        if (t) {\r\n            if ($userDataContext.default.Ins.checkCoin(-t.coin)) {\r\n                if (0 !== t.type || $userDataContext.default.Ins.checkUpgradeStone(-t.num)) {\r\n                    if (1 !== t.type || $userDataContext.default.Ins.checkEquipBook(this.euipmentPart, -t.num)) {\r\n                        $remoteAudio.default.instance.playEffectMusic(\"levelup\");\r\n                        $userDataContext.default.Ins.opearCoin(-t.coin);\r\n                        0 === t.type\r\n                            ? $userDataContext.default.Ins.opearUpgradeStone(-t.num)\r\n                            : 1 === t.type && $userDataContext.default.Ins.opearEquipBook(this.euipmentPart, -t.num);\r\n                        var e = $equipmentContext.default.Ins.equipmentMap.get(this.euipmentPart) + 1;\r\n                        $equipmentContext.default.Ins.upgradeEquip(this.euipmentPart, e);\r\n                        this.render();\r\n                        this.renderDot();\r\n                        this.playAnim();\r\n                        $eventManager.default.send($localEventName.default.RENDER_GEM);\r\n                        $eventManager.default.send($localEventName.default.RENDER_DOT, $startView.MenuType.Role);\r\n                        if ($userDataContext.default.Ins.addExp(15)) {\r\n                            $popupManager.PopupManager.instance.open(\r\n                                $assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.UpgradeView\r\n                            );\r\n                        }\r\n                    } else {\r\n                        $uIManager.UIManager.instance.showToast(\"图纸不足\");\r\n                    }\r\n                } else {\r\n                    $uIManager.UIManager.instance.showToast(\"升品石不足\");\r\n                }\r\n            } else {\r\n                $popupManager.PopupManager.instance.open(\r\n                    $assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.CoinDiamondView,\r\n                    {\r\n                        type: $coinDiamondView.AstType.COIN\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    };\r\n    e.prototype.playAnim = function () {\r\n        var t = this;\r\n        this.upgradeAnim.node.active = !0;\r\n        this.upgradeAnim.playAnimation(\"stand\", 1);\r\n        this.upgradeAnim.once(\r\n            dragonBones.EventObject.COMPLETE,\r\n            function () {\r\n                t.upgradeAnim.node.active = !1;\r\n            },\r\n            this\r\n        );\r\n        $eventManager.default.send($localEventName.default.EQUIP_UPGRADE, [this.euipmentPart]);\r\n    };\r\n    e.prototype.clickAutoUpgrade = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        var t = $equipmentContext.default.Ins.getEquipmentUpInfo(this.euipmentPart);\r\n        for (\r\n            var e = 0;\r\n            t &&\r\n            $userDataContext.default.Ins.checkCoin(-t.coin) &&\r\n            (0 !== t.type || $userDataContext.default.Ins.checkUpgradeStone(-t.num)) &&\r\n            (1 !== t.type || $userDataContext.default.Ins.checkEquipBook(this.euipmentPart, -t.num));\r\n\r\n        ) {\r\n            $userDataContext.default.Ins.opearCoin(-t.coin);\r\n            0 === t.type\r\n                ? $userDataContext.default.Ins.opearUpgradeStone(-t.num)\r\n                : 1 === t.type && $userDataContext.default.Ins.opearEquipBook(this.euipmentPart, -t.num);\r\n            e++;\r\n            var i = $equipmentContext.default.Ins.equipmentMap.get(this.euipmentPart) + 1;\r\n            $equipmentContext.default.Ins.upGradeEquipCache(this.euipmentPart, i);\r\n            t = $equipmentContext.default.Ins.getEquipmentUpInfo(this.euipmentPart);\r\n        }\r\n        if (0 !== e) {\r\n            $remoteAudio.default.instance.playEffectMusic(\"levelup\");\r\n            var o = $equipmentContext.default.Ins.equipmentMap.get(this.euipmentPart);\r\n            $equipmentContext.default.Ins.upgradeEquip(this.euipmentPart, o);\r\n            this.render();\r\n            this.renderDot();\r\n            $eventManager.default.send($localEventName.default.RENDER_GEM);\r\n            $eventManager.default.send($localEventName.default.RENDER_DOT, $startView.MenuType.Role);\r\n            if ($userDataContext.default.Ins.addExp(15 * e, e)) {\r\n                $popupManager.PopupManager.instance.open(\r\n                    $assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.UpgradeView,\r\n                    {\r\n                        count: e\r\n                    }\r\n                );\r\n            }\r\n            this.playAnim();\r\n        }\r\n    };\r\n    e.prototype.clickGemItem = function (t) {\r\n        var e = this.gemInfos.children.indexOf(t.target);\r\n        var i = $equipmentContext.default.Ins.getPartAndIndexGemId(this.euipmentPart, e);\r\n        if (-1 !== i) {\r\n            var o = $configContext.default.instance.gemConfigs.find(function (t) {\r\n                return t.id === i;\r\n            });\r\n            this.gemDescItem.node.active = !0;\r\n            this.gemDescItem.render(o, e);\r\n        }\r\n    };\r\n    e.prototype.lockOrUnlockGem = function (t) {\r\n        var e = t.target;\r\n        var i = this.gemInfos.children.indexOf(e.parent.parent);\r\n        var o = $equipmentContext.default.Ins.getPartAndIndexGemId(this.euipmentPart, i);\r\n        $roleContext.default.ins.lockAndUnlock(o);\r\n        this.renderGems();\r\n        $eventManager.default.send($localEventName.default.RENDER_GEM);\r\n    };\r\n    e.prototype.clickUnload = function (t) {\r\n        var e = t.node.gem_index;\r\n        $equipmentContext.default.Ins.removeGem(this.euipmentPart, e);\r\n        $eventManager.default.send($localEventName.default.RENDER_GEM);\r\n    };\r\n    __decorate([C(cc.Label)], e.prototype, \"titleLabel\", void 0);\r\n    __decorate([C(cc.Sprite)], e.prototype, \"eIconSp\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"gemInfos\", void 0);\r\n    __decorate([C(cc.Label)], e.prototype, \"atkLable\", void 0);\r\n    __decorate([C(cc.Label)], e.prototype, \"gradeLabel\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"btnUpgrade\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"btnUpgradeAuto\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"upgradeInfoLayer\", void 0);\r\n    __decorate([C($equipmentGemDescItem.default)], e.prototype, \"gemDescItem\", void 0);\r\n    __decorate([C(dragonBones.ArmatureDisplay)], e.prototype, \"upgradeAnim\", void 0);\r\n    return __decorate([S], e);\r\n})($popupView.PopupView);\r\nexports.default = I;\r\n"]}