{"version":3,"sources":["assets\\game_script\\scripts\\QQAppBox.js"],"names":["o","$baseAd","require","r","window","qq","a","t","e","apply","arguments","__extends","prototype","loadAd","adUnitId","createAppBox","adIns","onClose","isLoaded","loadAppBox","console","warn","error","load","then","onAdLoad","onAdError","showAppBox","i","showCallback","closeCallback","errorCallback","isConsume","reCreateAd","showing","show","destroyAd","isAutoShow","setTimeout","call","offLoad","onLoad","offClose","offError","destroy","autoShow","onAdClose","BaseAd","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $baseAd = require(\"./BaseAd\");\r\nvar r = window.qq;\r\nvar a = (function (t) {\r\n    function e() {\r\n        return (null !== t && t.apply(this, arguments)) || this;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.loadAd = function () {\r\n        if (this.adUnitId) {\r\n            if (r && r.createAppBox) {\r\n                var t = {\r\n                    adUnitId: this.adUnitId\r\n                };\r\n                this.adIns = r.createAppBox(t);\r\n                if (this.adIns.onClose) {\r\n                    this.adIns.onClose(this.onClose);\r\n                }\r\n                this.isLoaded = !1;\r\n                this.loadAppBox();\r\n            } else {\r\n                console.warn(\"不支持创建该组件createAppBox\");\r\n            }\r\n        } else {\r\n            console.error(\"QQ APPBOX ID为空\");\r\n        }\r\n    };\r\n    e.prototype.loadAppBox = function () {\r\n        var t = this;\r\n        if (this.adIns.load) {\r\n            this.adIns\r\n                .load()\r\n                .then(function () {\r\n                    t.onAdLoad();\r\n                })\r\n                .catch(function (e) {\r\n                    t.onAdError(e);\r\n                });\r\n        }\r\n    };\r\n    e.prototype.showAppBox = function (t, e, i) {\r\n        var o = this;\r\n        this.showCallback = t;\r\n        this.closeCallback = e;\r\n        this.errorCallback = i;\r\n        return this.adIns\r\n            ? this.isConsume\r\n                ? this.reCreateAd(!0)\r\n                : this.isLoaded\r\n                ? void (this.showing\r\n                      ? console.warn(this.adUnitId, \":正在显示中，不给显示\")\r\n                      : this.adIns\r\n                      ? this.adIns.show &&\r\n                        this.adIns\r\n                            .show()\r\n                            .then(function () {\r\n                                o.showing = !0;\r\n                                if (o.showCallback) {\r\n                                    o.showCallback();\r\n                                }\r\n                                o.showCallback = null;\r\n                            })\r\n                            .catch(function (t) {\r\n                                o.showing = !1;\r\n                                console.warn(\"interstitial show error:\", t);\r\n                                o.destroyAd();\r\n                            })\r\n                      : (console.warn(\"interstitial,interstitial对象未创建,将在创建完成后自动显示\"),\r\n                        this.reCreateAd(!0)))\r\n                : (console.warn(this.adUnitId, \":未加载完成，稍等\"), void (this.isAutoShow = !0))\r\n            : (console.warn(this.adUnitId, \":未创建，执行创建\"), (this.isAutoShow = !0), this.loadAd());\r\n    };\r\n    e.prototype.reCreateAd = function (t) {\r\n        var e = this;\r\n        this.destroyAd();\r\n        this.isAutoShow = t;\r\n        setTimeout(function () {\r\n            e.loadAd();\r\n        }, 100);\r\n    };\r\n    e.prototype.destroyAd = function () {\r\n        t.prototype.destroyAd.call(this);\r\n        if (this.adIns) {\r\n            if (this.adIns.offLoad) {\r\n                this.adIns.offLoad(this.onLoad);\r\n            }\r\n            if (this.adIns.offClose) {\r\n                this.adIns.offClose(this.onLoad);\r\n            }\r\n            if (this.adIns.offError) {\r\n                this.adIns.offError(this.onLoad);\r\n            }\r\n            if (this.adIns.destroy) {\r\n                this.adIns.destroy();\r\n            }\r\n            this.adIns = null;\r\n        }\r\n    };\r\n    e.prototype.onAdLoad = function () {\r\n        t.prototype.onAdLoad.call(this);\r\n        this.isConsume = !1;\r\n        this.isLoaded = !0;\r\n        this.autoShow();\r\n    };\r\n    e.prototype.onAdError = function (e) {\r\n        t.prototype.onAdError.call(this, e);\r\n        this.showing = !1;\r\n        if (this.errorCallback) {\r\n            this.errorCallback();\r\n        }\r\n        this.destroyAd();\r\n    };\r\n    e.prototype.onAdClose = function () {\r\n        t.prototype.onAdClose.call(this);\r\n        this.showing = !1;\r\n        if (this.closeCallback) {\r\n            this.closeCallback();\r\n        }\r\n        this.reCreateAd(!1);\r\n    };\r\n    e.prototype.autoShow = function () {\r\n        if (this.isAutoShow) {\r\n            this.isAutoShow = !1;\r\n            this.showAppBox(this.showCallback, this.closeCallback, this.errorCallback);\r\n        }\r\n    };\r\n    return e;\r\n})($baseAd.BaseAd);\r\nexports.default = a;\r\n"]}