
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/RGun_2.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '430531VwgdFLroXkJQGejDf', 'RGun_2');
// game_script/scripts/RGun_2.js

"use strict";

var o;

var $assetsLoader = require("./AssetsLoader");

var $assetsMap = require("./AssetsMap");

var $resUtil = require("./ResUtil");

var $configContext = require("./ConfigContext");

var $globalParam = require("./GlobalParam");

var $baseBullet = require("./BaseBullet");

var $gameContext = require("./GameContext");

var $gameSkillInfo = require("./GameSkillInfo");

var f = function (t) {
  function e(e) {
    var i = t.call(this, e) || this;
    i.atk = 0;
    i.cd = 0;
    i.range = 0;
    i.bulletCount = 2;
    i.config = null;
    i.config = $configContext["default"].instance.robotConfigs.find(function (t) {
      return 3 === t.id;
    });
    i.cd = i.config.Petsskin_skill_value[1];
    i.range = i.config.Petsskin_skill_value[2];
    i.timeLeft = 0;
    return i;
  }

  __extends(e, t);

  e.prototype.updateF = function (e) {
    t.prototype.updateF.call(this, e);

    if (!(this.isAttacking || $globalParam["default"].isGamePuase)) {
      this.timeLeft -= e;

      if (this.timeLeft <= 0) {
        this.startGun();
      }
    }
  };

  e.prototype.startGun = function () {
    var t = this;
    var e = $gameContext["default"].ins.getNearbyN2(this.pointNode, this.bulletCount);

    if (e.length <= 0 || e[0].node.position.sub(this.pointNode.position).magSqr() >= this.range * this.range) {
      this.timeLeft = 1;
      return !1;
    }

    if (!this.skillParam) {
      this.skillParam = $gameContext["default"].ins.skillInfo.getSkillById(1);
    }

    this.atk = Math.ceil(this.config.Petsskin_skill_value[0] * this.skillParam.skillAtk[$gameSkillInfo.Skill4Param.FINAL]);
    this.isAttacking = !0;

    for (var i = 0; i < this.bulletCount; i++) {
      if (e[i]) {
        this.createButtle(e[i]);
      }
    }

    this.schedulesOnce(function () {
      t.isAttacking = !1;
      t.timeLeft = t.cd;
    }, 0);
  };

  e.prototype.createButtle = function (t) {
    var e = $gameContext["default"].ins.getButtlePool($baseBullet.BulletType.r_bullet_2);

    if (!e) {
      var i = $assetsLoader["default"].instance.getRes($assetsMap.BundleNames.Game, $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.RBullet_2);
      e = $resUtil.ResUtil.instantiate(i, $gameContext["default"].ins.buttleLayer.parent).getComponent($baseBullet["default"]);
    }

    var o = $gameContext["default"].ins.buttleLayer.convertToNodeSpaceAR(this.pointNode.convertToWorldSpaceAR(cc.Vec3.ZERO));
    e.setPosition(o);
    e.initRBullet(t, this.atk, this.config.Petsskin_skill_value[4], this.config.Petsskin_skill_value[5], this.config.Petsskin_skill_value[3]);
    e.insert($gameContext["default"].ins.buttleLayer);
  };

  return e;
}(require("./BaseGun")["default"]);

exports["default"] = f;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXFJHdW5fMi5qcyJdLCJuYW1lcyI6WyJvIiwiJGFzc2V0c0xvYWRlciIsInJlcXVpcmUiLCIkYXNzZXRzTWFwIiwiJHJlc1V0aWwiLCIkY29uZmlnQ29udGV4dCIsIiRnbG9iYWxQYXJhbSIsIiRiYXNlQnVsbGV0IiwiJGdhbWVDb250ZXh0IiwiJGdhbWVTa2lsbEluZm8iLCJmIiwidCIsImUiLCJpIiwiY2FsbCIsImF0ayIsImNkIiwicmFuZ2UiLCJidWxsZXRDb3VudCIsImNvbmZpZyIsImluc3RhbmNlIiwicm9ib3RDb25maWdzIiwiZmluZCIsImlkIiwiUGV0c3NraW5fc2tpbGxfdmFsdWUiLCJ0aW1lTGVmdCIsIl9fZXh0ZW5kcyIsInByb3RvdHlwZSIsInVwZGF0ZUYiLCJpc0F0dGFja2luZyIsImlzR2FtZVB1YXNlIiwic3RhcnRHdW4iLCJpbnMiLCJnZXROZWFyYnlOMiIsInBvaW50Tm9kZSIsImxlbmd0aCIsIm5vZGUiLCJwb3NpdGlvbiIsInN1YiIsIm1hZ1NxciIsInNraWxsUGFyYW0iLCJza2lsbEluZm8iLCJnZXRTa2lsbEJ5SWQiLCJNYXRoIiwiY2VpbCIsInNraWxsQXRrIiwiU2tpbGw0UGFyYW0iLCJGSU5BTCIsImNyZWF0ZUJ1dHRsZSIsInNjaGVkdWxlc09uY2UiLCJnZXRCdXR0bGVQb29sIiwiQnVsbGV0VHlwZSIsInJfYnVsbGV0XzIiLCJnZXRSZXMiLCJCdW5kbGVOYW1lcyIsIkdhbWUiLCJBc3NldHNNYXAiLCJHYW1lQnVuZGxlcyIsInByZWZhYnMiLCJhc3NldHNMaXN0IiwiUkJ1bGxldF8yIiwiUmVzVXRpbCIsImluc3RhbnRpYXRlIiwiYnV0dGxlTGF5ZXIiLCJwYXJlbnQiLCJnZXRDb21wb25lbnQiLCJjb252ZXJ0VG9Ob2RlU3BhY2VBUiIsImNvbnZlcnRUb1dvcmxkU3BhY2VBUiIsImNjIiwiVmVjMyIsIlpFUk8iLCJzZXRQb3NpdGlvbiIsImluaXRSQnVsbGV0Iiwi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IjpbInZhciBvO1xyXG52YXIgJGFzc2V0c0xvYWRlciA9IHJlcXVpcmUoXCIuL0Fzc2V0c0xvYWRlclwiKTtcclxudmFyICRhc3NldHNNYXAgPSByZXF1aXJlKFwiLi9Bc3NldHNNYXBcIik7XHJcbnZhciAkcmVzVXRpbCA9IHJlcXVpcmUoXCIuL1Jlc1V0aWxcIik7XHJcbnZhciAkY29uZmlnQ29udGV4dCA9IHJlcXVpcmUoXCIuL0NvbmZpZ0NvbnRleHRcIik7XHJcbnZhciAkZ2xvYmFsUGFyYW0gPSByZXF1aXJlKFwiLi9HbG9iYWxQYXJhbVwiKTtcclxudmFyICRiYXNlQnVsbGV0ID0gcmVxdWlyZShcIi4vQmFzZUJ1bGxldFwiKTtcclxudmFyICRnYW1lQ29udGV4dCA9IHJlcXVpcmUoXCIuL0dhbWVDb250ZXh0XCIpO1xyXG52YXIgJGdhbWVTa2lsbEluZm8gPSByZXF1aXJlKFwiLi9HYW1lU2tpbGxJbmZvXCIpO1xyXG52YXIgZiA9IChmdW5jdGlvbiAodCkge1xyXG4gICAgZnVuY3Rpb24gZShlKSB7XHJcbiAgICAgICAgdmFyIGkgPSB0LmNhbGwodGhpcywgZSkgfHwgdGhpcztcclxuICAgICAgICBpLmF0ayA9IDA7XHJcbiAgICAgICAgaS5jZCA9IDA7XHJcbiAgICAgICAgaS5yYW5nZSA9IDA7XHJcbiAgICAgICAgaS5idWxsZXRDb3VudCA9IDI7XHJcbiAgICAgICAgaS5jb25maWcgPSBudWxsO1xyXG4gICAgICAgIGkuY29uZmlnID0gJGNvbmZpZ0NvbnRleHQuZGVmYXVsdC5pbnN0YW5jZS5yb2JvdENvbmZpZ3MuZmluZChmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMyA9PT0gdC5pZDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpLmNkID0gaS5jb25maWcuUGV0c3NraW5fc2tpbGxfdmFsdWVbMV07XHJcbiAgICAgICAgaS5yYW5nZSA9IGkuY29uZmlnLlBldHNza2luX3NraWxsX3ZhbHVlWzJdO1xyXG4gICAgICAgIGkudGltZUxlZnQgPSAwO1xyXG4gICAgICAgIHJldHVybiBpO1xyXG4gICAgfVxyXG4gICAgX19leHRlbmRzKGUsIHQpO1xyXG4gICAgZS5wcm90b3R5cGUudXBkYXRlRiA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgdC5wcm90b3R5cGUudXBkYXRlRi5jYWxsKHRoaXMsIGUpO1xyXG4gICAgICAgIGlmICghKHRoaXMuaXNBdHRhY2tpbmcgfHwgJGdsb2JhbFBhcmFtLmRlZmF1bHQuaXNHYW1lUHVhc2UpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZUxlZnQgLT0gZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMudGltZUxlZnQgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydEd1bigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLnN0YXJ0R3VuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ID0gdGhpcztcclxuICAgICAgICB2YXIgZSA9ICRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5nZXROZWFyYnlOMih0aGlzLnBvaW50Tm9kZSwgdGhpcy5idWxsZXRDb3VudCk7XHJcbiAgICAgICAgaWYgKGUubGVuZ3RoIDw9IDAgfHwgZVswXS5ub2RlLnBvc2l0aW9uLnN1Yih0aGlzLnBvaW50Tm9kZS5wb3NpdGlvbikubWFnU3FyKCkgPj0gdGhpcy5yYW5nZSAqIHRoaXMucmFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy50aW1lTGVmdCA9IDE7XHJcbiAgICAgICAgICAgIHJldHVybiAhMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLnNraWxsUGFyYW0pIHtcclxuICAgICAgICAgICAgdGhpcy5za2lsbFBhcmFtID0gJGdhbWVDb250ZXh0LmRlZmF1bHQuaW5zLnNraWxsSW5mby5nZXRTa2lsbEJ5SWQoMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYXRrID0gTWF0aC5jZWlsKFxyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5QZXRzc2tpbl9za2lsbF92YWx1ZVswXSAqIHRoaXMuc2tpbGxQYXJhbS5za2lsbEF0a1skZ2FtZVNraWxsSW5mby5Ta2lsbDRQYXJhbS5GSU5BTF1cclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuaXNBdHRhY2tpbmcgPSAhMDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYnVsbGV0Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZVtpXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVCdXR0bGUoZVtpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zY2hlZHVsZXNPbmNlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdC5pc0F0dGFja2luZyA9ICExO1xyXG4gICAgICAgICAgICB0LnRpbWVMZWZ0ID0gdC5jZDtcclxuICAgICAgICB9LCAwKTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5jcmVhdGVCdXR0bGUgPSBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIHZhciBlID0gJGdhbWVDb250ZXh0LmRlZmF1bHQuaW5zLmdldEJ1dHRsZVBvb2woJGJhc2VCdWxsZXQuQnVsbGV0VHlwZS5yX2J1bGxldF8yKTtcclxuICAgICAgICBpZiAoIWUpIHtcclxuICAgICAgICAgICAgdmFyIGkgPSAkYXNzZXRzTG9hZGVyLmRlZmF1bHQuaW5zdGFuY2UuZ2V0UmVzKFxyXG4gICAgICAgICAgICAgICAgJGFzc2V0c01hcC5CdW5kbGVOYW1lcy5HYW1lLFxyXG4gICAgICAgICAgICAgICAgJGFzc2V0c01hcC5Bc3NldHNNYXAuR2FtZUJ1bmRsZXMucHJlZmFicy5hc3NldHNMaXN0LlJCdWxsZXRfMlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBlID0gJHJlc1V0aWwuUmVzVXRpbC5pbnN0YW50aWF0ZShpLCAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuYnV0dGxlTGF5ZXIucGFyZW50KS5nZXRDb21wb25lbnQoXHJcbiAgICAgICAgICAgICAgICAkYmFzZUJ1bGxldC5kZWZhdWx0XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBvID0gJGdhbWVDb250ZXh0LmRlZmF1bHQuaW5zLmJ1dHRsZUxheWVyLmNvbnZlcnRUb05vZGVTcGFjZUFSKFxyXG4gICAgICAgICAgICB0aGlzLnBvaW50Tm9kZS5jb252ZXJ0VG9Xb3JsZFNwYWNlQVIoY2MuVmVjMy5aRVJPKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZS5zZXRQb3NpdGlvbihvKTtcclxuICAgICAgICBlLmluaXRSQnVsbGV0KFxyXG4gICAgICAgICAgICB0LFxyXG4gICAgICAgICAgICB0aGlzLmF0ayxcclxuICAgICAgICAgICAgdGhpcy5jb25maWcuUGV0c3NraW5fc2tpbGxfdmFsdWVbNF0sXHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLlBldHNza2luX3NraWxsX3ZhbHVlWzVdLFxyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5QZXRzc2tpbl9za2lsbF92YWx1ZVszXVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgZS5pbnNlcnQoJGdhbWVDb250ZXh0LmRlZmF1bHQuaW5zLmJ1dHRsZUxheWVyKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gZTtcclxufSkocmVxdWlyZShcIi4vQmFzZUd1blwiKS5kZWZhdWx0KTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gZjtcclxuIl19