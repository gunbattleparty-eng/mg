function ownKeys(e, t) { var n, i = Object.keys(e); return Object.getOwnPropertySymbols && (n = Object.getOwnPropertySymbols(e), t && (n = n.filter(function(t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), i.push.apply(i, n)), i }

function _objectSpread2(e) {
    for (var t = 1; t < arguments.length; t++) {
        var n = null != arguments[t] ? arguments[t] : {};
        t % 2 ? ownKeys(Object(n), !0).forEach(function(t) { _defineProperty(e, t, n[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : ownKeys(Object(n)).forEach(function(t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) })
    }
    return e
}

function _regeneratorRuntime() {
    _regeneratorRuntime = function _regeneratorRuntime() { return e };
    var e = {},
        t = Object.prototype,
        n = t.hasOwnProperty,
        i = Object.defineProperty || function(e, t, n) { e[t] = n.value },
        r = (g = "function" == typeof Symbol ? Symbol : {}).iterator || "@@iterator",
        a = g.asyncIterator || "@@asyncIterator",
        o = g.toStringTag || "@@toStringTag";

    function s(e, t, n) { return Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }), e[t] }
    try { s({}, "") } catch (t) { s = function s(e, t, n) { return e[t] = n } }

    function c(e, t, n, r) {
        var a, o, s, c;
        return t = t && t.prototype instanceof p ? t : p, t = Object.create(t.prototype), r = new S(r || []), i(t, "_invoke", {
            value: (a = e, o = n, s = r, c = "suspendedStart", function(e, t) {
                if ("executing" === c) throw new Error("Generator is already running");
                if ("completed" === c) { if ("throw" === e) throw t; return { value: void 0, done: !0 } }
                for (s.method = e, s.arg = t;;) {
                    var n = s.delegate;
                    if (n && (n = function e(t, n) {
                            var i = n.method,
                                r = t.iterator[i];
                            return void 0 === r ? (n.delegate = null, "throw" === i && t.iterator.return && (n.method = "return", n.arg = void 0, e(t, n), "throw" === n.method) || "return" !== i && (n.method = "throw", n.arg = new TypeError("The iterator does not provide a '" + i + "' method")), l) : "throw" === (i = u(r, t.iterator, n.arg)).type ? (n.method = "throw", n.arg = i.arg, n.delegate = null, l) : (r = i.arg) ? r.done ? (n[t.resultName] = r.value, n.next = t.nextLoc, "return" !== n.method && (n.method = "next", n.arg = void 0), n.delegate = null, l) : r : (n.method = "throw", n.arg = new TypeError("iterator result is not an object"), n.delegate = null, l)
                        }(n, s))) { if (n === l) continue; return n }
                    if ("next" === s.method) s.sent = s._sent = s.arg;
                    else if ("throw" === s.method) {
                        if ("suspendedStart" === c) throw c = "completed", s.arg;
                        s.dispatchException(s.arg)
                    } else "return" === s.method && s.abrupt("return", s.arg);
                    if (c = "executing", "normal" === (n = u(a, o, s)).type) { if (c = s.done ? "completed" : "suspendedYield", n.arg === l) continue; return { value: n.arg, done: s.done } }
                    "throw" === n.type && (c = "completed", s.method = "throw", s.arg = n.arg)
                }
            })
        }), t
    }

    function u(e, t, n) { try { return { type: "normal", arg: e.call(t, n) } } catch (e) { return { type: "throw", arg: e } } }
    e.wrap = c;
    var l = {};

    function p() {}

    function h() {}

    function f() {}
    var g, d, m = (s(g = {}, r, function() { return this }), (d = (d = Object.getPrototypeOf) && d(d(b([])))) && d !== t && n.call(d, r) && (g = d), f.prototype = p.prototype = Object.create(g));

    function _(e) {
        ["next", "throw", "return"].forEach(function(t) { s(e, t, function(e) { return this._invoke(t, e) }) })
    }

    function v(e, t) {
        var r;
        i(this, "_invoke", {
            value: function value(i, a) {
                function o() {
                    return new t(function(r, o) {
                        ! function i(r, a, o, s) {
                            var c;
                            if ("throw" !== (r = u(e[r], e, a)).type) return (a = (c = r.arg).value) && "object" == (typeof a === "undefined" ? "undefined" : typeof(a)) && n.call(a, "__await") ? t.resolve(a.__await).then(function(e) { i("next", e, o, s) }, function(e) { i("throw", e, o, s) }) : t.resolve(a).then(function(e) { c.value = e, o(c) }, function(e) { return i("throw", e, o, s) });
                            s(r.arg)
                        }(i, a, r, o)
                    })
                }
                return r = r ? r.then(o, o) : o()
            }
        })
    }

    function y(e) {
        var t = { tryLoc: e[0] };
        1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t)
    }

    function k(e) {
        var t = e.completion || {};
        t.type = "normal", delete t.arg, e.completion = t
    }

    function S(e) { this.tryEntries = [{ tryLoc: "root" }], e.forEach(y, this), this.reset(!0) }

    function b(e) { if (e || "" === e) { var t, i = e[r]; if (i) return i.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) return t = -1, (i = function i() { for (; ++t < e.length;) { if (n.call(e, t)) return i.value = e[t], i.done = !1, i } return i.value = void 0, i.done = !0, i }).next = i } throw new TypeError((typeof e === "undefined" ? "undefined" : typeof(e)) + " is not iterable") }
    return i(m, "constructor", { value: h.prototype = f, configurable: !0 }), i(f, "constructor", { value: h, configurable: !0 }), h.displayName = s(f, o, "GeneratorFunction"), e.isGeneratorFunction = function(e) { return !!(e = "function" == typeof e && e.constructor) && (e === h || "GeneratorFunction" === (e.displayName || e.name)) }, e.mark = function(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, f) : (e.__proto__ = f, s(e, o, "GeneratorFunction")), e.prototype = Object.create(m), e }, e.awrap = function(e) { return { __await: e } }, _(v.prototype), s(v.prototype, a, function() { return this }), e.AsyncIterator = v, e.async = function(t, n, i, r, a) { void 0 === a && (a = Promise); var o = new v(c(t, n, i, r), a); return e.isGeneratorFunction(n) ? o : o.next().then(function(e) { return e.done ? e.value : o.next() }) }, _(m), s(m, o, "Generator"), s(m, r, function() { return this }), s(m, "toString", function() { return "[object Generator]" }), e.keys = function(e) {
        var t, n = Object(e),
            i = [];
        for (t in n) { i.push(t) }
        return i.reverse(),
            function e() { for (; i.length;) { var t = i.pop(); if (t in n) return e.value = t, e.done = !1, e } return e.done = !0, e }
    }, e.values = b, S.prototype = {
        constructor: S,
        reset: function reset(e) {
            if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this.done = !1, this.delegate = null, this.method = "next", this.arg = void 0, this.tryEntries.forEach(k), !e)
                for (var t in this) { "t" === t.charAt(0) && n.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0) }
        },
        stop: function stop() { this.done = !0; var e = this.tryEntries[0].completion; if ("throw" === e.type) throw e.arg; return this.rval },
        dispatchException: function dispatchException(e) {
            if (this.done) throw e;
            var t = this;

            function i(n, i) { return o.type = "throw", o.arg = e, t.next = n, i && (t.method = "next", t.arg = void 0), !!i }
            for (var r = this.tryEntries.length - 1; 0 <= r; --r) {
                var a = this.tryEntries[r],
                    o = a.completion;
                if ("root" === a.tryLoc) return i("end");
                if (a.tryLoc <= this.prev) {
                    var s = n.call(a, "catchLoc"),
                        c = n.call(a, "finallyLoc");
                    if (s && c) { if (this.prev < a.catchLoc) return i(a.catchLoc, !0); if (this.prev < a.finallyLoc) return i(a.finallyLoc) } else if (s) { if (this.prev < a.catchLoc) return i(a.catchLoc, !0) } else { if (!c) throw new Error("try statement without catch or finally"); if (this.prev < a.finallyLoc) return i(a.finallyLoc) }
                }
            }
        },
        abrupt: function abrupt(e, t) { for (var i = this.tryEntries.length - 1; 0 <= i; --i) { var r = this.tryEntries[i]; if (r.tryLoc <= this.prev && n.call(r, "finallyLoc") && this.prev < r.finallyLoc) { var a = r; break } } var o = (a = a && ("break" === e || "continue" === e) && a.tryLoc <= t && t <= a.finallyLoc ? null : a) ? a.completion : {}; return o.type = e, o.arg = t, a ? (this.method = "next", this.next = a.finallyLoc, l) : this.complete(o) },
        complete: function complete(e, t) { if ("throw" === e.type) throw e.arg; return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg, this.method = "return", this.next = "end") : "normal" === e.type && t && (this.next = t), l },
        finish: function finish(e) { for (var t = this.tryEntries.length - 1; 0 <= t; --t) { var n = this.tryEntries[t]; if (n.finallyLoc === e) return this.complete(n.completion, n.afterLoc), k(n), l } },
        catch: function _catch(e) { for (var t = this.tryEntries.length - 1; 0 <= t; --t) { var n, i, r = this.tryEntries[t]; if (r.tryLoc === e) return "throw" === (n = r.completion).type && (i = n.arg, k(r)), i } throw new Error("illegal catch attempt") },
        delegateYield: function delegateYield(e, t, n) { return this.delegate = { iterator: b(e), resultName: t, nextLoc: n }, "next" === this.method && (this.arg = void 0), l }
    }, e
}

function _typeof(e) { return (_typeof = "function" == typeof Symbol && "symbol" == typeof(Symbol.iterator) ? function(e) { return typeof e === "undefined" ? "undefined" : typeof(e) } : function(e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e === "undefined" ? "undefined" : typeof(e) })(e) }

function asyncGeneratorStep(e, t, n, i, r, a, o) {
    try {
        var s = e[a](o),
            c = s.value
    } catch (e) { return void n(e) }
    s.done ? t(c) : Promise.resolve(c).then(i, r)
}

function _asyncToGenerator(e) {
    return function() {
        var t = this,
            n = arguments;
        return new Promise(function(i, r) {
            var a = e.apply(t, n);

            function o(e) { asyncGeneratorStep(a, i, r, o, s, "next", e) }

            function s(e) { asyncGeneratorStep(a, i, r, o, s, "throw", e) }
            o(void 0)
        })
    }
}

function _classCallCheck(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }

function _defineProperties(e, t) {
    for (var n = 0; n < t.length; n++) {
        var i = t[n];
        i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, _toPropertyKey(i.key), i)
    }
}

function _createClass(e, t, n) { return t && _defineProperties(e.prototype, t), n && _defineProperties(e, n), Object.defineProperty(e, "prototype", { writable: !1 }), e }

function _defineProperty(e, t, n) { return (t = _toPropertyKey(t)) in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e }

function _toPrimitive(e, t) { if ("object" != (typeof e === "undefined" ? "undefined" : typeof(e)) || null === e) return e; var n = e[Symbol.toPrimitive]; if (void 0 === n) return ("string" === t ? String : Number)(e); if ("object" != typeof(n = n.call(e, t || "default"))) return n; throw new TypeError("@@toPrimitive must return a primitive value.") }

function _toPropertyKey(e) { return "symbol" == typeof(e = _toPrimitive(e, "string")) ? e : String(e) }
var Config = { LIB_VERSION: "4.8.1", LIB_NAME: "MG", LIB_STACK: "cocoscreator", BASE_URL: "https://backend.gravity-engine.com/event_center/api/v1" },
    _ = {},
    ArrayProto = Array.prototype,
    ObjProto = Object.prototype,
    slice = ArrayProto.slice,
    nativeToString = ObjProto.toString,
    nativeHasOwnProperty = Object.prototype.hasOwnProperty,
    nativeForEach = ArrayProto.forEach,
    nativeIsArray = Array.isArray,
    breaker = {},
    logger$1 = (_.isNumber = function(e) { return "number" == typeof e ? 0 == e - e : "string" == typeof e && "" !== e.trim() && (Number.isFinite ? Number.isFinite(+e) : isFinite(+e)) }, _.each = function(e, t, n) {
        if (null == e) return !1;
        if (nativeForEach && e.forEach === nativeForEach) e.forEach(t, n);
        else if (e.length === +e.length) { for (var i = 0, r = e.length; i < r; i++) { if (i in e && t.call(n, e[i], i, e) === breaker) return !1 } } else
            for (var a in e) { if (nativeHasOwnProperty.call(e, a) && t.call(n, e[a], a, e) === breaker) return !1 }
    }, _.sleep = function(e) { return new Promise(function(t) { return setTimeout(t, e) }) }, _.extend = function(e) { return _.each(slice.call(arguments, 1), function(t) { for (var n in t) { void 0 !== t[n] && (e[n] = t[n]) } }), e }, _.extend2Layers = function(e) { return _.each(slice.call(arguments, 1), function(t) { for (var n in t) { void 0 !== t[n] && (_.isObject(t[n]) && _.isObject(e[n]) ? _.extend(e[n], t[n]) : e[n] = t[n]) } }), e }, _.isArray = nativeIsArray || function(e) { return "[object Array]" === nativeToString.call(e) }, _.isFunction = function(e) { try { return "function" == typeof e } catch (e) { return !1 } }, _.isPromise = function(e) { return "[object Promise]" === nativeToString.call(e) && null != e }, _.isObject = function(e) { return "[object Object]" === nativeToString.call(e) && null != e }, _.isEmptyObject = function(e) { if (_.isObject(e)) { for (var t in e) { if (nativeHasOwnProperty.call(e, t)) return !1 } return !0 } return !1 }, _.isUndefined = function(e) { return void 0 === e }, _.isString = function(e) { return "[object String]" === nativeToString.call(e) }, _.isDate = function(e) { return "[object Date]" === nativeToString.call(e) }, _.isBoolean = function(e) { return "[object Boolean]" === nativeToString.call(e) }, _.isNumber = function(e) { return "[object Number]" === nativeToString.call(e) && /[\d\.]+/.test(String(e)) }, _.isJSONString = function(e) { try { JSON.parse(e) } catch (e) { return !1 } return !0 }, _.decodeURIComponent = function(e) { var t = ""; try { t = decodeURIComponent(e) } catch (n) { t = e } return t }, _.encodeURIComponent = function(e) { var t = ""; try { t = encodeURIComponent(e) } catch (n) { t = e } return t }, _.utf8Encode = function(e) {
        for (var t, n = "", i = t = 0, r = (e = (e + "").replace(/\r\n/g, "\n").replace(/\r/g, "\n")).length, a = 0; a < r; a++) {
            var o = e.charCodeAt(a),
                s = null;
            o < 128 ? t++ : s = 127 < o && o < 2048 ? String.fromCharCode(o >> 6 | 192, 63 & o | 128) : String.fromCharCode(o >> 12 | 224, o >> 6 & 63 | 128, 63 & o | 128), null !== s && (i < t && (n += e.substring(i, t)), n += s, i = t = a + 1)
        }
        return i < t && (n += e.substring(i, e.length)), n
    }, _.base64Encode = function(e) {
        var t, n, i, r, a = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
            o = 0,
            s = 0,
            c = "",
            u = [];
        if (!e) return e;
        for (e = _.utf8Encode(e); t = (r = e.charCodeAt(o++) << 16 | e.charCodeAt(o++) << 8 | e.charCodeAt(o++)) >> 12 & 63, n = r >> 6 & 63, i = 63 & r, u[s++] = a.charAt(r >> 18 & 63) + a.charAt(t) + a.charAt(n) + a.charAt(i), o < e.length;) {}
        switch (c = u.join(""), e.length % 3) {
            case 1:
                c = c.slice(0, -2) + "==";
                break;
            case 2:
                c = c.slice(0, -1) + "=";
        }
        return c
    }, _.encodeDates = function(e) {
        return _.each(e, function(t, n) {
            if (_.isDate(t)) e[n] = _.formatDate(t);
            else if (_.isObject(t)) e[n] = _.encodeDates(t);
            else if (_.isArray(t))
                for (var i = 0; i < t.length; i++) { _.isDate(t[i]) && (e[n][i] = _.formatDate(t[i])) }
        }), e
    }, _.formatDate = function(e) {
        function t(e) { return e < 10 ? "0" + e : e }
        return e.getFullYear() + "-" + t(e.getMonth() + 1) + "-" + t(e.getDate()) + " " + t(e.getHours()) + ":" + t(e.getMinutes()) + ":" + t(e.getSeconds()) + "." + ((e = e.getMilliseconds()) < 100 && 9 < e ? "0" + e : e < 10 ? "00" + e : e)
    }, _.searchObjDate = function(e) {
        try {
            (_.isObject(e) || _.isArray(e)) && _.each(e, function(t, n) { _.isObject(t) || _.isArray(t) ? _.searchObjDate(e[n]) : _.isDate(t) && (e[n] = _.formatDate(t)) })
        } catch (t) { logger$1.warn(t) }
    }, _.UUID = function() { var e = new Date().getTime(); return String(Math.random()).replace(".", "").slice(1, 11) + "-" + e }, _.UUIDv4 = function() { return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(e) { var t = 16 * Math.random() | 0; return ("x" === e ? t : 3 & t | 8).toString(16) }) }, _.setMpPlatform = function(e) { _.mpPlatform = e }, _.getMpPlatform = function() { return _.mpPlatform }, _.createExtraHeaders = function() { return { "GE-Integration-Type": Config.LIB_NAME, "GE-Integration-Version": Config.LIB_VERSION, "GE-Integration-Count": "1", "GE-Integration-Extra": _.getMpPlatform() } }, _.checkAppId = function(e) {
        if ("number" == typeof e) e = String(e);
        else if ("string" != typeof e) return "";
        return e.replace(/\s*/g, "")
    }, _.checkUrl = function(e) { return e = e.replace(/\s*/g, ""), _.url("basic", e) }, _.url = function() {
        function e() { return new RegExp(/(.*?)\.?([^.]*?)\.(com|net|org|biz|ws|in|me|co\.uk|co|org\.uk|ltd\.uk|plc\.uk|me\.uk|edu|mil|br\.com|cn\.com|eu\.com|hu\.com|no\.com|qc\.com|sa\.com|se\.com|se\.net|us\.com|uy\.com|ac|co\.ac|gv\.ac|or\.ac|ac\.ac|af|am|as|at|ac\.at|co\.at|gv\.at|or\.at|asn\.au|com\.au|edu\.au|org\.au|net\.au|id\.au|be|ac\.be|adm\.br|adv\.br|am\.br|arq\.br|art\.br|bio\.br|cng\.br|cnt\.br|com\.br|ecn\.br|eng\.br|esp\.br|etc\.br|eti\.br|fm\.br|fot\.br|fst\.br|g12\.br|gov\.br|ind\.br|inf\.br|jor\.br|lel\.br|med\.br|mil\.br|net\.br|nom\.br|ntr\.br|odo\.br|org\.br|ppg\.br|pro\.br|psc\.br|psi\.br|rec\.br|slg\.br|tmp\.br|tur\.br|tv\.br|vet\.br|zlg\.br|br|ab\.ca|bc\.ca|mb\.ca|nb\.ca|nf\.ca|ns\.ca|nt\.ca|on\.ca|pe\.ca|qc\.ca|sk\.ca|yk\.ca|ca|cc|ac\.cn|net\.cn|com\.cn|edu\.cn|gov\.cn|org\.cn|bj\.cn|sh\.cn|tj\.cn|cq\.cn|he\.cn|nm\.cn|ln\.cn|jl\.cn|hl\.cn|js\.cn|zj\.cn|ah\.cn|gd\.cn|gx\.cn|hi\.cn|sc\.cn|gz\.cn|yn\.cn|xz\.cn|sn\.cn|gs\.cn|qh\.cn|nx\.cn|xj\.cn|tw\.cn|hk\.cn|mo\.cn|cn|cx|cz|de|dk|fo|com\.ec|tm\.fr|com\.fr|asso\.fr|presse\.fr|fr|gf|gs|co\.il|net\.il|ac\.il|k12\.il|gov\.il|muni\.il|ac\.in|co\.in|org\.in|ernet\.in|gov\.in|net\.in|res\.in|is|it|ac\.jp|co\.jp|go\.jp|or\.jp|ne\.jp|ac\.kr|co\.kr|go\.kr|ne\.kr|nm\.kr|or\.kr|li|lt|lu|asso\.mc|tm\.mc|com\.mm|org\.mm|net\.mm|edu\.mm|gov\.mm|ms|nl|no|nu|pl|ro|org\.ro|store\.ro|tm\.ro|firm\.ro|www\.ro|arts\.ro|rec\.ro|info\.ro|nom\.ro|nt\.ro|se|si|com\.sg|org\.sg|net\.sg|gov\.sg|sk|st|tf|ac\.th|co\.th|go\.th|mi\.th|net\.th|or\.th|tm|to|com\.tr|edu\.tr|gov\.tr|k12\.tr|net\.tr|org\.tr|com\.tw|org\.tw|net\.tw|ac\.uk|uk\.com|uk\.net|gb\.com|gb\.net|vg|sh|kz|ch|info|ua|gov|name|pro|ie|hk|com\.hk|org\.hk|net\.hk|edu\.hk|us|tk|cd|by|ad|lv|eu\.lv|bz|es|jp|cl|ag|mobi|eu|co\.nz|org\.nz|net\.nz|maori\.nz|iwi\.nz|io|la|md|sc|sg|vc|tw|travel|my|se|tv|pt|com\.pt|edu\.pt|asia|fi|com\.ve|net\.ve|fi|org\.ve|web\.ve|info\.ve|co\.ve|tel|im|gr|ru|net\.ru|org\.ru|hr|com\.hr|ly|xyz)$/) }

        function t(e, t) { var n = e.charAt(0); return t = t.split(n), n === e ? t : t[(e = parseInt(e.substring(1), 10)) < 0 ? t.length + e : e - 1] }

        function n(e, t) {
            for (var n, i = e.charAt(0), r = t.split("&"), a = [], o = {}, s = e.substring(1), c = 0, u = r.length; c < u; c++) {
                if ("" !== (a = (a = r[c].match(/(.*?)=(.*)/)) || [r[c], r[c], ""])[1].replace(/\s/g, "")) {
                    if (a[2] = (n = a[2] || "", _.decodeURIComponent(n.replace(/\+/g, " "))), s === a[1]) return a[2];
                    (n = a[1].match(/(.*)\[([0-9]+)\]/)) ? (o[n[1]] = o[n[1]] || [], o[n[1]][n[2]] = a[2]) : o[a[1]] = a[2]
                }
            }
            return i === e ? o : o[s]
        }
        return function(i, r) {
            var a, o = {};
            if ("tld?" === i) return e();
            if (r = r || window.location.toString(), !i) return r;
            if (i = i.toString(), r.match(/^mailto:([^/].+)/)) a = r.match(/^mailto:([^/].+)/), o.protocol = "mailto", o.email = a[1];
            else {
                if ((r = r.match(/(.*?)\/#!(.*)/) ? (a = r.match(/(.*?)\/#!(.*)/))[1] + a[2] : r).match(/(.*?)#(.*)/) && (a = r.match(/(.*?)#(.*)/), o.hash = a[2], r = a[1]), o.hash && i.match(/^#/)) return n(i, o.hash);
                if (r.match(/(.*?)\?(.*)/) && (a = r.match(/(.*?)\?(.*)/), o.query = a[2], r = a[1]), o.query && i.match(/^\?/)) return n(i, o.query);
                if (r.match(/(.*?):?\/\/(.*)/) && (a = r.match(/(.*?):?\/\/(.*)/), o.protocol = a[1].toLowerCase(), r = a[2]), r.match(/(.*?)(\/.*)/) && (a = r.match(/(.*?)(\/.*)/), o.path = a[2], r = a[1]), o.path = (o.path || "").replace(/^([^/])/, "/$1").replace(/\/$/, ""), (i = i.match(/^[-0-9]+$/) ? i.replace(/^([^/])/, "/$1") : i).match(/^\//)) return t(i, o.path.substring(1));
                if ((a = (a = t("/-1", o.path.substring(1))) && a.match(/(.*?)\.(.*)/)) && (o.file = a[0], o.filename = a[1], o.fileext = a[2]), r.match(/(.*):([0-9]+)$/) && (a = r.match(/(.*):([0-9]+)$/), o.port = a[2], r = a[1]), r.match(/(.*?)@(.*)/) && (a = r.match(/(.*?)@(.*)/), o.auth = a[1], r = a[2]), o.auth && (a = o.auth.match(/(.*):(.*)/), o.user = a ? a[1] : o.auth, o.pass = a ? a[2] : void 0), o.hostname = r.toLowerCase(), "." === i.charAt(0)) return t(i, o.hostname);
                e() && (a = o.hostname.match(e())) && (o.tld = a[3], o.domain = a[2] ? a[2] + "." + a[3] : void 0, o.sub = a[1] || void 0), r = o.port ? ":" + o.port : "", o.protocol = o.protocol || window.location.protocol.replace(":", ""), o.port = o.port || ("https" === o.protocol ? "443" : "80"), o.protocol = o.protocol || ("443" === o.port ? "https" : "http"), o.basic = o.protocol + "://" + o.hostname + r
            }
            return i in o ? o[i] : "{}" === i ? o : ""
        }
    }(), _.createString = function(e) { for (var t = e, n = Math.random().toString(36).substr(2); n.length < t;) { n += Math.random().toString(36).substr(2) } return n.substr(0, e) }, _.createAesKey = function() { return _.createString(16) }, _.setQuery = function(e) { var t, n = []; for (t in e) { e.hasOwnProperty(t) && n.push(encodeURIComponent(t) + "=" + encodeURIComponent(e[t])) } return n.join("&") }, _.generateEncryptyData = function(e, t) {
        if (void 0 !== t) {
            var n = t.publicKey;
            if (t = t.version, void 0 !== n && void 0 !== t && "undefined" != typeof CryptoJS && "undefined" != typeof JSEncrypt) {
                var i = _.createAesKey();
                try {
                    var r = CryptoJS.enc.Utf8.parse(i),
                        a = CryptoJS.enc.Utf8.parse(JSON.stringify(e)),
                        o = _.isUndefined(CryptoJS.pad.Pkcs7) ? CryptoJS.pad.PKCS7 : CryptoJS.pad.Pkcs7,
                        s = CryptoJS.AES.encrypt(a, r, { mode: CryptoJS.mode.ECB, padding: o }).toString(),
                        c = new JSEncrypt,
                        u = (c.setPublicKey(n), c.encrypt(i));
                    return !1 === u ? (logger$1.warn("\u79C1\u94A5\u52A0\u5BC6\u5931\u8D25\uFF0C\u8FD4\u56DE\u539F\u6570\u636E"), e) : { pkv: t, ekey: u, payload: s }
                } catch (e) { logger$1.warn("\u6570\u636E\u52A0\u5BC6\u5931\u8D25\uFF0C\u8FD4\u56DE\u539F\u6570\u636E: " + e) }
            }
        }
        return e
    }, "object" === _typeof(logger$1) ? logger$1 : {}),
    PlatformProxy = (logger$1.info = function() { if ("object" === ("undefined" == typeof console ? "undefined" : _typeof(console)) && console.log && logger$1.enabled) try { return console.log.apply(console, arguments) } catch (e) { console.log(arguments[0]) } }, logger$1.warn = function() { if ("object" === ("undefined" == typeof console ? "undefined" : _typeof(console)) && console.log && logger$1.enabled) try { return console.warn.apply(console, arguments) } catch (e) { console.warn(arguments[0]) } }, function() {
        function e() { _classCallCheck(this, e), this.config = { persistenceName: "GravityEngine", persistenceNameOld: "GravityEngine_mg" } }
        return _createClass(e, [{ key: "getConfig", value: function value() { return this.config } }, {
            key: "getStorage",
            value: function value(e, t, n) {
                if (e = localStorage.getItem(e), !t) return _.isJSONString(e) ? JSON.parse(e) : {};
                _.isJSONString(e) ? n(JSON.parse(e)) : n({})
            }
        }, { key: "setStorage", value: function value(e, t) { localStorage.setItem(e, t) } }, { key: "_setSystemProxy", value: function value(e) { this._sysCallback = e } }, {
            key: "getSystemInfo",
            value: function value(e) {
                var t = { mp_platform: "web", system: this._getOs(), screenWidth: window.screen.width, screenHeight: window.screen.height, systemLanguage: navigator.language };
                this._sysCallback && (t = _.extend(t, this._sysCallback(e))), e.success(t), e.complete()
            }
        }, { key: "_getOs", value: function value() { var e = navigator.userAgent; return /Windows/i.test(e) ? /Phone/.test(e) || /WPDesktop/.test(e) ? "Windows Phone" : "Windows" : /(iPhone|iPad|iPod)/.test(e) ? "iOS" : /Android/.test(e) ? "Android" : /(BlackBerry|PlayBook|BB10)/i.test(e) ? "BlackBerry" : /Mac/i.test(e) ? "MacOS" : /Linux/.test(e) ? "Linux" : /CrOS/.test(e) ? "ChromeOS" : "" } }, { key: "getNetworkType", value: function value(e) { e.complete() } }, { key: "onNetworkStatusChange", value: function value() {} }, {
            key: "request",
            value: function value(e) {
                var t = {},
                    n = new XMLHttpRequest;
                if (n.open(e.method, e.url), e.header)
                    for (var i in e.header) { n.setRequestHeader(i, e.header[i]) }
                return n.onreadystatechange = function() { 4 === n.readyState && 200 === n.status ? (t.statusCode = 200, _.isJSONString(n.responseText) && (t.data = JSON.parse(n.responseText)), e.success(t)) : 200 !== n.status && (t.errMsg = "network error", e.fail(t)) }, n.ontimeout = function() { t.errMsg = "timeout", e.fail(t) }, n.send(e.data), n
            }
        }, { key: "initAutoTrackInstance", value: function value(e, t) { this.instance = e, this.autoTrack = t.autoTrack; var n = this; "onpagehide" in window ? window.onpagehide = function() { n.onPageHide(!0) } : window.onbeforeunload = function() { n.onPageHide(!0) }, n.onPageShow(), n.autoTrack.appHide && n.instance.timeEvent("ta_page_hide"), "onvisibilitychange" in document && (document.onvisibilitychange = function() { document.hidden ? n.onPageHide(!1) : (n.onPageShow(), n.autoTrack.appHide && n.instance.timeEvent("ta_page_hide")) }) } }, { key: "setGlobal", value: function value(e, t) { window[t] = e } }, { key: "getAppOptions", value: function value() {} }, { key: "showToast", value: function value() {} }, {
            key: "onPageShow",
            value: function value() {
                var e;
                this.autoTrack.appShow && (_.extend(e = {}, this.autoTrack.properties), _.isFunction(this.autoTrack.callback) && _.extend(e, this.autoTrack.callback("appShow")), this.instance._internalTrack("$WebPageView", e))
            }
        }, {
            key: "onPageHide",
            value: function value(e) {
                var t;
                this.autoTrack.appHide && (_.extend(t = {}, this.autoTrack.properties), _.isFunction(this.autoTrack.callback) && _.extend(t, this.autoTrack.callback("appHide")), this.instance._internalTrack("$WebPageHide", t, new Date, null, e))
            }
        }], [{ key: "createInstance", value: function value() { return new e } }]), e
    }()),
    AutoTrackBridge = function() {
        function e(t, n) { _classCallCheck(this, e), this.taInstance = t, this.config = n || {}, this.referrer = "Directly open", this.config.isPlugin ? (t.App = function() { App.apply(this, arguments) }, inension(t.Page)) : (n = App, App = this._initAppExtention(n), t = Page, Page = this._initPageExtension(t)) }
        return _createClass(e, [{
            key: "_initPageExtension",
            value: function value(e) {
                var t = this;
                return function(n) {
                    var i = n.onLoad,
                        r = n.onShow,
                        a = n.onShareAppMessage,
                        o = {};
                    return n.onLoad = function(e) { o = e || {}, "function" == typeof i && i.call(this, e) }, n.onShow = function(e) { t.onPageShow(o), "function" == typeof r && r.call(this, e) }, "function" == typeof a && (n.onShareAppMessage = function(e) { return e = a.call(this, e), t.onPageShare(e) }), e(n)
                }
            }
        }, {
            key: "_initAppExtention",
            value: function value(e) {
                var t = this;
                return function(n) {
                    var i = n.onLaunch,
                        r = n.onShow,
                        a = n.onHide;
                    return n.onLaunch = function(e) { t.onAppLaunch(e, this), "function" == typeof i && i.call(this, e) }, n.onShow = function(e) { t.onAppShow(e), "function" == typeof r && r.call(this, e) }, n.onHide = function() { t.onAppHide(), "function" == typeof a && a.call(this) }, e(n)
                }
            }
        }, { key: "onAppLaunch", value: function value(e, t) { this._setAutoTrackProperties(e), _.isUndefined(t) || (t[this.taInstance.name] = this.taInstance), this.config.appLaunch && (t = {}, e && e.path && (t.$url_query = _.setQuery(e.query), t.$scene = String(e.scene || e.from)), this.taInstance._internalTrack("$MPLaunch", t)) } }, {
            key: "onAppShow",
            value: function value(e) {
                var t;
                this.config.appHide && this.taInstance.timeEvent("$MPHide"), this._setAutoTrackProperties(e), this.config.appShow && (t = {}, e && e.path && (t.$url_path = this._getPath(e.path), t.$url_query = _.setQuery(e.query), t.$scene = String(e.scene || e.from)), _.extend(t, this.config.properties), _.isFunction(this.config.callback) && _.extend(t, this.config.callback("appShow")), this.taInstance._internalTrack("$MPShow", t))
            }
        }, {
            key: "onAppHide",
            value: function value() {
                var e;
                this.config.appHide && (_.extend(e = {}, this.config.properties), _.isFunction(this.config.callback) && _.extend(e, this.config.callback("appHide")), this.taInstance._internalTrack("$MPHide", e))
            }
        }, {
            key: "_getCurrentPath",
            value: function value() {
                var e = "Not to get";
                try {
                    var t = getCurrentPages();
                    e = t[t.length - 1].route
                } catch (e) { logger$1.info(e) }
                return e
            }
        }, { key: "_setAutoTrackProperties", value: function value() { this.taInstance._setAutoTrackProperties({}) } }, { key: "_getPath", value: function value(e) { return "string" == typeof e ? e.replace(/^\//, "") : "Abnormal values" } }, {
            key: "onPageShare",
            value: function value(e) {
                if (this.config.pageShare) {
                    var t = 1;
                    try { t = getCurrentPages().length } catch (e) { t = 1 }
                    this.taInstance._internalTrack("$MPShare", { $share_method: "\u8F6C\u53D1\u6D88\u606F\u5361\u7247", $share_depth: t, $url_path: this._getCurrentPath() })
                }
                return _.isObject(e) ? e : {}
            }
        }, {
            key: "onPageShow",
            value: function value(e) {
                var t;
                this.config.pageShow && (e = { $url_path: (t = this._getCurrentPath()) || "The system did not get a value", $url_query: _.setQuery(e) }, this.referrer = t, this.taInstance._internalTrack("$MPViewScreen", e))
            }
        }]), e
    }(),
    AutoTrackBridge$1 = function() {
        function e(t, n, i) {
            var r = this;
            _classCallCheck(this, e), this.taInstance = t, this.config = n || {}, t = i.getLaunchOptionsSync(), this._onShow(t), this.startTracked = !0, i.onShow(function(e) { r._onShow(e) }), i.onHide(function() {
                var e;
                r.startTracked = !1, r.config.appHide && (_.extend(e = {}, r.config.properties), _.isFunction(r.config.callback) && _.extend(e, r.config.callback("appHide")), r.taInstance._internalTrack("$MPHide", e))
            })
        }
        return _createClass(e, [{
            key: "_onShow",
            value: function value(e) {
                var t;
                this.startTracked || (this.config.appHide && this.taInstance.timeEvent("$MPHide"), this.config.appShow && (_.extend(t = {}, this.config.properties), _.isFunction(this.config.callback) && _.extend(t, this.config.callback("appShow")), this.taInstance._internalTrack("$MPShow", _objectSpread2(_objectSpread2({}, t), {}, { $scene: String(e.scene || e.from), $url_query: _.setQuery(PlatformAPI.getAppOptions().query) }))))
            }
        }]), e
    }(),
    PlatformProxy$1 = function() {
        function e(t, n, i) { _classCallCheck(this, e), this.api = t, this.config = n, this._config = i }
        return _createClass(e, [{ key: "getConfig", value: function value() { return this.config } }, {
            key: "getStorage",
            value: function value(e, t, n) {
                if (!t) return "dd_mp" === this._config.platform ? (t = this.api.getStorageSync({ key: e }), _.isJSONString(t.data) ? JSON.parse(t.data) : {}) : (t = this.api.getStorageSync(e), _.isJSONString(t) ? JSON.parse(t) : {});
                this.api.getStorage({ key: e, success: function success(e) { e = _.isJSONString(e.data) ? JSON.parse(e.data) : {}, n(e) }, fail: function fail() { logger$1.warn("getStorage faild"), n({}) } })
            }
        }, { key: "setStorage", value: function value(e, t) { this.api.setStorage({ key: e, data: t }) } }, { key: "_getPlatform", value: function value() { return "" } }, {
            key: "getSystemInfo",
            value: function value(e) {
                var t = this._config.mpPlatform;
                this.api.getSystemInfo({ success: function success(n) { _.isFunction(t) ? n.mp_platform = t(n) : n.mp_platform = t, e.success(n), "wechat" === t && e.complete() }, complete: function complete() { e.complete() } })
            }
        }, { key: "getNetworkType", value: function value(e) { _.isFunction(this.api.getNetworkType) ? this.api.getNetworkType({ success: function success(t) { e.success(t) }, complete: function complete() { e.complete() } }) : (e.success({}), e.complete()) } }, { key: "onNetworkStatusChange", value: function value(e) { _.isFunction(this.api.onNetworkStatusChange) ? this.api.onNetworkStatusChange(e) : e({}) } }, { key: "request", value: function value(e) { var t; return "ali_mp" === this._config.platform || "dd_mp" === this._config.platform ? ((t = _.extend({}, e)).headers = e.header, t.success = function(t) { t.statusCode = t.status, e.success(t) }, t.fail = function(t) { t.errMsg = t.errorMessage, e.fail(t) }, "dd_mp" === this._config.platform ? this.api.httpRequest(t) : this.api.request(t)) : this.api.request(e) } }, { key: "initAutoTrackInstance", value: function value(e, t) { return _.isObject(t.autoTrack) && (t.autoTrack.isPlugin = t.is_plugin), new(this._config.mp ? AutoTrackBridge : AutoTrackBridge$1)(e, t.autoTrack, this.api) } }, { key: "setGlobal", value: function value(e, t) { this._config.mp ? logger$1.warn("GravityAnalytics: we do not set global name for GE instance when you do not enable auto track.") : GameGlobal[t] = e } }, {
            key: "getAppOptions",
            value: function value(e) {
                var t = {};
                try { t = this.api.getLaunchOptionsSync() } catch (e) { logger$1.warn("Cannot get launch options.") }
                if (_.isFunction(e)) try { this._config.mp ? this.api.onAppShow(e) : this.api.onShow(e) } catch (e) { logger$1.warn("Cannot register onShow callback.") }
                return t
            }
        }, {
            key: "showToast",
            value: function value(e) {
                var t;
                _.isFunction(this.api.showToast) && (t = { title: e }, "dd_mp" !== this._config.platform && "ali_mp" !== this._config.platform || (t.content = e), this.api.showToast(t))
            }
        }], [{ key: "createInstance", value: function value() { return this._createInstance("R_CURRENT_PLATFORM") } }, {
            key: "_createInstance",
            value: function value(t) {
                switch (t) {
                    case "wechat_mp":
                        return new e(wx, { persistenceName: "GravityEngine", persistenceNameOld: "GravityEngine_wechat" }, { mpPlatform: "wechat", mp: !0, platform: t });
                    case "wechat_mg":
                        return new e(wx, { persistenceName: "GravityEngine", persistenceNameOld: "GravityEngine_wechat_game" }, { mpPlatform: "wechat", platform: t });
                    case "qq_mp":
                        return new e(qq, { persistenceName: "GravityEngine", persistenceNameOld: "GravityEngine_qq" }, { mpPlatform: "qq", mp: !0, platform: t });
                    case "qq_mg":
                        return new e(qq, { persistenceName: "GravityEngine", persistenceNameOld: "GravityEngine_qq_game" }, { mpPlatform: "qq", platform: t });
                    case "baidu_mp":
                        return new e(swan, { persistenceName: "GravityEngine", persistenceNameOld: "GravityEngine_swan" }, { mpPlatform: function mpPlatform(e) { return e.host }, mp: !0, platform: t });
                    case "baidu_mg":
                        return new e(swan, { persistenceName: "GravityEngine", persistenceNameOld: "GravityEngine_swan_game" }, { mpPlatform: function mpPlatform(e) { return e.host }, platform: t });
                    case "tt_mg":
                        return new e(tt, { persistenceName: "GravityEngine", persistenceNameOld: "GravityEngine_tt_game" }, { mpPlatform: function mpPlatform(e) { return e.appName }, platform: t });
                    case "tt_mp":
                        return new e(tt, { persistenceName: "GravityEngine", persistenceNameOld: "GravityEngine_tt" }, { mpPlatform: function mpPlatform(e) { return e.appName }, mp: !0, platform: t });
                    case "ali_mp":
                        return new e(my, { persistenceName: "GravityEngine", persistenceNameOld: "GravityEngine_ali" }, { mpPlatform: function mpPlatform(e) { return e.app }, mp: !0, platform: t });
                    case "dd_mp":
                        return new e(dd, { persistenceName: "GravityEngine", persistenceNameOld: "GravityEngine_dd" }, { mpPlatform: "dingding", mp: !0, platform: t });
                    case "bl_mg":
                        return new e(bl, { persistenceName: "GravityEngine", persistenceNameOld: "GravityEngine_mg" }, { mpPlatform: "bilibili", platform: t });
                    case "kuaishou_mp":
                        return new e(ks, { persistenceName: "GravityEngine", persistenceNameOld: "GravityEngine_kuaishou_program" }, { mpPlatform: "kuaishou", mp: !0, platform: t });
                    case "kuaishou_mg":
                        return new e(ks, { persistenceName: "GravityEngine", persistenceNameOld: "GravityEngine_kuaishou_game" }, { mpPlatform: "kuaishou_game", platform: t });
                    case "qh360_mg":
                        return new e(qh, { persistenceName: "GravityEngine", persistenceNameOld: "GravityEngine_qh360" }, { mpPlatform: "qh360", platform: t });
                    case "tb_mp":
                        return new e(my, { persistenceName: "GravityEngine", persistenceNameOld: "GravityEngine_tb" }, { mpPlatform: "tb", mp: !0, platform: t });
                    case "jd_mp":
                        return new e(jd, { persistenceName: "GravityEngine", persistenceNameOld: "GravityEngine_jd" }, { mpPlatform: "jd", mp: !0, platform: t });
                    case "qh360_mp":
                        return new e(qh, { persistenceName: "GravityEngine", persistenceNameOld: "GravityEngine_qh360" }, { mpPlatform: "qh360", mp: !0, platform: t });
                    case "WEB":
                        return new PlatformProxy.createInstance;
                }
            }
        }]), e
    }(),
    AutoTrackBridge$2 = _createClass(function e(t, n) {
        var i = this;
        _classCallCheck(this, e), this.taInstance = t, this.config = n || {}, this.config.appShow && this.taInstance._internalTrack("$MPShow"), this.config.appHide && this.taInstance.timeEvent("$MPHide"), qg.onShow(function() {
            var e;
            i.config.appHide && i.taInstance.timeEvent("$MPHide"), i.config.appShow && (_.extend(e = {}, i.config.properties), _.isFunction(i.config.callback) && _.extend(e, i.config.callback("appShow")), i.taInstance._internalTrack("$MPShow"))
        }), qg.onHide(function() {
            var e;
            i.config.appHide && (_.extend(e = {}, i.config.properties), _.isFunction(i.config.callback) && _.extend(e, i.config.callback("appHide")), i.taInstance._internalTrack("$MPHide"))
        })
    }),
    PlatformProxy$2 = function() {
        function e() { _classCallCheck(this, e), this.config = { persistenceName: "gravityengine", persistenceNameOld: "gravityengine_qg_vivo_game", asyncPersistence: !0 } }
        return _createClass(e, [{ key: "getConfig", value: function value() { return this.config || {} } }, {
            key: "getStorage",
            value: function value(e, t, n) {
                if (!t) return t = qg.getStorageSync({ key: e }), _.isJSONString(t) ? JSON.parse(t) : {};
                qg.getStorage({ key: e, success: function success(e) { e = _.isJSONString(e) ? JSON.parse(e) : {}, n(e) }, fail: function fail() { n({}) } })
            }
        }, { key: "setStorage", value: function value(e, t) { qg.setStorage({ key: e, value: t }) } }, {
            key: "getSystemInfo",
            value: function value(e) {
                qg.getSystemInfo({
                    success: function success(t) {
                        var n = t,
                            i = [t.osType, t.osVersionName].join(" ");
                        n.brand = t.manufacturer, n.system = i, n.mp_platform = "vivo_qg", e.success(n)
                    },
                    complete: function complete() { e.complete() }
                })
            }
        }, {
            key: "getQuickDevice",
            value: function value(e) {
                var t = { os_name: "android", android_id: "", imei: "", oaid: "", mac: "", android_version: "", api_version: 0, rom: { gravityengine_qg_huawei_game: "EMUI", gravityengine_qg: "MIUI", gravityengine_qg_oppo_game: "ColorOS", gravityengine_qg_vivo_game: "FuntouchOS", gravityengine_qg_mz_game: "Flyme" }[e.platform], rom_version: "", phone_brand: "", phone_model: "" };
                qg.getSystemInfo({
                    success: function success(n) {
                        var i;
                        t.android_version = n.system, t.api_version = n.platformVersionCode, t.rom_version = n.COREVersion, t.phone_brand = n.brand, t.phone_model = n.model, qg.getOAID && (n = null != (i = null == (i = (n = qg).getOAID) ? void 0 : i.call(n).oaid) ? i : "", t.android_id = n, t.imei = n, t.oaid = n), e.success(t)
                    }
                })
            }
        }, {
            key: "getNetworkType",
            value: function value(e) {
                qg.getNetworkType({
                    success: function success(t) {
                        var n = t;
                        n.networkType = t.type, e.success(n)
                    },
                    complete: function complete() { e.complete() }
                })
            }
        }, {
            key: "onNetworkStatusChange",
            value: function value(e) {
                qg.subscribeNetworkStatus({
                    callback: function callback(t) {
                        var n = t;
                        n.networkType = t.type, e(n)
                    }
                })
            }
        }, { key: "request", value: function value(e) { return qg.request({ url: e.url, data: e.data, method: e.method, header: e.header, success: function success(t) { e.success(t) }, fail: function fail(t) { e.fail(t) } }) } }, { key: "initAutoTrackInstance", value: function value(e, t) { return new AutoTrackBridge$2(e, t.autoTrack) } }, { key: "setGlobal", value: function value(e, t) { globalThis[t] = e } }, { key: "getAppOptions", value: function value() { return {} } }, { key: "showToast", value: function value(e) { qg.showToast({ message: e, duration: 0 }) } }], [{ key: "createInstance", value: function value() { return new e } }]), e
    }(),
    AutoTrackBridge$3 = _createClass(function e(t, n, i) {
        var r = this;
        _classCallCheck(this, e), this.taInstance = t, this.config = n || {}, this.config.appShow && (_.extend(t = {}, this.config.properties), _.isFunction(this.config.callback) && _.extend(t, this.config.callback("appShow")), this.taInstance._internalTrack("$MPShow", t)), this.config.appHide && this.taInstance.timeEvent("$MPHide"), i.onShow(function() {
            var e;
            r.config.appHide && r.taInstance.timeEvent("$MPHide"), r.config.appShow && (_.extend(e = {}, r.config.properties), _.isFunction(r.config.callback) && _.extend(e, r.config.callback("appShow")), r.taInstance._internalTrack("$MPShow", e))
        }), i.onHide(function() {
            var e;
            r.config.appHide && (_.extend(e = {}, r.config.properties), _.isFunction(r.config.callback) && _.extend(e, r.config.callback("appHide")), r.taInstance._internalTrack("$MPHide", e))
        })
    }),
    PlatformProxy$3 = function() {
        function e(t, n, i) { _classCallCheck(this, e), this.api = t, this.config = n, this._config = i }
        return _createClass(e, [{ key: "getConfig", value: function value() { return this.config || {} } }, {
            key: "getStorage",
            value: function value(e, t, n) {
                if (e = localStorage.getItem(e), !t) return _.isJSONString(e) ? JSON.parse(e) : {};
                _.isJSONString(e) ? n(JSON.parse(e)) : n({})
            }
        }, { key: "setStorage", value: function value(e, t) { localStorage.setItem(e, t) } }, {
            key: "getSystemInfo",
            value: function value(e) {
                var t = this._config.mpPlatform;
                this.api.getSystemInfo({ success: function success(n) { n.mp_platform = t, e.success(n) }, complete: function complete() { e.complete() } })
            }
        }, {
            key: "getQuickDevice",
            value: function value(e) {
                var t = { os_name: "android", android_id: "", imei: "", oaid: "", mac: "", android_version: "", api_version: 0, rom: { gravityengine_qg_huawei_game: "EMUI", gravityengine_qg: "MIUI", gravityengine_qg_oppo_game: "ColorOS", gravityengine_qg_vivo_game: "FuntouchOS", gravityengine_qg_mz_game: "Flyme" }[e.platform], rom_version: "", phone_brand: "", phone_model: "" },
                    n = this;
                this.api.getSystemInfo({
                    success: function success(i) {
                        function r() { e.success(t) }
                        t.android_version = i.system, t.api_version = i.platformVersionCode, t.rom_version = i.COREVersion, t.phone_brand = i.brand, t.phone_model = i.model, n.api.getDeviceId ? n.api.getDeviceId({ success: function success(e) { t.android_id = e.deviceId, t.imei = e.deviceId, t.oaid = e.deviceId, r() } }) : n.api.getOAID ? n.api.getOAID({ success: function success(e) { t.android_id = e.oaid, t.imei = e.oaid, t.oaid = e.oaid, r() } }) : r()
                    }
                })
            }
        }, { key: "getNetworkType", value: function value(e) { this.api.getNetworkType({ success: function success(t) { e.success(t) }, complete: function complete() { e.complete() } }) } }, { key: "onNetworkStatusChange", value: function value(e) { this.api.onNetworkStatusChange({ callback: function callback(t) { e(t) } }) } }, {
            key: "request",
            value: function value(e) {
                var t = {},
                    n = new XMLHttpRequest;
                if (n.open(e.method, e.url), e.header)
                    for (var i in e.header) { n.setRequestHeader(i, e.header[i]) }
                return n.onreadystatechange = function() { 4 === n.readyState && 200 === n.status ? (t.statusCode = 200, _.isJSONString(n.responseText) && (t.data = JSON.parse(n.responseText)), e.success(t)) : 200 !== n.status && (t.errMsg = "network error", e.fail(t)) }, n.ontimeout = function() { t.errMsg = "timeout", e.fail(t) }, n.send(e.data), n
            }
        }, { key: "initAutoTrackInstance", value: function value(e, t) { return new AutoTrackBridge$3(e, t.autoTrack, this.api) } }, { key: "setGlobal", value: function value(e, t) { globalThis[t] = e } }, { key: "getAppOptions", value: function value() { return this.api.getLaunchOptionsSync() } }, { key: "showToast", value: function value(e) { this.api.showToast({ title: e, icon: "none", duration: 2e3 }) } }], [{ key: "createInstance", value: function value() { return this._createInstance("R_CURRENT_PLATFORM") } }, {
            key: "_createInstance",
            value: function value(t) {
                switch (t) {
                    case "oppo":
                        return new e(qg, { persistenceName: "gravityengine", persistenceNameOld: "gravityengine_qg_oppo_game" }, { mpPlatform: "oppo_qg" });
                    case "huawei":
                        return new e(hbs, { persistenceName: "gravityengine", persistenceNameOld: "gravityengine_qg_huawei_game" }, { mpPlatform: "huawei_qg" });
                    case "mz":
                        return new e(qg, { persistenceName: "gravityengine", persistenceNameOld: "gravityengine_qg_mz_game" }, { mpPlatform: "mz" });
                    case "xiaomi":
                        return new e(qg, { persistenceName: "gravityengine", persistenceNameOld: "gravityengine_qg" }, { mpPlatform: "xiaomi" });
                }
            }
        }]), e
    }(),
    PlatformProxyCC = function() {
        function e() { _classCallCheck(this, e) }
        return _createClass(e, null, [{
            key: "createInstance",
            value: function value() {
                var e, t = Object.freeze({ WECHAT_GAME: 104, QQ_PLAY: 105, BAIDU_GAME: 107, VIVO_GAME: 108, OPPO_GAME: 109, HUAWEI_GAME: 110, XIAOMI_GAME: 111, BYTEDANCE_GAME: 117, QTT_GAME: 116, LINKSURE: 119, WECHAT_MINI_GAME: "WECHAT_GAME", BAIDU_MINI_GAME: "BAIDU_MINI_GAME", XIAOMI_QUICK_GAME: "XIAOMI_QUICK_GAME", OPPO_MINI_GAME: "OPPO_MINI_GAME", VIVO_MINI_GAME: "VIVO_MINI_GAME", HUAWEI_QUICK_GAME: "HUAWEI_QUICK_GAME", BYTEDANCE_MINI_GAME: "BYTEDANCE_MINI_GAME", QTT_MINI_GAME: "QTT_MINI_GAME", LINKSURE_MINI_GAME: "LINKSURE_MINI_GAME" });
                return cc.sys.platform === t.WECHAT_GAME || cc.sys.platform === t.WECHAT_MINI_GAME ? PlatformProxy$1._createInstance("wechat_mg") : cc.sys.platform === t.BAIDU_GAME || cc.sys.platform === t.BAIDU_MIN_GAME ? PlatformProxy$1._createInstance("baidu_mg") : cc.sys.platform === t.VIVO_GAME || cc.sys.platform === t.VIVO_MINI_GAME ? PlatformProxy$2.createInstance() : cc.sys.platform === t.QQ_PLAY ? PlatformProxy$1._createInstance("qq_mg") : cc.sys.platform === t.OPPO_GAME || cc.sys.platform === t.OPPO_MINI_GAME ? PlatformProxy$3._createInstance("oppo") : cc.sys.platform === t.HUAWEI_GAME || cc.sys.platform === t.HUAWEI_QUICK_GAME ? PlatformProxy$3._createInstance("huawei") : cc.sys.platform === t.XIAOMI_GAME || cc.sys.platform === t.XIAOMI_QUICK_GAME ? PlatformProxy$3._createInstance("xiaomi") : cc.sys.platform === t.BYTEDANCE_GAME || cc.sys.platform === t.BYTEDANCE_MINI_GAME ? PlatformProxy$1._createInstance("tt_mg") : ((e = PlatformProxy.createInstance())._sysCallback = function() { return { system: cc.sys.os.replace(" ", "") + " " + cc.sys.osVersion } }, e.getNetworkType = function(e) {
                    var t = {};
                    switch (cc.sys.getNetworkType()) {
                        case cc.sys.NetworkType.LAN:
                            t.networkType = "WIFI";
                            break;
                        case cc.sys.NetworkType.WWAN:
                            t.networkType = "WWAN";
                            break;
                        default:
                            t.networkType = "NONE";
                    }
                    e.success(t), e.complete()
                }, e.getSystemInfo = function(t) {
                    var n = { mp_platform: cc.sys.platform.toString(), system: e._getOs(), screenWidth: window.screen.width, screenHeight: window.screen.height };
                    e._sysCallback && (n = _.extend(n, e._sysCallback(t))), t.success(n), t.complete()
                }, e)
            }
        }]), e
    }(),
    PlatformAPI = function() {
        function e() { _classCallCheck(this, e) }
        return _createClass(e, null, [{ key: "_getCurrentPlatform", value: function value() { return this.currentPlatform || (this.currentPlatform = PlatformProxyCC.createInstance()) } }, { key: "getConfig", value: function value() { return this._getCurrentPlatform().getConfig() } }, { key: "getStorage", value: function value(e, t, n) { return this._getCurrentPlatform().getStorage(e, t, n) } }, { key: "setStorage", value: function value(e, t) { return this._getCurrentPlatform().setStorage(e, t) } }, { key: "getSystemInfo", value: function value(e) { return this._getCurrentPlatform().getSystemInfo(e) } }, { key: "getNetworkType", value: function value(e) { return this._getCurrentPlatform().getNetworkType(e) } }, { key: "getQuickDevice", value: function value(e) { return this._getCurrentPlatform().getQuickDevice(e) } }, { key: "onNetworkStatusChange", value: function value(e) { this._getCurrentPlatform().onNetworkStatusChange(e) } }, { key: "request", value: function value(e) { return this._getCurrentPlatform().request(e) } }, { key: "initAutoTrackInstance", value: function value(e, t) { return this._getCurrentPlatform().initAutoTrackInstance(e, t) } }, { key: "setGlobal", value: function value(e, t) { e && t && this._getCurrentPlatform().setGlobal(e, t) } }, { key: "getAppOptions", value: function value(e) { return this._getCurrentPlatform().getAppOptions(e) } }, { key: "showDebugToast", value: function value(e) { this._getCurrentPlatform().showToast(e) } }]), e
    }(),
    KEY_NAME_MATCH_REGEX = /^\$?[a-zA-Z][a-zA-Z0-9_]{0,49}$/,
    PropertyChecker = function() {
        function e() { _classCallCheck(this, e) }
        return _createClass(e, null, [{ key: "stripProperties", value: function value(e) { return _.isObject(e) && _.each(e, function(e, t) { _.isString(e) || _.isNumber(e) || _.isDate(e) || _.isBoolean(e) || _.isArray(e) || _.isObject(e) || logger$1.warn("Your data -", t, e, "- format does not meet requirements and may not be stored correctly. Attribute values only support String, Number, Date, Boolean, Array, Object") }), e } }, { key: "_checkPropertiesKey", value: function value(e) { var t = !0; return _.each(e, function(e, n) { KEY_NAME_MATCH_REGEX.test(n) || (logger$1.warn("Invalid KEY: " + n), t = !1) }), t } }, { key: "event", value: function value(e) { return !(!_.isString(e) || !KEY_NAME_MATCH_REGEX.test(e)) || (logger$1.warn("Check the parameter format. The eventName must start with an English letter and contain no more than 50 characters including letters, digits, and underscores: " + e), !1) } }, { key: "propertyName", value: function value(e) { return !(!_.isString(e) || !KEY_NAME_MATCH_REGEX.test(e)) || (logger$1.warn("Check the parameter format. PropertyName must start with a letter and contain letters, digits, and underscores (_). The value is a string of no more than 50 characters: " + e), !1) } }, { key: "properties", value: function value(e) { return this.stripProperties(e), !(e && (_.isObject(e) ? !this._checkPropertiesKey(e) && (logger$1.warn("Check the parameter format. The properties key must start with a letter, contain digits, letters, and underscores (_), and contain a maximum of 50 characters"), 1) : (logger$1.warn("properties can be none, but it must be an object"), 1))) } }, { key: "propertiesMust", value: function value(e) { return this.stripProperties(e), void 0 === e || !_.isObject(e) || _.isEmptyObject(e) ? (logger$1.warn("properties must be an object with a value"), !1) : !!this._checkPropertiesKey(e) || (logger$1.warn("Check the parameter format. The properties key must start with a letter, contain digits, letters, and underscores (_), and contain a maximum of 50 characters"), !1) } }, { key: "userId", value: function value(e) { return !(!_.isString(e) || !/^.{1,64}$/.test(e)) || (logger$1.warn("The user ID must be a string of less than 64 characters and cannot be null"), !1) } }, { key: "userAddProperties", value: function value(e) { if (!this.propertiesMust(e)) return !1; for (var t in e) { if (!_.isNumber(e[t])) return logger$1.warn("The attributes of userAdd need to be Number"), !1 } return !0 } }, { key: "userAppendProperties", value: function value(e) { if (!this.propertiesMust(e)) return !1; for (var t in e) { if (!_.isArray(e[t])) return logger$1.warn("The attribute of userAppend must be Array"), !1 } return !0 } }]), e
    }(),
    HttpTask = function() {
        function e(t, n, i, r, a, o) { _classCallCheck(this, e), this.data = t, this.serverUrl = n, this.callback = o, this.debugMode = a, this.tryCount = _.isNumber(i) ? i : 1, this.permissionTryCount = 6, this.timeout = _.isNumber(r) ? r : 3e3, this.taClassName = "HttpTask" }
        return _createClass(e, [{
            key: "run",
            value: function value() {
                var e = this,
                    t = _.createExtraHeaders(),
                    n = (t["content-type"] = "application/json", "debug" === this.debugMode && (t["Turbo-Debug-Mode"] = 1), PlatformAPI.request({
                        url: this.serverUrl,
                        method: "POST",
                        data: this.data,
                        header: t,
                        success: function success(t) {
                            var n;
                            0 === (null == t || null == (n = t.data) ? void 0 : n.code) ? e.onSuccess(t) : e.onFailed(t)
                        },
                        fail: function fail(t) { e.onFailed(t) }
                    }));
                setTimeout(function() {
                    (_.isObject(n) || _.isPromise(n)) && _.isFunction(n.abort) && n.abort()
                }, this.timeout)
            }
        }, {
            key: "onSuccess",
            value: function value(e) {
                var t, n;
                200 === e.statusCode ? (n = "Data Verified", null != e && null != (t = e.data) && null != (t = t.extra) && null != (t = t.errors) && t.length && (n = e.data.extra.errors), this.callback({ code: null == e || null == (t = e.data) ? void 0 : t.code, msg: n })) : this.callback({ code: -3, msg: e.statusCode })
            }
        }, {
            key: "onFailed",
            value: function value(e) {
                var t, n = this;
                0 < --this.tryCount ? setTimeout(function() { n.run() }, 1e3) : this.callback({ code: -3, msg: "".concat(null == e || null == (t = e.data) ? void 0 : t.msg, "\uFF1A").concat(null == e || null == (t = e.data) || null == (t = t.extra) ? void 0 : t.error) })
            }
        }]), e
    }(),
    SenderQueue = function() {
        function e() { _classCallCheck(this, e), this.items = [], this.isRunning = !1, this.showDebug = !1 }
        return _createClass(e, [{
            key: "enqueue",
            value: function value(e, t, n) {
                var i = !(3 < arguments.length && void 0 !== arguments[3]) || arguments[3],
                    r = "debug" === n.debugMode,
                    a = this;
                e = new HttpTask(JSON.stringify(e), t, n.maxRetries, n.sendTimeout, n.debugMode, function(e) { a.isRunning = !1, _.isFunction(n.callback) && n.callback(e), a._runNext(r), r && logger$1.info("code ".concat(e.code, " and msg is ").concat(e.msg)) }), !0 === i ? (this.items.push(e), this._runNext(r)) : e.run()
            }
        }, { key: "_dequeue", value: function value() { return this.items.shift() } }, {
            key: "_runNext",
            value: function value(e) {
                if (0 < this.items.length && !this.isRunning)
                    if (this.isRunning = !0, e) this._dequeue().run();
                    else {
                        for (var t = this.items.splice(0, this.items.length), n = (e = t[0], JSON.parse(e.data)), i = 1; i < t.length; i++) {
                            var r = t[i];
                            r = JSON.parse(r.data), n.event_list = n.event_list.concat(r.event_list)
                        }
                        var a = new Date().getTime();
                        n.$flush_time = a, new HttpTask(JSON.stringify(n), e.serverUrl, e.tryCount, e.timeout, null == e ? void 0 : e.debugMode, e.callback).run()
                    }
            }
        }]), e
    }(),
    senderQueue = new SenderQueue,
    DEFAULT_CONFIG = { name: "GravityEngine", is_plugin: !1, maxRetries: 3, sendTimeout: 5e3, enablePersistence: !0, asyncPersistence: !1, strict: !1, debugMode: "none" },
    systemInformation = {
        properties: { $lib_version: Config.LIB_VERSION, $lib: Config.LIB_STACK, $scene: "", $today_first_scene: "" },
        getSystemInfo: function getSystemInfo(e) {
            var t = this;
            PlatformAPI.onNetworkStatusChange(function(e) { t.properties.$network_type = e.networkType }), PlatformAPI.getNetworkType({
                success: function success(e) { t.properties.$network_type = e.networkType },
                complete: function complete() {
                    PlatformAPI.getSystemInfo({
                        success: function success(e) {
                            logger$1.info(JSON.stringify(e, null, 4));
                            var n = { $manufacturer: e.brand, $brand: e.brand, $model: e.model, $screen_width: Number(e.screenWidth), $screen_height: Number(e.screenHeight), $system_language: e.language, $os: e.platform, $os_version: e.system };
                            _.extend(t.properties, n), _.setMpPlatform(e.mp_platform)
                        },
                        complete: function complete() { e() }
                    })
                }
            })
        }
    },
    GravityEnginePersistence = function() {
        function e(t, n) {
            var i = this;
            _classCallCheck(this, e), this.enabled = t.enablePersistence, this.enabled ? (t.isChildInstance ? (this.name = t.persistenceName + "_" + t.name, this.nameOld = t.persistenceNameOld + "_" + t.name) : (this.name = t.persistenceName, this.nameOld = t.persistenceNameOld), t.asyncPersistence ? (this._state = {}, PlatformAPI.getStorage(this.name, !0, function(e) { _.isEmptyObject(e) ? PlatformAPI.getStorage(i.nameOld, !0, function(e) { i._state = _.extend2Layers({}, e, i._state), i._init(t, n), i._save() }) : (i._state = _.extend2Layers({}, e, i._state), i._init(t, n), i._save()) })) : (this._state = PlatformAPI.getStorage(this.name) || {}, _.isEmptyObject(this._state) && (this._state = PlatformAPI.getStorage(this.nameOld) || {}), this._init(t, n))) : (this._state = {}, this._init(t, n))
        }
        return _createClass(e, [{
            key: "_init",
            value: function value(e, t) {
                this.getDistinctId() || this.setDistinctId(_.UUID()), e.isChildInstance || this.getDeviceId() || this._setDeviceId(_.UUID()), this.initComplete = !0, "function" == typeof t && t(), t = null == (e = PlatformAPI.getStorage(this.name)) ? void 0 : e.current_first_scene_date;
                var n = null == e ? void 0 : e.current_first_scene,
                    i = new Date().toLocaleDateString();
                n && t && t === i ? systemInformation.properties.$today_first_scene = String(null == e ? void 0 : e.current_first_scene) : (e = String((null == (n = PlatformAPI.getAppOptions()) ? void 0 : n.scene) || (null == (t = PlatformAPI.getAppOptions()) ? void 0 : t.from)), systemInformation.properties.$today_first_scene = e, this._state.current_first_scene = e, this._state.current_first_scene_date = i), this._save()
            }
        }, { key: "_save", value: function value() { this.enabled && this.initComplete && PlatformAPI.setStorage(this.name, JSON.stringify(this._state)) } }, { key: "_set", value: function value(e, t) { var n, i = this; "string" == typeof e ? (n = {})[e] = t : "object" === _typeof(e) && (n = e), _.each(n, function(e, t) { i._state[t] = e }), this._save() } }, { key: "_get", value: function value(e) { return this._state[e] } }, {
            key: "setEventTimer",
            value: function value(e, t) {
                var n = this._state.event_timers || {};
                n[e] = t, this._set("event_timers", n)
            }
        }, { key: "removeEventTimer", value: function value(e) { var t = (this._state.event_timers || {})[e]; return _.isUndefined(t) || (delete this._state.event_timers[e], this._save()), t } }, { key: "getDeviceId", value: function value() { return this._state.device_id } }, { key: "_setDeviceId", value: function value(e) { this.getDeviceId() ? logger$1.warn("cannot modify the device id.") : this._set("device_id", e) } }, { key: "getDistinctId", value: function value() { return this._state.distinct_id } }, { key: "setDistinctId", value: function value(e) { this._set("distinct_id", e) } }, { key: "getAccountId", value: function value() { return this._state.account_id } }, { key: "setAccountId", value: function value(e) { this._set("account_id", e) } }, { key: "getSuperProperties", value: function value() { return this._state.props || {} } }, { key: "setSuperProperties", value: function value(e, t) { t = t ? e : _.extend(this.getSuperProperties(), e), this._set("props", t) } }]), e
    }();

function getPlatFormName() { return PlatformAPI.getConfig().persistenceNameOld }
var GravityEngineAPI = function() {
        function e(t) {
            _classCallCheck(this, e), t.appId = _.checkAppId((null == t ? void 0 : t.clientId) || ""), t.accessToken = t.accessToken, t.accessToken || console.warn("GravityAnalytics: accessToken must be required"), t.serverUrl = "".concat(Config.BASE_URL, "/event/collect/?access_token=").concat(t.accessToken);
            var n = _.extend({}, DEFAULT_CONFIG, PlatformAPI.getConfig());
            _.isObject(t) ? this.config = _.extend(n, t) : this.config = n, this._init(this.config)
        }
        var t, n, i;
        return _createClass(e, [{
            key: "_init",
            value: function value(e) {
                var t = this,
                    n = (this.name = e.name, this.appId = e.clientId, this.accessToken = e.accessToken, e.serverUrl || e.server_url);
                ("GravityEngine_wechat_game" === (this.serverUrl = n, this.serverDebugUrl = n, this.configUrl = n + "/config", this.autoTrackProperties = {}, this._queue = [], this.config.syncBatchSize = 100, this.config.syncInterval = 60, e.isChildInstance ? this._state = {} : (logger$1.enabled = "debug" === e.debugMode, this.instances = [], this._state = { getSystemInfo: !1, initComplete: !1 }, systemInformation.getSystemInfo(function() { t._updateState({ getSystemInfo: !0 }) }), PlatformAPI.setGlobal(this, this.name)), systemInformation.properties.$scene = String((null == (n = PlatformAPI.getAppOptions()) ? void 0 : n.scene) || (null == (n = PlatformAPI.getAppOptions()) ? void 0 : n.from)), this.store = new GravityEnginePersistence(e, function() { t.config.asyncPersistence && _.isFunction(t.config.persistenceComplete) && t.config.persistenceComplete(t), t._updateState() }), this.enabled = !_.isBoolean(this.store._get("ge_enabled")) || this.store._get("ge_enabled"), this.isOptOut = !!_.isBoolean(this.store._get("ge_isOptOut")) && this.store._get("ge_isOptOut"), n = getPlatFormName()) || "GravityEngine_tt_game" === n || n.includes("gravityengine_qg")) && e.autoTrack.appLaunch && this.track("$MPLaunch", { $url_query: this.setQuery(this.getQuery()) }), !e.isChildInstance && e.autoTrack && (this.autoTrack = PlatformAPI.initAutoTrackInstance(this, e))
            }
        }, { key: "updateConfig", value: function value() {} }, {
            key: "initInstance",
            value: function value(t, n) {
                if (!this.config.isChildInstance) return _.isString(t) && t !== this.name && _.isUndefined(this[t]) ? (n = new e(_.extend({}, this.config, { enablePersistence: !1, isChildInstance: !0, name: t }, n)), this[t] = n, this.instances.push(t), this[t]._state = this._state, n) : void logger$1.warn("initInstance() failed due to the name is invalid: " + t);
                logger$1.warn("initInstance() cannot be called on child instance")
            }
        }, { key: "lightInstance", value: function value(e) { return this[e] } }, { key: "_setAutoTrackProperties", value: function value(e) { _.extend(this.autoTrackProperties, e) } }, {
            key: "setupAndStart",
            value: function value(e) {
                if (null != e && e.clientId && (this.config.appId = e.clientId, this.appId = e.clientId), this._state.initComplete) return !1;
                this._updateState({ initComplete: !0 })
            }
        }, { key: "_isReady", value: function value() { return this._state.getSystemInfo && this._state.initComplete && this.store.initComplete && this.config.appId && this.config.accessToken } }, {
            key: "_updateState",
            value: function value(e) {
                var t = this;
                _.isObject(e) && _.extend(this._state, e), this._onStateChange(), _.each(this.instances, function(e) { t[e]._onStateChange() })
            }
        }, {
            key: "_onStateChange",
            value: function value() {
                var e = this;
                this._isReady() && this._queue && 0 < this._queue.length && (_.each(this._queue, function(t) { e[t[0]].apply(e, slice.call(t[1])) }), this._queue = [])
            }
        }, { key: "_hasDisabled", value: function value() { var e = !this.enabled || this.isOptOut; return e && logger$1.info("GravityEngine is Pause or Stop!"), e } }, {
            key: "_sendRequest",
            value: function value(e, t, n) {
                var i, r;
                this._hasDisabled() || (!_.isUndefined(this.config.disableEventList) && this.config.disableEventList.includes(e.eventName) ? logger$1.info("disabled Event : " + e.eventName) : (t = _.isDate(t) ? t : new Date, (t = { event_list: [{ type: e.type, time: new Date(t).getTime() }] }).event_list[0].event = e.eventName, "track" === e.type ? (t.event_list[0].properties = this.getSendProperties(), i = this.store.removeEventTimer(e.eventName), _.isUndefined(i) || (i = new Date().getTime() - i, 86400 < (i = parseFloat((i / 1e3).toFixed(3))) ? i = 86400 : i < 0 && (i = 0), t.event_list[0].properties.$event_duration = i)) : t.event_list[0].properties = {}, _.isObject(e.properties) && !_.isEmptyObject(e.properties) && _.extend(t.event_list[0].properties, e.properties), _.searchObjDate(t.event_list[0]), t.client_id = this.appId, logger$1.info(JSON.stringify(t, null, 4)), i = this.serverUrl, _.isBoolean(this.config.enableEncrypt) && 1 == this.config.enableEncrypt && (t.event_list[0] = _.generateEncryptyData(t.event_list[0], void 0)), n ? (n = new FormData, "debug" === this.config.debugMode ? (n.append("source", "client"), n.append("appid", this.appId), n.append("deviceId", this.getDeviceId()), n.append("data", JSON.stringify(t.event_list[0]))) : (r = _.base64Encode(JSON.stringify(t)), n.append("data", r)), navigator.sendBeacon(i, n), _.isFunction(e.onComplete) && e.onComplete({ statusCode: 200 })) : senderQueue.enqueue(t, i, { maxRetries: this.config.maxRetries, sendTimeout: this.config.sendTimeout, callback: e.onComplete, debugMode: this.config.debugMode })))
            }
        }, { key: "_isObjectParams", value: function value(e) { return _.isObject(e) && _.isFunction(e.onComplete) } }, {
            key: "track",
            value: function value(e, t, n, i) {
                var r;
                this._hasDisabled() || (this._isObjectParams(e) && (e = (r = e).eventName, t = r.properties, n = r.time, i = r.onComplete), PropertyChecker.event(e) && PropertyChecker.properties(t) || !this.config.strict ? this._internalTrack(e, t, n, i) : _.isFunction(i) && i({ code: -1, msg: "invalid parameters" }))
            }
        }, { key: "_internalTrack", value: function value(e, t, n, i, r) { this._hasDisabled() || (n = _.isDate(n) ? n : new Date, this._isReady() ? this._sendRequest({ type: "track", eventName: e, properties: t, onComplete: i }, n, r) : this._queue.push(["_internalTrack", [e, t, n, i]])) } }, {
            key: "userSet",
            value: function value(e, t, n) {
                var i;
                this._hasDisabled() || (this._isObjectParams(e) && (e = (i = e).properties, t = i.time, n = i.onComplete), PropertyChecker.propertiesMust(e) || !this.config.strict ? (t = _.isDate(t) ? t : new Date, this._isReady() ? this._sendRequest({ type: "profile", eventName: "profile_set", properties: e, onComplete: n }, t) : this._queue.push(["userSet", [e, t, n]])) : (logger$1.warn("calling userSet failed due to invalid arguments"), _.isFunction(n) && n({ code: -1, msg: "invalid parameters" })))
            }
        }, {
            key: "userSetOnce",
            value: function value(e, t, n) {
                var i;
                this._hasDisabled() || (this._isObjectParams(e) && (e = (i = e).properties, t = i.time, n = i.onComplete), PropertyChecker.propertiesMust(e) || !this.config.strict ? (t = _.isDate(t) ? t : new Date, this._isReady() ? this._sendRequest({ type: "profile", eventName: "profile_set_once", properties: e, onComplete: n }, t) : this._queue.push(["userSetOnce", [e, t, n]])) : (logger$1.warn("calling userSetOnce failed due to invalid arguments"), _.isFunction(n) && n({ code: -1, msg: "invalid parameters" })))
            }
        }, {
            key: "userAdd",
            value: function value(e, t, n) {
                var i;
                this._hasDisabled() || (this._isObjectParams(e) && (e = (i = e).properties, t = i.time, n = i.onComplete), PropertyChecker.propertiesMust(e) || !this.config.strict ? (t = _.isDate(t) ? t : new Date, this._isReady() ? this._sendRequest({ type: "profile", eventName: "profile_increment", properties: e, onComplete: n }, t) : this._queue.push(["userAdd", [e, t, n]])) : (logger$1.warn("calling userAdd failed due to invalid arguments"), _.isFunction(n) && n({ code: -1, msg: "invalid parameters" })))
            }
        }, {
            key: "userNumberMax",
            value: function value(e, t, n) {
                if (!this._hasDisabled()) {
                    var i, r, a;
                    for (r in this._isObjectParams(e) && (e = (i = e).properties, t = i.time, n = i.onComplete), e) { if ("number" != typeof e[r]) return a = "The key ".concat(r, " must be type of number"), console.warn(a), void(_.isFunction(n) && n({ code: -1, msg: a })) }
                    PropertyChecker.propertiesMust(e) || !this.config.strict ? (t = _.isDate(t) ? t : new Date, this._isReady() ? this._sendRequest({ type: "profile", eventName: "profile_number_max", properties: e, onComplete: n }, t) : this._queue.push(["userNumberMax", [e, t, n]])) : (logger$1.warn("calling userNumberMax failed due to invalid arguments"), _.isFunction(n) && n({ code: -1, msg: "invalid parameters" }))
                }
            }
        }, {
            key: "userNumberMin",
            value: function value(e, t, n) {
                if (!this._hasDisabled()) {
                    var i, r, a;
                    for (r in this._isObjectParams(e) && (e = (i = e).properties, t = i.time, n = i.onComplete), e) { if ("number" != typeof e[r]) return a = "The key ".concat(r, " must be type of number"), console.warn(a), void(_.isFunction(n) && n({ code: -1, msg: a })) }
                    PropertyChecker.propertiesMust(e) || !this.config.strict ? (t = _.isDate(t) ? t : new Date, this._isReady() ? this._sendRequest({ type: "profile", eventName: "profile_number_min", properties: e, onComplete: n }, t) : this._queue.push(["userNumberMin", [e, t, n]])) : (logger$1.warn("calling userNumberMin failed due to invalid arguments"), _.isFunction(n) && n({ code: -1, msg: "invalid parameters" }))
                }
            }
        }, {
            key: "userDel",
            value: function value(e, t) {
                var n, i = {};
                this._hasDisabled() || (this._isObjectParams(i) && (i = (n = i).properties, e = n.time, t = n.onComplete), PropertyChecker.propertiesMust(i) || !this.config.strict ? (e = _.isDate(e) ? e : new Date, this._isReady() ? this._sendRequest({ type: "profile", eventName: "profile_delete", properties: i, onComplete: t }, e) : this._queue.push(["userDel", [i, e, t]])) : (logger$1.warn("calling userDel failed due to invalid arguments"), _.isFunction(t) && t({ code: -1, msg: "invalid parameters" })))
            }
        }, {
            key: "userAppend",
            value: function value(e, t, n) {
                var i;
                this._hasDisabled() || (this._isObjectParams(e) && (e = (i = e).properties, t = i.time, n = i.onComplete), PropertyChecker.propertiesMust(e) || !this.config.strict ? (t = _.isDate(t) ? t : new Date, this._isReady() ? this._sendRequest({ type: "profile", eventName: "profile_append", properties: e, onComplete: n }, t) : this._queue.push(["userAppend", [e, t, n]])) : (logger$1.warn("calling userAppend failed due to invalid arguments"), _.isFunction(n) && n({ code: -1, msg: "invalid parameters" })))
            }
        }, {
            key: "userUniqAppend",
            value: function value(e, t, n) {
                var i;
                this._hasDisabled() || (this._isObjectParams(e) && (e = (i = e).properties, t = i.time, n = i.onComplete), PropertyChecker.userAppendProperties(e) || !this.config.strict ? (t = _.isDate(t) ? t : new Date, this._isReady() ? this._sendRequest({ type: "profile", eventName: "profile_uniq_append", properties: e, onComplete: n }, t) : this._queue.push(["userUniqAppend", [e, t, n]])) : (logger$1.warn("calling userAppend failed due to invalid arguments"), _.isFunction(n) && n({ code: -1, msg: "invalid parameters" })))
            }
        }, {
            key: "userUnset",
            value: function value(e, t, n) {
                var i;
                e = _defineProperty({}, e, null), this._hasDisabled() || (this._isObjectParams(e) && (e = (i = e).properties, t = i.time, n = i.onComplete), PropertyChecker.propertiesMust(e) || !this.config.strict ? (t = _.isDate(t) ? t : new Date, this._isReady() ? this._sendRequest({ type: "profile", eventName: "profile_unset", properties: e, onComplete: n }, t) : this._queue.push(["userUnset", [e, t, n]])) : (logger$1.warn("calling userUnset failed due to invalid arguments"), _.isFunction(n) && n({ code: -1, msg: "invalid parameters" })))
            }
        }, {
            key: "uploadQuickAppDeviceInfo",
            value: function value() {
                var e = this;
                return new Promise(function(t, n) {
                    var i;
                    PlatformAPI.getQuickDevice({
                        success: (i = _asyncToGenerator(_regeneratorRuntime().mark(function i(r) {
                            var a, o;
                            return _regeneratorRuntime().wrap(function(i) {
                                for (;;) {
                                    switch (i.prev = i.next) {
                                        case 0:
                                            return a = { os_name: "android", android_id: r.user, imei: r.device, oaid: r.device, mac: r.mac, android_version: r.system, api_version: r.osVersionCode, rom: r.vendorOsName, rom_version: r.vendorOsVersion, phone_brand: r.manufacturer, phone_model: r.model }, o = "".concat(Config.BASE_URL, "/user/device_info/?access_token=").concat(e.accessToken, "&client_id=").concat(e.appId), i.next = 4, e.sendNetWork(o, { data: a });
                                        case 4:
                                            return o = i.sent, i.abrupt("return", (0 === o.code ? t : n)(o));
                                        case 6:
                                        case "end":
                                            return i.stop();
                                    }
                                }
                            }, i)
                        })), function(e) { return i.apply(this, arguments) })
                    })
                })
            }
        }, {
            key: "uploadQuickGameDeviceInfo",
            value: function value() {
                var e = this;
                return new Promise(function(t, n) {
                    var i, r = getPlatFormName();
                    PlatformAPI.getQuickDevice({
                        platform: r,
                        success: (i = _asyncToGenerator(_regeneratorRuntime().mark(function i(r) {
                            var a, o;
                            return _regeneratorRuntime().wrap(function(i) {
                                for (;;) {
                                    switch (i.prev = i.next) {
                                        case 0:
                                            return a = r, o = "".concat(Config.BASE_URL, "/user/device_info/?access_token=").concat(e.accessToken, "&client_id=").concat(e.appId), i.next = 4, e.sendNetWork(o, { data: a });
                                        case 4:
                                            return o = i.sent, i.abrupt("return", (0 === o.code ? t : n)(o));
                                        case 6:
                                        case "end":
                                            return i.stop();
                                    }
                                }
                            }, i)
                        })), function(e) { return i.apply(this, arguments) })
                    })
                })
            }
        }, { key: "logoutEvent", value: function value() { this.track("$MPLogout", {}) } }, { key: "loginEvent", value: function value() { this.track("$MPLogin", {}) } }, { key: "registerEvent", value: function value() { "GravityEngine_quick_mp" === getPlatFormName() ? this.track("$AppRegister", {}) : this.track("$MPRegister", {}) } }, {
            key: "payEvent",
            value: function value(e, t, n, i, r) {
                if ("number" != typeof e) throw new Error("pay_amount must be a number");
                if ("string" != typeof t) throw new Error("pay_type must be a string");
                if ("string" != typeof n) throw new Error("order_id must be a string");
                if ("string" != typeof i) throw new Error("pay_reason must be a string");
                if ("string" != typeof r) throw new Error("pay_method must be a string");
                this.track("$PayEvent", { $pay_amount: e, $pay_type: t, $order_id: n, $pay_reason: i, $pay_method: r })
            }
        }, {
            key: "bindTAThirdPlatform",
            value: function value(e, t) {
                if (!e && !t) throw new Error("taAccountId or taDistinctId must be required");
                if (e && "string" != typeof e) throw new Error("taAccountId must be a string");
                if (t && "string" != typeof t) throw new Error("taDistinctId must be a string");
                this.track("$BindThirdPlatform", { $third_platform_type: "ta", $ta_account_id: e, $ta_distinct_id: t })
            }
        }, {
            key: "adShowEvent",
            value: function value(e, t, n) {
                var i = getPlatFormName();
                if ("GravityEngine_wechat" === i || "GravityEngine_wechat_game" === i) {
                    if ("string" != typeof e) throw new Error("ad_type must be a string");
                    if ("string" != typeof t) throw new Error("ad_unit_id must be a string");
                    i = { $ad_type: e, $ad_unit_id: t, $adn_type: "wechat" }, "[object Object]" === Object.prototype.toString.call(n) && Object.assign(i, n), this.track("$AdShow", i)
                }
            }
        }, { key: "getQuery", value: function value() { return PlatformAPI.getAppOptions().query || {} } }, { key: "setQuery", value: function value(e) { var t, n = []; for (t in e) { e.hasOwnProperty(t) && n.push(encodeURIComponent(t) + "=" + encodeURIComponent(e[t])) } return n.join("&") } }, { key: "sendNetWork", value: function value(e, t) { var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : "POST"; return new Promise(function(i, r) { PlatformAPI.request({ url: e, method: n, data: "string" == typeof t ? t : JSON.stringify(t), header: { "content-type": "application/json" }, success: function success(e) { 200 === e.statusCode ? i(e.data) : r(e) }, fail: function fail(e) { r(e) } }) }) } }, { key: "_errorPromise", value: function value(e) { return Promise.reject(new Error(e)) } }, {
            key: "initializeWithHistoryUserInfo",
            value: (i = _asyncToGenerator(_regeneratorRuntime().mark(function e() {
                var t, n, i = arguments;
                return _regeneratorRuntime().wrap(function(e) {
                    for (;;) {
                        switch (e.prev = e.next) {
                            case 0:
                                return t = 0 < i.length && void 0 !== i[0] ? i[0] : {}, n = 1 < i.length ? i[1] : void 0, e.abrupt("return", this.initialize(t, n));
                            case 3:
                            case "end":
                                return e.stop();
                        }
                    }
                }, e, this)
            })), function() { return i.apply(this, arguments) })
        }, {
            key: "initialize",
            value: (n = _asyncToGenerator(_regeneratorRuntime().mark(function e() {
                var t, n, i = this,
                    r = arguments;
                return _regeneratorRuntime().wrap(function(e) {
                    for (;;) {
                        switch (e.prev = e.next) {
                            case 0:
                                return t = 0 < r.length && void 0 !== r[0] ? r[0] : {}, n = 1 < r.length ? r[1] : void 0, e.abrupt("return", new Promise(function() {
                                    var e = _asyncToGenerator(_regeneratorRuntime().mark(function e(r, a) {
                                        return _regeneratorRuntime().wrap(function(e) {
                                            for (;;) {
                                                switch (e.prev = e.next) {
                                                    case 0:
                                                        PlatformAPI.getStorage("is_ge_registered", !0, function() {
                                                            var e = _asyncToGenerator(_regeneratorRuntime().mark(function e(o) {
                                                                var s, c, u, l, p, h, f, g, d, m, v;
                                                                return _regeneratorRuntime().wrap(function(e) {
                                                                    for (;;) {
                                                                        switch (e.prev = e.next) {
                                                                            case 0:
                                                                                if (s = "", i._state.initComplete ? null != t && t.name ? null != t && t.version || 0 === (null == t ? void 0 : t.version) ? _.isNumber(null == t ? void 0 : t.version) && "number" == typeof(null == t ? void 0 : t.version) ? void 0 !== n && ("[object Object]" !== Object.prototype.toString.call(n) ? s = "history_info must be type: Object" : null != n && n.company ? "string" != typeof n.company ? s = "history_info.company must be type: String" : null != n && n.create_time || 0 === n.create_time ? _.isNumber(n.create_time) && "number" == typeof n.create_time || (s = "history_info.create_time must be type: Number") : s = "history_info.create_time must be required" : s = "history_info.company must be required") : s = "version must be type: Number" : s = "version must be required" : s = "name must be required" : s = "initialize must be called after setupAndStart", s) return e.abrupt("return", i._errorPromise(s));
                                                                                e.next = 4;
                                                                                break;
                                                                            case 4:
                                                                                return s = i.getQuery(), c = (null == t ? void 0 : t.channel) || "base_channel", p = { client_id: i.appId, name: t.name, channel: c, version: t.version, wx_openid: (null == t ? void 0 : t.openid) || (null == t ? void 0 : t.wx_openid) || "", wx_unionid: (null == t ? void 0 : t.wx_unionid) || "", promoted_object_id: (null == t ? void 0 : t.promoted_object_id) || "", need_return_attribution: (null == t ? void 0 : t.enable_sync_attribution) || !1, ad_data: s }, n && (p.history_info = n), l = "".concat(Config.BASE_URL, "/user/initialize/?access_token=").concat(i.accessToken), e.next = 11, i.sendNetWork(l, p);
                                                                            case 11:
                                                                                if (0 !== (u = e.sent).code) return e.abrupt("return", a(u));
                                                                                e.next = 14;
                                                                                break;
                                                                            case 14:
                                                                                return l = getPlatFormName(), console.log("gravity current platform: " + l), "GravityEngine_quick_mp" === l ? i.uploadQuickAppDeviceInfo() : l.includes("gravityengine_qg") && i.uploadQuickGameDeviceInfo(), p = systemInformation.properties, g = new Date, d = g.getFullYear(), m = ("0" + (g.getMonth() + 1)).slice(-2), v = ("0" + g.getDate()).slice(-2), h = ("0" + g.getHours()).slice(-2), f = ("0" + g.getMinutes()).slice(-2), g = ("0" + g.getSeconds()).slice(-2), d = "".concat(d, "-").concat(m, "-").concat(v, " ").concat(h, ":").concat(f, ":").concat(g), "Y" !== o && (i.userSetOnce({ $channel: c, $manufacturer: p.$manufacturer, $model: p.$model, $brand: p.$brand, $os: p.$os, $first_visit_time: d, $first_scene: String(null == (m = PlatformAPI.getAppOptions()) ? void 0 : m.scene) }), v = i.setQuery(i.getQuery()), i.track("$MPLaunch", { $url_query: v }), i.track("$MPShow", { $url_query: v })), PlatformAPI.setStorage("is_ge_registered", JSON.stringify("Y")), e.abrupt("return", r(u));
                                                                            case 29:
                                                                            case "end":
                                                                                return e.stop();
                                                                        }
                                                                    }
                                                                }, e)
                                                            }));
                                                            return function(t) { return e.apply(this, arguments) }
                                                        }());
                                                    case 1:
                                                    case "end":
                                                        return e.stop();
                                                }
                                            }
                                        }, e)
                                    }));
                                    return function(t, n) { return e.apply(this, arguments) }
                                }()));
                            case 3:
                            case "end":
                                return e.stop();
                        }
                    }
                }, e)
            })), function() { return n.apply(this, arguments) })
        }, {
            key: "queryUserInfo",
            value: (t = _asyncToGenerator(_regeneratorRuntime().mark(function e() {
                var t = this;
                return _regeneratorRuntime().wrap(function(e) {
                    for (;;) {
                        switch (e.prev = e.next) {
                            case 0:
                                if (this._state.initComplete) { e.next = 2; break }
                                return e.abrupt("return", this._errorPromise("queryUserInfo must be called after setupAndStart"));
                            case 2:
                                return e.abrupt("return", new Promise(function() {
                                    var e = _asyncToGenerator(_regeneratorRuntime().mark(function e(n, i) {
                                        var r;
                                        return _regeneratorRuntime().wrap(function(e) {
                                            for (;;) {
                                                switch (e.prev = e.next) {
                                                    case 0:
                                                        return r = "".concat(Config.BASE_URL, "/user/get/?access_token=").concat(t.accessToken, "&client_id=").concat(t.appId), e.next = 3, t.sendNetWork(r, {}, "GET");
                                                    case 3:
                                                        return r = e.sent, e.abrupt("return", (0 === r.code ? n : i)(r));
                                                    case 5:
                                                    case "end":
                                                        return e.stop();
                                                }
                                            }
                                        }, e)
                                    }));
                                    return function(t, n) { return e.apply(this, arguments) }
                                }()));
                            case 3:
                            case "end":
                                return e.stop();
                        }
                    }
                }, e, this)
            })), function() { return t.apply(this, arguments) })
        }, { key: "authorizeOpenID", value: function value(e) { this.identify(e) } }, {
            key: "identify",
            value: function value(e) {
                if (!this._hasDisabled()) {
                    if ("number" == typeof e) e = String(e);
                    else if ("string" != typeof e) return !1;
                    this.store.setDistinctId(e)
                }
            }
        }, { key: "getDistinctId", value: function value() { return this.store.getDistinctId() } }, {
            key: "login",
            value: function value(e) {
                if (!this._hasDisabled()) {
                    if ("number" == typeof e) e = String(e);
                    else if ("string" != typeof e) return !1;
                    this.store.setAccountId(e)
                }
            }
        }, { key: "getAccountId", value: function value() { return this.store.getAccountId() } }, { key: "logout", value: function value() { this._hasDisabled() || this.store.setAccountId(null) } }, { key: "setSuperProperties", value: function value(e) { this._hasDisabled() || (PropertyChecker.propertiesMust(e) || !this.config.strict ? this.store.setSuperProperties(e) : logger$1.warn("setSuperProperties parameter must be a valid property value")) } }, { key: "registerApp", value: function value(e) { this.setSuperProperties(e) } }, { key: "clearSuperProperties", value: function value() { this._hasDisabled() || this.store.setSuperProperties({}, !0) } }, {
            key: "unsetSuperProperty",
            value: function value(e) {
                var t;
                this._hasDisabled() || _.isString(e) && (delete(t = this.getSuperProperties())[e], this.store.setSuperProperties(t, !0))
            }
        }, { key: "getSuperProperties", value: function value() { return this.store.getSuperProperties() } }, { key: "getSendProperties", value: function value() { try { var e, t = _.extend({}, systemInformation.properties, this.autoTrackProperties, this.store.getSuperProperties(), this.dynamicProperties ? this.dynamicProperties() : {}); for (e in t) { "string" == typeof t[e] && (t[e] = t[e].substring(0, 8192)) } return t } catch (e) { return {} } } }, {
            key: "getPresetProperties",
            value: function value() {
                var e = systemInformation.properties,
                    t = {},
                    n = e.$system_language;
                return t.system_language = _.isUndefined(n) ? "" : n, n = e.$os, t.os = _.isUndefined(n) ? "" : n, n = e.$screen_width, t.screenWidth = _.isUndefined(n) ? 0 : n, n = e.$screen_height, t.screenHeight = _.isUndefined(n) ? 0 : n, n = e.$network_type, t.networkType = _.isUndefined(n) ? "" : n, n = e.$model, t.deviceModel = _.isUndefined(n) ? "" : n, n = e.$os_version, t.osVersion = _.isUndefined(n) ? "" : n, t.deviceId = this.getDeviceId(), n = 0 - new Date().getTimezoneOffset() / 60, t.zoneOffset = n, n = e.$manufacturer, t.manufacturer = _.isUndefined(n) ? "" : n, n = e.$manufacturer, t.brand = _.isUndefined(n) ? "" : n, t.toEventPresetProperties = function() { var e; return { $app_id: this.appId, $model: t.deviceModel, $screen_width: t.screenWidth, $screen_height: t.screenHeight, $system_language: t.system_language, $os: t.os, $os_version: t.osVersion, $network_type: t.networkType, $manufacturer: t.manufacturer, $brand: t.manufacturer, $scene: String((null == (e = PlatformAPI.getAppOptions()) ? void 0 : e.scene) || (null == (e = PlatformAPI.getAppOptions()) ? void 0 : e.from)) } }, t
            }
        }, { key: "setDynamicSuperProperties", value: function value(e) { this._hasDisabled() || ("function" == typeof e ? PropertyChecker.properties(e()) || !this.config.strict ? this.dynamicProperties = e : logger$1.warn("A dynamic public property must return a valid property value") : logger$1.warn("setDynamicSuperProperties parameter must be a function type")) } }, { key: "timeEvent", value: function value(e, t) { this._hasDisabled() || (t = _.isDate(t) ? t : new Date, this._isReady() ? PropertyChecker.event(e) || !this.config.strict ? this.store.setEventTimer(e, t.getTime()) : logger$1.warn("calling timeEvent failed due to invalid eventName: " + e) : this._queue.push(["timeEvent", [e, t]])) } }, { key: "getDeviceId", value: function value() { return systemInformation.properties.$device_id } }, { key: "enableTracking", value: function value(e) { this.enabled = e, this.store._set("ta_enabled", e) } }, { key: "optOutTracking", value: function value() { this.store.setSuperProperties({}, !0), this.store.setDistinctId(_.UUID()), this.store.setAccountId(null), this._queue.splice(0, this._queue.length), this.isOptOut = !0, this.store._set("ge_isOptOut", !0) } }, {
            key: "optOutTrackingAndDeleteUser",
            value: function value() {
                var e = new Date;
                this._sendRequest({ type: "user_del" }, e), this.optOutTracking()
            }
        }, { key: "optInTracking", value: function value() { this.isOptOut = !1, this.store._set("ge_isOptOut", !1) } }, {
            key: "setTrackStatus",
            value: function value(e) {
                switch (e) {
                    case "PAUSE":
                        this.eventSaveOnly = !1, this.optInTracking(), this.enableTracking(!1);
                        break;
                    case "STOP":
                        this.eventSaveOnly = !1, this.optOutTracking(!0);
                        break;
                    default:
                        this.eventSaveOnly = !1, this.optInTracking(), this.enableTracking(!0);
                }
            }
        }]), e
    }(),
    DEFAULT_CONFIG$1 = { name: "GravityEngine", enableLog: !0, enableNative: !1 },
    GravityEngineAPIForNative = function() {
        function e(t) {
            _classCallCheck(this, e), t.appId = _.checkAppId(t.clientId), t.accessToken = t.accessToken, t.appId ? t.accessToken || console.warn("GravityAnalytics: accessToken must be required") : console.warn("GravityAnalytics: clientId must be required"), t.serverUrl = "".concat(Config.BASE_URL, "/event/collect/?access_token=").concat(t.accessToken);
            var n = _.extend({}, DEFAULT_CONFIG$1, PlatformAPI.getConfig());
            _.isObject(t) ? this.config = _.extend(n, t) : this.config = n, this._init(this.config)
        }
        var t;
        return _createClass(e, [{ key: "_isNativePlatform", value: function value() { return !(!this._isIOS() && !this._isAndroid() || !this.config.enableNative) } }, { key: "_isIOS", value: function value() { return !(!cc.sys.isNative || "iOS" !== cc.sys.os) } }, { key: "_isAndroid", value: function value() { return !(!cc.sys.isNative || "Android" !== cc.sys.os) } }, {
            key: "_init",
            value: function value(e) {
                this.name = e.name, this.appId = e.clientId, this.accessToken = e.accessToken;
                var t = e.serverUrl || e.server_url;
                this.serverUrl = t, this.serverDebugUrl = t + "/data_debug", this.configUrl = t + "/config", this._isNativePlatform() ? (this.initInstanceForNative(this.name, e, this.appId), this._readStorage(e)) : this.geJs = new GravityAnalyticsAPIForJS(e)
            }
        }, {
            key: "_readStorage",
            value: function value(e) {
                var t = this,
                    n = e.persistenceName,
                    i = e.persistenceNameOld;
                e.isChildInstance && (n = e.persistenceName + "_" + e.name, i = e.persistenceNameOld + "_" + e.name), this._state = PlatformAPI.getStorage(n) || {}, _.isEmptyObject(this._state) && (this._state = PlatformAPI.getStorage(i) || {}), _.isEmptyObject(this._state) ? PlatformAPI.getStorage(n, !0, function(e) { _.isEmptyObject(e) ? PlatformAPI.getStorage(i, !0, function(e) { t._state = _.extend2Layers({}, e, t._state) }) : t._state = _.extend2Layers({}, e, t._state), t._state.distinct_id && t.identifyForNative(t._state.distinct_id), t._state.account_id && t.loginForNative(t._state.account_id) }) : (this._state.distinct_id && this.identifyForNative(this._state.distinct_id), this._state.account_id && this.loginForNative(this._state.account_id))
            }
        }, { key: "initInstance", value: function value(e, t) { return this._isNativePlatform() ? _.isUndefined(t) ? this[e] = new GravityAnalyticsAPI(this.config) : this[e] = new GravityAnalyticsAPI(t) : this[e] = this.geJs.initInstance(e, t), this[e] } }, { key: "lightInstance", value: function value(e) { return this[e] } }, {
            key: "setupAndStart",
            value: function value() {
                var e, t;
                this._isNativePlatform() ? (e = window, t = this, e.__autoTrackCallback = function(e) { return _.isFunction(t.config.autoTrack.callback) ? (e = t.config.autoTrack.callback(e), JSON.stringify(e)) : "{}" }, this.startGravityAnalyticsForNative()) : this.geJs.setupAndStart()
            }
        }, { key: "track", value: function value(e, t, n, i) { this._isNativePlatform() ? this.trackForNative(e, t, n, this.appId) : this.geJs.track(e, t, n, i) } }, {
            key: "initializeWithHistoryUserInfo",
            value: (t = _asyncToGenerator(_regeneratorRuntime().mark(function e() {
                var t, n, i = arguments;
                return _regeneratorRuntime().wrap(function(e) {
                    for (;;) {
                        switch (e.prev = e.next) {
                            case 0:
                                return t = 0 < i.length && void 0 !== i[0] ? i[0] : {}, n = 1 < i.length ? i[1] : void 0, e.abrupt("return", this.geJs.initializeWithHistoryUserInfo(t, n));
                            case 3:
                            case "end":
                                return e.stop();
                        }
                    }
                }, e, this)
            })), function() { return t.apply(this, arguments) })
        }, {
            key: "initialize",
            value: function value() {
                var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
                    t = 1 < arguments.length ? arguments[1] : void 0;
                if (!this._isNativePlatform()) return this.geJs.initialize(e, t)
            }
        }, { key: "queryUserInfo", value: function value() { if (!this._isNativePlatform()) return this.geJs.queryUserInfo() } }, { key: "registerApp", value: function value(e) { if (!this._isNativePlatform()) return this.geJs.registerApp(e) } }, { key: "registerEvent", value: function value() { if (!this._isNativePlatform()) return this.geJs.registerEvent() } }, { key: "loginEvent", value: function value() { if (!this._isNativePlatform()) return this.geJs.loginEvent() } }, { key: "logoutEvent", value: function value() { if (!this._isNativePlatform()) return this.geJs.logoutEvent() } }, { key: "payEvent", value: function value(e, t, n, i, r) { if (!this._isNativePlatform()) return this.geJs.payEvent(e, t, n, i, r) } }, { key: "bindTAThirdPlatform", value: function value(e, t) { if (!this._isNativePlatform()) return this.geJs.bindTAThirdPlatform(e, t) } }, { key: "adShowEvent", value: function value(e, t, n) { if (!this._isNativePlatform()) return this.geJs.adShowEvent(e, t, n) } }, { key: "userSet", value: function value(e, t, n) { this._isNativePlatform() ? this.userSetForNative(e, this.appId) : this.geJs.userSet(e, t, n) } }, { key: "userSetOnce", value: function value(e, t, n) { this._isNativePlatform() ? this.userSetOnceForNative(e, this.appId) : this.geJs.userSetOnce(e, t, n) } }, { key: "userUnset", value: function value(e, t, n) { this._isNativePlatform() ? this.userUnsetForNative(e, this.appId) : this.geJs.userUnset(e, t, n) } }, { key: "userDel", value: function value(e, t) { this._isNativePlatform() ? this.userDelForNative(this.appId) : this.geJs.userDel(e, t) } }, { key: "userAdd", value: function value(e, t, n) { this._isNativePlatform() ? this.userAddForNative(e, this.appId) : this.geJs.userAdd(e, t, n) } }, { key: "userNumberMax", value: function value(e, t, n) { this._isNativePlatform() || this.geJs.userNumberMax(e, t, n) } }, { key: "userNumberMin", value: function value(e, t, n) { this._isNativePlatform() || this.geJs.userNumberMin(e, t, n) } }, { key: "userAppend", value: function value(e, t, n) { this._isNativePlatform() ? this.userAppendForNative(e, this.appId) : this.geJs.userAppend(e, t, n) } }, { key: "userUniqAppend", value: function value(e, t, n) { this._isNativePlatform() ? this.userUniqAppendForNative(e, this.appId) : this.geJs.userUniqAppend(e, t, n) } }, { key: "authorizeOpenID", value: function value(e) { this.identify(e) } }, { key: "identify", value: function value(e) { this._isNativePlatform() ? this.identifyForNative(e, this.appId) : this.geJs.identify(e) } }, { key: "getDistinctId", value: function value() { return this._isNativePlatform() ? this.getDistinctIdForNative(this.appId) : this.geJs.getDistinctId() } }, { key: "login", value: function value(e) { this._isNativePlatform() ? this.loginForNative(e, this.appId) : this.geJs.login(e) } }, { key: "getAccountId", value: function value() { return this._isNativePlatform() ? this.getAccountIdForNative(this.appId) : this.geJs.getAccountId() } }, { key: "logout", value: function value() { this._isNativePlatform() ? this.logoutForNative(this.appId) : this.geJs.logout() } }, { key: "setSuperProperties", value: function value(e) { this._isNativePlatform() ? this.setSuperPropertiesForNative(e, this.appId) : this.geJs.setSuperProperties(e) } }, { key: "clearSuperProperties", value: function value() { this._isNativePlatform() ? this.clearSuperPropertiesForNative(this.appId) : this.geJs.clearSuperProperties() } }, { key: "unsetSuperProperty", value: function value(e) { this._isNativePlatform() ? this.unsetSuperPropertyForNative(e, this.appId) : this.geJs.unsetSuperProperty(e) } }, { key: "getSuperProperties", value: function value() { return this._isNativePlatform() ? this.getSuperPropertiesForNative(this.appId) : this.geJs.getSuperProperties() } }, { key: "getPresetProperties", value: function value() { var e, t, n, i; return this._isNativePlatform() ? (e = this.getPresetPropertiesForNative(this.appId), t = {}, i = e.$system_language, t.system_language = _.isUndefined(i) ? "" : i, i = e.$os, t.os = _.isUndefined(i) ? "" : i, i = e.$screen_width, t.screenWidth = _.isUndefined(i) ? 0 : i, i = e.$screen_height, t.screenHeight = _.isUndefined(i) ? 0 : i, i = e.$network_type, t.networkType = _.isUndefined(i) ? "" : i, i = e.$device_model, t.deviceModel = _.isUndefined(i) ? "" : i, i = e.$os_version, t.osVersion = _.isUndefined(i) ? "" : i, t.deviceId = this.getDeviceId(), n = 0 - new Date().getTimezoneOffset() / 60, t.zoneOffset = n, i = e.$manufacturer, t.manufacturer = _.isUndefined(i) ? "" : i, i = e.$manufacturer, t.brand = _.isUndefined(i) ? "" : i, t.toEventPresetProperties = function() { return { $device_model: t.deviceModel, $device_id: t.deviceId, $screen_width: t.screenWidth, $screen_height: t.screenHeight, $system_language: t.system_language, $os: t.os, $os_version: t.osVersion, $network_type: t.networkType, $zone_offset: n, $manufacturer: t.manufacturer, $brand: t.manufacturer } }, t) : this.geJs.getPresetProperties() } }, { key: "setDynamicSuperProperties", value: function value(e) { this._isNativePlatform() ? "function" == typeof e ? (this.dynamicProperties = e, window.__dynamicPropertiesForNative = function(t) { return console.log("__dynamicPropertiesForNative: native msg: ", t), t = e(), t = _.encodeDates(t), JSON.stringify(t) }, this.setDynamicSuperPropertiesForNative("__dynamicPropertiesForNative")) : logger.warn("setDynamicSuperProperties parameter must be a function type") : this.geJs.setDynamicSuperProperties(e) } }, { key: "timeEvent", value: function value(e, t) { return this._isNativePlatform() ? this.timeEventForNative(e, this.appId) : this.geJs.timeEvent(e, t) } }, { key: "getDeviceId", value: function value() { return this._isNativePlatform() ? this.getDeviceIdForNative(this.appId) : this.geJs.getDeviceId() } }, { key: "enableTracking", value: function value(e) { this._isNativePlatform() ? this.enableTrackingForNative(e, this.appId) : this.geJs.enableTracking(e) } }, { key: "optOutTracking", value: function value() { this._isNativePlatform() ? this.optOutTrackingForNative(this.appId) : this.geJs.optOutTracking() } }, { key: "optOutTrackingAndDeleteUser", value: function value() { this._isNativePlatform() ? this.optOutTrackingAndDeleteUserForNative(this.appId) : this.geJs.optOutTrackingAndDeleteUser() } }, { key: "optInTracking", value: function value() { this._isNativePlatform() ? this.optInTrackingForNative(this.appId) : this.geJs.optInTracking() } }, { key: "setTrackStatus", value: function value(e) { this._isNativePlatform() ? this.setTrackStatusForNative(e, this.appId) : this.geJs.setTrackStatus(e) } }, { key: "trackForNative", value: function value(e, t, n, i) { n = _.isDate(n) ? _.formatDate(n) : "", _.isUndefined(t) && (t = {}), t = _.extend(t, this.dynamicProperties ? this.dynamicProperties() : {}), t = _.encodeDates(t), this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "track", "(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V", e, JSON.stringify(t), n, i) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "track:properties:time:appId:", e, JSON.stringify(t), n, i) } }, { key: "timeEventForNative", value: function value(e, t) { this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "timeEvent", "(Ljava/lang/String;Ljava/lang/String;)V", e, t) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "timeEvent:appId:", e, t) } }, { key: "loginForNative", value: function value(e, t) { this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "login", "(Ljava/lang/String;Ljava/lang/String;)V", e, t) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "login:appId:", e, t) } }, { key: "logoutForNative", value: function value(e) { this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "logout", "(Ljava/lang/String;)V", e) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "logout:", e) } }, { key: "setSuperPropertiesForNative", value: function value(e, t) { e = _.encodeDates(e), this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "setSuperProperties", "(Ljava/lang/String;Ljava/lang/String;)V", JSON.stringify(e), t) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "setSuperProperties:appId:", JSON.stringify(e), t) } }, { key: "getSuperPropertiesForNative", value: function value(e) { var t = "{}"; return this._isAndroid() ? t = jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "getSuperProperties", "(Ljava/lang/String;)V", e) : this._isIOS() && (t = jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "getSuperProperties:", e)), JSON.parse(t) } }, { key: "unsetSuperPropertyForNative", value: function value(e, t) { this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "unsetSuperProperty", "(Ljava/lang/String;Ljava/lang/String;)V", e, t) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "unsetSuperProperty:appId:", e, t) } }, { key: "clearSuperPropertiesForNative", value: function value(e) { this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "clearSuperProperties", "(Ljava/lang/String;)V", e) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "clearSuperProperties:", e) } }, { key: "userSetForNative", value: function value(e, t) { e = _.encodeDates(e), this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "userSet", "(Ljava/lang/String;Ljava/lang/String;)V", JSON.stringify(e), t) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "userSet:appId:", JSON.stringify(e), t) } }, { key: "userSetOnceForNative", value: function value(e, t) { e = _.encodeDates(e), this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "userSetOnce", "(Ljava/lang/String;Ljava/lang/String;)V", JSON.stringify(e), t) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "userSetOnce:appId:", JSON.stringify(e), t) } }, { key: "userAppendForNative", value: function value(e, t) { e = _.encodeDates(e), this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "userAppend", "(Ljava/lang/String;Ljava/lang/String;)V", JSON.stringify(e), t) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "userAppend:appId:", JSON.stringify(e), t) } }, { key: "userUniqAppendForNative", value: function value(e, t) { e = _.encodeDates(e), this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "userUniqAppend", "(Ljava/lang/String;Ljava/lang/String;)V", JSON.stringify(e), t) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "userUniqAppend:appId:", JSON.stringify(e), t) } }, { key: "userAddForNative", value: function value(e, t) { e = _.encodeDates(e), this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "userAdd", "(Ljava/lang/String;Ljava/lang/String;)V", JSON.stringify(e), t) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "userAdd:appId:", JSON.stringify(e), t) } }, { key: "userUnsetForNative", value: function value(e, t) { this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "userUnset", "(Ljava/lang/String;Ljava/lang/String;)V", e, t) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "userUnset:appId:", e, t) } }, { key: "userDelForNative", value: function value(e) { this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "userDel", "(Ljava/lang/String;)V", e) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "userDel:", e) } }, { key: "authorizeOpenIDForNative", value: function value(e, t) { this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "authorizeOpenID", "(Ljava/lang/String;Ljava/lang/String;)V", e, t) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "authorizeOpenID:appId:", e, t) } }, { key: "identifyForNative", value: function value(e, t) { this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "identify", "(Ljava/lang/String;Ljava/lang/String;)V", e, t) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "identify:appId:", e, t) } }, { key: "initInstanceForNative", value: function value(e, t, n) { this._isAndroid() ? (jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "setCustomerLibInfo", "(Ljava/lang/String;Ljava/lang/String;)V", Config.LIB_NAME, Config.LIB_VERSION), _.isUndefined(t) ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "initInstanceAppId", "(Ljava/lang/String;Ljava/lang/String;)V", e, n) : jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "initInstanceConfig", "(Ljava/lang/String;Ljava/lang/String;)V", e, JSON.stringify(t))) : this._isIOS() && (jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "setCustomerLibInfoWithLibName:libVersion:", Config.LIB_NAME, Config.LIB_VERSION), _.isUndefined(t) ? jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "initInstance:appId:", e, n) : jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "initInstance:config:", e, JSON.stringify(t))) } }, { key: "lightInstanceForNative", value: function value(e, t) { return this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "lightInstance", "(Ljava/lang/String;Ljava/lang/String;)V", e, t) : this._isIOS() ? jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "lightInstance:appId:", e, t) : void 0 } }, { key: "startGravityAnalyticsForNative", value: function value(e) { this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "startGravityAnalytics", "(Ljava/lang/String;)V", e) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "startGravityAnalytics:", e) } }, { key: "setDynamicSuperPropertiesForNative", value: function value(e, t) { this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "setDynamicSuperProperties", "(Ljava/lang/String;Ljava/lang/String;)V", e, t) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "setDynamicSuperProperties:appId:", e, t) } }, { key: "getDeviceIdForNative", value: function value(e) { return this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "getDeviceId", "(Ljava/lang/String;)Ljava/lang/String;", e) : this._isIOS() ? jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "getDeviceId:", e) : void 0 } }, { key: "getDistinctIdForNative", value: function value(e) { return this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "getDistinctId", "(Ljava/lang/String;)Ljava/lang/String;", e) : this._isIOS() ? jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "getDistinctId:", e) : void 0 } }, { key: "getAccountIdForNative", value: function value(e) { return this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "getAccountId", "(Ljava/lang/String;)Ljava/lang/String;", e) : this._isIOS() ? jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "getAccountId:", e) : void 0 } }, { key: "getPresetPropertiesForNative", value: function value(e) { var t = "{}"; return this._isAndroid() ? t = jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "getPresetProperties", "(Ljava/lang/String;)Ljava/lang/String;", e) : this._isIOS() && (t = jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "getPresetProperties:", e)), JSON.parse(t) } }, { key: "enableTrackingForNative", value: function value(e, t) { this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "enableTracking", "(Ljava/lang/String;Ljava/lang/String;)V", e.toString(), t) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "enableTracking:appId:", e.toString(), t) } }, { key: "optOutTrackingForNative", value: function value(e) { this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "optOutTracking", "(Ljava/lang/String;)V", e) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "optOutTracking:", e) } }, { key: "optOutTrackingAndDeleteUserForNative", value: function value(e) { this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "optOutTrackingAndDeleteUser", "(Ljava/lang/String;)V", e) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "optOutTrackingAndDeleteUser:", e) } }, { key: "optInTrackingForNative", value: function value(e) { this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "optInTracking", "(Ljava/lang/String;)V", e) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "optInTracking:", e) } }, { key: "setTrackStatusForNative", value: function value(e, t) { this._isAndroid() ? jsb.reflection.callStaticMethod("com/cocos/game/CocosCreatorProxyApi", "setTrackStatus", "(Ljava/lang/String;Ljava/lang/String;)V", e, t) : this._isIOS() && jsb.reflection.callStaticMethod("CocosCreatorProxyApi", "setTrackStatus:appId:", e, t) } }]), e
    }();
window.GravityAnalyticsAPI = GravityEngineAPIForNative, window.GravityAnalyticsAPIForJS = GravityEngineAPI