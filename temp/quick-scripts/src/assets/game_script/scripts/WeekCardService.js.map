{"version":3,"sources":["assets\\game_script\\scripts\\WeekCardService.js"],"names":["$storageUtil","require","$util","$localName","r","t","weekCardInfo","isLock","lockNum","time","day","StorageUtil","getItem","WEEK_CARD","Object","defineProperty","get","instance","enumerable","configurable","prototype","unlock","setItem","sign","startDayTimestamp","isSign","exports"],"mappings":";;;;;;AAAA,IAAIA,YAAY,GAAGC,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAIC,KAAK,GAAGD,OAAO,CAAC,QAAD,CAAnB;;AACA,IAAIE,UAAU,GAAGF,OAAO,CAAC,aAAD,CAAxB;;AACA,IAAIG,CAAC,GAAI,YAAY;EACjB,SAASC,CAAT,GAAa;IACT,KAAKC,YAAL,GAAoB;MAChBC,MAAM,EAAE,CAAC,CADO;MAEhBC,OAAO,EAAE,CAFO;MAGhBC,IAAI,EAAE,CAHU;MAIhBC,GAAG,EAAE;IAJW,CAApB;IAMA,KAAKJ,YAAL,GAAoBN,YAAY,CAACW,WAAb,CAAyBC,OAAzB,CAAiCT,UAAU,WAAV,CAAmBU,SAApD,EAA+D,KAAKP,YAApE,CAApB;EACH;;EACDQ,MAAM,CAACC,cAAP,CAAsBV,CAAtB,EAAyB,KAAzB,EAAgC;IAC5BW,GAAG,EAAE,eAAY;MACb,IAAI,CAACX,CAAC,CAACY,QAAP,EAAiB;QACbZ,CAAC,CAACY,QAAF,GAAa,IAAIZ,CAAJ,EAAb;MACH;;MACD,OAAOA,CAAC,CAACY,QAAT;IACH,CAN2B;IAO5BC,UAAU,EAAE,CAAC,CAPe;IAQ5BC,YAAY,EAAE,CAAC;EARa,CAAhC;;EAUAd,CAAC,CAACe,SAAF,CAAYC,MAAZ,GAAqB,YAAY;IAC7B,KAAKf,YAAL,CAAkBE,OAAlB;IACA,OACI,KAAKF,YAAL,CAAkBE,OAAlB,IAA6B,CAA7B,KACE,KAAKF,YAAL,GAAoB;MAClBC,MAAM,EAAE,CAAC,CADS;MAElBC,OAAO,EAAE,CAFS;MAGlBC,IAAI,EAAE,CAHY;MAIlBC,GAAG,EAAE;IAJa,CAArB,EAMDV,YAAY,CAACW,WAAb,CAAyBW,OAAzB,CAAiCnB,UAAU,WAAV,CAAmBU,SAApD,EAA+D,KAAKP,YAApE,CANC,EAOD,CAAC,CARD,CADJ;EAWH,CAbD;;EAcAD,CAAC,CAACe,SAAF,CAAYG,IAAZ,GAAmB,YAAY;IAC3B,KAAKjB,YAAL,CAAkBI,GAAlB;IACA,KAAKJ,YAAL,CAAkBG,IAAlB,GAAyBP,KAAK,WAAL,CAAcsB,iBAAd,EAAzB;IACAxB,YAAY,CAACW,WAAb,CAAyBW,OAAzB,CAAiCnB,UAAU,WAAV,CAAmBU,SAApD,EAA+D,KAAKP,YAApE;EACH,CAJD;;EAKAD,CAAC,CAACe,SAAF,CAAYb,MAAZ,GAAqB,YAAY;IAC7B,IAAIF,CAAC,GAAGH,KAAK,WAAL,CAAcsB,iBAAd,EAAR;;IACA,IAAI,KAAKlB,YAAL,CAAkBI,GAAlB,GAAwB,CAAxB,IAA6B,KAAKJ,YAAL,CAAkBG,IAAlB,GAAyBJ,CAA1D,EAA6D;MACzD,KAAKC,YAAL,CAAkBC,MAAlB,GAA2B,CAAC,CAA5B;IACH;;IACD,OAAO,KAAKD,YAAL,CAAkBC,MAAzB;EACH,CAND;;EAOAF,CAAC,CAACe,SAAF,CAAYK,MAAZ,GAAqB,YAAY;IAC7B,IAAIpB,CAAC,GAAGH,KAAK,WAAL,CAAcsB,iBAAd,EAAR;IACA,OAAO,KAAKlB,YAAL,CAAkBI,GAAlB,GAAwB,CAAxB,IAA6B,KAAKJ,YAAL,CAAkBG,IAAlB,IAA0BJ,CAA9D;EACH,CAHD;;EAIA,OAAOA,CAAP;AACH,CAnDO,EAAR;;AAoDAqB,OAAO,WAAP,GAAkBtB,CAAlB","sourceRoot":"/","sourcesContent":["var $storageUtil = require(\"./StorageUtil\");\r\nvar $util = require(\"./Util\");\r\nvar $localName = require(\"./LocalName\");\r\nvar r = (function () {\r\n    function t() {\r\n        this.weekCardInfo = {\r\n            isLock: !1,\r\n            lockNum: 0,\r\n            time: 0,\r\n            day: 1\r\n        };\r\n        this.weekCardInfo = $storageUtil.StorageUtil.getItem($localName.default.WEEK_CARD, this.weekCardInfo);\r\n    }\r\n    Object.defineProperty(t, \"Ins\", {\r\n        get: function () {\r\n            if (!t.instance) {\r\n                t.instance = new t();\r\n            }\r\n            return t.instance;\r\n        },\r\n        enumerable: !1,\r\n        configurable: !0\r\n    });\r\n    t.prototype.unlock = function () {\r\n        this.weekCardInfo.lockNum++;\r\n        return (\r\n            this.weekCardInfo.lockNum >= 5 &&\r\n            ((this.weekCardInfo = {\r\n                isLock: !0,\r\n                lockNum: 0,\r\n                time: 0,\r\n                day: 1\r\n            }),\r\n            $storageUtil.StorageUtil.setItem($localName.default.WEEK_CARD, this.weekCardInfo),\r\n            !0)\r\n        );\r\n    };\r\n    t.prototype.sign = function () {\r\n        this.weekCardInfo.day++;\r\n        this.weekCardInfo.time = $util.default.startDayTimestamp();\r\n        $storageUtil.StorageUtil.setItem($localName.default.WEEK_CARD, this.weekCardInfo);\r\n    };\r\n    t.prototype.isLock = function () {\r\n        var t = $util.default.startDayTimestamp();\r\n        if (this.weekCardInfo.day > 7 && this.weekCardInfo.time < t) {\r\n            this.weekCardInfo.isLock = !1;\r\n        }\r\n        return this.weekCardInfo.isLock;\r\n    };\r\n    t.prototype.isSign = function () {\r\n        var t = $util.default.startDayTimestamp();\r\n        return this.weekCardInfo.day > 7 || this.weekCardInfo.time >= t;\r\n    };\r\n    return t;\r\n})();\r\nexports.default = r;\r\n"]}