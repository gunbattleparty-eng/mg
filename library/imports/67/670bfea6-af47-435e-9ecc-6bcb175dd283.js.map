{"version":3,"sources":["assets\\game_script\\scripts\\BaseRewardedVideo.js"],"names":["$audioPlayer","require","n","t","showCallback","closeCallback","videoEndCallback","_isLoadComplete","_gameMusicVolume","_gameEffectsVolume","_onLoadCallbackRef","_onCloseCallbackRef","_onErrorCallbackRef","_errorReloadCount","_lastCallShowTime","adUnitId","prototype","initAd","console","log","onRewardedVideoLoad","bind","onRewardedVideoClose","onRewardedVideoError","createRewardedVideo","showRewardedVideo","e","i","Date","getTime","musicVolume","effectVolume","destroyRewardedVideo","onRewardedVideoShowSuccessHandler","pause","onRewardedVideoShowFailHandler","resume","onRewardedVideoNotLoadHandler","onRewardedVideoErrorHandler","onRewardedVideoCloseHandler","pauseAll","cc","game","resumeAll","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var $audioPlayer = require(\"./AudioPlayer\");\r\nvar n = (function () {\r\n    function t() {\r\n        this.showCallback = null;\r\n        this.closeCallback = null;\r\n        this.videoEndCallback = null;\r\n        this._isLoadComplete = !1;\r\n        this._gameMusicVolume = -1;\r\n        this._gameEffectsVolume = -1;\r\n        this._onLoadCallbackRef = null;\r\n        this._onCloseCallbackRef = null;\r\n        this._onErrorCallbackRef = null;\r\n        this._errorReloadCount = 0;\r\n        this._lastCallShowTime = -1;\r\n        this.adUnitId = null;\r\n    }\r\n    t.prototype.initAd = function (t) {\r\n        console.log(\"rewardedVideo init\");\r\n        this.adUnitId = t;\r\n        this._onLoadCallbackRef = this.onRewardedVideoLoad.bind(this);\r\n        this._onCloseCallbackRef = this.onRewardedVideoClose.bind(this);\r\n        this._onErrorCallbackRef = this.onRewardedVideoError.bind(this);\r\n        this.createRewardedVideo();\r\n    };\r\n    t.prototype.showRewardedVideo = function (t, e, i) {\r\n        console.log(\"showRewardedVideo\");\r\n        var n = new Date().getTime();\r\n        this._lastCallShowTime = n;\r\n        this.showCallback = t;\r\n        this.closeCallback = e;\r\n        this.videoEndCallback = i;\r\n        this._gameMusicVolume = $audioPlayer.default.musicVolume;\r\n        this._gameEffectsVolume = $audioPlayer.default.effectVolume;\r\n    };\r\n    t.prototype.destroyRewardedVideo = function () {\r\n        console.log(\"destoryRewardedVideo\");\r\n        this.showCallback = null;\r\n        this.closeCallback = null;\r\n        this.videoEndCallback = null;\r\n        this._isLoadComplete = !1;\r\n    };\r\n    t.prototype.onRewardedVideoShowSuccessHandler = function () {\r\n        console.log(\"onRewardedVideoShowSuccess\");\r\n        if (this.showCallback) {\r\n            this.showCallback();\r\n        }\r\n        this.pause();\r\n    };\r\n    t.prototype.onRewardedVideoShowFailHandler = function (t) {\r\n        console.log(\"onRewardedVideoShowFailHandler\", t);\r\n        if (this.closeCallback) {\r\n            this.closeCallback();\r\n        }\r\n        this.showCallback = null;\r\n        this.closeCallback = null;\r\n        this.videoEndCallback = null;\r\n        this.resume();\r\n        if (this._errorReloadCount < 2) {\r\n            this.destroyRewardedVideo();\r\n            this.createRewardedVideo();\r\n            this._errorReloadCount++;\r\n        }\r\n    };\r\n    t.prototype.onRewardedVideoNotLoadHandler = function () {\r\n        console.log(\"onRewardedVideoNotLoadHandler\");\r\n        this.resume();\r\n        this.destroyRewardedVideo();\r\n        this.createRewardedVideo();\r\n    };\r\n    t.prototype.onRewardedVideoErrorHandler = function (t) {\r\n        console.log(\"onRewardedVideoErrorHandler\", t);\r\n        this.resume();\r\n        if (this._errorReloadCount < 2) {\r\n            this._errorReloadCount++;\r\n            console.log(\"重新加载激励视频\");\r\n            this.destroyRewardedVideo();\r\n            this.createRewardedVideo();\r\n        }\r\n    };\r\n    t.prototype.onRewardedVideoCloseHandler = function (t) {\r\n        console.log(\"onRewardedVideoCloseHandler\", t);\r\n        this._isLoadComplete = !1;\r\n        this.resume();\r\n        t ? this.videoEndCallback && this.videoEndCallback() : this.closeCallback && this.closeCallback();\r\n        this.showCallback = null;\r\n        this.closeCallback = null;\r\n        this.videoEndCallback = null;\r\n    };\r\n    t.prototype.pause = function () {\r\n        $audioPlayer.default.pauseAll();\r\n        console.log(\"暂停\");\r\n        cc.game.pause();\r\n    };\r\n    t.prototype.resume = function () {\r\n        cc.game.resume();\r\n        console.log(\"开始\");\r\n        $audioPlayer.default.resumeAll();\r\n    };\r\n    return t;\r\n})();\r\nexports.default = n;\r\n"]}