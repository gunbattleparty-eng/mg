{"version":3,"sources":["assets\\game_script\\scripts\\EBullet_31.js"],"names":["o","$object","require","$eventManager","$remoteAudio","$globalParam","$localEventName","$enemyStatus","$baseBullet","f","cc","_decorator","h","ccclass","m","property","Vec3","t","e","apply","arguments","buttleType","BulletType","e_bullet_31","value","atkedEnemy","Set","__extends","prototype","initButtle","setScale","v3","clear","velocity","set","multiplyScalar","speed","setAnimation","node","children","getComponent","Animation","instance","playEffectMusicRestrict","play","once","EventType","FINISHED","Math","abs","getPosition","y","doorY","send","ATK_DOOR","removeSelf","onTrigger","isUse","Trigger","enter","stay","i","object","has","add","type","EnemyDebuffType","BACK","timeLeft","dir","v2","sub","normalize","sufferDebuff","updateFrame","__decorate","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $object = require(\"./Object\");\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $remoteAudio = require(\"./RemoteAudio\");\r\nvar $globalParam = require(\"./GlobalParam\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $enemyStatus = require(\"./EnemyStatus\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar f = cc._decorator;\r\nvar h = f.ccclass;\r\nvar m =\r\n    (f.property,\r\n    new cc.Vec3(0, -1),\r\n    (function (t) {\r\n        function e() {\r\n            var e = (null !== t && t.apply(this, arguments)) || this;\r\n            e.buttleType = $baseBullet.BulletType.e_bullet_31;\r\n            e.value = [];\r\n            e.atkedEnemy = new Set();\r\n            return e;\r\n        }\r\n        __extends(e, t);\r\n        e.prototype.initButtle = function (t) {\r\n            var e = this.value[2];\r\n            this.setScale(cc.v3(e, e));\r\n            this.atkedEnemy.clear();\r\n            if (t) {\r\n                this.velocity.set(t).multiplyScalar(this.speed);\r\n            }\r\n        };\r\n        e.prototype.setAnimation = function () {\r\n            var t = this;\r\n            var e = this.node.children[0].getComponent(cc.Animation);\r\n            $remoteAudio.default.instance.playEffectMusicRestrict(\"boom\", 0.3);\r\n            e.play(\"bullet_2\");\r\n            e.once(\r\n                cc.Animation.EventType.FINISHED,\r\n                function () {\r\n                    if (Math.abs(t.getPosition().y - $globalParam.default.doorY) <= 100 * t.value[2]) {\r\n                        $eventManager.default.send($localEventName.default.ATK_DOOR, t.value[1]);\r\n                    }\r\n                    t.removeSelf();\r\n                },\r\n                this\r\n            );\r\n        };\r\n        e.prototype.onTrigger = function (t, e) {\r\n            if (!this.isUse && (e == $object.Trigger.enter || e == $object.Trigger.stay)) {\r\n                var i = t.object;\r\n                if (this.atkedEnemy.has(i)) {\r\n                    return;\r\n                }\r\n                this.atkedEnemy.add(i);\r\n                var o = {\r\n                    type: $enemyStatus.EnemyDebuffType.BACK,\r\n                    timeLeft: -1,\r\n                    value: this.value[3],\r\n                    dir: cc.v2(i.getPosition().sub(this.getPosition()).normalize())\r\n                };\r\n                i.sufferDebuff(o);\r\n            }\r\n        };\r\n        e.prototype.updateFrame = function () {};\r\n        return __decorate([h], e);\r\n    })($baseBullet.default));\r\nexports.default = m;\r\n"]}