{"version":3,"sources":["assets\\game_script\\scripts\\EggEnemy_1.js"],"names":["o","$assetsMap","require","$popupManager","$globalParam","$baseEnemy","$healthBar","d","cc","_decorator","p","ccclass","f","property","h","t","e","apply","arguments","bar1","bar2","currType","__extends","prototype","initEnemy","i","call","statusManager","hp","initHp","init","config","HP","hp_num","residueDis","Math","floor","node","y","zIndex","sufferDebuff","sufferAttack","render","opacity","unschedule","hideBar1","scheduleOnce","dieAnim","isGamePuase","PopupManager","instance","open","AssetsMap","PopUpBundles","prefabs","assetsList","EggRewardView","closeCallback","unscheduleAllCallbacks","active","skin","playAnimation","once","dragonBones","EventObject","COMPLETE","isDie","move","__decorate","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $popupManager = require(\"./PopupManager\");\r\nvar $globalParam = require(\"./GlobalParam\");\r\nvar $baseEnemy = require(\"./BaseEnemy\");\r\nvar $healthBar = require(\"./HealthBar\");\r\nvar d = cc._decorator;\r\nvar p = d.ccclass;\r\nvar f = d.property;\r\nvar h = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.bar1 = null;\r\n        e.bar2 = null;\r\n        e.currType = 0;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.initEnemy = function (e, i, o) {\r\n        if (void 0 === o) {\r\n            o = 0;\r\n        }\r\n        t.prototype.initEnemy.call(this, e, i, o);\r\n        this.currType = 0;\r\n        this.statusManager.hp = 5e3;\r\n        this.statusManager.initHp = 5e3;\r\n        this.bar1.init(5e3, 1);\r\n        this.bar2.init(this.config.HP, e.hp_num);\r\n        this.residueDis = Math.floor(this.node.y + 400);\r\n        this.node.zIndex = 5e3 - Math.floor(this.residueDis);\r\n    };\r\n    e.prototype.sufferDebuff = function () {};\r\n    e.prototype.sufferAttack = function (e, i) {\r\n        if (1 === this.currType) {\r\n            return !1;\r\n        }\r\n        var o = t.prototype.sufferAttack.call(this, e, i);\r\n        0 === this.currType\r\n            ? (this.bar1.render(this.statusManager.hp),\r\n              (this.bar1.node.opacity = 255),\r\n              this.unschedule(this.hideBar1),\r\n              this.scheduleOnce(this.hideBar1, 3))\r\n            : this.bar2.render(this.statusManager.hp);\r\n        return o;\r\n    };\r\n    e.prototype.hideBar1 = function () {\r\n        this.bar1.node.opacity = 0;\r\n    };\r\n    e.prototype.dieAnim = function () {\r\n        var e = this;\r\n        return (\r\n            1 !== this.currType &&\r\n            (2 === this.currType\r\n                ? (t.prototype.dieAnim.call(this),\r\n                  ($globalParam.default.isGamePuase = !0),\r\n                  $popupManager.PopupManager.instance.open(\r\n                      $assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.EggRewardView,\r\n                      null,\r\n                      {\r\n                          closeCallback: function () {\r\n                              $globalParam.default.isGamePuase = !1;\r\n                          }\r\n                      }\r\n                  ),\r\n                  !0)\r\n                : (this.unscheduleAllCallbacks(),\r\n                  (this.currType = 1),\r\n                  (this.bar1.node.active = !1),\r\n                  this.skin.playAnimation(\"bao\", 1),\r\n                  (this.skin.node.opacity = 1),\r\n                  this.skin.once(\r\n                      dragonBones.EventObject.COMPLETE,\r\n                      function () {\r\n                          e.skin.playAnimation(\"run\", 0);\r\n                          e.bar2.node.active = !0;\r\n                          e.statusManager.hp = e.config.HP;\r\n                          e.statusManager.initHp = e.config.HP;\r\n                          e.currType = 2;\r\n                          e.statusManager.isDie = !1;\r\n                      },\r\n                      this\r\n                  ),\r\n                  !1))\r\n        );\r\n    };\r\n    e.prototype.move = function (e) {\r\n        if (!(this.currType < 2)) {\r\n            t.prototype.move.call(this, e);\r\n        }\r\n    };\r\n    __decorate([f($healthBar.default)], e.prototype, \"bar1\", void 0);\r\n    __decorate([f($healthBar.default)], e.prototype, \"bar2\", void 0);\r\n    return __decorate([p], e);\r\n})($baseEnemy.default);\r\nexports.default = h;\r\n"]}