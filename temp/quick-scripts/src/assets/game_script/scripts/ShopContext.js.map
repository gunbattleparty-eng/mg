{"version":3,"sources":["assets\\game_script\\scripts\\ShopContext.js"],"names":["$eventManager","require","$seedUtil","$storageUtil","$util","$startView","$configContext","$localEventName","$localName","$roleContext","$userDataContext","f","t","boxRewardRecord","normal","advanced","skin","boxVideoRecord","shopResRecords","shopResRefreshTime","shopDiamondRecords","init","Object","defineProperty","get","_instance","enumerable","configurable","prototype","StorageUtil","getItem","BOX_REWARD_RECORD","SHOP_DIAMOND_RECORD","BOX_VIDEO_RECORD","SHOP_RES_REFRESH_TIME","startDayTimestamp","SHOP_RES_RECORD","removeItem","getBoxVideoRecord","getSkinBoxVideoRecord","setBoxVideoRecord","e","setItem","setSkinBoxVideoRecord","getDiamondRecordById","find","id","dayBuyCount","lastTime","video_count","isFrist","addDiamondRecord","i","isReward","isFirst","count","o","push","isDiamondBuyDay","hasResRedDot","instance","shopResConfigs","filter","coin_type","length","Ins","getShopResRecordById","buyCount","hasDiamondRedDot","shopDiamondConfigs","is_video","addShopResRecordVideo","findIndex","addShopResRecord","getNormalBoxRecord","gemBoxConfigs","weightRandomCount","weight","randomGem","getRobotBox","deepCopy","ins","isHaveRobot","s","a","c","u","p","getRobotSkinInfo","shard","setRobotSkinInfo","robots","gems","getAdvancedBoxRecord","gemConfigs","Grade","randomFrom","addPackItem","r","send","RENDER_DOT","MenuType","Role","getSkinBoxRecord","h","TreasureChest_type","type","ext","num","g","getGunSkinInfo","setGunSkinInfo","getPlayerSkinInfo","setPlayerSKinInfo","opearCoin","m","y","opearAdCoin","opearUpgradeStone","_","saveRobotSkin","saveGunSkin","savePlayerSkin","exports"],"mappings":";;;;;;AAAA,IAAIA,aAAa,GAAGC,OAAO,CAAC,gBAAD,CAA3B;;AACA,IAAIC,SAAS,GAAGD,OAAO,CAAC,YAAD,CAAvB;;AACA,IAAIE,YAAY,GAAGF,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAIG,KAAK,GAAGH,OAAO,CAAC,QAAD,CAAnB;;AACA,IAAII,UAAU,GAAGJ,OAAO,CAAC,aAAD,CAAxB;;AACA,IAAIK,cAAc,GAAGL,OAAO,CAAC,iBAAD,CAA5B;;AACA,IAAIM,eAAe,GAAGN,OAAO,CAAC,kBAAD,CAA7B;;AACA,IAAIO,UAAU,GAAGP,OAAO,CAAC,aAAD,CAAxB;;AACA,IAAIQ,YAAY,GAAGR,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAIS,gBAAgB,GAAGT,OAAO,CAAC,mBAAD,CAA9B;;AACA,IAAIU,CAAC,GAAI,YAAY;EACjB,SAASC,CAAT,GAAa;IACT,KAAKC,eAAL,GAAuB;MACnBC,MAAM,EAAE,EADW;MAEnBC,QAAQ,EAAE,EAFS;MAGnBC,IAAI,EAAE;IAHa,CAAvB;IAKA,KAAKC,cAAL,GAAsB;MAClBH,MAAM,EAAE,CADU;MAElBC,QAAQ,EAAE,CAFQ;MAGlBC,IAAI,EAAE;IAHY,CAAtB;IAKA,KAAKE,cAAL,GAAsB,EAAtB;IACA,KAAKC,kBAAL,GAA0B,CAA1B;IACA,KAAKC,kBAAL,GAA0B,EAA1B;IACA,KAAKC,IAAL;EACH;;EACDC,MAAM,CAACC,cAAP,CAAsBX,CAAtB,EAAyB,KAAzB,EAAgC;IAC5BY,GAAG,EAAE,eAAY;MACb,IAAI,SAASZ,CAAC,CAACa,SAAf,EAA0B;QACtBb,CAAC,CAACa,SAAF,GAAc,IAAIb,CAAJ,EAAd;MACH;;MACD,OAAOA,CAAC,CAACa,SAAT;IACH,CAN2B;IAO5BC,UAAU,EAAE,CAAC,CAPe;IAQ5BC,YAAY,EAAE,CAAC;EARa,CAAhC;;EAUAf,CAAC,CAACgB,SAAF,CAAYP,IAAZ,GAAmB,YAAY;IAC3B,KAAKR,eAAL,GAAuBV,YAAY,CAAC0B,WAAb,CAAyBC,OAAzB,CACnBtB,UAAU,WAAV,CAAmBuB,iBADA,EAEnB,KAAKlB,eAFc,CAAvB;;IAIA,IAAI,KAAK,CAAL,KAAW,KAAKA,eAAL,CAAqBG,IAApC,EAA0C;MACtC,KAAKH,eAAL,CAAqBG,IAArB,GAA4B,EAA5B;IACH;;IACD,KAAKI,kBAAL,GAA0BjB,YAAY,CAAC0B,WAAb,CAAyBC,OAAzB,CACtBtB,UAAU,WAAV,CAAmBwB,mBADG,EAEtB,KAAKZ,kBAFiB,CAA1B;IAIA,KAAKH,cAAL,GAAsBd,YAAY,CAAC0B,WAAb,CAAyBC,OAAzB,CAClBtB,UAAU,WAAV,CAAmByB,gBADD,EAElB,KAAKhB,cAFa,CAAtB;;IAIA,IAAI,KAAK,CAAL,KAAW,KAAKA,cAAL,CAAoBD,IAAnC,EAAyC;MACrC,KAAKC,cAAL,CAAoBD,IAApB,GAA2B,CAA3B;IACH;;IACD,KAAKG,kBAAL,GAA0BhB,YAAY,CAAC0B,WAAb,CAAyBC,OAAzB,CAAiCtB,UAAU,WAAV,CAAmB0B,qBAApD,EAA2E,CAA3E,CAA1B;IACA,KAAKf,kBAAL,IAA2Bf,KAAK,WAAL,CAAc+B,iBAAd,EAA3B,GACO,KAAKjB,cAAL,GAAsBf,YAAY,CAAC0B,WAAb,CAAyBC,OAAzB,CACnBtB,UAAU,WAAV,CAAmB4B,eADA,EAEnB,KAAKlB,cAFc,CAD7B,GAKMf,YAAY,CAAC0B,WAAb,CAAyBQ,UAAzB,CAAoC7B,UAAU,WAAV,CAAmB4B,eAAvD,CALN;EAMH,CA1BD;;EA2BAxB,CAAC,CAACgB,SAAF,CAAYU,iBAAZ,GAAgC,UAAU1B,CAAV,EAAa;IACzC,OAAOA,CAAC,GAAG,KAAKK,cAAL,CAAoBH,MAAvB,GAAgC,KAAKG,cAAL,CAAoBF,QAA5D;EACH,CAFD;;EAGAH,CAAC,CAACgB,SAAF,CAAYW,qBAAZ,GAAoC,YAAY;IAC5C,OAAO,KAAKtB,cAAL,CAAoBD,IAA3B;EACH,CAFD;;EAGAJ,CAAC,CAACgB,SAAF,CAAYY,iBAAZ,GAAgC,UAAU5B,CAAV,EAAa6B,CAAb,EAAgB;IAC5C7B,CAAC,GAAI,KAAKK,cAAL,CAAoBH,MAApB,GAA6B2B,CAAjC,GAAuC,KAAKxB,cAAL,CAAoBF,QAApB,GAA+B0B,CAAvE;IACAtC,YAAY,CAAC0B,WAAb,CAAyBa,OAAzB,CAAiClC,UAAU,WAAV,CAAmByB,gBAApD,EAAsE,KAAKhB,cAA3E;EACH,CAHD;;EAIAL,CAAC,CAACgB,SAAF,CAAYe,qBAAZ,GAAoC,UAAU/B,CAAV,EAAa;IAC7C,KAAKK,cAAL,CAAoBD,IAApB,GAA2BJ,CAA3B;IACAT,YAAY,CAAC0B,WAAb,CAAyBa,OAAzB,CAAiClC,UAAU,WAAV,CAAmByB,gBAApD,EAAsE,KAAKhB,cAA3E;EACH,CAHD;;EAIAL,CAAC,CAACgB,SAAF,CAAYgB,oBAAZ,GAAmC,UAAUhC,CAAV,EAAa;IAC5C,IAAI6B,CAAC,GAAG,KAAKrB,kBAAL,CAAwByB,IAAxB,CAA6B,UAAUJ,CAAV,EAAa;MAC9C,OAAOA,CAAC,CAACK,EAAF,KAASlC,CAAhB;IACH,CAFO,CAAR;IAGA,OAAO6B,CAAC,IACA,KAAK,CAAL,KAAWA,CAAC,CAACM,WAAb,IAA4B3C,KAAK,WAAL,CAAc+B,iBAAd,OAAsCM,CAAC,CAACO,QAArE,KAAmFP,CAAC,CAACM,WAAF,GAAgB,CAAnG,GAAuGN,CADtG,IAEF;MACIK,EAAE,EAAElC,CADR;MAEIqC,WAAW,EAAE,CAFjB;MAGIC,OAAO,EAAE,CAAC,CAHd;MAIIH,WAAW,EAAE,CAJjB;MAKIC,QAAQ,EAAE;IALd,CAFN;EASH,CAbD;;EAcApC,CAAC,CAACgB,SAAF,CAAYuB,gBAAZ,GAA+B,UAAUvC,CAAV,EAAa6B,CAAb,EAAgB;IAC3C,IAAIW,CAAC,GAAG;MACJC,QAAQ,EAAE,CAAC,CADP;MAEJC,OAAO,EAAE,CAAC,CAFN;MAGJC,KAAK,EAAE;IAHH,CAAR;IAKA,IAAIC,CAAC,GAAG,KAAKpC,kBAAL,CAAwByB,IAAxB,CAA6B,UAAUJ,CAAV,EAAa;MAC9C,OAAOA,CAAC,CAACK,EAAF,KAASlC,CAAhB;IACH,CAFO,CAAR;;IAGA,IAAI,CAAC4C,CAAL,EAAQ;MACJA,CAAC,GAAG;QACAV,EAAE,EAAElC,CADJ;QAEAqC,WAAW,EAAE,CAFb;QAGAD,QAAQ,EAAE,CAHV;QAIAE,OAAO,EAAE,CAAC,CAJV;QAKAH,WAAW,EAAE;MALb,CAAJ;MAOA,KAAK3B,kBAAL,CAAwBqC,IAAxB,CAA6BD,CAA7B;IACH;;IACDA,CAAC,CAACP,WAAF;IACAG,CAAC,CAACG,KAAF,GAAUC,CAAC,CAACP,WAAZ;;IACA,IAAIO,CAAC,CAACP,WAAF,IAAiBR,CAArB,EAAwB;MACpBW,CAAC,CAACC,QAAF,GAAa,CAAC,CAAd;MACAD,CAAC,CAACE,OAAF,GAAYE,CAAC,CAACN,OAAd;MACAM,CAAC,CAACP,WAAF,GAAgB,CAAhB;MACAO,CAAC,CAACR,QAAF,GAAa5C,KAAK,WAAL,CAAc+B,iBAAd,EAAb;MACAqB,CAAC,CAACP,WAAF,GAAgB,CAAhB;MACAO,CAAC,CAACN,OAAF,GAAY,CAAC,CAAb;MACAM,CAAC,CAACT,WAAF;IACH;;IACD5C,YAAY,CAAC0B,WAAb,CAAyBa,OAAzB,CAAiClC,UAAU,WAAV,CAAmBwB,mBAApD,EAAyE,KAAKZ,kBAA9E;IACA,OAAOgC,CAAP;EACH,CAhCD;;EAiCAxC,CAAC,CAACgB,SAAF,CAAY8B,eAAZ,GAA8B,UAAU9C,CAAV,EAAa;IACvC,IAAI6B,CAAC,GAAG,KAAKrB,kBAAL,CAAwByB,IAAxB,CAA6B,UAAUJ,CAAV,EAAa;MAC9C,OAAOA,CAAC,CAACK,EAAF,KAASlC,CAAhB;IACH,CAFO,CAAR;IAGA,OAAO,CAAC,CAAC6B,CAAF,IAAOA,CAAC,CAACO,QAAF,KAAe5C,KAAK,WAAL,CAAc+B,iBAAd,EAA7B;EACH,CALD;;EAMAvB,CAAC,CAACgB,SAAF,CAAY+B,YAAZ,GAA2B,YAAY;IACnC,IAAIlB,CAAC,GAAGnC,cAAc,WAAd,CAAuBsD,QAAvB,CAAgCC,cAAhC,CAA+CC,MAA/C,CAAsD,UAAUlD,CAAV,EAAa;MACvE,OAAO,MAAMA,CAAC,CAACmD,SAAf;IACH,CAFO,CAAR;;IAGA,KAAK,IAAIX,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,CAAC,CAACuB,MAAtB,EAA8BZ,CAAC,EAA/B,EAAmC;MAC/B,IAAIxC,CAAC,CAACqD,GAAF,CAAMC,oBAAN,CAA2BzB,CAAC,CAACW,CAAD,CAAD,CAAKN,EAAhC,EAAoCqB,QAApC,IAAgD,CAApD,EAAuD;QACnD,OAAO,CAAC,CAAR;MACH;IACJ;;IACD,OAAO,CAAC,CAAR;EACH,CAVD;;EAWAvD,CAAC,CAACgB,SAAF,CAAYwC,gBAAZ,GAA+B,YAAY;IACvC,IAAI3B,CAAC,GAAGnC,cAAc,WAAd,CAAuBsD,QAAvB,CAAgCS,kBAAhC,CAAmDP,MAAnD,CAA0D,UAAUlD,CAAV,EAAa;MAC3E,OAAO,MAAMA,CAAC,CAAC0D,QAAf;IACH,CAFO,CAAR;;IAGA,KAAK,IAAIlB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,CAAC,CAACuB,MAAtB,EAA8BZ,CAAC,EAA/B,EAAmC;MAC/B,IAAI,CAACxC,CAAC,CAACqD,GAAF,CAAMP,eAAN,CAAsBjB,CAAC,CAACW,CAAD,CAAD,CAAKN,EAA3B,CAAL,EAAqC;QACjC,OAAO,CAAC,CAAR;MACH;IACJ;;IACD,OAAO,CAAC,CAAR;EACH,CAVD;;EAWAlC,CAAC,CAACgB,SAAF,CAAYsC,oBAAZ,GAAmC,UAAUtD,CAAV,EAAa;IAC5C,IAAI6B,CAAC,GAAG,KAAKvB,cAAL,CAAoB2B,IAApB,CAAyB,UAAUJ,CAAV,EAAa;MAC1C,OAAOA,CAAC,CAACK,EAAF,KAASlC,CAAhB;IACH,CAFO,CAAR;IAGA,OAAO6B,CAAC,IACD,KAAKtB,kBAAL,GAA0Bf,KAAK,WAAL,CAAc+B,iBAAd,EAA1B,KAAgEM,CAAC,CAAC0B,QAAF,GAAa,CAA7E,GACD,KAAK,CAAL,KAAW1B,CAAC,CAACQ,WAAb,KAA6BR,CAAC,CAACQ,WAAF,GAAgB,CAA7C,CADC,EAEDR,CAHE,IAIF;MACIK,EAAE,EAAElC,CADR;MAEIuD,QAAQ,EAAE,CAFd;MAGIlB,WAAW,EAAE;IAHjB,CAJN;EASH,CAbD;;EAcArC,CAAC,CAACgB,SAAF,CAAY2C,qBAAZ,GAAoC,UAAU3D,CAAV,EAAa6B,CAAb,EAAgB;IAChD,IAAIW,CAAC,GAAG,KAAKc,oBAAL,CAA0BtD,CAA1B,CAAR;IACAwC,CAAC,CAACH,WAAF,GAAgBR,CAAhB;;IACA,IACI,CAAC,CAAD,KACA,KAAKvB,cAAL,CAAoBsD,SAApB,CAA8B,UAAU/B,CAAV,EAAa;MACvC,OAAOA,CAAC,CAACK,EAAF,KAASlC,CAAhB;IACH,CAFD,CAFJ,EAKE;MACE,KAAKM,cAAL,CAAoBuC,IAApB,CAAyBL,CAAzB;IACH;;IACDjD,YAAY,CAAC0B,WAAb,CAAyBa,OAAzB,CAAiClC,UAAU,WAAV,CAAmB4B,eAApD,EAAqE,KAAKlB,cAA1E;EACH,CAZD;;EAaAN,CAAC,CAACgB,SAAF,CAAY6C,gBAAZ,GAA+B,UAAU7D,CAAV,EAAa;IACxC,IAAI6B,CAAC,GAAG,KAAKyB,oBAAL,CAA0BtD,CAA1B,CAAR;IACA6B,CAAC,CAAC0B,QAAF;;IACA,IACI,CAAC,CAAD,KACA,KAAKjD,cAAL,CAAoBsD,SAApB,CAA8B,UAAU/B,CAAV,EAAa;MACvC,OAAOA,CAAC,CAACK,EAAF,KAASlC,CAAhB;IACH,CAFD,CAFJ,EAKE;MACE,KAAKM,cAAL,CAAoBuC,IAApB,CAAyBhB,CAAzB;IACH;;IACD,IAAI,KAAKtB,kBAAL,GAA0Bf,KAAK,WAAL,CAAc+B,iBAAd,EAA9B,EAAiE;MAC7D,KAAKhB,kBAAL,GAA0Bf,KAAK,WAAL,CAAc+B,iBAAd,EAA1B;MACAhC,YAAY,CAAC0B,WAAb,CAAyBa,OAAzB,CAAiClC,UAAU,WAAV,CAAmB0B,qBAApD,EAA2E,KAAKf,kBAAhF;IACH;;IACDhB,YAAY,CAAC0B,WAAb,CAAyBa,OAAzB,CAAiClC,UAAU,WAAV,CAAmB4B,eAApD,EAAqE,KAAKlB,cAA1E;EACH,CAhBD;;EAiBAN,CAAC,CAACgB,SAAF,CAAY8C,kBAAZ,GAAiC,UAAU9D,CAAV,EAAa;IAC1C,IAAI6B,CAAC,GAAGnC,cAAc,WAAd,CAAuBsD,QAAvB,CAAgCe,aAAhC,CAA8C,CAA9C,CAAR;IACA,IAAIvB,CAAC,GAAGlD,SAAS,WAAT,CAAkB0E,iBAAlB,CAAoCnC,CAAC,CAACoC,MAAtC,EAA8CjE,CAA9C,EAAiD,CAAC,CAAlD,CAAR;IACA,IAAI4C,CAAC,GAAG,CAAC,CAAT;IACA,KAAK3C,eAAL,CAAqBC,MAArB,IAA+BF,CAA/B;;IACA,IAAI,KAAKC,eAAL,CAAqBC,MAArB,IAA+B,CAAnC,EAAsC;MAClC0C,CAAC,GAAG5C,CAAC,GAAG,CAAR;MACA,KAAKC,eAAL,CAAqBC,MAArB,IAA+B,EAA/B;IACH;;IACD,IAAI,CAAC,CAAD,KAAO0C,CAAX,EAAc;MACVJ,CAAC,CAACI,CAAD,CAAD,GAAO,CAAP;IACH;;IACD,OAAO,KAAKsB,SAAL,CAAe1B,CAAf,CAAP;EACH,CAbD;;EAcAxC,CAAC,CAACgB,SAAF,CAAYmD,WAAZ,GAA0B,UAAUnE,CAAV,EAAa;IACnC,IAAI6B,CAAC,GAAGnC,cAAc,WAAd,CAAuBsD,QAAvB,CAAgCe,aAAhC,CAA8C,CAA9C,CAAR;IACA,IAAIvB,CAAC,GAAGhD,KAAK,WAAL,CAAc4E,QAAd,CAAuBvC,CAAC,CAACoC,MAAzB,CAAR;;IACA,IAAIpE,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBC,WAAzB,CAAqC,CAArC,CAAJ,EAA6C;MACzC9B,CAAC,CAAC,CAAD,CAAD,GAAO,CAAP;IACH;;IACD,IAAI3C,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBC,WAAzB,CAAqC,CAArC,CAAJ,EAA6C;MACzC9B,CAAC,CAAC,CAAD,CAAD,GAAO,CAAP;IACH;;IACD,IAAII,CAAC,GAAGtD,SAAS,WAAT,CAAkB0E,iBAAlB,CAAoCxB,CAApC,EAAuCxC,CAAvC,EAA0C,CAAC,CAA3C,CAAR;IACA,IAAIuE,CAAC,GAAG,CAAC,CAAT;IACA,IAAIC,CAAC,GAAG,EAAR;IACA,KAAKvE,eAAL,CAAqBE,QAArB,IAAiCH,CAAjC;;IACA,IAAI,KAAKC,eAAL,CAAqBE,QAArB,IAAiC,CAArC,EAAwC;MACpCoE,CAAC,GAAGvE,CAAC,GAAG,CAAR;MACA,KAAKC,eAAL,CAAqBE,QAArB,IAAiC,EAAjC;IACH;;IACD,IAAI,CAAC,CAAD,KAAOoE,CAAX,EAAc;MACV3B,CAAC,CAAC2B,CAAD,CAAD,GAAO,CAAP;IACH;;IACD,IAAIE,CAAC,GAAG,EAAR;;IACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG9B,CAAC,CAACQ,MAAtB,EAA8BsB,CAAC,EAA/B,EAAmC;MAC/B,IAAI9B,CAAC,CAAC8B,CAAD,CAAD,GAAO,CAAX,EAAc;QACVF,CAAC,CAAC3B,IAAF,CAAOD,CAAC,CAAC8B,CAAD,CAAR;MACH,CAFD,MAEO;QACH,IAAI,MAAM9B,CAAC,CAAC8B,CAAD,CAAX,EAAgB;UACZD,CAAC,CAAC5B,IAAF,CAAO,CAAP;UACA,CAAC8B,CAAC,GAAG9E,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBO,gBAAzB,CAA0C,CAA1C,CAAL,EAAmDC,KAAnD;UACAhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBS,gBAAzB,CAA0CH,CAA1C;QACH,CAJD,MAIO;UACH,IAAI,MAAM/B,CAAC,CAAC8B,CAAD,CAAX,EAAgB;YACZ,IAAIC,CAAJ;YACAF,CAAC,CAAC5B,IAAF,CAAO,CAAP;YACA,CAAC8B,CAAC,GAAG9E,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBO,gBAAzB,CAA0C,CAA1C,CAAL,EAAmDC,KAAnD;YACAhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBS,gBAAzB,CAA0CH,CAA1C;UACH;QACJ;MACJ;IACJ;;IACD,OAAO;MACHI,MAAM,EAAEN,CADL;MAEHO,IAAI,EAAE,KAAKd,SAAL,CAAeM,CAAf;IAFH,CAAP;EAIH,CA3CD;;EA4CAxE,CAAC,CAACgB,SAAF,CAAYiE,oBAAZ,GAAmC,UAAUjF,CAAV,EAAa;IAC5C,IAAI6B,CAAC,GAAGnC,cAAc,WAAd,CAAuBsD,QAAvB,CAAgCe,aAAhC,CAA8C,CAA9C,CAAR;IACA,IAAIvB,CAAC,GAAGlD,SAAS,WAAT,CAAkB0E,iBAAlB,CAAoCnC,CAAC,CAACoC,MAAtC,EAA8CjE,CAA9C,EAAiD,CAAC,CAAlD,CAAR;IACA,IAAI4C,CAAC,GAAG,CAAC,CAAT;IACA,KAAK3C,eAAL,CAAqBE,QAArB,IAAiCH,CAAjC;;IACA,IAAI,KAAKC,eAAL,CAAqBE,QAArB,IAAiC,CAArC,EAAwC;MACpCyC,CAAC,GAAG5C,CAAC,GAAG,CAAR;MACA,KAAKC,eAAL,CAAqBE,QAArB,IAAiC,EAAjC;IACH;;IACD,IAAI,CAAC,CAAD,KAAOyC,CAAX,EAAc;MACVJ,CAAC,CAACI,CAAD,CAAD,GAAO,CAAP;IACH;;IACD,OAAO,KAAKsB,SAAL,CAAe1B,CAAf,CAAP;EACH,CAbD;;EAcAxC,CAAC,CAACgB,SAAF,CAAYkD,SAAZ,GAAwB,UAAUlE,CAAV,EAAa;IACjC,IAAI6B,CAAC,GAAG,EAAR;;IACA,IAAIW,CAAC,GAAG,WAAUA,EAAV,EAAa;MACjB,IAAII,CAAC,GAAG5C,CAAC,CAACwC,EAAD,CAAD,GAAO,CAAf;MACA,IAAI+B,CAAC,GAAG7E,cAAc,WAAd,CAAuBsD,QAAvB,CAAgCkC,UAAhC,CAA2ChC,MAA3C,CAAkD,UAAUlD,CAAV,EAAa;QACnE,OAAOA,CAAC,CAACmF,KAAF,KAAYvC,CAAnB;MACH,CAFO,CAAR;MAGAf,CAAC,CAACW,EAAD,CAAD,GAAO+B,CAAC,CAACjF,SAAS,WAAT,CAAkB8F,UAAlB,CAA6B,CAA7B,EAAgCb,CAAC,CAACnB,MAAF,GAAW,CAA3C,CAAD,CAAR;MACAvD,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBgB,WAAzB,CAAqCxD,CAAC,CAACW,EAAD,CAAtC,EAA2C,CAA3C;IACH,CAPD;;IAQA,KAAK,IAAI8C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGtF,CAAC,CAACoD,MAAtB,EAA8BkC,CAAC,EAA/B,EAAmC;MAC/B9C,CAAC,CAAC8C,CAAD,CAAD;IACH;;IACD/F,YAAY,CAAC0B,WAAb,CAAyBa,OAAzB,CAAiClC,UAAU,WAAV,CAAmBuB,iBAApD,EAAuE,KAAKlB,eAA5E;IACAb,aAAa,WAAb,CAAsBmG,IAAtB,CAA2B5F,eAAe,WAAf,CAAwB6F,UAAnD,EAA+D/F,UAAU,CAACgG,QAAX,CAAoBC,IAAnF;IACA,OAAO7D,CAAP;EACH,CAhBD;;EAiBA7B,CAAC,CAACgB,SAAF,CAAY2E,gBAAZ,GAA+B,UAAU3F,CAAV,EAAa;IACxC,IAAI6B,CAAC,GAAG,EAAR;IACA,IAAIW,CAAC,GAAGlD,SAAS,WAAT,CAAkB0E,iBAAlB,CAAoCtE,cAAc,WAAd,CAAuBsD,QAAvB,CAAgCe,aAAhC,CAA8C,CAA9C,EAAiDE,MAArF,EAA6FjE,CAA7F,EAAgG,CAAC,CAAjG,CAAR;;IACA,KAAK,IAAIsF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG9C,CAAC,CAACY,MAAtB,EAA8BkC,CAAC,EAA/B,EAAmC;MAC/B,IAAIvF,CAAC,GAAGyC,CAAC,CAAC8C,CAAD,CAAT;MACA,IAAIM,CAAC,GAAGlG,cAAc,WAAd,CAAuBsD,QAAvB,CAAgCe,aAAhC,CAA8C,CAA9C,EAAiD8B,kBAAjD,CAAoE9F,CAApE,CAAR;;MACA,IAAI,OAAO6F,CAAX,EAAc;QACV/D,CAAC,CAACgB,IAAF,CAAO;UACHiD,IAAI,EAAE,EADH;UAEHC,GAAG,EAAE,CAFF;UAGHC,GAAG,EAAE;QAHF,CAAP;QAKA,CAACC,CAAC,GAAGpG,YAAY,WAAZ,CAAqBwE,GAArB,CAAyB6B,cAAzB,CAAwC,CAAxC,CAAL,EAAiDrB,KAAjD,IAA0D,CAA1D;QACAhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyB8B,cAAzB,CAAwCF,CAAxC,EAA2C,CAAC,CAA5C;MACH,CARD,MAQO;QACH,IAAI,OAAOL,CAAX,EAAc;UACV/D,CAAC,CAACgB,IAAF,CAAO;YACHiD,IAAI,EAAE,EADH;YAEHC,GAAG,EAAE,CAFF;YAGHC,GAAG,EAAE;UAHF,CAAP;UAKA,CAACC,CAAC,GAAGpG,YAAY,WAAZ,CAAqBwE,GAArB,CAAyB6B,cAAzB,CAAwC,CAAxC,CAAL,EAAiDrB,KAAjD,IAA0D,CAA1D;UACAhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyB8B,cAAzB,CAAwCF,CAAxC,EAA2C,CAAC,CAA5C;QACH,CARD,MAQO;UACH,IAAI,OAAOL,CAAX,EAAc;YACV/D,CAAC,CAACgB,IAAF,CAAO;cACHiD,IAAI,EAAE,EADH;cAEHC,GAAG,EAAE,CAFF;cAGHC,GAAG,EAAE;YAHF,CAAP;YAKA,CAACC,CAAC,GAAGpG,YAAY,WAAZ,CAAqBwE,GAArB,CAAyB6B,cAAzB,CAAwC,CAAxC,CAAL,EAAiDrB,KAAjD,IAA0D,CAA1D;YACAhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyB8B,cAAzB,CAAwCF,CAAxC,EAA2C,CAAC,CAA5C;UACH,CARD,MAQO;YACH,IAAI,OAAOL,CAAX,EAAc;cACV/D,CAAC,CAACgB,IAAF,CAAO;gBACHiD,IAAI,EAAE,EADH;gBAEHC,GAAG,EAAE,CAFF;gBAGHC,GAAG,EAAE;cAHF,CAAP;cAKA,CAACC,CAAC,GAAGpG,YAAY,WAAZ,CAAqBwE,GAArB,CAAyB6B,cAAzB,CAAwC,CAAxC,CAAL,EAAiDrB,KAAjD,IAA0D,CAA1D;cACAhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyB8B,cAAzB,CAAwCF,CAAxC,EAA2C,CAAC,CAA5C;YACH,CARD,MAQO;cACH,IAAI,OAAOL,CAAX,EAAc;gBACV/D,CAAC,CAACgB,IAAF,CAAO;kBACHiD,IAAI,EAAE,EADH;kBAEHC,GAAG,EAAE,CAFF;kBAGHC,GAAG,EAAE;gBAHF,CAAP;gBAKA,CAACC,CAAC,GAAGpG,YAAY,WAAZ,CAAqBwE,GAArB,CAAyB6B,cAAzB,CAAwC,CAAxC,CAAL,EAAiDrB,KAAjD,IAA0D,CAA1D;gBACAhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyB8B,cAAzB,CAAwCF,CAAxC,EAA2C,CAAC,CAA5C;cACH,CARD,MAQO;gBACH,IAAI,OAAOL,CAAX,EAAc;kBACV/D,CAAC,CAACgB,IAAF,CAAO;oBACHiD,IAAI,EAAE,CADH;oBAEHC,GAAG,EAAE,CAFF;oBAGHC,GAAG,EAAE;kBAHF,CAAP;kBAKA,CAACC,CAAC,GAAGpG,YAAY,WAAZ,CAAqBwE,GAArB,CAAyB+B,iBAAzB,CAA2C,CAA3C,CAAL,EAAoDvB,KAApD,IAA6D,CAA7D;kBACAhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBgC,iBAAzB,CAA2CJ,CAA3C,EAA8C,CAAC,CAA/C;gBACH,CARD,MAQO;kBACH,IAAI,OAAOL,CAAX,EAAc;oBACV/D,CAAC,CAACgB,IAAF,CAAO;sBACHiD,IAAI,EAAE,CADH;sBAEHC,GAAG,EAAE,CAFF;sBAGHC,GAAG,EAAE;oBAHF,CAAP;oBAKA,CAACC,CAAC,GAAGpG,YAAY,WAAZ,CAAqBwE,GAArB,CAAyB+B,iBAAzB,CAA2C,CAA3C,CAAL,EAAoDvB,KAApD,IAA6D,CAA7D;oBACAhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBgC,iBAAzB,CAA2CJ,CAA3C,EAA8C,CAAC,CAA/C;kBACH,CARD,MAQO;oBACH,IAAI,OAAOL,CAAX,EAAc;sBACV/D,CAAC,CAACgB,IAAF,CAAO;wBACHiD,IAAI,EAAE,CADH;wBAEHC,GAAG,EAAE,CAFF;wBAGHC,GAAG,EAAE;sBAHF,CAAP;sBAKAlG,gBAAgB,WAAhB,CAAyBuD,GAAzB,CAA6BiD,SAA7B,CAAuC,IAAvC;oBACH,CAPD,MAOO;sBACH,IAAI,OAAOV,CAAX,EAAc;wBACV,IAAIW,CAAC,GAAG7G,cAAc,WAAd,CAAuBsD,QAAvB,CAAgCkC,UAAhC,CAA2ChC,MAA3C,CAAkD,UAAUlD,CAAV,EAAa;0BACnE,OAAO,MAAMA,CAAC,CAACmF,KAAf;wBACH,CAFO,CAAR;wBAGA,IAAIqB,CAAC,GAAGD,CAAC,CAACjH,SAAS,WAAT,CAAkB8F,UAAlB,CAA6B,CAA7B,EAAgCmB,CAAC,CAACnD,MAAF,GAAW,CAA3C,CAAD,CAAT;wBACAvD,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBgB,WAAzB,CAAqCmB,CAArC,EAAwC,CAAxC;wBACA3E,CAAC,CAACgB,IAAF,CAAO;0BACHiD,IAAI,EAAE,CADH;0BAEHC,GAAG,EAAEQ,CAAC,CAACjB,CAAD,CAAD,CAAKpD,EAFP;0BAGH8D,GAAG,EAAE;wBAHF,CAAP;sBAKH,CAXD,MAWO;wBACH,OAAOJ,CAAP,IACO9F,gBAAgB,WAAhB,CAAyBuD,GAAzB,CAA6BoD,WAA7B,CAAyC,CAAzC,GACD5E,CAAC,CAACgB,IAAF,CAAO;0BACHiD,IAAI,EAAE,EADH;0BAEHC,GAAG,EAAE,CAFF;0BAGHC,GAAG,EAAE;wBAHF,CAAP,CAFN,IAOM,OAAOJ,CAAP,IACC9F,gBAAgB,WAAhB,CAAyBuD,GAAzB,CAA6BqD,iBAA7B,CAA+C,CAA/C,GACD7E,CAAC,CAACgB,IAAF,CAAO;0BACHiD,IAAI,EAAE,CADH;0BAEHC,GAAG,EAAE,CAFF;0BAGHC,GAAG,EAAE;wBAHF,CAAP,CAFA,IAOA,OAAOJ,CAAP,IACC/D,CAAC,CAACgB,IAAF,CAAO;0BACJiD,IAAI,EAAE,EADF;0BAEJC,GAAG,EAAE,CAFD;0BAGJC,GAAG,EAAE;wBAHD,CAAP,GAKA,CAACC,CAAC,GAAGpG,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBO,gBAAzB,CAA0C,CAA1C,CAAL,EAAmDC,KAAnD,IAA4D,CAL5D,EAMDhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBS,gBAAzB,CAA0CmB,CAA1C,EAA6C,CAAC,CAA9C,CAPA,IAQA,OAAOL,CAAP,IACC/D,CAAC,CAACgB,IAAF,CAAO;0BACJiD,IAAI,EAAE,EADF;0BAEJC,GAAG,EAAE,CAFD;0BAGJC,GAAG,EAAE;wBAHD,CAAP,GAKA,CAACC,CAAC,GAAGpG,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBO,gBAAzB,CAA0C,CAA1C,CAAL,EAAmDC,KAAnD,IAA4D,CAL5D,EAMDhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBS,gBAAzB,CAA0CmB,CAA1C,EAA6C,CAAC,CAA9C,CAPA,IAQA,OAAOL,CAAP,IACC/D,CAAC,CAACgB,IAAF,CAAO;0BACJiD,IAAI,EAAE,EADF;0BAEJC,GAAG,EAAE,CAFD;0BAGJC,GAAG,EAAE;wBAHD,CAAP,GAKA,CAACC,CAAC,GAAGpG,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBO,gBAAzB,CAA0C,CAA1C,CAAL,EAAmDC,KAAnD,IAA4D,CAL5D,EAMDhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBS,gBAAzB,CAA0CmB,CAA1C,EAA6C,CAAC,CAA9C,CAPA,IAQA,OAAOL,CAAP,IACC/D,CAAC,CAACgB,IAAF,CAAO;0BACJiD,IAAI,EAAE,EADF;0BAEJC,GAAG,EAAE,CAFD;0BAGJC,GAAG,EAAE;wBAHD,CAAP,GAKA,CAACC,CAAC,GAAGpG,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBO,gBAAzB,CAA0C,CAA1C,CAAL,EAAmDC,KAAnD,IAA4D,CAL5D,EAMDhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBS,gBAAzB,CAA0CmB,CAA1C,EAA6C,CAAC,CAA9C,CAPA,IAQA,OAAOL,CAAP,IACC/D,CAAC,CAACgB,IAAF,CAAO;0BACJiD,IAAI,EAAE,EADF;0BAEJC,GAAG,EAAE,CAFD;0BAGJC,GAAG,EAAE;wBAHD,CAAP,GAKA,CAACC,CAAC,GAAGpG,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBO,gBAAzB,CAA0C,CAA1C,CAAL,EAAmDC,KAAnD,IAA4D,CAL5D,EAMDhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBS,gBAAzB,CAA0CmB,CAA1C,EAA6C,CAAC,CAA9C,CAPA,IAQA,OAAOL,CAAP,IACC/D,CAAC,CAACgB,IAAF,CAAO;0BACJiD,IAAI,EAAE,EADF;0BAEJC,GAAG,EAAE,CAFD;0BAGJC,GAAG,EAAE;wBAHD,CAAP,GAKA,CAACC,CAAC,GAAGpG,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBO,gBAAzB,CAA0C,CAA1C,CAAL,EAAmDC,KAAnD,IAA4D,CAL5D,EAMDhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBS,gBAAzB,CAA0CmB,CAA1C,EAA6C,CAAC,CAA9C,CAPA,IAQA,OAAOL,CAAP,IACC/D,CAAC,CAACgB,IAAF,CAAO;0BACJiD,IAAI,EAAE,CADF;0BAEJC,GAAG,EAAE,CAFD;0BAGJC,GAAG,EAAE;wBAHD,CAAP,GAKA,CAACC,CAAC,GAAGpG,YAAY,WAAZ,CAAqBwE,GAArB,CAAyB+B,iBAAzB,CAA2C,CAA3C,CAAL,EAAoDvB,KAApD,IAA6D,CAL7D,EAMDhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBgC,iBAAzB,CAA2CJ,CAA3C,EAA8C,CAAC,CAA/C,CAPA,IAQA,OAAOL,CAAP,IACC/D,CAAC,CAACgB,IAAF,CAAO;0BACJiD,IAAI,EAAE,CADF;0BAEJC,GAAG,EAAE,CAFD;0BAGJC,GAAG,EAAE;wBAHD,CAAP,GAKA,CAACC,CAAC,GAAGpG,YAAY,WAAZ,CAAqBwE,GAArB,CAAyB+B,iBAAzB,CAA2C,CAA3C,CAAL,EAAoDvB,KAApD,IAA6D,CAL7D,EAMDhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBgC,iBAAzB,CAA2CJ,CAA3C,EAA8C,CAAC,CAA/C,CAPA,IAQA,OAAOL,CAAP,IACC/D,CAAC,CAACgB,IAAF,CAAO;0BACJiD,IAAI,EAAE,CADF;0BAEJC,GAAG,EAAE,CAFD;0BAGJC,GAAG,EAAE;wBAHD,CAAP,GAKA,CAACC,CAAC,GAAGpG,YAAY,WAAZ,CAAqBwE,GAArB,CAAyB+B,iBAAzB,CAA2C,CAA3C,CAAL,EAAoDvB,KAApD,IAA6D,CAL7D,EAMDhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBgC,iBAAzB,CAA2CJ,CAA3C,EAA8C,CAAC,CAA/C,CAPA,IAQA,OAAOL,CAAP,KACC/D,CAAC,CAACgB,IAAF,CAAO;0BACJiD,IAAI,EAAE,EADF;0BAEJC,GAAG,EAAE,CAFD;0BAGJC,GAAG,EAAE;wBAHD,CAAP,GAKA,CAACC,CAAC,GAAGpG,YAAY,WAAZ,CAAqBwE,GAArB,CAAyB6B,cAAzB,CAAwC,CAAxC,CAAL,EAAiDrB,KAAjD,IAA0D,CAL1D,EAMDhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyB8B,cAAzB,CAAwCF,CAAxC,EAA2C,CAAC,CAA5C,CAPA,CAtFN;sBA8FH;oBACJ;kBACJ;gBACJ;cACJ;YACJ;UACJ;QACJ;MACJ;IACJ;;IACD,KAAKhG,eAAL,CAAqBG,IAArB,IAA6BJ,CAA7B;;IACA,IAAI,KAAKC,eAAL,CAAqBG,IAArB,IAA6B,CAAjC,EAAoC;MAChC,KAAKH,eAAL,CAAqBG,IAArB,IAA6B,EAA7B;MACA,IAAI6F,CAAJ;;MACA,IAAIU,CAAC,GAAGrH,SAAS,WAAT,CAAkB8F,UAAlB,CAA6B,CAA7B,EAAgC,CAAhC,CAAR;;MACAvD,CAAC,CAACgB,IAAF,CAAO;QACHiD,IAAI,EAAE,CADH;QAEHC,GAAG,EAAEY,CAFF;QAGHX,GAAG,EAAE;MAHF,CAAP;MAKA,CAACC,CAAC,GAAGpG,YAAY,WAAZ,CAAqBwE,GAArB,CAAyB+B,iBAAzB,CAA2CO,CAA3C,CAAL,EAAoD9B,KAApD,IAA6D,CAA7D;MACAhF,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBgC,iBAAzB,CAA2CJ,CAA3C,EAA8C,CAAC,CAA/C;IACH;;IACDpG,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBuC,aAAzB;IACA/G,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBwC,WAAzB;IACAhH,YAAY,WAAZ,CAAqBwE,GAArB,CAAyByC,cAAzB;IACAvH,YAAY,CAAC0B,WAAb,CAAyBa,OAAzB,CAAiClC,UAAU,WAAV,CAAmBuB,iBAApD,EAAuE,KAAKlB,eAA5E;IACAb,aAAa,WAAb,CAAsBmG,IAAtB,CAA2B5F,eAAe,WAAf,CAAwB6F,UAAnD,EAA+D/F,UAAU,CAACgG,QAAX,CAAoBC,IAAnF;IACA,OAAO7D,CAAP;EACH,CApND;;EAqNA7B,CAAC,CAACa,SAAF,GAAc,IAAd;EACA,OAAOb,CAAP;AACH,CA3eO,EAAR;;AA4eA+G,OAAO,WAAP,GAAkBhH,CAAlB","sourceRoot":"/","sourcesContent":["var $eventManager = require(\"./EventManager\");\r\nvar $seedUtil = require(\"./SeedUtil\");\r\nvar $storageUtil = require(\"./StorageUtil\");\r\nvar $util = require(\"./Util\");\r\nvar $startView = require(\"./StartView\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $localName = require(\"./LocalName\");\r\nvar $roleContext = require(\"./RoleContext\");\r\nvar $userDataContext = require(\"./UserDataContext\");\r\nvar f = (function () {\r\n    function t() {\r\n        this.boxRewardRecord = {\r\n            normal: 10,\r\n            advanced: 10,\r\n            skin: 10\r\n        };\r\n        this.boxVideoRecord = {\r\n            normal: 0,\r\n            advanced: 0,\r\n            skin: 0\r\n        };\r\n        this.shopResRecords = [];\r\n        this.shopResRefreshTime = 0;\r\n        this.shopDiamondRecords = [];\r\n        this.init();\r\n    }\r\n    Object.defineProperty(t, \"Ins\", {\r\n        get: function () {\r\n            if (null === t._instance) {\r\n                t._instance = new t();\r\n            }\r\n            return t._instance;\r\n        },\r\n        enumerable: !1,\r\n        configurable: !0\r\n    });\r\n    t.prototype.init = function () {\r\n        this.boxRewardRecord = $storageUtil.StorageUtil.getItem(\r\n            $localName.default.BOX_REWARD_RECORD,\r\n            this.boxRewardRecord\r\n        );\r\n        if (void 0 === this.boxRewardRecord.skin) {\r\n            this.boxRewardRecord.skin = 10;\r\n        }\r\n        this.shopDiamondRecords = $storageUtil.StorageUtil.getItem(\r\n            $localName.default.SHOP_DIAMOND_RECORD,\r\n            this.shopDiamondRecords\r\n        );\r\n        this.boxVideoRecord = $storageUtil.StorageUtil.getItem(\r\n            $localName.default.BOX_VIDEO_RECORD,\r\n            this.boxVideoRecord\r\n        );\r\n        if (void 0 === this.boxVideoRecord.skin) {\r\n            this.boxVideoRecord.skin = 0;\r\n        }\r\n        this.shopResRefreshTime = $storageUtil.StorageUtil.getItem($localName.default.SHOP_RES_REFRESH_TIME, 0);\r\n        this.shopResRefreshTime >= $util.default.startDayTimestamp()\r\n            ? (this.shopResRecords = $storageUtil.StorageUtil.getItem(\r\n                  $localName.default.SHOP_RES_RECORD,\r\n                  this.shopResRecords\r\n              ))\r\n            : $storageUtil.StorageUtil.removeItem($localName.default.SHOP_RES_RECORD);\r\n    };\r\n    t.prototype.getBoxVideoRecord = function (t) {\r\n        return t ? this.boxVideoRecord.normal : this.boxVideoRecord.advanced;\r\n    };\r\n    t.prototype.getSkinBoxVideoRecord = function () {\r\n        return this.boxVideoRecord.skin;\r\n    };\r\n    t.prototype.setBoxVideoRecord = function (t, e) {\r\n        t ? (this.boxVideoRecord.normal = e) : (this.boxVideoRecord.advanced = e);\r\n        $storageUtil.StorageUtil.setItem($localName.default.BOX_VIDEO_RECORD, this.boxVideoRecord);\r\n    };\r\n    t.prototype.setSkinBoxVideoRecord = function (t) {\r\n        this.boxVideoRecord.skin = t;\r\n        $storageUtil.StorageUtil.setItem($localName.default.BOX_VIDEO_RECORD, this.boxVideoRecord);\r\n    };\r\n    t.prototype.getDiamondRecordById = function (t) {\r\n        var e = this.shopDiamondRecords.find(function (e) {\r\n            return e.id === t;\r\n        });\r\n        return e\r\n            ? ((void 0 !== e.dayBuyCount && $util.default.startDayTimestamp() === e.lastTime) || (e.dayBuyCount = 0), e)\r\n            : {\r\n                  id: t,\r\n                  video_count: 0,\r\n                  isFrist: !0,\r\n                  dayBuyCount: 0,\r\n                  lastTime: 0\r\n              };\r\n    };\r\n    t.prototype.addDiamondRecord = function (t, e) {\r\n        var i = {\r\n            isReward: !1,\r\n            isFirst: !1,\r\n            count: 0\r\n        };\r\n        var o = this.shopDiamondRecords.find(function (e) {\r\n            return e.id === t;\r\n        });\r\n        if (!o) {\r\n            o = {\r\n                id: t,\r\n                video_count: 0,\r\n                lastTime: 0,\r\n                isFrist: !0,\r\n                dayBuyCount: 0\r\n            };\r\n            this.shopDiamondRecords.push(o);\r\n        }\r\n        o.video_count++;\r\n        i.count = o.video_count;\r\n        if (o.video_count >= e) {\r\n            i.isReward = !0;\r\n            i.isFirst = o.isFrist;\r\n            o.video_count = 0;\r\n            o.lastTime = $util.default.startDayTimestamp();\r\n            o.video_count = 0;\r\n            o.isFrist = !1;\r\n            o.dayBuyCount++;\r\n        }\r\n        $storageUtil.StorageUtil.setItem($localName.default.SHOP_DIAMOND_RECORD, this.shopDiamondRecords);\r\n        return i;\r\n    };\r\n    t.prototype.isDiamondBuyDay = function (t) {\r\n        var e = this.shopDiamondRecords.find(function (e) {\r\n            return e.id === t;\r\n        });\r\n        return !!e && e.lastTime === $util.default.startDayTimestamp();\r\n    };\r\n    t.prototype.hasResRedDot = function () {\r\n        var e = $configContext.default.instance.shopResConfigs.filter(function (t) {\r\n            return 2 === t.coin_type;\r\n        });\r\n        for (var i = 0; i < e.length; i++) {\r\n            if (t.Ins.getShopResRecordById(e[i].id).buyCount <= 0) {\r\n                return !0;\r\n            }\r\n        }\r\n        return !1;\r\n    };\r\n    t.prototype.hasDiamondRedDot = function () {\r\n        var e = $configContext.default.instance.shopDiamondConfigs.filter(function (t) {\r\n            return 0 === t.is_video;\r\n        });\r\n        for (var i = 0; i < e.length; i++) {\r\n            if (!t.Ins.isDiamondBuyDay(e[i].id)) {\r\n                return !0;\r\n            }\r\n        }\r\n        return !1;\r\n    };\r\n    t.prototype.getShopResRecordById = function (t) {\r\n        var e = this.shopResRecords.find(function (e) {\r\n            return e.id === t;\r\n        });\r\n        return e\r\n            ? (this.shopResRefreshTime < $util.default.startDayTimestamp() && (e.buyCount = 0),\r\n              void 0 === e.video_count && (e.video_count = 0),\r\n              e)\r\n            : {\r\n                  id: t,\r\n                  buyCount: 0,\r\n                  video_count: 0\r\n              };\r\n    };\r\n    t.prototype.addShopResRecordVideo = function (t, e) {\r\n        var i = this.getShopResRecordById(t);\r\n        i.video_count = e;\r\n        if (\r\n            -1 ===\r\n            this.shopResRecords.findIndex(function (e) {\r\n                return e.id === t;\r\n            })\r\n        ) {\r\n            this.shopResRecords.push(i);\r\n        }\r\n        $storageUtil.StorageUtil.setItem($localName.default.SHOP_RES_RECORD, this.shopResRecords);\r\n    };\r\n    t.prototype.addShopResRecord = function (t) {\r\n        var e = this.getShopResRecordById(t);\r\n        e.buyCount++;\r\n        if (\r\n            -1 ===\r\n            this.shopResRecords.findIndex(function (e) {\r\n                return e.id === t;\r\n            })\r\n        ) {\r\n            this.shopResRecords.push(e);\r\n        }\r\n        if (this.shopResRefreshTime < $util.default.startDayTimestamp()) {\r\n            this.shopResRefreshTime = $util.default.startDayTimestamp();\r\n            $storageUtil.StorageUtil.setItem($localName.default.SHOP_RES_REFRESH_TIME, this.shopResRefreshTime);\r\n        }\r\n        $storageUtil.StorageUtil.setItem($localName.default.SHOP_RES_RECORD, this.shopResRecords);\r\n    };\r\n    t.prototype.getNormalBoxRecord = function (t) {\r\n        var e = $configContext.default.instance.gemBoxConfigs[0];\r\n        var i = $seedUtil.default.weightRandomCount(e.weight, t, !0);\r\n        var o = -1;\r\n        this.boxRewardRecord.normal -= t;\r\n        if (this.boxRewardRecord.normal <= 0) {\r\n            o = t - 1;\r\n            this.boxRewardRecord.normal += 10;\r\n        }\r\n        if (-1 !== o) {\r\n            i[o] = 2;\r\n        }\r\n        return this.randomGem(i);\r\n    };\r\n    t.prototype.getRobotBox = function (t) {\r\n        var e = $configContext.default.instance.gemBoxConfigs[1];\r\n        var i = $util.default.deepCopy(e.weight);\r\n        if ($roleContext.default.ins.isHaveRobot(2)) {\r\n            i[7] = 0;\r\n        }\r\n        if ($roleContext.default.ins.isHaveRobot(3)) {\r\n            i[8] = 0;\r\n        }\r\n        var o = $seedUtil.default.weightRandomCount(i, t, !0);\r\n        var s = -1;\r\n        var a = [];\r\n        this.boxRewardRecord.advanced -= t;\r\n        if (this.boxRewardRecord.advanced <= 0) {\r\n            s = t - 1;\r\n            this.boxRewardRecord.advanced += 10;\r\n        }\r\n        if (-1 !== s) {\r\n            o[s] = 3;\r\n        }\r\n        var c = [];\r\n        for (var u = 0; u < o.length; u++) {\r\n            if (o[u] < 7) {\r\n                a.push(o[u]);\r\n            } else {\r\n                if (7 === o[u]) {\r\n                    c.push(2);\r\n                    (p = $roleContext.default.ins.getRobotSkinInfo(2)).shard++;\r\n                    $roleContext.default.ins.setRobotSkinInfo(p);\r\n                } else {\r\n                    if (8 === o[u]) {\r\n                        var p;\r\n                        c.push(3);\r\n                        (p = $roleContext.default.ins.getRobotSkinInfo(3)).shard++;\r\n                        $roleContext.default.ins.setRobotSkinInfo(p);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            robots: c,\r\n            gems: this.randomGem(a)\r\n        };\r\n    };\r\n    t.prototype.getAdvancedBoxRecord = function (t) {\r\n        var e = $configContext.default.instance.gemBoxConfigs[1];\r\n        var i = $seedUtil.default.weightRandomCount(e.weight, t, !0);\r\n        var o = -1;\r\n        this.boxRewardRecord.advanced -= t;\r\n        if (this.boxRewardRecord.advanced <= 0) {\r\n            o = t - 1;\r\n            this.boxRewardRecord.advanced += 10;\r\n        }\r\n        if (-1 !== o) {\r\n            i[o] = 3;\r\n        }\r\n        return this.randomGem(i);\r\n    };\r\n    t.prototype.randomGem = function (t) {\r\n        var e = [];\r\n        var i = function (i) {\r\n            var o = t[i] + 1;\r\n            var s = $configContext.default.instance.gemConfigs.filter(function (t) {\r\n                return t.Grade === o;\r\n            });\r\n            e[i] = s[$seedUtil.default.randomFrom(0, s.length - 1)];\r\n            $roleContext.default.ins.addPackItem(e[i], 1);\r\n        };\r\n        for (var r = 0; r < t.length; r++) {\r\n            i(r);\r\n        }\r\n        $storageUtil.StorageUtil.setItem($localName.default.BOX_REWARD_RECORD, this.boxRewardRecord);\r\n        $eventManager.default.send($localEventName.default.RENDER_DOT, $startView.MenuType.Role);\r\n        return e;\r\n    };\r\n    t.prototype.getSkinBoxRecord = function (t) {\r\n        var e = [];\r\n        var i = $seedUtil.default.weightRandomCount($configContext.default.instance.gemBoxConfigs[2].weight, t, !0);\r\n        for (var r = 0; r < i.length; r++) {\r\n            var f = i[r];\r\n            var h = $configContext.default.instance.gemBoxConfigs[2].TreasureChest_type[f];\r\n            if (10 === h) {\r\n                e.push({\r\n                    type: 10,\r\n                    ext: 3,\r\n                    num: 1\r\n                });\r\n                (g = $roleContext.default.ins.getGunSkinInfo(3)).shard += 1;\r\n                $roleContext.default.ins.setGunSkinInfo(g, !1);\r\n            } else {\r\n                if (11 === h) {\r\n                    e.push({\r\n                        type: 10,\r\n                        ext: 4,\r\n                        num: 1\r\n                    });\r\n                    (g = $roleContext.default.ins.getGunSkinInfo(4)).shard += 1;\r\n                    $roleContext.default.ins.setGunSkinInfo(g, !1);\r\n                } else {\r\n                    if (12 === h) {\r\n                        e.push({\r\n                            type: 10,\r\n                            ext: 5,\r\n                            num: 1\r\n                        });\r\n                        (g = $roleContext.default.ins.getGunSkinInfo(5)).shard += 1;\r\n                        $roleContext.default.ins.setGunSkinInfo(g, !1);\r\n                    } else {\r\n                        if (13 === h) {\r\n                            e.push({\r\n                                type: 10,\r\n                                ext: 6,\r\n                                num: 1\r\n                            });\r\n                            (g = $roleContext.default.ins.getGunSkinInfo(6)).shard += 1;\r\n                            $roleContext.default.ins.setGunSkinInfo(g, !1);\r\n                        } else {\r\n                            if (14 === h) {\r\n                                e.push({\r\n                                    type: 10,\r\n                                    ext: 7,\r\n                                    num: 1\r\n                                });\r\n                                (g = $roleContext.default.ins.getGunSkinInfo(7)).shard += 1;\r\n                                $roleContext.default.ins.setGunSkinInfo(g, !1);\r\n                            } else {\r\n                                if (15 === h) {\r\n                                    e.push({\r\n                                        type: 9,\r\n                                        ext: 3,\r\n                                        num: 1\r\n                                    });\r\n                                    (g = $roleContext.default.ins.getPlayerSkinInfo(3)).shard += 1;\r\n                                    $roleContext.default.ins.setPlayerSKinInfo(g, !1);\r\n                                } else {\r\n                                    if (16 === h) {\r\n                                        e.push({\r\n                                            type: 9,\r\n                                            ext: 4,\r\n                                            num: 1\r\n                                        });\r\n                                        (g = $roleContext.default.ins.getPlayerSkinInfo(4)).shard += 1;\r\n                                        $roleContext.default.ins.setPlayerSKinInfo(g, !1);\r\n                                    } else {\r\n                                        if (17 === h) {\r\n                                            e.push({\r\n                                                type: 1,\r\n                                                ext: 0,\r\n                                                num: 1500\r\n                                            });\r\n                                            $userDataContext.default.Ins.opearCoin(1500);\r\n                                        } else {\r\n                                            if (18 === h) {\r\n                                                var m = $configContext.default.instance.gemConfigs.filter(function (t) {\r\n                                                    return 4 === t.Grade;\r\n                                                });\r\n                                                var y = m[$seedUtil.default.randomFrom(0, m.length - 1)];\r\n                                                $roleContext.default.ins.addPackItem(y, 1);\r\n                                                e.push({\r\n                                                    type: 5,\r\n                                                    ext: m[r].id,\r\n                                                    num: 1\r\n                                                });\r\n                                            } else {\r\n                                                19 === h\r\n                                                    ? ($userDataContext.default.Ins.opearAdCoin(3),\r\n                                                      e.push({\r\n                                                          type: 12,\r\n                                                          ext: 0,\r\n                                                          num: 3\r\n                                                      }))\r\n                                                    : 20 === h\r\n                                                    ? ($userDataContext.default.Ins.opearUpgradeStone(8),\r\n                                                      e.push({\r\n                                                          type: 7,\r\n                                                          ext: 0,\r\n                                                          num: 8\r\n                                                      }))\r\n                                                    : 21 === h\r\n                                                    ? (e.push({\r\n                                                          type: 11,\r\n                                                          ext: 4,\r\n                                                          num: 1\r\n                                                      }),\r\n                                                      ((g = $roleContext.default.ins.getRobotSkinInfo(4)).shard += 1),\r\n                                                      $roleContext.default.ins.setRobotSkinInfo(g, !1))\r\n                                                    : 22 === h\r\n                                                    ? (e.push({\r\n                                                          type: 11,\r\n                                                          ext: 5,\r\n                                                          num: 1\r\n                                                      }),\r\n                                                      ((g = $roleContext.default.ins.getRobotSkinInfo(5)).shard += 1),\r\n                                                      $roleContext.default.ins.setRobotSkinInfo(g, !1))\r\n                                                    : 23 === h\r\n                                                    ? (e.push({\r\n                                                          type: 11,\r\n                                                          ext: 6,\r\n                                                          num: 1\r\n                                                      }),\r\n                                                      ((g = $roleContext.default.ins.getRobotSkinInfo(6)).shard += 1),\r\n                                                      $roleContext.default.ins.setRobotSkinInfo(g, !1))\r\n                                                    : 24 === h\r\n                                                    ? (e.push({\r\n                                                          type: 11,\r\n                                                          ext: 7,\r\n                                                          num: 1\r\n                                                      }),\r\n                                                      ((g = $roleContext.default.ins.getRobotSkinInfo(7)).shard += 1),\r\n                                                      $roleContext.default.ins.setRobotSkinInfo(g, !1))\r\n                                                    : 25 === h\r\n                                                    ? (e.push({\r\n                                                          type: 11,\r\n                                                          ext: 8,\r\n                                                          num: 1\r\n                                                      }),\r\n                                                      ((g = $roleContext.default.ins.getRobotSkinInfo(8)).shard += 1),\r\n                                                      $roleContext.default.ins.setRobotSkinInfo(g, !1))\r\n                                                    : 26 === h\r\n                                                    ? (e.push({\r\n                                                          type: 11,\r\n                                                          ext: 9,\r\n                                                          num: 1\r\n                                                      }),\r\n                                                      ((g = $roleContext.default.ins.getRobotSkinInfo(9)).shard += 1),\r\n                                                      $roleContext.default.ins.setRobotSkinInfo(g, !1))\r\n                                                    : 27 === h\r\n                                                    ? (e.push({\r\n                                                          type: 9,\r\n                                                          ext: 5,\r\n                                                          num: 1\r\n                                                      }),\r\n                                                      ((g = $roleContext.default.ins.getPlayerSkinInfo(5)).shard += 1),\r\n                                                      $roleContext.default.ins.setPlayerSKinInfo(g, !1))\r\n                                                    : 28 === h\r\n                                                    ? (e.push({\r\n                                                          type: 9,\r\n                                                          ext: 6,\r\n                                                          num: 1\r\n                                                      }),\r\n                                                      ((g = $roleContext.default.ins.getPlayerSkinInfo(6)).shard += 1),\r\n                                                      $roleContext.default.ins.setPlayerSKinInfo(g, !1))\r\n                                                    : 29 === h\r\n                                                    ? (e.push({\r\n                                                          type: 9,\r\n                                                          ext: 7,\r\n                                                          num: 1\r\n                                                      }),\r\n                                                      ((g = $roleContext.default.ins.getPlayerSkinInfo(7)).shard += 1),\r\n                                                      $roleContext.default.ins.setPlayerSKinInfo(g, !1))\r\n                                                    : 30 === h &&\r\n                                                      (e.push({\r\n                                                          type: 10,\r\n                                                          ext: 8,\r\n                                                          num: 1\r\n                                                      }),\r\n                                                      ((g = $roleContext.default.ins.getGunSkinInfo(8)).shard += 1),\r\n                                                      $roleContext.default.ins.setGunSkinInfo(g, !1));\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.boxRewardRecord.skin -= t;\r\n        if (this.boxRewardRecord.skin <= 0) {\r\n            this.boxRewardRecord.skin += 10;\r\n            var g;\r\n            var _ = $seedUtil.default.randomFrom(3, 4);\r\n            e.push({\r\n                type: 9,\r\n                ext: _,\r\n                num: 1\r\n            });\r\n            (g = $roleContext.default.ins.getPlayerSkinInfo(_)).shard += 1;\r\n            $roleContext.default.ins.setPlayerSKinInfo(g, !1);\r\n        }\r\n        $roleContext.default.ins.saveRobotSkin();\r\n        $roleContext.default.ins.saveGunSkin();\r\n        $roleContext.default.ins.savePlayerSkin();\r\n        $storageUtil.StorageUtil.setItem($localName.default.BOX_REWARD_RECORD, this.boxRewardRecord);\r\n        $eventManager.default.send($localEventName.default.RENDER_DOT, $startView.MenuType.Role);\r\n        return e;\r\n    };\r\n    t._instance = null;\r\n    return t;\r\n})();\r\nexports.default = f;\r\n"]}