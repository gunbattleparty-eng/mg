{"version":3,"sources":["assets\\game_script\\scripts\\Gun_12.js"],"names":["o","$assetsLoader","require","$assetsMap","$resUtil","$eventManager","$seedUtil","$util","$configContext","$globalParam","$localEventName","$baseBullet","$gameContext","$gameSkillInfo","g","t","e","i","call","skillId","skillParam","ins","skillInfo","getSkillById","__extends","prototype","updateF","isGamePuase","timeLeft","skillCD","Skill4Param","FINAL","send","RENDER_SKILL_CD_INFO","startGun","releaseing","releaseCount","probability","releaseProbability","getRandomEnemys","pointNode","skillAtkRange","length","Math","min","createBullet","isValid","node","getButtlePool","BulletType","thunder_chain","instance","getRes","BundleNames","Game","AssetsMap","GameBundles","prefabs","assetsList","Bullet_31","ResUtil","instantiate","lowBulletLayer","parent","getComponent","skillSpecialitys","basicSkillConfigMap","get","skill_tpye","setPosition","position","initBullet31","initButtle","insert","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $seedUtil = require(\"./SeedUtil\");\r\nvar $util = require(\"./Util\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $globalParam = require(\"./GlobalParam\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $gameSkillInfo = require(\"./GameSkillInfo\");\r\nvar g = (function (t) {\r\n    function e(e) {\r\n        var i = t.call(this, e) || this;\r\n        i.skillId = 153;\r\n        i.skillParam = $gameContext.default.ins.skillInfo.getSkillById(i.skillId);\r\n        return i;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.updateF = function (e) {\r\n        t.prototype.updateF.call(this, e);\r\n        if (!$globalParam.default.isGamePuase) {\r\n            this.timeLeft -= e;\r\n            this.timeLeft <= 0\r\n                ? ((this.timeLeft = this.skillParam.skillCD[$gameSkillInfo.Skill4Param.FINAL]),\r\n                  $eventManager.default.send($localEventName.default.RENDER_SKILL_CD_INFO, this.skillId, 0),\r\n                  this.startGun()\r\n                      ? ((this.releaseing = !0),\r\n                        (this.timeLeft = this.skillParam.skillCD[$gameSkillInfo.Skill4Param.FINAL]),\r\n                        $eventManager.default.send($localEventName.default.RENDER_SKILL_CD_INFO, this.skillId, 1))\r\n                      : (this.timeLeft = 0))\r\n                : $eventManager.default.send(\r\n                      $localEventName.default.RENDER_SKILL_CD_INFO,\r\n                      this.skillId,\r\n                      this.timeLeft / this.skillParam.skillCD[$gameSkillInfo.Skill4Param.FINAL],\r\n                      -1\r\n                  );\r\n        }\r\n    };\r\n    e.prototype.startGun = function () {\r\n        var t = this.skillParam.releaseCount;\r\n        if ($seedUtil.default.probability(this.skillParam.releaseProbability)) {\r\n            t += 1;\r\n        }\r\n        var e = $gameContext.default.ins.getRandomEnemys(\r\n            this.pointNode,\r\n            t,\r\n            this.skillParam.skillAtkRange[$gameSkillInfo.Skill4Param.FINAL]\r\n        );\r\n        if (e.length <= 0) {\r\n            return !1;\r\n        }\r\n        var i = Math.min(e.length, t);\r\n        for (var o = 0; o < i; o++) {\r\n            this.createBullet(e[o]);\r\n        }\r\n        return !0;\r\n    };\r\n    e.prototype.createBullet = function (t) {\r\n        if (t && $util.default.isValid(t.node)) {\r\n            var e = $gameContext.default.ins.getButtlePool($baseBullet.BulletType.thunder_chain);\r\n            if (!e) {\r\n                var i = $assetsLoader.default.instance.getRes(\r\n                    $assetsMap.BundleNames.Game,\r\n                    $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.Bullet_31\r\n                );\r\n                (e = $resUtil.ResUtil.instantiate(i, $gameContext.default.ins.lowBulletLayer.parent).getComponent(\r\n                    $baseBullet.default\r\n                )).skillSpecialitys = $configContext.default.instance.basicSkillConfigMap.get(this.skillId).skill_tpye;\r\n            }\r\n            e.setPosition(this.pointNode.position);\r\n            e.initBullet31(t, this.skillId);\r\n            e.initButtle(null, this.skillId);\r\n            e.insert($gameContext.default.ins.lowBulletLayer);\r\n        }\r\n    };\r\n    return e;\r\n})(require(\"./BaseGun\").default);\r\nexports.default = g;\r\n"]}