{"version":3,"sources":["assets\\game_script\\scripts\\SkillContext.js"],"names":["$storageUtil","require","$gameGemInfo","$configContext","$equipmentContext","$localName","$roleContext","$userDataContext","u","t","skillStores","chooseBuff","Object","defineProperty","get","instance","enumerable","configurable","prototype","init","StorageUtil","getItem","SKILL_STORE","unlockSkill","refreshBuffSkill","checkSkillUpgrade","e","getSKillLevel","i","basicSkillConfigMap","o","spend_price","n","Ins","checkCoin","checkSKillBook","checkAllSKillUpgrade","basicSkillConfigs","length","skillmaster_id","isUnlock","findIndex","id","getSKillAtk","getBasicAtk","Math","ceil","ins","getGunAllAtkAdd","getGradeupAtk","getGemAtk","GameGemInfo","hasGem","GemType","Attack","get1","gemIds","r","forEach","gemConfigs","find","gemSkillConfigs","SkillPool","skill_type","includes","skill_values","value","a","getSkillAtkCoefficient","getAtk","getEquipmentAtk","show_attribute","indexOf","getUpgradeConfigByIdAndLevel","upgrade_values","add_sx","skillUpgradeConfigs","level","upgradeSkill","refreshSkillBuff","push","setItem","skill_unclocklevel","unclock_skillgroup","clearSkill","skillToString","getSkillCD","parseFloat","toFixed","caculateCD","getBounceCount","getSkillPenetration","getSkillBoomAtk","getBasicSkillBoomAtk","getSkillBoomUpgradeAtk","getBoomRange","getBasicBoomRange","getSkillBoomUpRangeAdd","getSputteringAtk","getBasicSputteringAtk","getSputteringUpAtk","getSputteringRange","getBasicSputteringRange","getSputteringUpRange","getAtkInterval","getBasicAtkInterval","getUpAtkInterval","getSkillTime","getBasicSkillTime","getUpSkillTime","gradeInfo","grade","unclok_level","getUseSkillIds","map","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var $storageUtil = require(\"./StorageUtil\");\r\nvar $gameGemInfo = require(\"./GameGemInfo\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $equipmentContext = require(\"./EquipmentContext\");\r\nvar $localName = require(\"./LocalName\");\r\nvar $roleContext = require(\"./RoleContext\");\r\nvar $userDataContext = require(\"./UserDataContext\");\r\nvar u = (function () {\r\n    function t() {\r\n        this.skillStores = [];\r\n        this.chooseBuff = [];\r\n    }\r\n    Object.defineProperty(t, \"Ins\", {\r\n        get: function () {\r\n            if (!t.instance) {\r\n                t.instance = new t();\r\n            }\r\n            return t.instance;\r\n        },\r\n        enumerable: !1,\r\n        configurable: !0\r\n    });\r\n    t.prototype.init = function () {\r\n        this.skillStores = $storageUtil.StorageUtil.getItem($localName.default.SKILL_STORE, this.skillStores);\r\n        this.unlockSkill();\r\n        this.refreshBuffSkill();\r\n    };\r\n    t.prototype.checkSkillUpgrade = function (t) {\r\n        var e = this.getSKillLevel(t);\r\n        if (0 === e || e >= 50) {\r\n            return !1;\r\n        }\r\n        var i = $configContext.default.instance.basicSkillConfigMap.get(t);\r\n        var o = i.spend_price[0] * e;\r\n        var n = i.spend_price[1] * e;\r\n        return $userDataContext.default.Ins.checkCoin(-o) && $userDataContext.default.Ins.checkSKillBook(t, -n);\r\n    };\r\n    t.prototype.checkAllSKillUpgrade = function () {\r\n        for (var t = 0; t < $configContext.default.instance.basicSkillConfigs.length; t++) {\r\n            var e = $configContext.default.instance.basicSkillConfigs[t].skillmaster_id;\r\n            if (this.checkSkillUpgrade(e)) {\r\n                return !0;\r\n            }\r\n        }\r\n        return !1;\r\n    };\r\n    t.prototype.isUnlock = function (t) {\r\n        return (\r\n            -1 !=\r\n            this.skillStores.findIndex(function (e) {\r\n                return e.id == t;\r\n            })\r\n        );\r\n    };\r\n    t.prototype.getSKillAtk = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = -1;\r\n        }\r\n        var i = this.getBasicAtk(t);\r\n        var o = Math.ceil($roleContext.default.ins.getGunAllAtkAdd() * i);\r\n        return i + this.getGradeupAtk(t, e) + this.getGemAtk(t, i) + o;\r\n    };\r\n    t.prototype.getGemAtk = function (t, e) {\r\n        var i = 0;\r\n        if ($gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.Attack)) {\r\n            i = $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.Attack);\r\n        }\r\n        var o = $gameGemInfo.GameGemInfo.ins.gemIds;\r\n        var r = 0;\r\n        o.forEach(function (e) {\r\n            var i = $configContext.default.instance.gemConfigs.find(function (t) {\r\n                return t.id === e;\r\n            });\r\n            var o = $configContext.default.instance.gemSkillConfigs.find(function (t) {\r\n                return t.id === i.SkillPool;\r\n            });\r\n            if (o.skill_type.includes(1) && o.skill_values.includes(t.id)) {\r\n                r += i.value[i.value.length - 1];\r\n            }\r\n        });\r\n        var a = this.getSkillAtkCoefficient(t);\r\n        return Math.ceil(i * a + e * r);\r\n    };\r\n    t.prototype.getGradeupAtk = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = -1;\r\n        }\r\n        if (-1 === e) {\r\n            e = this.getSKillLevel(t.id);\r\n        }\r\n        var i = $equipmentContext.default.Ins.getAtk() + $equipmentContext.default.Ins.getEquipmentAtk();\r\n        var o = $configContext.default.instance.basicSkillConfigs\r\n            .find(function (e) {\r\n                return e.skillmaster_id === t.id;\r\n            })\r\n            .show_attribute.indexOf(1);\r\n        var n = this.getUpgradeConfigByIdAndLevel(t.id, e);\r\n        return n ? Math.ceil(i * n.upgrade_values[o][0] * n.upgrade_values[o][1]) : 0;\r\n    };\r\n    t.prototype.getBasicAtk = function (t) {\r\n        var e = $equipmentContext.default.Ins.getAtk() + $equipmentContext.default.Ins.getEquipmentAtk();\r\n        return Math.ceil(e * this.getSkillAtkCoefficient(t));\r\n    };\r\n    t.prototype.getSkillAtkCoefficient = function (t) {\r\n        return 81 !== t.id ? 1 + t.add_sx[5] : 1 + t.add_sx[7];\r\n    };\r\n    t.prototype.getUpgradeConfigByIdAndLevel = function (t, e) {\r\n        return $configContext.default.instance.skillUpgradeConfigs.find(function (i) {\r\n            return i.skillmaster_id === t && i.level === e;\r\n        });\r\n    };\r\n    t.prototype.getSKillLevel = function (t) {\r\n        var e = this.skillStores.find(function (e) {\r\n            return e.id === t;\r\n        });\r\n        return e ? e.level : 0;\r\n    };\r\n    t.prototype.upgradeSkill = function (t, e) {\r\n        this.refreshSkillBuff(t, e);\r\n        var i = this.skillStores.find(function (e) {\r\n            return e.id === t;\r\n        });\r\n        if (!i) {\r\n            i = {\r\n                id: t,\r\n                level: e\r\n            };\r\n            this.skillStores.push(i);\r\n        }\r\n        i.level = e;\r\n        $storageUtil.StorageUtil.setItem($localName.default.SKILL_STORE, this.skillStores);\r\n    };\r\n    t.prototype.refreshSkillBuff = function (t, e) {\r\n        var i = $configContext.default.instance.basicSkillConfigMap.get(t);\r\n        for (var o = 0; o < i.skill_unclocklevel.length; o++) {\r\n            if (e >= i.skill_unclocklevel[o]) {\r\n                var n = i.unclock_skillgroup[o];\r\n                if (!this.chooseBuff.includes(n)) {\r\n                    this.chooseBuff.push(n);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    t.prototype.clearSkill = function () {\r\n        this.skillStores = [\r\n            {\r\n                id: 1,\r\n                level: 1\r\n            }\r\n        ];\r\n    };\r\n    t.prototype.skillToString = function () {\r\n        var t = \"当前技能等级：\\n\";\r\n        for (var e = 0; e < this.skillStores.length; e++) {\r\n            var i = this.skillStores[e];\r\n            t += \"技能ID: \" + i.id + \" 等级：\" + i.level + \"\\n\";\r\n        }\r\n        return t;\r\n    };\r\n    t.prototype.getSkillCD = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = -1;\r\n        }\r\n        var i = 0;\r\n        1 === t.id || 81 === t.id\r\n            ? (i = t.add_sx[2])\r\n            : 23 === t.id || 41 === t.id || 61 === t.id || 153 === t.id\r\n            ? (i = t.add_sx[1])\r\n            : (100 !== t.id && 247 !== t.id && 116 !== t.id && 135 !== t.id && 227 !== t.id && 209 !== t.id) ||\r\n              (i = t.add_sx[3]);\r\n        if (-1 === e) {\r\n            e = this.getSKillLevel(t.id);\r\n        }\r\n        var o = $configContext.default.instance.basicSkillConfigs\r\n            .find(function (e) {\r\n                return e.skillmaster_id === t.id;\r\n            })\r\n            .show_attribute.indexOf(4);\r\n        var r = this.getUpgradeConfigByIdAndLevel(t.id, e).upgrade_values;\r\n        i = parseFloat((i - r[o][0] * r[o][1]).toFixed(1));\r\n        return $gameGemInfo.GameGemInfo.ins.caculateCD(i);\r\n    };\r\n    t.prototype.getBounceCount = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = -1;\r\n        }\r\n        var i = 0;\r\n        if (153 === t.id) {\r\n            i = t.add_sx[0];\r\n        }\r\n        if (-1 === e) {\r\n            e = this.getSKillLevel(t.id);\r\n        }\r\n        var o = $configContext.default.instance.basicSkillConfigs\r\n            .find(function (e) {\r\n                return e.skillmaster_id === t.id;\r\n            })\r\n            .show_attribute.indexOf(13);\r\n        var n = this.getUpgradeConfigByIdAndLevel(t.id, e).upgrade_values;\r\n        return Math.ceil(i + n[o][0] * n[o][1]);\r\n    };\r\n    t.prototype.getSkillPenetration = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = -1;\r\n        }\r\n        var i = 0;\r\n        1 === t.id ? (i = t.add_sx[6]) : 41 === t.id ? (i = t.add_sx[0]) : 209 === t.id && (i = t.add_sx[1]);\r\n        if (-1 === e) {\r\n            e = this.getSKillLevel(t.id);\r\n        }\r\n        var o = $configContext.default.instance.basicSkillConfigs\r\n            .find(function (e) {\r\n                return e.skillmaster_id === t.id;\r\n            })\r\n            .show_attribute.indexOf(6);\r\n        var n = this.getUpgradeConfigByIdAndLevel(t.id, e).upgrade_values;\r\n        return Math.ceil(i + n[o][0] * n[o][1]);\r\n    };\r\n    t.prototype.getSkillBoomAtk = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = -1;\r\n        }\r\n        return this.getBasicSkillBoomAtk(t, e) + this.getSkillBoomUpgradeAtk(t, e);\r\n    };\r\n    t.prototype.getBasicSkillBoomAtk = function (t, e) {\r\n        var i = 0;\r\n        if (-1 === e) {\r\n            e = this.getSKillLevel(t.id);\r\n        }\r\n        if (23 === t.id) {\r\n            i = Math.ceil(this.getSKillAtk(t, e) * (1 + t.add_sx[6]));\r\n        }\r\n        return i;\r\n    };\r\n    t.prototype.getSkillBoomUpgradeAtk = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = -1;\r\n        }\r\n        var i = this.getBasicSkillBoomAtk(t, e);\r\n        if (-1 === e) {\r\n            e = this.getSKillLevel(t.id);\r\n        }\r\n        var o = $configContext.default.instance.basicSkillConfigs\r\n            .find(function (e) {\r\n                return e.skillmaster_id === t.id;\r\n            })\r\n            .show_attribute.indexOf(7);\r\n        var n = this.getUpgradeConfigByIdAndLevel(t.id, e).upgrade_values;\r\n        return Math.ceil(i * n[o][0] * n[o][1]);\r\n    };\r\n    t.prototype.getBoomRange = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = -1;\r\n        }\r\n        return this.getBasicBoomRange(t) + this.getSkillBoomUpRangeAdd(t, e);\r\n    };\r\n    t.prototype.getBasicBoomRange = function (t) {\r\n        var e = 0;\r\n        23 === t.id ? (e = t.add_sx[3]) : (t.id = 227) && (e = t.add_sx[1]);\r\n        return e;\r\n    };\r\n    t.prototype.getSkillBoomUpRangeAdd = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = -1;\r\n        }\r\n        if (-1 === e) {\r\n            e = this.getSKillLevel(t.id);\r\n        }\r\n        var i = $configContext.default.instance.basicSkillConfigs\r\n            .find(function (e) {\r\n                return e.skillmaster_id === t.id;\r\n            })\r\n            .show_attribute.indexOf(8);\r\n        var o = this.getUpgradeConfigByIdAndLevel(t.id, e).upgrade_values;\r\n        return o[i][0] * o[i][1];\r\n    };\r\n    t.prototype.getSputteringAtk = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = -1;\r\n        }\r\n        return this.getBasicSputteringAtk(t) + this.getSputteringUpAtk(t, e);\r\n    };\r\n    t.prototype.getBasicSputteringAtk = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = -1;\r\n        }\r\n        var i = 0;\r\n        if (-1 === e) {\r\n            e = this.getSKillLevel(t.id);\r\n        }\r\n        if (61 === t.id) {\r\n            i = Math.ceil(this.getSKillAtk(t, e) * (1 + t.add_sx[3]));\r\n        }\r\n        return i;\r\n    };\r\n    t.prototype.getSputteringUpAtk = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = -1;\r\n        }\r\n        var i = this.getBasicSputteringAtk(t);\r\n        if (-1 === e) {\r\n            e = this.getSKillLevel(t.id);\r\n        }\r\n        var o = $configContext.default.instance.basicSkillConfigs\r\n            .find(function (e) {\r\n                return e.skillmaster_id === t.id;\r\n            })\r\n            .show_attribute.indexOf(9);\r\n        var n = this.getUpgradeConfigByIdAndLevel(t.id, e).upgrade_values;\r\n        return Math.ceil(i * n[o][0] * n[o][1]);\r\n    };\r\n    t.prototype.getSputteringRange = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = -1;\r\n        }\r\n        return this.getBasicSputteringRange(t) + this.getSputteringUpRange(t, e);\r\n    };\r\n    t.prototype.getBasicSputteringRange = function (t) {\r\n        var e = 0;\r\n        61 === t.id\r\n            ? (e = t.add_sx[4])\r\n            : 81 === t.id\r\n            ? (e = 129 * t.add_sx[0])\r\n            : 135 === t.id\r\n            ? (e = 90 * t.add_sx[1])\r\n            : 247 === t.id && (e = 100 * t.add_sx[7]);\r\n        return e;\r\n    };\r\n    t.prototype.getSputteringUpRange = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = -1;\r\n        }\r\n        if (-1 === e) {\r\n            e = this.getSKillLevel(t.id);\r\n        }\r\n        var i = $configContext.default.instance.basicSkillConfigs\r\n            .find(function (e) {\r\n                return e.skillmaster_id === t.id;\r\n            })\r\n            .show_attribute.indexOf(10);\r\n        var o = this.getUpgradeConfigByIdAndLevel(t.id, e).upgrade_values;\r\n        return o[i][0] * o[i][1];\r\n    };\r\n    t.prototype.getAtkInterval = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = -1;\r\n        }\r\n        return this.getBasicAtkInterval(t) - this.getUpAtkInterval(t, e);\r\n    };\r\n    t.prototype.getBasicAtkInterval = function (t) {\r\n        var e = 0;\r\n        81 === t.id ? (e = t.add_sx[1]) : (100 !== t.id && 116 !== t.id) || (e = t.add_sx[2]);\r\n        return e;\r\n    };\r\n    t.prototype.getUpAtkInterval = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = -1;\r\n        }\r\n        if (-1 === e) {\r\n            e = this.getSKillLevel(t.id);\r\n        }\r\n        var i = $configContext.default.instance.basicSkillConfigs\r\n            .find(function (e) {\r\n                return e.skillmaster_id === t.id;\r\n            })\r\n            .show_attribute.indexOf(11);\r\n        var o = this.getUpgradeConfigByIdAndLevel(t.id, e).upgrade_values;\r\n        return o[i][0] * o[i][1];\r\n    };\r\n    t.prototype.getSkillTime = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = -1;\r\n        }\r\n        return this.getBasicSkillTime(t) + this.getUpSkillTime(t, e);\r\n    };\r\n    t.prototype.getBasicSkillTime = function (t) {\r\n        var e = 0;\r\n        100 === t.id || 116 === t.id ? (e = t.add_sx[1]) : 135 === t.id && (e = t.add_sx[6]);\r\n        return e;\r\n    };\r\n    t.prototype.getUpSkillTime = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = -1;\r\n        }\r\n        if (-1 === e) {\r\n            e = this.getSKillLevel(t.id);\r\n        }\r\n        var i = $configContext.default.instance.basicSkillConfigs\r\n            .find(function (e) {\r\n                return e.skillmaster_id === t.id;\r\n            })\r\n            .show_attribute.indexOf(12);\r\n        var o = this.getUpgradeConfigByIdAndLevel(t.id, e).upgrade_values;\r\n        return o[i][0] * o[i][1];\r\n    };\r\n    t.prototype.unlockSkill = function () {\r\n        var t = $configContext.default.instance.basicSkillConfigs;\r\n        for (var e = 0; e < t.length; e++) {\r\n            if (\r\n                0 === this.getSKillLevel(t[e].skillmaster_id) &&\r\n                $userDataContext.default.Ins.gradeInfo.grade >= t[e].unclok_level\r\n            ) {\r\n                this.upgradeSkill(t[e].skillmaster_id, 1);\r\n            }\r\n        }\r\n    };\r\n    t.prototype.refreshBuffSkill = function () {\r\n        var t = $configContext.default.instance.basicSkillConfigs;\r\n        for (var e = 0; e < t.length; e++) {\r\n            this.refreshSkillBuff(t[e].skillmaster_id, this.getSKillLevel(t[e].skillmaster_id));\r\n        }\r\n    };\r\n    t.prototype.getUseSkillIds = function () {\r\n        return this.skillStores.map(function (t) {\r\n            return t.id;\r\n        });\r\n    };\r\n    return t;\r\n})();\r\nexports.default = u;\r\n"]}