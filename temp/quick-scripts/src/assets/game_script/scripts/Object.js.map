{"version":3,"sources":["assets\\game_script\\scripts\\Object.js"],"names":["o","exports","cObject","MaskBitByGroup","GroupIdxByName","Dirty","Trigger","r","a","l","c","$collider","require","$shape","p","cc","_decorator","f","ccclass","h","property","Enum","ShapeType","enter","stay","exit","R","T","S","RTS","RS","NON","t","e","game","groupList","indexOf","i","collisionMatrix","length","m","apply","arguments","trigger","_type","Box","center","Vec3","size","radius","points","agent","priority","maxRadius","maxVelocity","velocity","speed","angle","isDirty","shape","body","_worldScale","_worldRTMat3","Mat3","_worldMatrix","Mat4","_worldPosition","_worldRotation","Quat","_scale","_rotation","_position","__extends","Object","defineProperty","prototype","get","set","enumerable","configurable","onLoad","type","cBox","Sphere","cSphere","Polygon","cPolygon","cCollider","inst","create","isAgent","neighborDist","group","node","groupIndex","mask","insert","updateWorldRTS","setAnchor","setAnchorPoint","getContentSize","x","width","y","height","setAngle","getAngle","setPosition","setRotation","setScale","getRotation","getPosition","getScale","remove","removeFromParent","parent","addChild","setAnimation","setColor","init","onTrigger","onDestroy","unscheduleAllCallbacks","_calculWorldMatrix","z","Math","sqrt","n","s","fromMat3","__decorate","visible","Vec2","Integer","Component"],"mappings":";;;;;;AAAA,IAAIA,CAAJ;AACAC,OAAO,CAACC,OAAR,GAAkBD,OAAO,CAACE,cAAR,GAAyBF,OAAO,CAACG,cAAR,GAAyBH,OAAO,CAACI,KAAR,GAAgBJ,OAAO,CAACK,OAAR,GAAkB,KAAK,CAA3G;AACA,IAAIC,CAAJ;AACA,IAAIC,CAAJ;AACA,IAAIC,CAAJ;AACA,IAAIC,CAAJ;;AACA,IAAIC,SAAS,GAAGC,OAAO,CAAC,YAAD,CAAvB;;AACA,IAAIC,MAAM,GAAGD,OAAO,CAAC,SAAD,CAApB;;AACA,IAAIE,CAAC,GAAGC,EAAE,CAACC,UAAX;AACA,IAAIC,CAAC,GAAGH,CAAC,CAACI,OAAV;AACA,IAAIC,CAAC,GAAGL,CAAC,CAACM,QAAV;AACAL,EAAE,CAACM,IAAH,CAAQR,MAAM,CAACS,SAAf;AACA,CAACZ,CAAC,GAAGH,CAAC,GAAGN,OAAO,CAACK,OAAR,KAAoBL,OAAO,CAACK,OAAR,GAAkB,EAAtC,CAAT,EAAqDI,CAAC,WAAD,GAAY,CAAjE,IAAuE,SAAvE;AACAA,CAAC,CAAEA,CAAC,CAACa,KAAF,GAAU,CAAZ,CAAD,GAAmB,OAAnB;AACAb,CAAC,CAAEA,CAAC,CAACc,IAAF,GAAS,CAAX,CAAD,GAAkB,MAAlB;AACAd,CAAC,CAAEA,CAAC,CAACe,IAAF,GAAS,CAAX,CAAD,GAAkB,MAAlB;AACA,CAAChB,CAAC,GAAGD,CAAC,GAAGP,OAAO,CAACI,KAAR,KAAkBJ,OAAO,CAACI,KAAR,GAAgB,EAAlC,CAAT,EAAiDI,CAAC,CAACiB,CAAF,GAAM,CAAvD,IAA6D,GAA7D;AACAjB,CAAC,CAAEA,CAAC,CAACkB,CAAF,GAAM,CAAR,CAAD,GAAe,GAAf;AACAlB,CAAC,CAAEA,CAAC,CAACmB,CAAF,GAAM,CAAR,CAAD,GAAe,GAAf;AACAnB,CAAC,CAAEA,CAAC,CAACoB,GAAF,GAAQ,CAAV,CAAD,GAAiB,KAAjB;AACApB,CAAC,CAAEA,CAAC,CAACqB,EAAF,GAAO,CAAT,CAAD,GAAgB,IAAhB;AACArB,CAAC,CAAEA,CAAC,CAACsB,GAAF,GAAQ,CAAV,CAAD,GAAiB,KAAjB;;AACA9B,OAAO,CAACG,cAAR,GAAyB,UAAU4B,CAAV,EAAa;EAClC,IAAIC,CAAC,GAAGlB,EAAE,CAACmB,IAAH,CAAQC,SAAR,CAAkBC,OAAlB,CAA0BJ,CAA1B,CAAR;EACA,OAAOC,CAAC,IAAI,CAAL,GAAS,KAAKA,CAAd,GAAkB,CAAzB;AACH,CAHD;;AAIAhC,OAAO,CAACE,cAAR,GAAyB,UAAU6B,CAAV,EAAa;EAClC,IAAIC,CAAC,GAAG,CAAR;EACA,IAAII,CAAC,GAAGtB,EAAE,CAACmB,IAAH,CAAQI,eAAR,CAAwBN,CAAxB,CAAR;;EACA,KAAK,IAAIhC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqC,CAAC,CAACE,MAAtB,EAA8BvC,CAAC,EAA/B,EAAmC;IAC/B,IAAIqC,CAAC,CAACrC,CAAD,CAAL,EAAU;MACNiC,CAAC,IAAI,KAAKjC,CAAV;IACH;EACJ;;EACD,OAAOiC,CAAP;AACH,CATD;;AAUA,IAAIO,CAAC,GAAI,UAAUR,CAAV,EAAa;EAClB,SAASC,CAAT,GAAa;IACT,IAAIA,CAAC,GAAI,SAASD,CAAT,IAAcA,CAAC,CAACS,KAAF,CAAQ,IAAR,EAAcC,SAAd,CAAf,IAA4C,IAApD;IACAT,CAAC,CAACU,OAAF,GAAY,CAAC,CAAb;IACAV,CAAC,CAACW,KAAF,GAAU/B,MAAM,CAACS,SAAP,CAAiBuB,GAA3B;IACAZ,CAAC,CAACa,MAAF,GAAW,IAAI/B,EAAE,CAACgC,IAAP,EAAX;IACAd,CAAC,CAACe,IAAF,GAAS,IAAIjC,EAAE,CAACgC,IAAP,EAAT;IACAd,CAAC,CAACgB,MAAF,GAAW,CAAX;IACAhB,CAAC,CAACiB,MAAF,GAAW,EAAX;IACAjB,CAAC,CAACkB,KAAF,GAAU,CAAC,CAAX;IACAlB,CAAC,CAACmB,QAAF,GAAa,CAAb;IACAnB,CAAC,CAACoB,SAAF,GAAc,CAAd;IACApB,CAAC,CAACqB,WAAF,GAAgB,CAAhB;IACArB,CAAC,CAACsB,QAAF,GAAa,IAAIxC,EAAE,CAACgC,IAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAb;IACAd,CAAC,CAACuB,KAAF,GAAU,CAAV;IACAvB,CAAC,CAACwB,KAAF,GAAU,CAAV;IACAxB,CAAC,CAACyB,OAAF,GAAYlD,CAAC,CAACqB,GAAd;IACAI,CAAC,CAAC0B,KAAF,GAAU,IAAV;IACA1B,CAAC,CAAC2B,IAAF,GAAS,IAAT;IACA3B,CAAC,CAAC4B,WAAF,GAAgB,IAAI9C,EAAE,CAACgC,IAAP,EAAhB;IACAd,CAAC,CAAC6B,YAAF,GAAiB,IAAI/C,EAAE,CAACgD,IAAP,EAAjB;IACA9B,CAAC,CAAC+B,YAAF,GAAiB,IAAIjD,EAAE,CAACkD,IAAP,EAAjB;IACAhC,CAAC,CAACiC,cAAF,GAAmB,IAAInD,EAAE,CAACgC,IAAP,EAAnB;IACAd,CAAC,CAACkC,cAAF,GAAmB,IAAIpD,EAAE,CAACqD,IAAP,EAAnB;IACAnC,CAAC,CAACoC,MAAF,GAAW,IAAItD,EAAE,CAACgC,IAAP,EAAX;IACAd,CAAC,CAACqC,SAAF,GAAc,IAAIvD,EAAE,CAACqD,IAAP,EAAd;IACAnC,CAAC,CAACsC,SAAF,GAAc,IAAIxD,EAAE,CAACgC,IAAP,EAAd;IACA,OAAOd,CAAP;EACH;;EACDuC,SAAS,CAACvC,CAAD,EAAID,CAAJ,CAAT;;EACAyC,MAAM,CAACC,cAAP,CAAsBzC,CAAC,CAAC0C,SAAxB,EAAmC,MAAnC,EAA2C;IACvCC,GAAG,EAAE,eAAY;MACb,OAAO,KAAKhC,KAAZ;IACH,CAHsC;IAIvCiC,GAAG,EAAE,aAAU7C,CAAV,EAAa;MACd,IAAI,KAAKY,KAAL,IAAcZ,CAAlB,EAAqB;QACjB,KAAKY,KAAL,GAAaZ,CAAb;MACH;IACJ,CARsC;IASvC8C,UAAU,EAAE,CAAC,CAT0B;IAUvCC,YAAY,EAAE,CAAC;EAVwB,CAA3C;;EAYA9C,CAAC,CAAC0C,SAAF,CAAYK,MAAZ,GAAqB,YAAY;IAC7B,QAAQ,KAAKC,IAAb;MACI,KAAKpE,MAAM,CAACS,SAAP,CAAiBuB,GAAtB;QACI,KAAKc,KAAL,GAAa,IAAI9C,MAAM,CAACqE,IAAX,CAAgB,KAAKpC,MAArB,EAA6B,KAAKE,IAAlC,CAAb;QACA;;MACJ,KAAKnC,MAAM,CAACS,SAAP,CAAiB6D,MAAtB;QACI,KAAKxB,KAAL,GAAa,IAAI9C,MAAM,CAACuE,OAAX,CAAmB,KAAKtC,MAAxB,EAAgC,KAAKG,MAArC,CAAb;QACA;;MACJ,KAAKpC,MAAM,CAACS,SAAP,CAAiB+D,OAAtB;QACI,KAAK1B,KAAL,GAAa,IAAI9C,MAAM,CAACyE,QAAX,CAAoB,KAAKxC,MAAzB,EAAiC,KAAKI,MAAtC,CAAb;IARR;;IAUA,KAAKU,IAAL,GAAYjD,SAAS,CAAC4E,SAAV,CAAoBC,IAApB,CAAyBC,MAAzB,CAAgC,IAAhC,CAAZ;IACA,KAAK7B,IAAL,CAAU8B,OAAV,GAAoB,KAAKvC,KAAzB;IACA,KAAKS,IAAL,CAAUR,QAAV,GAAqB,KAAKA,QAA1B;IACA,KAAKQ,IAAL,CAAU+B,YAAV,GAAyB,KAAKtC,SAA9B;IACA,KAAKO,IAAL,CAAUN,WAAV,GAAwB,KAAKA,WAA7B;IACA,KAAKM,IAAL,CAAUD,KAAV,GAAkB,KAAKA,KAAvB;IACA,KAAKC,IAAL,CAAUgC,KAAV,GAAkB,KAAK,KAAKC,IAAL,CAAUC,UAAjC;IACA,KAAKlC,IAAL,CAAUmC,IAAV,GAAiB9F,OAAO,CAACE,cAAR,CAAuB,KAAK0F,IAAL,CAAUC,UAAjC,CAAjB;IACAnF,SAAS,CAAC4E,SAAV,CAAoBC,IAApB,CAAyBQ,MAAzB,CAAgC,KAAKpC,IAArC;IACA,KAAKF,OAAL,GAAelD,CAAC,CAACqB,GAAjB;EACH,CArBD;;EAsBA4C,MAAM,CAACC,cAAP,CAAsBzC,CAAC,CAAC0C,SAAxB,EAAmC,YAAnC,EAAiD;IAC7CC,GAAG,EAAE,eAAY;MACb,KAAKqB,cAAL;MACA,OAAO,KAAKpC,WAAZ;IACH,CAJ4C;IAK7CiB,UAAU,EAAE,CAAC,CALgC;IAM7CC,YAAY,EAAE,CAAC;EAN8B,CAAjD;EAQAN,MAAM,CAACC,cAAP,CAAsBzC,CAAC,CAAC0C,SAAxB,EAAmC,eAAnC,EAAoD;IAChDC,GAAG,EAAE,eAAY;MACb,KAAKqB,cAAL;MACA,OAAO,KAAK/B,cAAZ;IACH,CAJ+C;IAKhDY,UAAU,EAAE,CAAC,CALmC;IAMhDC,YAAY,EAAE,CAAC;EANiC,CAApD;EAQAN,MAAM,CAACC,cAAP,CAAsBzC,CAAC,CAAC0C,SAAxB,EAAmC,eAAnC,EAAoD;IAChDC,GAAG,EAAE,eAAY;MACb,KAAKqB,cAAL;MACA,OAAO,KAAK9B,cAAZ;IACH,CAJ+C;IAKhDW,UAAU,EAAE,CAAC,CALmC;IAMhDC,YAAY,EAAE,CAAC;EANiC,CAApD;EAQAN,MAAM,CAACC,cAAP,CAAsBzC,CAAC,CAAC0C,SAAxB,EAAmC,kBAAnC,EAAuD;IACnDC,GAAG,EAAE,eAAY;MACb,KAAKqB,cAAL;MACA,OAAO,KAAKnC,YAAZ;IACH,CAJkD;IAKnDgB,UAAU,EAAE,CAAC,CALsC;IAMnDC,YAAY,EAAE,CAAC;EANoC,CAAvD;;EAQA9C,CAAC,CAAC0C,SAAF,CAAYuB,SAAZ,GAAwB,UAAUlE,CAAV,EAAa;IACjC,IAAIC,CAAC,GAAG,KAAKa,MAAb;IACA,IAAIT,CAAC,GAAG,KAAKsB,KAAL,CAAWb,MAAnB;IACA,KAAK+C,IAAL,CAAUM,cAAV,CAAyBnE,CAAzB;IACA,IAAIhC,CAAC,GAAG,KAAK6F,IAAL,CAAUO,cAAV,EAAR;IACA/D,CAAC,CAACgE,CAAF,GAAM,CAAC,MAAMrE,CAAC,CAACqE,CAAT,IAAcrG,CAAC,CAACsG,KAAhB,GAAwBrE,CAAC,CAACoE,CAAhC;IACAhE,CAAC,CAACkE,CAAF,GAAM,CAAC,MAAMvE,CAAC,CAACuE,CAAT,IAAcvG,CAAC,CAACwG,MAAhB,GAAyBvE,CAAC,CAACsE,CAAjC;IACA,KAAK7C,OAAL,IAAgBlD,CAAC,CAACmB,CAAlB;EACH,CARD;;EASAM,CAAC,CAAC0C,SAAF,CAAY8B,QAAZ,GAAuB,UAAUzE,CAAV,EAAa;IAChC,KAAK6D,IAAL,CAAUpC,KAAV,GAAkBzB,CAAlB;IACA,KAAK0B,OAAL,IAAgBlD,CAAC,CAACkB,CAAlB;EACH,CAHD;;EAIAO,CAAC,CAAC0C,SAAF,CAAY+B,QAAZ,GAAuB,YAAY;IAC/B,OAAO,KAAKb,IAAL,CAAUpC,KAAjB;EACH,CAFD;;EAGAxB,CAAC,CAAC0C,SAAF,CAAYgC,WAAZ,GAA0B,UAAU3E,CAAV,EAAa;IACnC,KAAK6D,IAAL,CAAUc,WAAV,CAAsB3E,CAAtB;IACA,KAAK0B,OAAL,IAAgBlD,CAAC,CAACmB,CAAlB;EACH,CAHD;;EAIAM,CAAC,CAAC0C,SAAF,CAAYiC,WAAZ,GAA0B,UAAU5E,CAAV,EAAa;IACnC,KAAK6D,IAAL,CAAUe,WAAV,CAAsB5E,CAAtB;IACA,KAAK0B,OAAL,IAAgBlD,CAAC,CAACkB,CAAlB;EACH,CAHD;;EAIAO,CAAC,CAAC0C,SAAF,CAAYkC,QAAZ,GAAuB,UAAU7E,CAAV,EAAa;IAChC,KAAK6D,IAAL,CAAUgB,QAAV,CAAmB7E,CAAnB;IACA,KAAK0B,OAAL,IAAgBlD,CAAC,CAACoB,CAAlB;EACH,CAHD;;EAIAK,CAAC,CAAC0C,SAAF,CAAYmC,WAAZ,GAA0B,YAAY;IAClC,KAAKjB,IAAL,CAAUiB,WAAV,CAAsB,KAAKxC,SAA3B;IACA,OAAO,KAAKA,SAAZ;EACH,CAHD;;EAIArC,CAAC,CAAC0C,SAAF,CAAYoC,WAAZ,GAA0B,YAAY;IAClC,KAAKlB,IAAL,CAAUkB,WAAV,CAAsB,KAAKxC,SAA3B;IACA,OAAO,KAAKA,SAAZ;EACH,CAHD;;EAIAtC,CAAC,CAAC0C,SAAF,CAAYqC,QAAZ,GAAuB,YAAY;IAC/B,KAAKnB,IAAL,CAAUmB,QAAV,CAAmB,KAAK3C,MAAxB;IACA,OAAO,KAAKA,MAAZ;EACH,CAHD;;EAIApC,CAAC,CAAC0C,SAAF,CAAYsC,MAAZ,GAAqB,UAAUjF,CAAV,EAAa;IAC9B,IAAI,KAAK,CAAL,KAAWA,CAAf,EAAkB;MACdA,CAAC,GAAG,CAAC,CAAL;IACH;;IACDrB,SAAS,CAAC4E,SAAV,CAAoBC,IAApB,CAAyByB,MAAzB,CAAgC,KAAKrD,IAArC,EAA2C5B,CAA3C;IACA,KAAK6D,IAAL,CAAUqB,gBAAV,CAA2B,CAAC,CAA5B;IACA,OAAO,KAAKrB,IAAZ;EACH,CAPD;;EAQA5D,CAAC,CAAC0C,SAAF,CAAYqB,MAAZ,GAAqB,UAAUhE,CAAV,EAAa;IAC9BrB,SAAS,CAAC4E,SAAV,CAAoBC,IAApB,CAAyBQ,MAAzB,CAAgC,KAAKpC,IAArC,EAA2C,CAAC,CAA5C;;IACA,IAAI,KAAKiC,IAAL,CAAUsB,MAAV,IAAoBnF,CAAxB,EAA2B;MACvBA,CAAC,CAACoF,QAAF,CAAW,KAAKvB,IAAhB;IACH;EACJ,CALD;;EAMA5D,CAAC,CAAC0C,SAAF,CAAY0C,YAAZ,GAA2B,YAAY,CAAE,CAAzC;;EACApF,CAAC,CAAC0C,SAAF,CAAY2C,QAAZ,GAAuB,YAAY,CAAE,CAArC;;EACArF,CAAC,CAAC0C,SAAF,CAAY4C,IAAZ,GAAmB,YAAY,CAAE,CAAjC;;EACAtF,CAAC,CAAC0C,SAAF,CAAY6C,SAAZ,GAAwB,UAAUxF,CAAV,EAAaC,CAAb,EAAgB;IACpC,QAAQA,CAAR;MACI,KAAK1B,CAAC,CAACgB,KAAP;MACA,KAAKhB,CAAC,CAACiB,IAAP;MACA,KAAKjB,CAAC,CAACkB,IAAP;IAHJ;EAKH,CAND;;EAOAQ,CAAC,CAAC0C,SAAF,CAAY8C,SAAZ,GAAwB,YAAY;IAChC,KAAKC,sBAAL;IACA,KAAK/D,KAAL,GAAa,IAAb;IACA,KAAKC,IAAL,GAAY,IAAZ;EACH,CAJD;;EAKA3B,CAAC,CAAC0C,SAAF,CAAYsB,cAAZ,GAA6B,UAAUjE,CAAV,EAAa;IACtC,IAAI,KAAK,CAAL,KAAWA,CAAf,EAAkB;MACdA,CAAC,GAAGxB,CAAC,CAACuB,GAAN;IACH;;IACD,IAAI,CAACC,CAAC,IAAI,KAAK0B,OAAX,KAAuBlD,CAAC,CAACuB,GAA7B,EAAkC;MAC9B,KAAK8D,IAAL,CAAU8B,kBAAV;;MACA,IAAI1F,CAAC,GAAG,KAAK4D,IAAL,CAAU7B,YAAV,CAAuBxB,CAA/B;;MACA,IAAIR,CAAC,GAAGxB,CAAC,CAACmB,CAAV,EAAa;QACT,IAAIU,CAAC,GAAG,KAAK6B,cAAb;QACA7B,CAAC,CAACgE,CAAF,GAAMpE,CAAC,CAAC,EAAD,CAAP;QACAI,CAAC,CAACkE,CAAF,GAAMtE,CAAC,CAAC,EAAD,CAAP;QACAI,CAAC,CAACuF,CAAF,GAAM3F,CAAC,CAAC,EAAD,CAAP;MACH;;MACD,IAAIjC,CAAC,GAAG,KAAK6D,WAAb;;MACA,IAAI7B,CAAC,GAAGxB,CAAC,CAACoB,CAAV,EAAa;QACT5B,CAAC,CAACqG,CAAF,GAAMwB,IAAI,CAACC,IAAL,CAAU7F,CAAC,CAAC,CAAD,CAAD,GAAOA,CAAC,CAAC,CAAD,CAAR,GAAcA,CAAC,CAAC,CAAD,CAAD,GAAOA,CAAC,CAAC,CAAD,CAAtB,GAA4BA,CAAC,CAAC,CAAD,CAAD,GAAOA,CAAC,CAAC,CAAD,CAA9C,CAAN;QACAjC,CAAC,CAACuG,CAAF,GAAMsB,IAAI,CAACC,IAAL,CAAU7F,CAAC,CAAC,CAAD,CAAD,GAAOA,CAAC,CAAC,CAAD,CAAR,GAAcA,CAAC,CAAC,CAAD,CAAD,GAAOA,CAAC,CAAC,CAAD,CAAtB,GAA4BA,CAAC,CAAC,CAAD,CAAD,GAAOA,CAAC,CAAC,CAAD,CAA9C,CAAN;QACAjC,CAAC,CAAC4H,CAAF,GAAMC,IAAI,CAACC,IAAL,CAAU7F,CAAC,CAAC,CAAD,CAAD,GAAOA,CAAC,CAAC,CAAD,CAAR,GAAcA,CAAC,CAAC,CAAD,CAAD,GAAOA,CAAC,CAAC,CAAD,CAAtB,GAA4BA,CAAC,CAAC,EAAD,CAAD,GAAQA,CAAC,CAAC,EAAD,CAA/C,CAAN;MACH;;MACD,IAAI8F,CAAC,GAAG,KAAKjE,YAAL,CAAkBtB,CAA1B;;MACA,IAAIR,CAAC,GAAGxB,CAAC,CAACkB,CAAV,EAAa;QACT,IAAIsG,CAAC,GAAG,IAAIhI,CAAC,CAACqG,CAAd;QACA,IAAI9F,CAAC,GAAG,IAAIP,CAAC,CAACuG,CAAd;QACA,IAAI9F,CAAC,GAAG,IAAIT,CAAC,CAAC4H,CAAd;QACAG,CAAC,CAAC,CAAD,CAAD,GAAO9F,CAAC,CAAC,CAAD,CAAD,GAAO+F,CAAd;QACAD,CAAC,CAAC,CAAD,CAAD,GAAO9F,CAAC,CAAC,CAAD,CAAD,GAAO+F,CAAd;QACAD,CAAC,CAAC,CAAD,CAAD,GAAO9F,CAAC,CAAC,CAAD,CAAD,GAAO+F,CAAd;QACAD,CAAC,CAAC,CAAD,CAAD,GAAO9F,CAAC,CAAC,CAAD,CAAD,GAAO1B,CAAd;QACAwH,CAAC,CAAC,CAAD,CAAD,GAAO9F,CAAC,CAAC,CAAD,CAAD,GAAO1B,CAAd;QACAwH,CAAC,CAAC,CAAD,CAAD,GAAO9F,CAAC,CAAC,CAAD,CAAD,GAAO1B,CAAd;QACAwH,CAAC,CAAC,CAAD,CAAD,GAAO9F,CAAC,CAAC,CAAD,CAAD,GAAOxB,CAAd;QACAsH,CAAC,CAAC,CAAD,CAAD,GAAO9F,CAAC,CAAC,CAAD,CAAD,GAAOxB,CAAd;QACAsH,CAAC,CAAC,CAAD,CAAD,GAAO9F,CAAC,CAAC,EAAD,CAAD,GAAQxB,CAAf;QACAM,EAAE,CAACqD,IAAH,CAAQ6D,QAAR,CAAiB,KAAK9D,cAAtB,EAAsC,KAAKL,YAA3C;MACH;IACJ;EACJ,CApCD;;EAqCAoE,UAAU,CAAC,CAAC/G,CAAC,EAAF,CAAD,EAAQc,CAAC,CAAC0C,SAAV,EAAqB,SAArB,EAAgC,KAAK,CAArC,CAAV;;EACAuD,UAAU,CACN,CACI/G,CAAC,CAAC;IACE8D,IAAI,EAAEpE,MAAM,CAACS;EADf,CAAD,CADL,CADM,EAMNW,CAAC,CAAC0C,SANI,EAON,MAPM,EAQN,IARM,CAAV;;EAUAuD,UAAU,CAAC,CAAC/G,CAAC,CAAC,EAAD,CAAF,CAAD,EAAUc,CAAC,CAAC0C,SAAZ,EAAuB,QAAvB,EAAiC,KAAK,CAAtC,CAAV;;EACAuD,UAAU,CACN,CACI/G,CAAC,CAAC;IACEgH,OAAO,EAAE,mBAAY;MACjB,OAAO,KAAKlD,IAAL,IAAapE,MAAM,CAACS,SAAP,CAAiBuB,GAArC;IACH;EAHH,CAAD,CADL,CADM,EAQNZ,CAAC,CAAC0C,SARI,EASN,MATM,EAUN,KAAK,CAVC,CAAV;;EAYAuD,UAAU,CACN,CACI/G,CAAC,CAAC;IACEgH,OAAO,EAAE,mBAAY;MACjB,OAAO,KAAKlD,IAAL,IAAapE,MAAM,CAACS,SAAP,CAAiB6D,MAArC;IACH;EAHH,CAAD,CADL,CADM,EAQNlD,CAAC,CAAC0C,SARI,EASN,QATM,EAUN,KAAK,CAVC,CAAV;;EAYAuD,UAAU,CACN,CACI/G,CAAC,CAAC;IACE8D,IAAI,EAAE,CAAClE,EAAE,CAACqH,IAAJ,CADR;IAEED,OAAO,EAAE,mBAAY;MACjB,OAAO,KAAKlD,IAAL,IAAapE,MAAM,CAACS,SAAP,CAAiB+D,OAArC;IACH;EAJH,CAAD,CADL,CADM,EASNpD,CAAC,CAAC0C,SATI,EAUN,QAVM,EAWN,KAAK,CAXC,CAAV;;EAaAuD,UAAU,CAAC,CAAC/G,CAAC,EAAF,CAAD,EAAQc,CAAC,CAAC0C,SAAV,EAAqB,OAArB,EAA8B,KAAK,CAAnC,CAAV;;EACAuD,UAAU,CACN,CACI/G,CAAC,CAAC;IACE8D,IAAI,EAAElE,EAAE,CAACsH,OADX;IAEEF,OAAO,EAAE,mBAAY;MACjB,OAAO,KAAKhF,KAAZ;IACH;EAJH,CAAD,CADL,CADM,EASNlB,CAAC,CAAC0C,SATI,EAUN,UAVM,EAWN,KAAK,CAXC,CAAV;;EAaAuD,UAAU,CACN,CACI/G,CAAC,CAAC;IACEgH,OAAO,EAAE,mBAAY;MACjB,OAAO,KAAKhF,KAAZ;IACH;EAHH,CAAD,CADL,CADM,EAQNlB,CAAC,CAAC0C,SARI,EASN,WATM,EAUN,KAAK,CAVC,CAAV;;EAYAuD,UAAU,CACN,CACI/G,CAAC,CAAC;IACEgH,OAAO,EAAE,mBAAY;MACjB,OAAO,KAAKhF,KAAZ;IACH;EAHH,CAAD,CADL,CADM,EAQNlB,CAAC,CAAC0C,SARI,EASN,aATM,EAUN,KAAK,CAVC,CAAV;;EAYAuD,UAAU,CAAC,CAAC/G,CAAC,EAAF,CAAD,EAAQc,CAAC,CAAC0C,SAAV,EAAqB,UAArB,EAAiC,KAAK,CAAtC,CAAV;;EACA,OAAOuD,UAAU,CAAC,CAACjH,CAAD,CAAD,EAAMgB,CAAN,CAAjB;AACH,CAnSO,CAmSLlB,EAAE,CAACuH,SAnSE,CAAR;;AAoSArI,OAAO,CAACC,OAAR,GAAkBsC,CAAlB","sourceRoot":"/","sourcesContent":["var o;\r\nexports.cObject = exports.MaskBitByGroup = exports.GroupIdxByName = exports.Dirty = exports.Trigger = void 0;\r\nvar r;\r\nvar a;\r\nvar l;\r\nvar c;\r\nvar $collider = require(\"./Collider\");\r\nvar $shape = require(\"./Shape\");\r\nvar p = cc._decorator;\r\nvar f = p.ccclass;\r\nvar h = p.property;\r\ncc.Enum($shape.ShapeType);\r\n(c = r = exports.Trigger || (exports.Trigger = {}))[(c.default = 0)] = \"default\";\r\nc[(c.enter = 1)] = \"enter\";\r\nc[(c.stay = 2)] = \"stay\";\r\nc[(c.exit = 3)] = \"exit\";\r\n(l = a = exports.Dirty || (exports.Dirty = {}))[(l.R = 1)] = \"R\";\r\nl[(l.T = 2)] = \"T\";\r\nl[(l.S = 4)] = \"S\";\r\nl[(l.RTS = 7)] = \"RTS\";\r\nl[(l.RS = 5)] = \"RS\";\r\nl[(l.NON = 0)] = \"NON\";\r\nexports.GroupIdxByName = function (t) {\r\n    var e = cc.game.groupList.indexOf(t);\r\n    return e >= 0 ? 1 << e : 0;\r\n};\r\nexports.MaskBitByGroup = function (t) {\r\n    var e = 0;\r\n    var i = cc.game.collisionMatrix[t];\r\n    for (var o = 0; o < i.length; o++) {\r\n        if (i[o]) {\r\n            e |= 1 << o;\r\n        }\r\n    }\r\n    return e;\r\n};\r\nvar m = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.trigger = !1;\r\n        e._type = $shape.ShapeType.Box;\r\n        e.center = new cc.Vec3();\r\n        e.size = new cc.Vec3();\r\n        e.radius = 0;\r\n        e.points = [];\r\n        e.agent = !1;\r\n        e.priority = 0;\r\n        e.maxRadius = 0;\r\n        e.maxVelocity = 0;\r\n        e.velocity = new cc.Vec3(0, 0, 0);\r\n        e.speed = 0;\r\n        e.angle = 0;\r\n        e.isDirty = a.RTS;\r\n        e.shape = null;\r\n        e.body = null;\r\n        e._worldScale = new cc.Vec3();\r\n        e._worldRTMat3 = new cc.Mat3();\r\n        e._worldMatrix = new cc.Mat4();\r\n        e._worldPosition = new cc.Vec3();\r\n        e._worldRotation = new cc.Quat();\r\n        e._scale = new cc.Vec3();\r\n        e._rotation = new cc.Quat();\r\n        e._position = new cc.Vec3();\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    Object.defineProperty(e.prototype, \"type\", {\r\n        get: function () {\r\n            return this._type;\r\n        },\r\n        set: function (t) {\r\n            if (this._type != t) {\r\n                this._type = t;\r\n            }\r\n        },\r\n        enumerable: !1,\r\n        configurable: !0\r\n    });\r\n    e.prototype.onLoad = function () {\r\n        switch (this.type) {\r\n            case $shape.ShapeType.Box:\r\n                this.shape = new $shape.cBox(this.center, this.size);\r\n                break;\r\n            case $shape.ShapeType.Sphere:\r\n                this.shape = new $shape.cSphere(this.center, this.radius);\r\n                break;\r\n            case $shape.ShapeType.Polygon:\r\n                this.shape = new $shape.cPolygon(this.center, this.points);\r\n        }\r\n        this.body = $collider.cCollider.inst.create(this);\r\n        this.body.isAgent = this.agent;\r\n        this.body.priority = this.priority;\r\n        this.body.neighborDist = this.maxRadius;\r\n        this.body.maxVelocity = this.maxVelocity;\r\n        this.body.shape = this.shape;\r\n        this.body.group = 1 << this.node.groupIndex;\r\n        this.body.mask = exports.MaskBitByGroup(this.node.groupIndex);\r\n        $collider.cCollider.inst.insert(this.body);\r\n        this.isDirty = a.RTS;\r\n    };\r\n    Object.defineProperty(e.prototype, \"worldScale\", {\r\n        get: function () {\r\n            this.updateWorldRTS();\r\n            return this._worldScale;\r\n        },\r\n        enumerable: !1,\r\n        configurable: !0\r\n    });\r\n    Object.defineProperty(e.prototype, \"worldPosition\", {\r\n        get: function () {\r\n            this.updateWorldRTS();\r\n            return this._worldPosition;\r\n        },\r\n        enumerable: !1,\r\n        configurable: !0\r\n    });\r\n    Object.defineProperty(e.prototype, \"worldRotation\", {\r\n        get: function () {\r\n            this.updateWorldRTS();\r\n            return this._worldRotation;\r\n        },\r\n        enumerable: !1,\r\n        configurable: !0\r\n    });\r\n    Object.defineProperty(e.prototype, \"worldRotatioMat3\", {\r\n        get: function () {\r\n            this.updateWorldRTS();\r\n            return this._worldRTMat3;\r\n        },\r\n        enumerable: !1,\r\n        configurable: !0\r\n    });\r\n    e.prototype.setAnchor = function (t) {\r\n        var e = this.center;\r\n        var i = this.shape.center;\r\n        this.node.setAnchorPoint(t);\r\n        var o = this.node.getContentSize();\r\n        i.x = (0.5 - t.x) * o.width + e.x;\r\n        i.y = (0.5 - t.y) * o.height + e.y;\r\n        this.isDirty |= a.T;\r\n    };\r\n    e.prototype.setAngle = function (t) {\r\n        this.node.angle = t;\r\n        this.isDirty |= a.R;\r\n    };\r\n    e.prototype.getAngle = function () {\r\n        return this.node.angle;\r\n    };\r\n    e.prototype.setPosition = function (t) {\r\n        this.node.setPosition(t);\r\n        this.isDirty |= a.T;\r\n    };\r\n    e.prototype.setRotation = function (t) {\r\n        this.node.setRotation(t);\r\n        this.isDirty |= a.R;\r\n    };\r\n    e.prototype.setScale = function (t) {\r\n        this.node.setScale(t);\r\n        this.isDirty |= a.S;\r\n    };\r\n    e.prototype.getRotation = function () {\r\n        this.node.getRotation(this._rotation);\r\n        return this._rotation;\r\n    };\r\n    e.prototype.getPosition = function () {\r\n        this.node.getPosition(this._position);\r\n        return this._position;\r\n    };\r\n    e.prototype.getScale = function () {\r\n        this.node.getScale(this._scale);\r\n        return this._scale;\r\n    };\r\n    e.prototype.remove = function (t) {\r\n        if (void 0 === t) {\r\n            t = !0;\r\n        }\r\n        $collider.cCollider.inst.remove(this.body, t);\r\n        this.node.removeFromParent(!1);\r\n        return this.node;\r\n    };\r\n    e.prototype.insert = function (t) {\r\n        $collider.cCollider.inst.insert(this.body, !0);\r\n        if (this.node.parent != t) {\r\n            t.addChild(this.node);\r\n        }\r\n    };\r\n    e.prototype.setAnimation = function () {};\r\n    e.prototype.setColor = function () {};\r\n    e.prototype.init = function () {};\r\n    e.prototype.onTrigger = function (t, e) {\r\n        switch (e) {\r\n            case r.enter:\r\n            case r.stay:\r\n            case r.exit:\r\n        }\r\n    };\r\n    e.prototype.onDestroy = function () {\r\n        this.unscheduleAllCallbacks();\r\n        this.shape = null;\r\n        this.body = null;\r\n    };\r\n    e.prototype.updateWorldRTS = function (t) {\r\n        if (void 0 === t) {\r\n            t = a.NON;\r\n        }\r\n        if ((t |= this.isDirty) != a.NON) {\r\n            this.node._calculWorldMatrix();\r\n            var e = this.node._worldMatrix.m;\r\n            if (t & a.T) {\r\n                var i = this._worldPosition;\r\n                i.x = e[12];\r\n                i.y = e[13];\r\n                i.z = e[14];\r\n            }\r\n            var o = this._worldScale;\r\n            if (t & a.S) {\r\n                o.x = Math.sqrt(e[0] * e[0] + e[1] * e[1] + e[2] * e[2]);\r\n                o.y = Math.sqrt(e[4] * e[4] + e[5] * e[5] + e[6] * e[6]);\r\n                o.z = Math.sqrt(e[8] * e[8] + e[9] * e[9] + e[10] * e[10]);\r\n            }\r\n            var n = this._worldRTMat3.m;\r\n            if (t & a.R) {\r\n                var s = 1 / o.x;\r\n                var r = 1 / o.y;\r\n                var l = 1 / o.z;\r\n                n[0] = e[0] * s;\r\n                n[1] = e[1] * s;\r\n                n[2] = e[2] * s;\r\n                n[3] = e[4] * r;\r\n                n[4] = e[5] * r;\r\n                n[5] = e[6] * r;\r\n                n[6] = e[8] * l;\r\n                n[7] = e[9] * l;\r\n                n[8] = e[10] * l;\r\n                cc.Quat.fromMat3(this._worldRotation, this._worldRTMat3);\r\n            }\r\n        }\r\n    };\r\n    __decorate([h()], e.prototype, \"trigger\", void 0);\r\n    __decorate(\r\n        [\r\n            h({\r\n                type: $shape.ShapeType\r\n            })\r\n        ],\r\n        e.prototype,\r\n        \"type\",\r\n        null\r\n    );\r\n    __decorate([h({})], e.prototype, \"center\", void 0);\r\n    __decorate(\r\n        [\r\n            h({\r\n                visible: function () {\r\n                    return this.type == $shape.ShapeType.Box;\r\n                }\r\n            })\r\n        ],\r\n        e.prototype,\r\n        \"size\",\r\n        void 0\r\n    );\r\n    __decorate(\r\n        [\r\n            h({\r\n                visible: function () {\r\n                    return this.type == $shape.ShapeType.Sphere;\r\n                }\r\n            })\r\n        ],\r\n        e.prototype,\r\n        \"radius\",\r\n        void 0\r\n    );\r\n    __decorate(\r\n        [\r\n            h({\r\n                type: [cc.Vec2],\r\n                visible: function () {\r\n                    return this.type == $shape.ShapeType.Polygon;\r\n                }\r\n            })\r\n        ],\r\n        e.prototype,\r\n        \"points\",\r\n        void 0\r\n    );\r\n    __decorate([h()], e.prototype, \"agent\", void 0);\r\n    __decorate(\r\n        [\r\n            h({\r\n                type: cc.Integer,\r\n                visible: function () {\r\n                    return this.agent;\r\n                }\r\n            })\r\n        ],\r\n        e.prototype,\r\n        \"priority\",\r\n        void 0\r\n    );\r\n    __decorate(\r\n        [\r\n            h({\r\n                visible: function () {\r\n                    return this.agent;\r\n                }\r\n            })\r\n        ],\r\n        e.prototype,\r\n        \"maxRadius\",\r\n        void 0\r\n    );\r\n    __decorate(\r\n        [\r\n            h({\r\n                visible: function () {\r\n                    return this.agent;\r\n                }\r\n            })\r\n        ],\r\n        e.prototype,\r\n        \"maxVelocity\",\r\n        void 0\r\n    );\r\n    __decorate([h()], e.prototype, \"velocity\", void 0);\r\n    return __decorate([f], e);\r\n})(cc.Component);\r\nexports.cObject = m;\r\n"]}