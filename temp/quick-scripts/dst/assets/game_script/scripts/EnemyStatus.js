
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/EnemyStatus.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '959beL1MYNLj5z0fCwJL4PA', 'EnemyStatus');
// game_script/scripts/EnemyStatus.js

"use strict";

exports.EnemyDebuffType = void 0;
var o;
var n;

var $baseBullet = require("./BaseBullet");

var $gameContext = require("./GameContext");

var $gameGemInfo = require("./GameGemInfo");

(n = o = exports.EnemyDebuffType || (exports.EnemyDebuffType = {}))[n.SUFFER_ATK = 0] = "SUFFER_ATK";
n[n.BURN = 1] = "BURN";
n[n.BACK = 2] = "BACK";
n[n.FREEZE = 3] = "FREEZE";
n[n.STOP_ANIM = 4] = "STOP_ANIM";
n[n.PARALYSIS = 5] = "PARALYSIS";
n[n.SLOW = 6] = "SLOW";
n[n.STUN = 7] = "STUN";
n[n.ALL_ATK_ADD = 8] = "ALL_ATK_ADD";
n[n.RECOVER = 9] = "RECOVER";
n[n.ADSORB = 10] = "ADSORB";
n[n.FORBID_RECOVER = 11] = "FORBID_RECOVER";

var l = function () {
  function t() {
    this.proxyEnemy = null;
    this.initSpeed = 0;
    this.initHp = 0;
    this.hp = 0;
    this.atkspeed = 0;
    this.atk = 0;
    this.backSpeed = 150;
    this.isDie = !1;
    this.debuffintervalTime = 0.5;
    this.debuffintervalTimeLeft = 0.5;
    this.debuffTypeMap = new Map();
    this.debuffInfos = [];
    this.currAdsorbDir = [];
    this.slowSpeedAdd = 0;
    this.allDamage = 0;
    this.specialityAtkAdd = new Map();
    this.isStoping = !1;
  }

  t.prototype.clear = function () {
    this.slowSpeedAdd = 0;
    this.isStoping = !1;
    this.isDie = !1;
    this.allDamage = 0;
    this.specialityAtkAdd.clear();
    this.debuffTypeMap.clear();
    this.debuffInfos.length = 0;
    this.currAdsorbDir.length = 0;
  };

  t.prototype.addDebuff = function (t) {
    var e = 0;

    if (t.type !== o.BACK || !this.hasDebuff(o.ADSORB)) {
      if (t.type !== o.RECOVER && $gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.EnemyDebuffTime)) {
        e += $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.EnemyDebuffTime);
      }

      if (t.type === o.BURN) {
        t.timeLeft += e;
        this.debuffInfos.push(t);
        this.debuffTypeMap.has(o.BURN) || (this.proxyEnemy.startDebuffAnim(t.type), this.debuffTypeMap.set(o.BURN, 0));
        this.debuffTypeMap.set(o.BURN, this.debuffTypeMap.get(o.BURN) + 1);
      } else {
        if (t.type === o.BACK) {
          var i = t;

          if (150 !== this.backSpeed) {
            return;
          }

          if (t.timeLeft >= 1) {
            this.debuffTypeMap["delete"](o.BACK);
            (n = this.debuffInfos.findIndex(function (t) {
              return t.type === o.BACK;
            })) > -1 && this.debuffInfos.splice(n, 1);
            this.backSpeed = t.value / t.timeLeft;
          } else {
            if (void 0 !== i.dir) {
              var n;
              this.debuffTypeMap["delete"](o.BACK);

              if ((n = this.debuffInfos.findIndex(function (t) {
                return t.type === o.BACK;
              })) > -1) {
                this.debuffInfos.splice(n, 1);
              }

              t.timeLeft = t.value / this.backSpeed;
            } else {
              t.timeLeft = t.value / this.backSpeed;
            }
          }

          if (!this.debuffTypeMap.has(o.BACK)) {
            this.debuffTypeMap.set(o.BACK, 1);

            if (!i.dir) {
              i.dir = cc.v2(0, 1);
            }

            this.debuffInfos.push(i);
            this.proxyEnemy.startDebuffAnim(o.STOP_ANIM);
          }

          this.tryRecoverSpeed();
        } else {
          if (t.type === o.FREEZE) {
            t.timeLeft += e;
            this.debuffTypeMap.has(o.FREEZE) ? (s = this.debuffInfos.find(function (t) {
              return t.type === o.FREEZE;
            })) ? s.timeLeft = t.timeLeft : this.debuffInfos.push(t) : (this.debuffTypeMap.set(o.FREEZE, 1), this.debuffInfos.push(t), this.proxyEnemy.startDebuffAnim(t.type), this.proxyEnemy.startDebuffAnim(o.STOP_ANIM));
            this.tryRecoverSpeed();
          } else {
            if (t.type === o.PARALYSIS) {
              t.timeLeft += e;
              this.debuffTypeMap.has(o.PARALYSIS) ? (s = this.debuffInfos.find(function (t) {
                return t.type === o.PARALYSIS;
              })) ? s.timeLeft = t.timeLeft : this.debuffInfos.push(t) : (this.debuffTypeMap.set(o.PARALYSIS, 1), this.debuffInfos.push(t), this.proxyEnemy.startDebuffAnim(t.type), this.proxyEnemy.startDebuffAnim(o.STOP_ANIM));
              this.tryRecoverSpeed();
            } else {
              if (t.type === o.RECOVER) {
                this.debuffTypeMap.has(o.RECOVER) ? (s = this.debuffInfos.find(function (t) {
                  return t.type === o.RECOVER;
                })) ? s.timeLeft = t.timeLeft : this.debuffInfos.push(t) : (this.debuffTypeMap.set(o.RECOVER, 1), this.debuffInfos.push(t), this.proxyEnemy.startDebuffAnim(t.type), -1 == t.value && this.proxyEnemy.startDebuffAnim(o.STOP_ANIM));
                -1 == t.value && this.tryRecoverSpeed();
              } else {
                if (t.type === o.SLOW) {
                  t.timeLeft += e;

                  if (this.debuffTypeMap.has(o.SLOW)) {
                    if ((s = this.debuffInfos.find(function (t) {
                      return t.type === o.SLOW;
                    })).id) {
                      return;
                    }

                    s.id = t.id;
                    s ? (s.timeLeft = t.timeLeft, s.value = t.value) : this.debuffInfos.push(t);
                  } else {
                    this.debuffTypeMap.set(o.SLOW, 1);
                    this.debuffInfos.push(t);
                  }

                  this.slowSpeedAdd = t.value;
                  this.tryRecoverSpeed();
                } else {
                  if (t.type === o.STUN) {
                    var s;
                    t.timeLeft += e;
                    this.debuffTypeMap.has(o.STUN) ? (s = this.debuffInfos.find(function (t) {
                      return t.type === o.STUN;
                    })) ? s.timeLeft = t.timeLeft : this.debuffInfos.push(t) : (this.debuffTypeMap.set(o.STUN, 1), this.debuffInfos.push(t), this.proxyEnemy.startDebuffAnim(t.type), this.proxyEnemy.startDebuffAnim(o.STOP_ANIM));
                    this.tryRecoverSpeed();
                  } else {
                    if (t.type === o.ALL_ATK_ADD) {
                      if (this.debuffTypeMap.has(o.ALL_ATK_ADD)) {
                        if (this.debuffTypeMap.get(o.ALL_ATK_ADD) > 5) {
                          return;
                        }

                        this.debuffTypeMap.set(o.ALL_ATK_ADD, this.debuffTypeMap.get(o.ALL_ATK_ADD) + 1);
                        this.debuffInfos.push(t);
                      } else {
                        this.debuffInfos.push(t);
                      }
                    } else {
                      t.type === o.ADSORB ? (this.debuffTypeMap.has(o.ADSORB) || this.debuffTypeMap.set(o.ADSORB, 1), this.tryRecoverSpeed()) : t.type === o.FORBID_RECOVER && this.debuffTypeMap.set(o.FORBID_RECOVER, 1);
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  };

  t.prototype.clearDebuff = function (t, e) {
    if (t === o.BACK) {
      (i = this.debuffInfos.findIndex(function (t) {
        return t.type === o.BACK;
      })) > -1 && this.debuffInfos.splice(i, 1);
      this.deleteDebuffType(t);
    } else {
      if (t === o.ADSORB) {
        this.deleteDebuffType(t);
      } else {
        if (t === o.FORBID_RECOVER) {
          this.deleteDebuffType(t);
        } else {
          if (t === o.SLOW) {
            void 0 !== e ? (i = this.debuffInfos.findIndex(function (t) {
              return t.type === o.SLOW;
            })) > -1 && (this.debuffInfos.splice(i, 1), this.deleteDebuffType(t)) : this.deleteDebuffType(t);
          } else {
            if (t === o.RECOVER) {
              var i;

              if ((i = this.debuffInfos.findIndex(function (t) {
                return t.type === o.RECOVER;
              })) > -1) {
                this.debuffInfos.splice(i, 1);
              }

              this.deleteDebuffType(t);
            }
          }
        }
      }
    }
  };

  t.prototype.hasDebuff = function (t) {
    return this.debuffTypeMap.has(t);
  };

  t.prototype.tryRecoverSpeed = function () {
    if (this.debuffTypeMap.has(o.ADSORB)) {} else {
      if (this.debuffTypeMap.has(o.BACK)) {
        var t = this.debuffInfos.find(function (t) {
          return t.type === o.BACK;
        });
        this.isStoping = !0;
        this.proxyEnemy.velocity.x = t.dir.x;
        this.proxyEnemy.velocity.y = t.dir.y;
        this.proxyEnemy.speed = this.backSpeed;
      } else {
        this.debuffTypeMap.has(o.FREEZE) || this.debuffTypeMap.has(o.STUN) || this.debuffTypeMap.has(o.PARALYSIS) || this.debuffTypeMap.has(o.RECOVER) ? (this.isStoping = !0, this.proxyEnemy.speed = 0) : this.debuffTypeMap.has(o.SLOW) ? (this.proxyEnemy.velocity.x = 0, this.proxyEnemy.velocity.y = -1, this.proxyEnemy.speed = this.initSpeed * (1 + this.slowSpeedAdd), this.isStoping = !1) : (this.proxyEnemy.velocity.x = 0, this.proxyEnemy.velocity.y = -1, this.proxyEnemy.speed = this.initSpeed, this.isStoping = !1);
      }
    }

    if (!this.isStoping) {
      this.proxyEnemy.endDebuffAnim(o.STOP_ANIM);
    }
  };

  t.prototype.proccessExpiredDuff = function (t) {
    var e = 0;
    var i = this.debuffInfos.length;

    for (var n = 0; n < i; n++) {
      var s = this.debuffInfos.shift();
      s.timeLeft -= t;

      if (s.timeLeft > 0) {
        s.type === o.ALL_ATK_ADD && (e += s.value);
        this.debuffInfos.push(s);
      } else {
        {
          var r = this.debuffTypeMap.get(s.type) - 1;
          r <= 0 ? (this.debuffTypeMap["delete"](s.type), this.deleteDebuffType(s.type)) : this.debuffTypeMap.set(s.type, r);
        }
      }
    }

    this.allDamage = e;
  };

  t.prototype.deleteDebuffType = function (t) {
    t === o.STUN ? (this.debuffTypeMap["delete"](o.STUN), this.proxyEnemy.endDebuffAnim(o.STUN), this.tryRecoverSpeed()) : t === o.SLOW ? (this.debuffTypeMap["delete"](o.SLOW), this.tryRecoverSpeed()) : t === o.BURN ? (this.debuffTypeMap["delete"](o.BURN), this.proxyEnemy.endDebuffAnim(o.BURN)) : t === o.BACK ? (this.backSpeed = 150, this.debuffTypeMap["delete"](o.BACK), this.tryRecoverSpeed()) : t === o.FREEZE ? (this.debuffTypeMap["delete"](o.FREEZE), this.proxyEnemy.endDebuffAnim(o.FREEZE), this.tryRecoverSpeed()) : t === o.PARALYSIS ? (this.debuffTypeMap["delete"](o.PARALYSIS), this.proxyEnemy.endDebuffAnim(o.PARALYSIS), this.tryRecoverSpeed()) : t === o.ALL_ATK_ADD ? this.debuffTypeMap["delete"](o.ALL_ATK_ADD) : t === o.RECOVER ? (this.debuffTypeMap["delete"](o.RECOVER), this.proxyEnemy.endDebuffAnim(o.RECOVER), this.tryRecoverSpeed()) : t === o.ADSORB ? (this.debuffTypeMap["delete"](o.ADSORB), this.tryRecoverSpeed()) : t === o.FORBID_RECOVER && this.debuffTypeMap["delete"](o.ADSORB);
  };

  t.prototype.updateF = function (t) {
    if (!this.isDie) {
      this.proccessExpiredDuff(t);
      this.debuffintervalTimeLeft -= t;
      var e = 0;

      for (var i = 0; i < this.debuffInfos.length; i++) {
        var n = this.debuffInfos[i];

        if (n.type === o.BURN) {
          e += n.value;
        }
      }

      if (0 !== e && this.debuffintervalTimeLeft <= 0) {
        this.debuffintervalTimeLeft = this.debuffintervalTime;
        var a = $gameContext["default"].ins.skillInfo.getSkillById(23);
        a && a.thermobaricEnemyBoomRange > 0 ? this.proxyEnemy.sufferAtk({
          skillSpecialitys: [],
          atk: e,
          bulletBuff: $baseBullet.BulletBuff.burn_boom
        }) : this.proxyEnemy.sufferAttack(-1, e);
      }
    }
  };

  return t;
}();

exports["default"] = l;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXEVuZW15U3RhdHVzLmpzIl0sIm5hbWVzIjpbImV4cG9ydHMiLCJFbmVteURlYnVmZlR5cGUiLCJvIiwibiIsIiRiYXNlQnVsbGV0IiwicmVxdWlyZSIsIiRnYW1lQ29udGV4dCIsIiRnYW1lR2VtSW5mbyIsIlNVRkZFUl9BVEsiLCJCVVJOIiwiQkFDSyIsIkZSRUVaRSIsIlNUT1BfQU5JTSIsIlBBUkFMWVNJUyIsIlNMT1ciLCJTVFVOIiwiQUxMX0FUS19BREQiLCJSRUNPVkVSIiwiQURTT1JCIiwiRk9SQklEX1JFQ09WRVIiLCJsIiwidCIsInByb3h5RW5lbXkiLCJpbml0U3BlZWQiLCJpbml0SHAiLCJocCIsImF0a3NwZWVkIiwiYXRrIiwiYmFja1NwZWVkIiwiaXNEaWUiLCJkZWJ1ZmZpbnRlcnZhbFRpbWUiLCJkZWJ1ZmZpbnRlcnZhbFRpbWVMZWZ0IiwiZGVidWZmVHlwZU1hcCIsIk1hcCIsImRlYnVmZkluZm9zIiwiY3VyckFkc29yYkRpciIsInNsb3dTcGVlZEFkZCIsImFsbERhbWFnZSIsInNwZWNpYWxpdHlBdGtBZGQiLCJpc1N0b3BpbmciLCJwcm90b3R5cGUiLCJjbGVhciIsImxlbmd0aCIsImFkZERlYnVmZiIsImUiLCJ0eXBlIiwiaGFzRGVidWZmIiwiR2FtZUdlbUluZm8iLCJpbnMiLCJoYXNHZW0iLCJHZW1UeXBlIiwiRW5lbXlEZWJ1ZmZUaW1lIiwiZ2V0MSIsInRpbWVMZWZ0IiwicHVzaCIsImhhcyIsInN0YXJ0RGVidWZmQW5pbSIsInNldCIsImdldCIsImkiLCJmaW5kSW5kZXgiLCJzcGxpY2UiLCJ2YWx1ZSIsImRpciIsImNjIiwidjIiLCJ0cnlSZWNvdmVyU3BlZWQiLCJzIiwiZmluZCIsImlkIiwiY2xlYXJEZWJ1ZmYiLCJkZWxldGVEZWJ1ZmZUeXBlIiwidmVsb2NpdHkiLCJ4IiwieSIsInNwZWVkIiwiZW5kRGVidWZmQW5pbSIsInByb2NjZXNzRXhwaXJlZER1ZmYiLCJzaGlmdCIsInIiLCJ1cGRhdGVGIiwiYSIsInNraWxsSW5mbyIsImdldFNraWxsQnlJZCIsInRoZXJtb2JhcmljRW5lbXlCb29tUmFuZ2UiLCJzdWZmZXJBdGsiLCJza2lsbFNwZWNpYWxpdHlzIiwiYnVsbGV0QnVmZiIsIkJ1bGxldEJ1ZmYiLCJidXJuX2Jvb20iLCJzdWZmZXJBdHRhY2siXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUFBLE9BQU8sQ0FBQ0MsZUFBUixHQUEwQixLQUFLLENBQS9CO0FBQ0EsSUFBSUMsQ0FBSjtBQUNBLElBQUlDLENBQUo7O0FBQ0EsSUFBSUMsV0FBVyxHQUFHQyxPQUFPLENBQUMsY0FBRCxDQUF6Qjs7QUFDQSxJQUFJQyxZQUFZLEdBQUdELE9BQU8sQ0FBQyxlQUFELENBQTFCOztBQUNBLElBQUlFLFlBQVksR0FBR0YsT0FBTyxDQUFDLGVBQUQsQ0FBMUI7O0FBQ0EsQ0FBQ0YsQ0FBQyxHQUFHRCxDQUFDLEdBQUdGLE9BQU8sQ0FBQ0MsZUFBUixLQUE0QkQsT0FBTyxDQUFDQyxlQUFSLEdBQTBCLEVBQXRELENBQVQsRUFBcUVFLENBQUMsQ0FBQ0ssVUFBRixHQUFlLENBQXBGLElBQTBGLFlBQTFGO0FBQ0FMLENBQUMsQ0FBRUEsQ0FBQyxDQUFDTSxJQUFGLEdBQVMsQ0FBWCxDQUFELEdBQWtCLE1BQWxCO0FBQ0FOLENBQUMsQ0FBRUEsQ0FBQyxDQUFDTyxJQUFGLEdBQVMsQ0FBWCxDQUFELEdBQWtCLE1BQWxCO0FBQ0FQLENBQUMsQ0FBRUEsQ0FBQyxDQUFDUSxNQUFGLEdBQVcsQ0FBYixDQUFELEdBQW9CLFFBQXBCO0FBQ0FSLENBQUMsQ0FBRUEsQ0FBQyxDQUFDUyxTQUFGLEdBQWMsQ0FBaEIsQ0FBRCxHQUF1QixXQUF2QjtBQUNBVCxDQUFDLENBQUVBLENBQUMsQ0FBQ1UsU0FBRixHQUFjLENBQWhCLENBQUQsR0FBdUIsV0FBdkI7QUFDQVYsQ0FBQyxDQUFFQSxDQUFDLENBQUNXLElBQUYsR0FBUyxDQUFYLENBQUQsR0FBa0IsTUFBbEI7QUFDQVgs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O1FBQzdDLEtBQUtBLHNCQUFMLEdBQThCLEtBQUtELGtCQUFuQztRQUNBLElBQUltRCxDQUFDLEdBQUczRSxZQUFZLFdBQVosQ0FBcUIwQyxHQUFyQixDQUF5QmtDLFNBQXpCLENBQW1DQyxZQUFuQyxDQUFnRCxFQUFoRCxDQUFSO1FBQ0FGLENBQUMsSUFBSUEsQ0FBQyxDQUFDRyx5QkFBRixHQUE4QixDQUFuQyxHQUNNLEtBQUs5RCxVQUFMLENBQWdCK0QsU0FBaEIsQ0FBMEI7VUFDdEJDLGdCQUFnQixFQUFFLEVBREk7VUFFdEIzRCxHQUFHLEVBQUVpQixDQUZpQjtVQUd0QjJDLFVBQVUsRUFBRW5GLFdBQVcsQ0FBQ29GLFVBQVosQ0FBdUJDO1FBSGIsQ0FBMUIsQ0FETixHQU1NLEtBQUtuRSxVQUFMLENBQWdCb0UsWUFBaEIsQ0FBNkIsQ0FBQyxDQUE5QixFQUFpQzlDLENBQWpDLENBTk47TUFPSDtJQUNKO0VBQ0osQ0F2QkQ7O0VBd0JBLE9BQU92QixDQUFQO0FBQ0gsQ0FwVU8sRUFBUjs7QUFxVUFyQixPQUFPLFdBQVAsR0FBa0JvQixDQUFsQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0cy5FbmVteURlYnVmZlR5cGUgPSB2b2lkIDA7XHJcbnZhciBvO1xyXG52YXIgbjtcclxudmFyICRiYXNlQnVsbGV0ID0gcmVxdWlyZShcIi4vQmFzZUJ1bGxldFwiKTtcclxudmFyICRnYW1lQ29udGV4dCA9IHJlcXVpcmUoXCIuL0dhbWVDb250ZXh0XCIpO1xyXG52YXIgJGdhbWVHZW1JbmZvID0gcmVxdWlyZShcIi4vR2FtZUdlbUluZm9cIik7XHJcbihuID0gbyA9IGV4cG9ydHMuRW5lbXlEZWJ1ZmZUeXBlIHx8IChleHBvcnRzLkVuZW15RGVidWZmVHlwZSA9IHt9KSlbKG4uU1VGRkVSX0FUSyA9IDApXSA9IFwiU1VGRkVSX0FUS1wiO1xyXG5uWyhuLkJVUk4gPSAxKV0gPSBcIkJVUk5cIjtcclxublsobi5CQUNLID0gMildID0gXCJCQUNLXCI7XHJcbm5bKG4uRlJFRVpFID0gMyldID0gXCJGUkVFWkVcIjtcclxublsobi5TVE9QX0FOSU0gPSA0KV0gPSBcIlNUT1BfQU5JTVwiO1xyXG5uWyhuLlBBUkFMWVNJUyA9IDUpXSA9IFwiUEFSQUxZU0lTXCI7XHJcbm5bKG4uU0xPVyA9IDYpXSA9IFwiU0xPV1wiO1xyXG5uWyhuLlNUVU4gPSA3KV0gPSBcIlNUVU5cIjtcclxublsobi5BTExfQVRLX0FERCA9IDgpXSA9IFwiQUxMX0FUS19BRERcIjtcclxublsobi5SRUNPVkVSID0gOSldID0gXCJSRUNPVkVSXCI7XHJcbm5bKG4uQURTT1JCID0gMTApXSA9IFwiQURTT1JCXCI7XHJcbm5bKG4uRk9SQklEX1JFQ09WRVIgPSAxMSldID0gXCJGT1JCSURfUkVDT1ZFUlwiO1xyXG52YXIgbCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiB0KCkge1xyXG4gICAgICAgIHRoaXMucHJveHlFbmVteSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbml0U3BlZWQgPSAwO1xyXG4gICAgICAgIHRoaXMuaW5pdEhwID0gMDtcclxuICAgICAgICB0aGlzLmhwID0gMDtcclxuICAgICAgICB0aGlzLmF0a3NwZWVkID0gMDtcclxuICAgICAgICB0aGlzLmF0ayA9IDA7XHJcbiAgICAgICAgdGhpcy5iYWNrU3BlZWQgPSAxNTA7XHJcbiAgICAgICAgdGhpcy5pc0RpZSA9ICExO1xyXG4gICAgICAgIHRoaXMuZGVidWZmaW50ZXJ2YWxUaW1lID0gMC41O1xyXG4gICAgICAgIHRoaXMuZGVidWZmaW50ZXJ2YWxUaW1lTGVmdCA9IDAuNTtcclxuICAgICAgICB0aGlzLmRlYnVmZlR5cGVNYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5kZWJ1ZmZJbmZvcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuY3VyckFkc29yYkRpciA9IFtdO1xyXG4gICAgICAgIHRoaXMuc2xvd1NwZWVkQWRkID0gMDtcclxuICAgICAgICB0aGlzLmFsbERhbWFnZSA9IDA7XHJcbiAgICAgICAgdGhpcy5zcGVjaWFsaXR5QXRrQWRkID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuaXNTdG9waW5nID0gITE7XHJcbiAgICB9XHJcbiAgICB0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnNsb3dTcGVlZEFkZCA9IDA7XHJcbiAgICAgICAgdGhpcy5pc1N0b3BpbmcgPSAhMTtcclxuICAgICAgICB0aGlzLmlzRGllID0gITE7XHJcbiAgICAgICAgdGhpcy5hbGxEYW1hZ2UgPSAwO1xyXG4gICAgICAgIHRoaXMuc3BlY2lhbGl0eUF0a0FkZC5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMuZGVidWZmVHlwZU1hcC5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMuZGVidWZmSW5mb3MubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLmN1cnJBZHNvcmJEaXIubGVuZ3RoID0gMDtcclxuICAgIH07XHJcbiAgICB0LnByb3RvdHlwZS5hZGREZWJ1ZmYgPSBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIHZhciBlID0gMDtcclxuICAgICAgICBpZiAodC50eXBlICE9PSBvLkJBQ0sgfHwgIXRoaXMuaGFzRGVidWZmKG8uQURTT1JCKSkge1xyXG4gICAgICAgICAgICBpZiAodC50eXBlICE9PSBvLlJFQ09WRVIgJiYgJGdhbWVHZW1JbmZvLkdhbWVHZW1JbmZvLmlucy5oYXNHZW0oJGdhbWVHZW1JbmZvLkdlbVR5cGUuRW5lbXlEZWJ1ZmZUaW1lKSkge1xyXG4gICAgICAgICAgICAgICAgZSArPSAkZ2FtZUdlbUluZm8uR2FtZUdlbUluZm8uaW5zLmdldDEoJGdhbWVHZW1JbmZvLkdlbVR5cGUuRW5lbXlEZWJ1ZmZUaW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodC50eXBlID09PSBvLkJVUk4pIHtcclxuICAgICAgICAgICAgICAgIHQudGltZUxlZnQgKz0gZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVidWZmSW5mb3MucHVzaCh0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVidWZmVHlwZU1hcC5oYXMoby5CVVJOKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnByb3h5RW5lbXkuc3RhcnREZWJ1ZmZBbmltKHQudHlwZSksIHRoaXMuZGVidWZmVHlwZU1hcC5zZXQoby5CVVJOLCAwKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlYnVmZlR5cGVNYXAuc2V0KG8uQlVSTiwgdGhpcy5kZWJ1ZmZUeXBlTWFwLmdldChvLkJVUk4pICsgMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodC50eXBlID09PSBvLkJBQ0spIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKDE1MCAhPT0gdGhpcy5iYWNrU3BlZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodC50aW1lTGVmdCA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVidWZmVHlwZU1hcC5kZWxldGUoby5CQUNLKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKG4gPSB0aGlzLmRlYnVmZkluZm9zLmZpbmRJbmRleChmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQudHlwZSA9PT0gby5CQUNLO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSkgPiAtMSAmJiB0aGlzLmRlYnVmZkluZm9zLnNwbGljZShuLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrU3BlZWQgPSB0LnZhbHVlIC8gdC50aW1lTGVmdDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBpLmRpcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlYnVmZlR5cGVNYXAuZGVsZXRlKG8uQkFDSyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4gPSB0aGlzLmRlYnVmZkluZm9zLmZpbmRJbmRleChmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC50eXBlID09PSBvLkJBQ0s7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpID4gLTFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVidWZmSW5mb3Muc3BsaWNlKG4sIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdC50aW1lTGVmdCA9IHQudmFsdWUgLyB0aGlzLmJhY2tTcGVlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQudGltZUxlZnQgPSB0LnZhbHVlIC8gdGhpcy5iYWNrU3BlZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRlYnVmZlR5cGVNYXAuaGFzKG8uQkFDSykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWJ1ZmZUeXBlTWFwLnNldChvLkJBQ0ssIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWkuZGlyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmRpciA9IGNjLnYyKDAsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVidWZmSW5mb3MucHVzaChpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm94eUVuZW15LnN0YXJ0RGVidWZmQW5pbShvLlNUT1BfQU5JTSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJ5UmVjb3ZlclNwZWVkKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0LnR5cGUgPT09IG8uRlJFRVpFKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHQudGltZUxlZnQgKz0gZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWJ1ZmZUeXBlTWFwLmhhcyhvLkZSRUVaRSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKHMgPSB0aGlzLmRlYnVmZkluZm9zLmZpbmQoZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnR5cGUgPT09IG8uRlJFRVpFO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChzLnRpbWVMZWZ0ID0gdC50aW1lTGVmdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuZGVidWZmSW5mb3MucHVzaCh0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAodGhpcy5kZWJ1ZmZUeXBlTWFwLnNldChvLkZSRUVaRSwgMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVidWZmSW5mb3MucHVzaCh0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm94eUVuZW15LnN0YXJ0RGVidWZmQW5pbSh0LnR5cGUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3h5RW5lbXkuc3RhcnREZWJ1ZmZBbmltKG8uU1RPUF9BTklNKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJ5UmVjb3ZlclNwZWVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQudHlwZSA9PT0gby5QQVJBTFlTSVMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQudGltZUxlZnQgKz0gZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVidWZmVHlwZU1hcC5oYXMoby5QQVJBTFlTSVMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAocyA9IHRoaXMuZGVidWZmSW5mb3MuZmluZChmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnR5cGUgPT09IG8uUEFSQUxZU0lTO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKHMudGltZUxlZnQgPSB0LnRpbWVMZWZ0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuZGVidWZmSW5mb3MucHVzaCh0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKHRoaXMuZGVidWZmVHlwZU1hcC5zZXQoby5QQVJBTFlTSVMsIDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWJ1ZmZJbmZvcy5wdXNoKHQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm94eUVuZW15LnN0YXJ0RGVidWZmQW5pbSh0LnR5cGUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm94eUVuZW15LnN0YXJ0RGVidWZmQW5pbShvLlNUT1BfQU5JTSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cnlSZWNvdmVyU3BlZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0LnR5cGUgPT09IG8uUkVDT1ZFUikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVidWZmVHlwZU1hcC5oYXMoby5SRUNPVkVSKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChzID0gdGhpcy5kZWJ1ZmZJbmZvcy5maW5kKGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnR5cGUgPT09IG8uUkVDT1ZFUjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKHMudGltZUxlZnQgPSB0LnRpbWVMZWZ0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmRlYnVmZkluZm9zLnB1c2godClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAodGhpcy5kZWJ1ZmZUeXBlTWFwLnNldChvLlJFQ09WRVIsIDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVidWZmSW5mb3MucHVzaCh0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3h5RW5lbXkuc3RhcnREZWJ1ZmZBbmltKHQudHlwZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLTEgPT0gdC52YWx1ZSAmJiB0aGlzLnByb3h5RW5lbXkuc3RhcnREZWJ1ZmZBbmltKG8uU1RPUF9BTklNKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLTEgPT0gdC52YWx1ZSAmJiB0aGlzLnRyeVJlY292ZXJTcGVlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodC50eXBlID09PSBvLlNMT1cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC50aW1lTGVmdCArPSBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWJ1ZmZUeXBlTWFwLmhhcyhvLlNMT1cpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHMgPSB0aGlzLmRlYnVmZkluZm9zLmZpbmQoZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQudHlwZSA9PT0gby5TTE9XO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKS5pZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5pZCA9IHQuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID8gKChzLnRpbWVMZWZ0ID0gdC50aW1lTGVmdCksIChzLnZhbHVlID0gdC52YWx1ZSkpIDogdGhpcy5kZWJ1ZmZJbmZvcy5wdXNoKHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWJ1ZmZUeXBlTWFwLnNldChvLlNMT1csIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWJ1ZmZJbmZvcy5wdXNoKHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2xvd1NwZWVkQWRkID0gdC52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cnlSZWNvdmVyU3BlZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodC50eXBlID09PSBvLlNUVU4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC50aW1lTGVmdCArPSBlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWJ1ZmZUeXBlTWFwLmhhcyhvLlNUVU4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAocyA9IHRoaXMuZGVidWZmSW5mb3MuZmluZChmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnR5cGUgPT09IG8uU1RVTjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChzLnRpbWVMZWZ0ID0gdC50aW1lTGVmdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmRlYnVmZkluZm9zLnB1c2godClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICh0aGlzLmRlYnVmZlR5cGVNYXAuc2V0KG8uU1RVTiwgMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlYnVmZkluZm9zLnB1c2godCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3h5RW5lbXkuc3RhcnREZWJ1ZmZBbmltKHQudHlwZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3h5RW5lbXkuc3RhcnREZWJ1ZmZBbmltKG8uU1RPUF9BTklNKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyeVJlY292ZXJTcGVlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQudHlwZSA9PT0gby5BTExfQVRLX0FERCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlYnVmZlR5cGVNYXAuaGFzKG8uQUxMX0FUS19BREQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlYnVmZlR5cGVNYXAuZ2V0KG8uQUxMX0FUS19BREQpID4gNSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVidWZmVHlwZU1hcC5zZXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLkFMTF9BVEtfQURELFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWJ1ZmZUeXBlTWFwLmdldChvLkFMTF9BVEtfQUREKSArIDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWJ1ZmZJbmZvcy5wdXNoKHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVidWZmSW5mb3MucHVzaCh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQudHlwZSA9PT0gby5BRFNPUkJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAodGhpcy5kZWJ1ZmZUeXBlTWFwLmhhcyhvLkFEU09SQikgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWJ1ZmZUeXBlTWFwLnNldChvLkFEU09SQiwgMSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cnlSZWNvdmVyU3BlZWQoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0LnR5cGUgPT09IG8uRk9SQklEX1JFQ09WRVIgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlYnVmZlR5cGVNYXAuc2V0KG8uRk9SQklEX1JFQ09WRVIsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHQucHJvdG90eXBlLmNsZWFyRGVidWZmID0gZnVuY3Rpb24gKHQsIGUpIHtcclxuICAgICAgICBpZiAodCA9PT0gby5CQUNLKSB7XHJcbiAgICAgICAgICAgIChpID0gdGhpcy5kZWJ1ZmZJbmZvcy5maW5kSW5kZXgoZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0LnR5cGUgPT09IG8uQkFDSztcclxuICAgICAgICAgICAgfSkpID4gLTEgJiYgdGhpcy5kZWJ1ZmZJbmZvcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlRGVidWZmVHlwZSh0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodCA9PT0gby5BRFNPUkIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlRGVidWZmVHlwZSh0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0ID09PSBvLkZPUkJJRF9SRUNPVkVSKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVEZWJ1ZmZUeXBlKHQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodCA9PT0gby5TTE9XKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoaSA9IHRoaXMuZGVidWZmSW5mb3MuZmluZEluZGV4KGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC50eXBlID09PSBvLlNMT1c7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSA+IC0xICYmICh0aGlzLmRlYnVmZkluZm9zLnNwbGljZShpLCAxKSwgdGhpcy5kZWxldGVEZWJ1ZmZUeXBlKHQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmRlbGV0ZURlYnVmZlR5cGUodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPT09IG8uUkVDT1ZFUikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGkgPSB0aGlzLmRlYnVmZkluZm9zLmZpbmRJbmRleChmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC50eXBlID09PSBvLlJFQ09WRVI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpID4gLTFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVidWZmSW5mb3Muc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVEZWJ1ZmZUeXBlKHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHQucHJvdG90eXBlLmhhc0RlYnVmZiA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVidWZmVHlwZU1hcC5oYXModCk7XHJcbiAgICB9O1xyXG4gICAgdC5wcm90b3R5cGUudHJ5UmVjb3ZlclNwZWVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRlYnVmZlR5cGVNYXAuaGFzKG8uQURTT1JCKSkge1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRlYnVmZlR5cGVNYXAuaGFzKG8uQkFDSykpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5kZWJ1ZmZJbmZvcy5maW5kKGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQudHlwZSA9PT0gby5CQUNLO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzU3RvcGluZyA9ICEwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm94eUVuZW15LnZlbG9jaXR5LnggPSB0LmRpci54O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm94eUVuZW15LnZlbG9jaXR5LnkgPSB0LmRpci55O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm94eUVuZW15LnNwZWVkID0gdGhpcy5iYWNrU3BlZWQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlYnVmZlR5cGVNYXAuaGFzKG8uRlJFRVpFKSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWJ1ZmZUeXBlTWFwLmhhcyhvLlNUVU4pIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlYnVmZlR5cGVNYXAuaGFzKG8uUEFSQUxZU0lTKSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWJ1ZmZUeXBlTWFwLmhhcyhvLlJFQ09WRVIpXHJcbiAgICAgICAgICAgICAgICAgICAgPyAoKHRoaXMuaXNTdG9waW5nID0gITApLCAodGhpcy5wcm94eUVuZW15LnNwZWVkID0gMCkpXHJcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmRlYnVmZlR5cGVNYXAuaGFzKG8uU0xPVylcclxuICAgICAgICAgICAgICAgICAgICA/ICgodGhpcy5wcm94eUVuZW15LnZlbG9jaXR5LnggPSAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnByb3h5RW5lbXkudmVsb2NpdHkueSA9IC0xKSxcclxuICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnByb3h5RW5lbXkuc3BlZWQgPSB0aGlzLmluaXRTcGVlZCAqICgxICsgdGhpcy5zbG93U3BlZWRBZGQpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmlzU3RvcGluZyA9ICExKSlcclxuICAgICAgICAgICAgICAgICAgICA6ICgodGhpcy5wcm94eUVuZW15LnZlbG9jaXR5LnggPSAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnByb3h5RW5lbXkudmVsb2NpdHkueSA9IC0xKSxcclxuICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnByb3h5RW5lbXkuc3BlZWQgPSB0aGlzLmluaXRTcGVlZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAodGhpcy5pc1N0b3BpbmcgPSAhMSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm94eUVuZW15LmVuZERlYnVmZkFuaW0oby5TVE9QX0FOSU0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0LnByb3RvdHlwZS5wcm9jY2Vzc0V4cGlyZWREdWZmID0gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICB2YXIgZSA9IDA7XHJcbiAgICAgICAgdmFyIGkgPSB0aGlzLmRlYnVmZkluZm9zLmxlbmd0aDtcclxuICAgICAgICBmb3IgKHZhciBuID0gMDsgbiA8IGk7IG4rKykge1xyXG4gICAgICAgICAgICB2YXIgcyA9IHRoaXMuZGVidWZmSW5mb3Muc2hpZnQoKTtcclxuICAgICAgICAgICAgcy50aW1lTGVmdCAtPSB0O1xyXG4gICAgICAgICAgICBpZiAocy50aW1lTGVmdCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHMudHlwZSA9PT0gby5BTExfQVRLX0FERCAmJiAoZSArPSBzLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVidWZmSW5mb3MucHVzaChzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHRoaXMuZGVidWZmVHlwZU1hcC5nZXQocy50eXBlKSAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgciA8PSAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gKHRoaXMuZGVidWZmVHlwZU1hcC5kZWxldGUocy50eXBlKSwgdGhpcy5kZWxldGVEZWJ1ZmZUeXBlKHMudHlwZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5kZWJ1ZmZUeXBlTWFwLnNldChzLnR5cGUsIHIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYWxsRGFtYWdlID0gZTtcclxuICAgIH07XHJcbiAgICB0LnByb3RvdHlwZS5kZWxldGVEZWJ1ZmZUeXBlID0gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICB0ID09PSBvLlNUVU5cclxuICAgICAgICAgICAgPyAodGhpcy5kZWJ1ZmZUeXBlTWFwLmRlbGV0ZShvLlNUVU4pLCB0aGlzLnByb3h5RW5lbXkuZW5kRGVidWZmQW5pbShvLlNUVU4pLCB0aGlzLnRyeVJlY292ZXJTcGVlZCgpKVxyXG4gICAgICAgICAgICA6IHQgPT09IG8uU0xPV1xyXG4gICAgICAgICAgICA/ICh0aGlzLmRlYnVmZlR5cGVNYXAuZGVsZXRlKG8uU0xPVyksIHRoaXMudHJ5UmVjb3ZlclNwZWVkKCkpXHJcbiAgICAgICAgICAgIDogdCA9PT0gby5CVVJOXHJcbiAgICAgICAgICAgID8gKHRoaXMuZGVidWZmVHlwZU1hcC5kZWxldGUoby5CVVJOKSwgdGhpcy5wcm94eUVuZW15LmVuZERlYnVmZkFuaW0oby5CVVJOKSlcclxuICAgICAgICAgICAgOiB0ID09PSBvLkJBQ0tcclxuICAgICAgICAgICAgPyAoKHRoaXMuYmFja1NwZWVkID0gMTUwKSwgdGhpcy5kZWJ1ZmZUeXBlTWFwLmRlbGV0ZShvLkJBQ0spLCB0aGlzLnRyeVJlY292ZXJTcGVlZCgpKVxyXG4gICAgICAgICAgICA6IHQgPT09IG8uRlJFRVpFXHJcbiAgICAgICAgICAgID8gKHRoaXMuZGVidWZmVHlwZU1hcC5kZWxldGUoby5GUkVFWkUpLCB0aGlzLnByb3h5RW5lbXkuZW5kRGVidWZmQW5pbShvLkZSRUVaRSksIHRoaXMudHJ5UmVjb3ZlclNwZWVkKCkpXHJcbiAgICAgICAgICAgIDogdCA9PT0gby5QQVJBTFlTSVNcclxuICAgICAgICAgICAgPyAodGhpcy5kZWJ1ZmZUeXBlTWFwLmRlbGV0ZShvLlBBUkFMWVNJUyksXHJcbiAgICAgICAgICAgICAgdGhpcy5wcm94eUVuZW15LmVuZERlYnVmZkFuaW0oby5QQVJBTFlTSVMpLFxyXG4gICAgICAgICAgICAgIHRoaXMudHJ5UmVjb3ZlclNwZWVkKCkpXHJcbiAgICAgICAgICAgIDogdCA9PT0gby5BTExfQVRLX0FERFxyXG4gICAgICAgICAgICA/IHRoaXMuZGVidWZmVHlwZU1hcC5kZWxldGUoby5BTExfQVRLX0FERClcclxuICAgICAgICAgICAgOiB0ID09PSBvLlJFQ09WRVJcclxuICAgICAgICAgICAgPyAodGhpcy5kZWJ1ZmZUeXBlTWFwLmRlbGV0ZShvLlJFQ09WRVIpLCB0aGlzLnByb3h5RW5lbXkuZW5kRGVidWZmQW5pbShvLlJFQ09WRVIpLCB0aGlzLnRyeVJlY292ZXJTcGVlZCgpKVxyXG4gICAgICAgICAgICA6IHQgPT09IG8uQURTT1JCXHJcbiAgICAgICAgICAgID8gKHRoaXMuZGVidWZmVHlwZU1hcC5kZWxldGUoby5BRFNPUkIpLCB0aGlzLnRyeVJlY292ZXJTcGVlZCgpKVxyXG4gICAgICAgICAgICA6IHQgPT09IG8uRk9SQklEX1JFQ09WRVIgJiYgdGhpcy5kZWJ1ZmZUeXBlTWFwLmRlbGV0ZShvLkFEU09SQik7XHJcbiAgICB9O1xyXG4gICAgdC5wcm90b3R5cGUudXBkYXRlRiA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzRGllKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvY2Nlc3NFeHBpcmVkRHVmZih0KTtcclxuICAgICAgICAgICAgdGhpcy5kZWJ1ZmZpbnRlcnZhbFRpbWVMZWZ0IC09IHQ7XHJcbiAgICAgICAgICAgIHZhciBlID0gMDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmRlYnVmZkluZm9zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXMuZGVidWZmSW5mb3NbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAobi50eXBlID09PSBvLkJVUk4pIHtcclxuICAgICAgICAgICAgICAgICAgICBlICs9IG4udmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKDAgIT09IGUgJiYgdGhpcy5kZWJ1ZmZpbnRlcnZhbFRpbWVMZWZ0IDw9IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVidWZmaW50ZXJ2YWxUaW1lTGVmdCA9IHRoaXMuZGVidWZmaW50ZXJ2YWxUaW1lO1xyXG4gICAgICAgICAgICAgICAgdmFyIGEgPSAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuc2tpbGxJbmZvLmdldFNraWxsQnlJZCgyMyk7XHJcbiAgICAgICAgICAgICAgICBhICYmIGEudGhlcm1vYmFyaWNFbmVteUJvb21SYW5nZSA+IDBcclxuICAgICAgICAgICAgICAgICAgICA/IHRoaXMucHJveHlFbmVteS5zdWZmZXJBdGsoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNraWxsU3BlY2lhbGl0eXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGF0azogZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBidWxsZXRCdWZmOiAkYmFzZUJ1bGxldC5CdWxsZXRCdWZmLmJ1cm5fYm9vbVxyXG4gICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMucHJveHlFbmVteS5zdWZmZXJBdHRhY2soLTEsIGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiB0O1xyXG59KSgpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBsO1xyXG4iXX0=