{"version":3,"sources":["assets\\game_script\\scripts\\MotionTrail.js"],"names":["o","r","x","y","dis","cos","sin","a","cc","_decorator","l","ccclass","c","property","u","playOnFocus","d","menu","p","t","e","apply","arguments","atlas","_spriteFrame","_isActive","_isWorldXY","offset","v2","_length","_headWidth","_tailWidth","_headOpacity","_tailOpacity","renderData","xyOffset","uvOffset","colorOffset","step","joints","cascadeScale","visibleScale","__extends","Object","defineProperty","prototype","get","set","updateSpriteFrame","updateUV","enumerable","configurable","enabled","updateActive","resetPos","Math","max","updateLength","updateIndice","updateWidth","node","_renderFlag","RenderFlow","FLAG_OPACITY_COLOR","_resetAssembler","_assembler","Assembler","updateRenderData","updateXY","bind","updateColor","update","setVertsDirty","init","RenderData","getVfmt","i","_elements","length","bytes","n","_attr2el","a_position","a_uv0","a_color","onLoad","sys","isNative","director","once","Director","EVENT_AFTER_DRAW","on","Node","EventType","SCALE_CHANGED","updateVisibleScale","onDestroy","off","updateCascadeScale","createBuffer","Float32Array","Uint16Array","updateMesh","fillBuffers","vDatas","iDatas","_meshBuffer","s","request","byteOffset","_vData","subarray","_iData","indiceOffset","vertexOffset","getMaterial","Material","getBuiltinMaterial","define","setProperty","getTexture","_parent","scaleX","scaleY","_worldMatrix","m","sqrt","f","h","g","_","k","v","b","w","A","S","fitXY","_updateWorldMatrix","Mat4","invert","fitUV","_texture","width","height","_rect","_rotated","color","_val","uintVDatas","__decorate","type","SpriteAtlas","serializable","readonly","SpriteFrame","Integer","min","slide","RenderComponent","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar r = function () {\r\n    this.x = 0;\r\n    this.y = 0;\r\n    this.dis = 0;\r\n    this.cos = 0;\r\n    this.sin = 0;\r\n};\r\nvar a = cc._decorator;\r\nvar l = a.ccclass;\r\nvar c = a.property;\r\nvar u = a.playOnFocus;\r\nvar d = a.menu;\r\nvar p = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.atlas = null;\r\n        e._spriteFrame = null;\r\n        e._isActive = !0;\r\n        e._isWorldXY = !0;\r\n        e.offset = cc.v2(0, 0);\r\n        e._length = 20;\r\n        e._headWidth = 100;\r\n        e._tailWidth = 0;\r\n        e._headOpacity = 255;\r\n        e._tailOpacity = 0;\r\n        e.renderData = null;\r\n        e.xyOffset = 1e8;\r\n        e.uvOffset = 1e8;\r\n        e.colorOffset = 1e8;\r\n        e.step = 0;\r\n        e.joints = [];\r\n        e.cascadeScale = cc.v2(1, 1);\r\n        e.visibleScale = cc.v2(1, 1);\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    Object.defineProperty(e.prototype, \"spriteFrame\", {\r\n        get: function () {\r\n            return this._spriteFrame;\r\n        },\r\n        set: function (t) {\r\n            this._spriteFrame = t;\r\n            this.updateSpriteFrame();\r\n            this.updateUV();\r\n        },\r\n        enumerable: !1,\r\n        configurable: !0\r\n    });\r\n    Object.defineProperty(e.prototype, \"isActive\", {\r\n        get: function () {\r\n            return this._isActive;\r\n        },\r\n        set: function (t) {\r\n            this._isActive = this.enabled = t;\r\n            this.updateActive();\r\n        },\r\n        enumerable: !1,\r\n        configurable: !0\r\n    });\r\n    Object.defineProperty(e.prototype, \"isWorldXY\", {\r\n        get: function () {\r\n            return this._isWorldXY;\r\n        },\r\n        set: function (t) {\r\n            this._isWorldXY = t;\r\n            this.resetPos();\r\n        },\r\n        enumerable: !1,\r\n        configurable: !0\r\n    });\r\n    Object.defineProperty(e.prototype, \"length\", {\r\n        get: function () {\r\n            return this._length;\r\n        },\r\n        set: function (t) {\r\n            this._length = Math.max(t, 2);\r\n            this.updateLength();\r\n            this.updateIndice();\r\n            this.updateUV();\r\n            this.updateWidth();\r\n            this.resetPos();\r\n            this.node._renderFlag |= cc.RenderFlow.FLAG_OPACITY_COLOR;\r\n        },\r\n        enumerable: !1,\r\n        configurable: !0\r\n    });\r\n    Object.defineProperty(e.prototype, \"headWidth\", {\r\n        get: function () {\r\n            return this._headWidth;\r\n        },\r\n        set: function (t) {\r\n            this._headWidth = Math.max(t, 0);\r\n            this.updateWidth();\r\n        },\r\n        enumerable: !1,\r\n        configurable: !0\r\n    });\r\n    Object.defineProperty(e.prototype, \"tailWidth\", {\r\n        get: function () {\r\n            return this._tailWidth;\r\n        },\r\n        set: function (t) {\r\n            this._tailWidth = Math.max(t, 0);\r\n            this.updateWidth();\r\n        },\r\n        enumerable: !1,\r\n        configurable: !0\r\n    });\r\n    Object.defineProperty(e.prototype, \"headOpacity\", {\r\n        get: function () {\r\n            return this._headOpacity;\r\n        },\r\n        set: function (t) {\r\n            this._headOpacity = t;\r\n            this.node._renderFlag |= cc.RenderFlow.FLAG_OPACITY_COLOR;\r\n        },\r\n        enumerable: !1,\r\n        configurable: !0\r\n    });\r\n    Object.defineProperty(e.prototype, \"tailOpacity\", {\r\n        get: function () {\r\n            return this._tailOpacity;\r\n        },\r\n        set: function (t) {\r\n            this._tailOpacity = t;\r\n            this.node._renderFlag |= cc.RenderFlow.FLAG_OPACITY_COLOR;\r\n        },\r\n        enumerable: !1,\r\n        configurable: !0\r\n    });\r\n    e.prototype._resetAssembler = function () {\r\n        var t = (this._assembler = new cc.Assembler());\r\n        t.updateRenderData = this.updateXY.bind(this);\r\n        t.updateColor = this.updateColor.bind(this);\r\n        this.update = this.setVertsDirty;\r\n        t.init(this);\r\n        this.renderData = new cc.RenderData();\r\n        this.renderData.init(t);\r\n        var e = t.getVfmt();\r\n        var i = e._elements;\r\n        for (var o = i.length - 1; o > -1; this.step += i[o--].bytes >> 2) {}\r\n        var n = e._attr2el;\r\n        this.xyOffset = n.a_position.offset >> 2;\r\n        this.uvOffset = n.a_uv0.offset >> 2;\r\n        this.colorOffset = n.a_color.offset >> 2;\r\n    };\r\n    e.prototype.onLoad = function () {\r\n        this.updateSpriteFrame();\r\n        this.updateLength();\r\n        this.updateIndice();\r\n        this.updateUV();\r\n        this.updateWidth();\r\n        this.updateActive();\r\n        if (cc.sys.isNative) {\r\n            cc.director.once(cc.Director.EVENT_AFTER_DRAW, this.updateColor, this);\r\n        }\r\n        this.node.on(cc.Node.EventType.SCALE_CHANGED, this.updateVisibleScale, this);\r\n    };\r\n    e.prototype.onDestroy = function () {\r\n        this.node.off(cc.Node.EventType.SCALE_CHANGED, this.updateVisibleScale, this);\r\n    };\r\n    e.prototype.updateActive = function () {\r\n        if (this._isActive) {\r\n            this.updateCascadeScale();\r\n            this.updateVisibleScale();\r\n            this.resetPos();\r\n        }\r\n    };\r\n    e.prototype.createBuffer = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = t - 2;\r\n        }\r\n        var i = new Float32Array(this.step * t);\r\n        var o = new Uint16Array(3 * e);\r\n        this.renderData.updateMesh(0, i, o);\r\n    };\r\n    e.prototype.fillBuffers = function (t, e) {\r\n        var i = this.renderData.vDatas[0];\r\n        var o = this.renderData.iDatas[0];\r\n        var n = e._meshBuffer;\r\n        var s = n.request(i.length, o.length);\r\n        var r = s.byteOffset >> 2;\r\n        var a = n._vData;\r\n        i.length + r > a.length ? a.set(i.subarray(0, a.length - r), r) : a.set(i, r);\r\n        var l = n._iData;\r\n        var c = s.indiceOffset;\r\n        var u = s.vertexOffset;\r\n        var d = 0;\r\n        for (var p = o.length; d < p; l[c++] = u + o[d++]) {}\r\n    };\r\n    e.prototype.updateSpriteFrame = function () {\r\n        var t = this._spriteFrame;\r\n        this._assembler.fillBuffers = t ? this.fillBuffers.bind(this) : function () {};\r\n        var e = this.getMaterial(0) || cc.Material.getBuiltinMaterial(\"2d-sprite\");\r\n        e.define(\"USE_TEXTURE\", !0);\r\n        e.setProperty(\"texture\", t ? t.getTexture() : null);\r\n    };\r\n    e.prototype.updateCascadeScale = function () {\r\n        var t = this.node;\r\n        var e = 1;\r\n        for (var i = 1; null !== t._parent; ) {\r\n            e *= (t = t._parent).scaleX;\r\n            i *= t.scaleY;\r\n        }\r\n        this.cascadeScale.x = e;\r\n        this.cascadeScale.y = i;\r\n    };\r\n    e.prototype.updateVisibleScale = function () {\r\n        this.visibleScale.x = this.cascadeScale.x * this.node.scaleX;\r\n        this.visibleScale.y = this.cascadeScale.y * this.node.scaleY;\r\n    };\r\n    e.prototype.updateXY = function () {\r\n        var t = this.node;\r\n        var e = this.joints;\r\n        for (var i = this._length - 1; i > 0; --i) {\r\n            var o = e[i];\r\n            var n = e[i - 1];\r\n            o.x = n.x;\r\n            o.y = n.y;\r\n            o.sin = n.sin;\r\n            o.cos = n.cos;\r\n        }\r\n        var s = e[0];\r\n        var r = e[1];\r\n        var a = this.visibleScale.x;\r\n        var l = this.visibleScale.y;\r\n        if (this._isWorldXY) {\r\n            var c = t._worldMatrix.m;\r\n            s.x = this.offset.x * a + c[12];\r\n            s.y = this.offset.y * l + c[13];\r\n        } else {\r\n            s.x = this.offset.x * t.scaleX + t.x;\r\n            s.y = this.offset.y * t.scaleY + t.y;\r\n        }\r\n        var u = r.y - s.y;\r\n        var d = r.x - s.x;\r\n        var p = Math.sqrt(u * u + d * d);\r\n        s.sin = u / p;\r\n        s.cos = d / p;\r\n        var f = this.renderData.vDatas[0];\r\n        var h = 0;\r\n        var m = 0;\r\n        var y = 1;\r\n        var g = 1;\r\n        if (!this._isWorldXY) {\r\n            h = t.x;\r\n            m = t.y;\r\n            y = this.cascadeScale.x;\r\n            g = this.cascadeScale.y;\r\n        }\r\n        var _ = 0;\r\n        var k = this.step;\r\n        var v = 0;\r\n        var b = 0;\r\n        var w = 0;\r\n        var A = 0;\r\n        for (var S = ((i = 0), this._length - 1); i < S; ++i) {\r\n            s = e[i];\r\n            r = e[i + 1];\r\n            v = (s.x - h) * y;\r\n            b = (s.y - m) * g;\r\n            w = s.dis * a * s.sin;\r\n            A = s.dis * l * s.cos;\r\n            f[_] = v + w;\r\n            f[_ + 1] = b - A;\r\n            f[(_ += k)] = v - w;\r\n            f[_ + 1] = b + A;\r\n            _ += k;\r\n        }\r\n        v = (r.x - h) * y;\r\n        b = (r.y - m) * g;\r\n        w = r.dis * a * s.sin;\r\n        A = r.dis * l * s.cos;\r\n        f[_] = v + w;\r\n        f[_ + 1] = b - A;\r\n        f[(_ += k)] = v - w;\r\n        f[_ + 1] = b + A;\r\n        this.fitXY(f);\r\n    };\r\n    e.prototype.resetPos = function () {\r\n        var t = this.offset.x;\r\n        var e = this.offset.y;\r\n        var i = this.node;\r\n        if (this._isWorldXY) {\r\n            var o = i._worldMatrix.m;\r\n            i._updateWorldMatrix();\r\n            t += o[12];\r\n            e += o[13];\r\n        } else {\r\n            t += i.x;\r\n            e += i.y;\r\n        }\r\n        var n = this._length - 1;\r\n        for (var s = this.joints; n > -1; --n) {\r\n            s[n].x = t;\r\n            s[n].y = e;\r\n        }\r\n        var r = this.renderData.vDatas[0];\r\n        var a = ((n = this.xyOffset), r.length);\r\n        for (var l = this.step; n < a; n += l) {\r\n            r[n] = t;\r\n            r[n + 1] = e;\r\n        }\r\n        this.fitXY(r);\r\n    };\r\n    e.prototype.fitXY = function (t) {\r\n        if (cc.sys.isNative) {\r\n            this.node._updateWorldMatrix();\r\n            var e = cc.Mat4.invert(new cc.Mat4(), this.node._worldMatrix).m;\r\n            var i = e[0];\r\n            var o = e[1];\r\n            var n = e[4];\r\n            var s = e[5];\r\n            var r = 0;\r\n            var a = 0;\r\n            if (this._isWorldXY) {\r\n                r = e[12];\r\n                a = e[13];\r\n            }\r\n            var l = this.xyOffset;\r\n            for (var c = t.length; l < c; l += this.step) {\r\n                var u = t[l];\r\n                var d = t[l + 1];\r\n                t[l] = i * u + n * d + r;\r\n                t[l + 1] = o * u + s * d + a;\r\n            }\r\n        } else {\r\n            if (!this._isWorldXY) {\r\n                var p = this.node._worldMatrix.m;\r\n                r = p[12];\r\n                a = p[13];\r\n                l = this.xyOffset;\r\n                for (c = t.length; l < c; l += this.step) {\r\n                    t[l] = t[l] + r;\r\n                    t[l + 1] = t[l + 1] + a;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    e.prototype.updateUV = function () {\r\n        var t = this.renderData.vDatas[0];\r\n        var e = this.step;\r\n        var i = 1 / (this.joints.length - 1);\r\n        var o = this.uvOffset;\r\n        var n = 0;\r\n        for (var s = t.length; o < s; o += e, ++n) {\r\n            t[o] = 1 & n;\r\n            t[o + 1] = 1 - i * (n >> 1);\r\n        }\r\n        this.fitUV(t);\r\n    };\r\n    e.prototype.fitUV = function (t) {\r\n        var e = this._spriteFrame;\r\n        if (null !== e) {\r\n            var i = e._texture.width;\r\n            var o = e._texture.height;\r\n            var n = e._rect;\r\n            if (e._rotated) {\r\n                var s = this.uvOffset;\r\n                var r = 0;\r\n                var a = t.length;\r\n                for (var l = this.step; s < a; s += l, ++r) {\r\n                    var c = t[s];\r\n                    t[s] = ((1 - t[s + 1]) * n.height + n.x) / i;\r\n                    t[s + 1] = (c * n.width + n.y) / o;\r\n                }\r\n            } else {\r\n                s = this.uvOffset;\r\n                r = 0;\r\n                a = t.length;\r\n                for (l = this.step; s < a; s += l, ++r) {\r\n                    t[s] = (t[s] * n.width + n.x) / i;\r\n                    t[s + 1] = (t[s + 1] * n.height + n.y) / o;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    e.prototype.updateColor = function () {\r\n        var t = this._length;\r\n        var e = this._headOpacity;\r\n        var i = (e - this._tailOpacity) / (t - 1);\r\n        var o = this.node.color.a / 255;\r\n        var n = 16777215 & this.node.color._val;\r\n        var s = this.renderData.uintVDatas[0];\r\n        var r = 0;\r\n        var a = this.colorOffset;\r\n        for (var l = this.step; r < t; ++r) {\r\n            var c = (((e - i * r) * o) << 24) | n;\r\n            s[a] = c;\r\n            s[(a += l)] = c;\r\n            a += l;\r\n        }\r\n    };\r\n    e.prototype.updateIndice = function () {\r\n        var t = this.renderData.iDatas[0];\r\n        var e = 0;\r\n        var i = 0;\r\n        for (var o = t.length; e < o; ++i) {\r\n            t[e++] = i;\r\n            t[e++] = i + 1;\r\n            t[e++] = i + 2;\r\n        }\r\n    };\r\n    e.prototype.updateLength = function () {\r\n        var t = this._length;\r\n        var e = 0;\r\n        for (var i = (this.joints = []); e < t; i[e++] = new r()) {}\r\n        this.createBuffer(t << 1);\r\n    };\r\n    e.prototype.updateWidth = function () {\r\n        var t = this._length;\r\n        var e = 0.5 * this._headWidth;\r\n        var i = (e - 0.5 * this._tailWidth) / (t - 1);\r\n        var o = 0;\r\n        for (var n = this.joints; o < t; n[o].dis = e - i * o++) {}\r\n    };\r\n    __decorate(\r\n        [\r\n            c({\r\n                type: cc.SpriteAtlas,\r\n                serializable: !1,\r\n                readonly: !0\r\n            })\r\n        ],\r\n        e.prototype,\r\n        \"atlas\",\r\n        void 0\r\n    );\r\n    __decorate([c], e.prototype, \"_spriteFrame\", void 0);\r\n    __decorate(\r\n        [\r\n            c({\r\n                type: cc.SpriteFrame\r\n            })\r\n        ],\r\n        e.prototype,\r\n        \"spriteFrame\",\r\n        null\r\n    );\r\n    __decorate([c], e.prototype, \"_isActive\", void 0);\r\n    __decorate([c({})], e.prototype, \"isActive\", null);\r\n    __decorate([c], e.prototype, \"_isWorldXY\", void 0);\r\n    __decorate([c({})], e.prototype, \"isWorldXY\", null);\r\n    __decorate([c({})], e.prototype, \"offset\", void 0);\r\n    __decorate([c], e.prototype, \"_length\", void 0);\r\n    __decorate(\r\n        [\r\n            c({\r\n                type: cc.Integer\r\n            })\r\n        ],\r\n        e.prototype,\r\n        \"length\",\r\n        null\r\n    );\r\n    __decorate([c], e.prototype, \"_headWidth\", void 0);\r\n    __decorate([c({})], e.prototype, \"headWidth\", null);\r\n    __decorate([c], e.prototype, \"_tailWidth\", void 0);\r\n    __decorate([c({})], e.prototype, \"tailWidth\", null);\r\n    __decorate([c], e.prototype, \"_headOpacity\", void 0);\r\n    __decorate(\r\n        [\r\n            c({\r\n                type: cc.Integer,\r\n                min: 0,\r\n                max: 255,\r\n                slide: !0\r\n            })\r\n        ],\r\n        e.prototype,\r\n        \"headOpacity\",\r\n        null\r\n    );\r\n    __decorate([c], e.prototype, \"_tailOpacity\", void 0);\r\n    __decorate(\r\n        [\r\n            c({\r\n                type: cc.Integer,\r\n                min: 0,\r\n                max: 255,\r\n                slide: !0\r\n            })\r\n        ],\r\n        e.prototype,\r\n        \"tailOpacity\",\r\n        null\r\n    );\r\n    return __decorate([l, u, d(\"自定义组件/MotionTrail\")], e);\r\n})(cc.RenderComponent);\r\nexports.default = p;\r\n"]}