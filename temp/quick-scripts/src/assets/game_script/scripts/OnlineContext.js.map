{"version":3,"sources":["assets\\game_script\\scripts\\OnlineContext.js"],"names":["$countDownUtil","require","$storageUtil","$util","$configContext","$localName","l","t","onlineRecord","StorageUtil","getItem","ONLINE_RECORD","Object","defineProperty","get","instance","enumerable","configurable","prototype","init","isToday","day","gain","time","CountDownUtil","currTime","setInterval","refresh","Date","now","hasRedDot","onlineConfigs","length","e","getTime","hasGain","id","setItem","setRecrodGain","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var $countDownUtil = require(\"./CountDownUtil\");\r\nvar $storageUtil = require(\"./StorageUtil\");\r\nvar $util = require(\"./Util\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $localName = require(\"./LocalName\");\r\nvar l = (function () {\r\n    function t() {\r\n        this.onlineRecord = null;\r\n        this.onlineRecord = $storageUtil.StorageUtil.getItem($localName.default.ONLINE_RECORD, this.onlineRecord);\r\n    }\r\n    Object.defineProperty(t, \"Ins\", {\r\n        get: function () {\r\n            if (!t.instance) {\r\n                t.instance = new t();\r\n            }\r\n            return t.instance;\r\n        },\r\n        enumerable: !1,\r\n        configurable: !0\r\n    });\r\n    t.prototype.init = function () {\r\n        var t = this;\r\n        if (!(this.onlineRecord && $util.default.isToday(this.onlineRecord.day))) {\r\n            this.onlineRecord = {\r\n                gain: [],\r\n                time: 0,\r\n                day: $countDownUtil.CountDownUtil.currTime\r\n            };\r\n        }\r\n        setInterval(function () {\r\n            t.refresh();\r\n            $countDownUtil.CountDownUtil.currTime = Date.now();\r\n        }, 1e3);\r\n    };\r\n    t.prototype.hasRedDot = function () {\r\n        for (var t = 0; t < $configContext.default.instance.onlineConfigs.length; t++) {\r\n            var e = $configContext.default.instance.onlineConfigs[t];\r\n            if (this.getTime() >= e.time && !this.hasGain(e.id)) {\r\n                return !0;\r\n            }\r\n        }\r\n        return !1;\r\n    };\r\n    t.prototype.refresh = function () {\r\n        this.onlineRecord.time++;\r\n        $storageUtil.StorageUtil.setItem($localName.default.ONLINE_RECORD, this.onlineRecord);\r\n    };\r\n    t.prototype.hasGain = function (t) {\r\n        return !!this.onlineRecord.gain[t - 1];\r\n    };\r\n    t.prototype.setRecrodGain = function (t) {\r\n        this.onlineRecord.gain[t - 1] = !0;\r\n        $storageUtil.StorageUtil.setItem($localName.default.ONLINE_RECORD, this.onlineRecord);\r\n    };\r\n    t.prototype.getTime = function () {\r\n        return this.onlineRecord.time;\r\n    };\r\n    return t;\r\n})();\r\nexports.default = l;\r\n"]}