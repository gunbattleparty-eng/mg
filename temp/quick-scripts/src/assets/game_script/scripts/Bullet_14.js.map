{"version":3,"sources":["assets\\game_script\\scripts\\Bullet_14.js"],"names":["o","$object","require","$remoteAudio","$countDownUtil","$globalParam","$gameContext","$gameSkillInfo","$enemyStatus","$baseBullet","h","cc","_decorator","m","ccclass","y","property","t","e","apply","arguments","buttleType","BulletType","pulse_laser","leftTime","attackAtks","Set","isSweep","step","currStep","__extends","prototype","initButtle","i","call","instance","playLoopEffect","clear","atk","skillParam","skillAtk","Skill4Param","FINAL","pulseLaserSweepCount","pulseLaserTime","speed","setAngle","pulseLaserWidthAdd","setScale","v3","onTrigger","object","Trigger","enter","has","add","pulseLaserSlowTime","type","EnemyDebuffType","SLOW","timeLeft","value","pulseLaserSlowAdd","sufferDebuff","pulseLaserBack","n","BACK","s","pulseLaserEnemyAtkAddParam","length","a","c","ALL_ATK_ADD","stay","CountDownUtil","time","getLastAtkTime","pulseLaserAtkInterval","ins","gameRatio","setLastAtkTime","pulseLaserEnemySplit","sufferAtk","id","skillId","skillSpecialitys","bulletBuff","BulletBuff","not_split","updateFrame","isGamePuase","getAngle","removeSelf","stopLoopEffect","__decorate","exports"],"mappings":";;;;;;AAAA,IAAIA,CAAJ;;AACA,IAAIC,OAAO,GAAGC,OAAO,CAAC,UAAD,CAArB;;AACA,IAAIC,YAAY,GAAGD,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAIE,cAAc,GAAGF,OAAO,CAAC,iBAAD,CAA5B;;AACA,IAAIG,YAAY,GAAGH,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAII,YAAY,GAAGJ,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAIK,cAAc,GAAGL,OAAO,CAAC,iBAAD,CAA5B;;AACA,IAAIM,YAAY,GAAGN,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAIO,WAAW,GAAGP,OAAO,CAAC,cAAD,CAAzB;;AACA,IAAIQ,CAAC,GAAGC,EAAE,CAACC,UAAX;AACA,IAAIC,CAAC,GAAGH,CAAC,CAACI,OAAV;AACA,IAAIC,CAAC,IACAL,CAAC,CAACM,QAAF,EACA,UAAUC,CAAV,EAAa;EACV,SAASC,CAAT,GAAa;IACT,IAAIA,CAAC,GAAI,SAASD,CAAT,IAAcA,CAAC,CAACE,KAAF,CAAQ,IAAR,EAAcC,SAAd,CAAf,IAA4C,IAApD;IACAF,CAAC,CAACG,UAAF,GAAeZ,WAAW,CAACa,UAAZ,CAAuBC,WAAtC;IACAL,CAAC,CAACM,QAAF,GAAa,CAAb;IACAN,CAAC,CAACO,UAAF,GAAe,IAAIC,GAAJ,EAAf;IACAR,CAAC,CAACS,OAAF,GAAY,CAAC,CAAb;IACAT,CAAC,CAACU,IAAF,GAAS,CAAT;IACAV,CAAC,CAACW,QAAF,GAAa,CAAb;IACA,OAAOX,CAAP;EACH;;EACDY,SAAS,CAACZ,CAAD,EAAID,CAAJ,CAAT;;EACAC,CAAC,CAACa,SAAF,CAAYC,UAAZ,GAAyB,UAAUd,CAAV,EAAae,CAAb,EAAgB;IACrChB,CAAC,CAACc,SAAF,CAAYC,UAAZ,CAAuBE,IAAvB,CAA4B,IAA5B,EAAkChB,CAAlC,EAAqCe,CAArC;IACA9B,YAAY,WAAZ,CAAqBgC,QAArB,CAA8BC,cAA9B,CAA6C,OAA7C;IACA,KAAKX,UAAL,CAAgBY,KAAhB;IACA,KAAKR,QAAL,GAAgB,CAAhB;IACA,KAAKS,GAAL,GAAW,KAAKC,UAAL,CAAgBC,QAAhB,CAAyBjC,cAAc,CAACkC,WAAf,CAA2BC,KAApD,CAAX;IACA,KAAKd,IAAL,GAAY,KAAKD,OAAL,GAAe,KAAKY,UAAL,CAAgBI,oBAA/B,GAAsD,CAAlE;IACA,KAAKnB,QAAL,GAAgB,KAAKe,UAAL,CAAgBK,cAAhB,GAAiC,KAAKhB,IAAtD;IACA,KAAKiB,KAAL,GAAc,MAAM,KAAKjB,IAAZ,GAAoB,KAAKJ,QAAtC;IACA,KAAKsB,QAAL,CAAc,EAAd;IACA,IAAI9C,CAAC,GAAG,KAAK2B,OAAL,GAAe,CAAf,GAAmB,KAAKY,UAAL,CAAgBQ,kBAA3C;IACA,KAAKC,QAAL,CAAcrC,EAAE,CAACsC,EAAH,CAAM,CAAN,EAASjD,CAAT,CAAd;EACH,CAZD;;EAaAkB,CAAC,CAACa,SAAF,CAAYmB,SAAZ,GAAwB,UAAUjC,CAAV,EAAaC,CAAb,EAAgB;IACpC,IAAIe,CAAC,GAAGhB,CAAC,CAACkC,MAAV;;IACA,IAAIjC,CAAC,KAAKjB,OAAO,CAACmD,OAAR,CAAgBC,KAA1B,EAAiC;MAC7B,IAAI,KAAK5B,UAAL,CAAgB6B,GAAhB,CAAoBrB,CAApB,CAAJ,EAA4B;QACxB;MACH;;MACD,KAAKR,UAAL,CAAgB8B,GAAhB,CAAoBtB,CAApB;;MACA,IAAI,KAAKM,UAAL,CAAgBiB,kBAAhB,GAAqC,CAAzC,EAA4C;QACxC,IAAIxD,CAAC,GAAG;UACJyD,IAAI,EAAEjD,YAAY,CAACkD,eAAb,CAA6BC,IAD/B;UAEJC,QAAQ,EAAE,KAAKrB,UAAL,CAAgBiB,kBAFtB;UAGJK,KAAK,EAAE,KAAKtB,UAAL,CAAgBuB;QAHnB,CAAR;QAKA7B,CAAC,CAAC8B,YAAF,CAAe/D,CAAf;MACH;;MACD,IAAI,CAAC,KAAK2B,OAAV,EAAmB;QACf,IAAI,KAAKY,UAAL,CAAgByB,cAAhB,GAAiC,CAArC,EAAwC;UACpC,IAAIC,CAAC,GAAG;YACJR,IAAI,EAAEjD,YAAY,CAACkD,eAAb,CAA6BQ,IAD/B;YAEJN,QAAQ,EAAE,CAAC,CAFP;YAGJC,KAAK,EAAE,KAAKtB,UAAL,CAAgByB;UAHnB,CAAR;UAKA/B,CAAC,CAAC8B,YAAF,CAAeE,CAAf;QACH;;QACD,KAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK5B,UAAL,CAAgB6B,0BAAhB,CAA2CC,MAA/D,EAAuEF,CAAC,EAAxE,EAA4E;UACxE,IAAIG,CAAC,GAAG,KAAK/B,UAAL,CAAgB6B,0BAAxB;UACA,IAAIG,CAAC,GAAG;YACJd,IAAI,EAAEjD,YAAY,CAACkD,eAAb,CAA6Bc,WAD/B;YAEJZ,QAAQ,EAAEU,CAAC,CAACH,CAAD,CAAD,CAAK,CAAL,CAFN;YAGJN,KAAK,EAAES,CAAC,CAACH,CAAD,CAAD,CAAK,CAAL;UAHH,CAAR;UAKAlC,CAAC,CAAC8B,YAAF,CAAeQ,CAAf;QACH;MACJ;IACJ,CAhCD,MAgCO;MACH,IAAIrD,CAAC,KAAKjB,OAAO,CAACmD,OAAR,CAAgBqB,IAA1B,EAAgC;QAC5B,IACIrE,cAAc,CAACsE,aAAf,CAA6BC,IAA7B,GAAoC1C,CAAC,CAAC2C,cAAF,CAAiB,CAAjB,CAApC,IACA,KAAKrC,UAAL,CAAgBsC,qBAAhB,CAAsCtE,cAAc,CAACkC,WAAf,CAA2BC,KAAjE,IACIpC,YAAY,WAAZ,CAAqBwE,GAArB,CAAyBC,SAHjC,EAIE;UACE;QACH;;QACD9C,CAAC,CAAC+C,cAAF,CAAiB,CAAjB,EAAoB5E,cAAc,CAACsE,aAAf,CAA6BC,IAAjD;QACA,KAAKpC,UAAL,CAAgB0C,oBAAhB,GACMhD,CAAC,CAACiD,SAAF,CAAY;UACRC,EAAE,EAAE,KAAKC,OADD;UAERC,gBAAgB,EAAE,KAAKA,gBAFf;UAGR/C,GAAG,EAAE,KAAKA,GAHF;UAIRgD,UAAU,EAAE7E,WAAW,CAAC8E,UAAZ,CAAuBC;QAJ3B,CAAZ,CADN,GAOMvD,CAAC,CAACiD,SAAF,CAAY;UACRC,EAAE,EAAE,KAAKC,OADD;UAERC,gBAAgB,EAAE,KAAKA,gBAFf;UAGR/C,GAAG,EAAE,KAAKA;QAHF,CAAZ,CAPN;MAYH;IACJ;EACJ,CA1DD;;EA2DApB,CAAC,CAACa,SAAF,CAAY0D,WAAZ,GAA0B,UAAUxE,CAAV,EAAa;IACnC,IAAI,CAACZ,YAAY,WAAZ,CAAqBqF,WAA1B,EAAuC;MACnC,KAAKlE,QAAL,IAAiBP,CAAjB;MACA,KAAKU,OAAL,GACM,KAAKE,QAAL,IAAiB,KAAKD,IAAtB,KACC,MAAM,KAAKC,QAAX,IACM,KAAKiB,QAAL,CAAc,KAAK6C,QAAL,KAAkB,KAAK9C,KAAL,GAAa5B,CAA7C,GACD,KAAK0E,QAAL,MAAmB,GAAnB,KAA2B,MAAM,KAAK/D,IAAX,GAAkB,KAAKgE,UAAL,EAAlB,GAAuC,KAAK/D,QAAL,GAAgB,CAAlF,CAFL,IAGK,MAAM,KAAKA,QAAX,KACC,KAAKiB,QAAL,CAAc,KAAK6C,QAAL,KAAkB,KAAK9C,KAAL,GAAa5B,CAA7C,GACD,KAAK0E,QAAL,MAAmB,EAAnB,IAAyB,KAAKC,UAAL,EAFzB,CAJN,CADN,GAQM,KAAKpE,QAAL,IAAiB,CAAjB,KAAuBrB,YAAY,WAAZ,CAAqBgC,QAArB,CAA8B0D,cAA9B,CAA6C,OAA7C,GAAuD,KAAKD,UAAL,EAA9E,CARN;IASH;EACJ,CAbD;;EAcA,OAAOE,UAAU,CAAC,CAACjF,CAAD,CAAD,EAAMK,CAAN,CAAjB;AACH,CAnGD,CAmGGT,WAAW,WAnGd,CAFC,CAAL;AAsGAsF,OAAO,WAAP,GAAkBhF,CAAlB","sourceRoot":"/","sourcesContent":["var o;\r\nvar $object = require(\"./Object\");\r\nvar $remoteAudio = require(\"./RemoteAudio\");\r\nvar $countDownUtil = require(\"./CountDownUtil\");\r\nvar $globalParam = require(\"./GlobalParam\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $gameSkillInfo = require(\"./GameSkillInfo\");\r\nvar $enemyStatus = require(\"./EnemyStatus\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar h = cc._decorator;\r\nvar m = h.ccclass;\r\nvar y =\r\n    (h.property,\r\n    (function (t) {\r\n        function e() {\r\n            var e = (null !== t && t.apply(this, arguments)) || this;\r\n            e.buttleType = $baseBullet.BulletType.pulse_laser;\r\n            e.leftTime = 0;\r\n            e.attackAtks = new Set();\r\n            e.isSweep = !1;\r\n            e.step = 2;\r\n            e.currStep = 1;\r\n            return e;\r\n        }\r\n        __extends(e, t);\r\n        e.prototype.initButtle = function (e, i) {\r\n            t.prototype.initButtle.call(this, e, i);\r\n            $remoteAudio.default.instance.playLoopEffect(\"laser\");\r\n            this.attackAtks.clear();\r\n            this.currStep = 1;\r\n            this.atk = this.skillParam.skillAtk[$gameSkillInfo.Skill4Param.FINAL];\r\n            this.step = this.isSweep ? this.skillParam.pulseLaserSweepCount : 1;\r\n            this.leftTime = this.skillParam.pulseLaserTime * this.step;\r\n            this.speed = (135 * this.step) / this.leftTime;\r\n            this.setAngle(30);\r\n            var o = this.isSweep ? 1 : this.skillParam.pulseLaserWidthAdd;\r\n            this.setScale(cc.v3(1, o));\r\n        };\r\n        e.prototype.onTrigger = function (t, e) {\r\n            var i = t.object;\r\n            if (e === $object.Trigger.enter) {\r\n                if (this.attackAtks.has(i)) {\r\n                    return;\r\n                }\r\n                this.attackAtks.add(i);\r\n                if (this.skillParam.pulseLaserSlowTime > 0) {\r\n                    var o = {\r\n                        type: $enemyStatus.EnemyDebuffType.SLOW,\r\n                        timeLeft: this.skillParam.pulseLaserSlowTime,\r\n                        value: this.skillParam.pulseLaserSlowAdd\r\n                    };\r\n                    i.sufferDebuff(o);\r\n                }\r\n                if (!this.isSweep) {\r\n                    if (this.skillParam.pulseLaserBack > 0) {\r\n                        var n = {\r\n                            type: $enemyStatus.EnemyDebuffType.BACK,\r\n                            timeLeft: -1,\r\n                            value: this.skillParam.pulseLaserBack\r\n                        };\r\n                        i.sufferDebuff(n);\r\n                    }\r\n                    for (var s = 0; s < this.skillParam.pulseLaserEnemyAtkAddParam.length; s++) {\r\n                        var a = this.skillParam.pulseLaserEnemyAtkAddParam;\r\n                        var c = {\r\n                            type: $enemyStatus.EnemyDebuffType.ALL_ATK_ADD,\r\n                            timeLeft: a[s][0],\r\n                            value: a[s][1]\r\n                        };\r\n                        i.sufferDebuff(c);\r\n                    }\r\n                }\r\n            } else {\r\n                if (e === $object.Trigger.stay) {\r\n                    if (\r\n                        $countDownUtil.CountDownUtil.time - i.getLastAtkTime(1) <=\r\n                        this.skillParam.pulseLaserAtkInterval[$gameSkillInfo.Skill4Param.FINAL] /\r\n                            $gameContext.default.ins.gameRatio\r\n                    ) {\r\n                        return;\r\n                    }\r\n                    i.setLastAtkTime(1, $countDownUtil.CountDownUtil.time);\r\n                    this.skillParam.pulseLaserEnemySplit\r\n                        ? i.sufferAtk({\r\n                              id: this.skillId,\r\n                              skillSpecialitys: this.skillSpecialitys,\r\n                              atk: this.atk,\r\n                              bulletBuff: $baseBullet.BulletBuff.not_split\r\n                          })\r\n                        : i.sufferAtk({\r\n                              id: this.skillId,\r\n                              skillSpecialitys: this.skillSpecialitys,\r\n                              atk: this.atk\r\n                          });\r\n                }\r\n            }\r\n        };\r\n        e.prototype.updateFrame = function (t) {\r\n            if (!$globalParam.default.isGamePuase) {\r\n                this.leftTime -= t;\r\n                this.isSweep\r\n                    ? this.currStep <= this.step &&\r\n                      (1 === this.currStep\r\n                          ? (this.setAngle(this.getAngle() + this.speed * t),\r\n                            this.getAngle() >= 165 && (1 === this.step ? this.removeSelf() : (this.currStep = 2)))\r\n                          : 2 === this.currStep &&\r\n                            (this.setAngle(this.getAngle() - this.speed * t),\r\n                            this.getAngle() <= 30 && this.removeSelf()))\r\n                    : this.leftTime <= 0 && ($remoteAudio.default.instance.stopLoopEffect(\"laser\"), this.removeSelf());\r\n            }\r\n        };\r\n        return __decorate([m], e);\r\n    })($baseBullet.default));\r\nexports.default = y;\r\n"]}