
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/WechatAd.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'ebf60KFtjVIsLTNNS46LFFf', 'WechatAd');
// game_script/scripts/WechatAd.js

"use strict";

var o;
exports.WechatAd = void 0;

var $aDConfig = require("./ADConfig");

var $generalAd = require("./GeneralAd");

var $weChatInterstitial = require("./WeChatInterstitial");

var $wechatBanner = require("./WechatBanner");

var $wechatCustomAd = require("./WechatCustomAd");

var $wechatRewardedVideo = require("./WechatRewardedVideo");

var $wechatShare = require("./WechatShare");

var p = function (t) {
  function e() {
    var e = t.call(this) || this;
    e.wechatReward = null;
    e.wechatInterstitial = null;
    e.wechatBanner = null;
    e.wechatShare = null;
    e.customGrids = [];
    e.customIcons = [];
    e.customPatchs = [];
    e.customMoreGame = null;
    e.customInterstitials = [];
    e.customBanner = null;
    e.wechatReward = new $wechatRewardedVideo["default"]();
    e.wechatReward.initAd($aDConfig.ADConfig.wechat.rewarded_video_id);
    e.wechatInterstitial = new $weChatInterstitial["default"]();
    e.wechatInterstitial.initAd($aDConfig.ADConfig.wechat.interstitial_id);
    e.wechatBanner = new $wechatBanner.WechatBanner();
    e.wechatBanner.initAd($aDConfig.ADConfig.wechat.banner_id);

    for (var i = 0; i < $aDConfig.ADConfig.wechat.custom_grids.length; i++) {
      (o = new $wechatCustomAd["default"]()).initAd($aDConfig.ADConfig.wechat.custom_grids[i]);
      e.customGrids.push(o);
    }

    for (i = 0; i < $aDConfig.ADConfig.wechat.custom_icon.length; i++) {
      (o = new $wechatCustomAd["default"]()).initAd($aDConfig.ADConfig.wechat.custom_icon[i]);
      e.customIcons.push(o);
    }

    for (i = 0; i < $aDConfig.ADConfig.wechat.custom_patch.length; i++) {
      (o = new $wechatCustomAd["default"]()).initAd($aDConfig.ADConfig.wechat.custom_patch[i]);
      e.customPatchs.push(o);
    }

    e.customMoreGame = new $wechatCustomAd["default"]();
    e.customMoreGame.setOpenPreLoadCustomAd(e.proccessStyle({
      top: 0.15,
      left: 0.025,
      width: 0.95
    }));
    e.customMoreGame.initAd($aDConfig.ADConfig.wechat.custom_more_game);

    for (i = 0; i < $aDConfig.ADConfig.wechat.custom_interstitial.length; i++) {
      var o;
      (o = new $wechatCustomAd["default"]()).initAd($aDConfig.ADConfig.wechat.custom_interstitial[i]);
      e.customInterstitials.push(o);
    }

    e.customBanner = new $wechatCustomAd["default"]();
    e.customBanner.initAd($aDConfig.ADConfig.wechat.custom_banner);
    e.wechatShare = new $wechatShare["default"]();
    e.wechatShare.init();
    return e;
  }

  __extends(e, t);

  e.prototype.showRewardedVideo = function (t, e, i) {
    this.wechatReward.showRewardedVideo(t, e, i);
  };

  e.prototype.showInterstitial = function (t, e, i) {
    this.wechatInterstitial.showInterstitial(t, e, i);
  };

  e.prototype.showBanner = function (t, e, i) {
    this.wechatBanner.showBanner(t, e, i);
  };

  e.prototype.forbiddenBanner = function (t) {
    this.wechatBanner.forbidderAd(t);
  };

  e.prototype.hideBanner = function (t) {
    this.wechatBanner.hideAd(t);
  };

  e.prototype.showCustomGrid = function (t, e, i, o, n) {
    t >= this.customGrids.length ? console.warn("模板广告不存在") : (e = this.proccessStyle(e), this.customGrids[t].showCustomAd(e, i, o, n));
  };

  e.prototype.hideCustomGrid = function (t, e) {
    this.customGrids[t].hideAd(e);
  };

  e.prototype.showCustomIcon = function (t, e, i, o, n) {
    t >= this.customIcons.length ? console.warn("模板广告不存在") : (e = this.proccessStyle(e), this.customIcons[t].showCustomAd(e, i, o, n));
  };

  e.prototype.hideCustomIcon = function (t, e) {
    this.customIcons[t].hideAd(e);
  };

  e.prototype.showCustomPatch = function (t, e, i, o, n) {
    t >= this.customPatchs.length ? console.warn("模板广告不存在") : (e = this.proccessStyle(e), this.customPatchs[t].showCustomAd(e, i, o, n));
  };

  e.prototype.hideCustomPatch = function (t, e) {
    this.customPatchs[t].hideAd(e);
  };

  e.prototype.showCustomMoreGame = function (t, e, i, o) {
    t = this.proccessStyle(t);
    this.customMoreGame.showCustomAd(t, e, i, o);
  };

  e.prototype.hideCustomMoreGame = function (t) {
    this.customMoreGame.hideAd(t);
  };

  e.prototype.showCustomInterstitial = function (t, e, i, o, n) {
    t >= this.customInterstitials.length ? console.warn("模板广告不存在") : (e = this.proccessStyle(e), this.customInterstitials[t].showCustomAd(e, i, o, n));
  };

  e.prototype.hideCustomInterstitial = function (t, e) {
    this.customInterstitials[t].hideAd(e);
  };

  e.prototype.showCustomBanner = function (t, e, i, o) {
    t = this.proccessStyle(t);
    this.customBanner.showCustomAd(t, e, i, o);
  };

  e.prototype.forbiddenCustomBanner = function (t) {
    this.customBanner.forbidderAd(t);
  };

  e.prototype.hideCustomBanner = function (t) {
    this.customBanner.hideAd(t);
  };

  e.prototype.share = function (t) {
    this.wechatShare.share(t);
  };

  e.prototype.proccessStyle = function (t) {
    var e = window.wx.getSystemInfoSync();
    var i = e.screenWidth;
    var o = e.screenHeight;

    if (t && t.top && t.top <= 1) {
      t.top = o * t.top;
    }

    if (t && t.left && t.left <= 1) {
      t.left = i * t.left;
    }

    if (t && t.width && t.width <= 1) {
      t.width = i * t.width;
    }

    return t;
  };

  return e;
}($generalAd.GeneralAd);

exports.WechatAd = p;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXFdlY2hhdEFkLmpzIl0sIm5hbWVzIjpbIm8iLCJleHBvcnRzIiwiV2VjaGF0QWQiLCIkYURDb25maWciLCJyZXF1aXJlIiwiJGdlbmVyYWxBZCIsIiR3ZUNoYXRJbnRlcnN0aXRpYWwiLCIkd2VjaGF0QmFubmVyIiwiJHdlY2hhdEN1c3RvbUFkIiwiJHdlY2hhdFJld2FyZGVkVmlkZW8iLCIkd2VjaGF0U2hhcmUiLCJwIiwidCIsImUiLCJjYWxsIiwid2VjaGF0UmV3YXJkIiwid2VjaGF0SW50ZXJzdGl0aWFsIiwid2VjaGF0QmFubmVyIiwid2VjaGF0U2hhcmUiLCJjdXN0b21HcmlkcyIsImN1c3RvbUljb25zIiwiY3VzdG9tUGF0Y2hzIiwiY3VzdG9tTW9yZUdhbWUiLCJjdXN0b21JbnRlcnN0aXRpYWxzIiwiY3VzdG9tQmFubmVyIiwiaW5pdEFkIiwiQURDb25maWciLCJ3ZWNoYXQiLCJyZXdhcmRlZF92aWRlb19pZCIsImludGVyc3RpdGlhbF9pZCIsIldlY2hhdEJhbm5lciIsImJhbm5lcl9pZCIsImkiLCJjdXN0b21fZ3JpZHMiLCJsZW5ndGgiLCJwdXNoIiwiY3VzdG9tX2ljb24iLCJjdXN0b21fcGF0Y2giLCJzZXRPcGVuUHJlTG9hZEN1c3RvbUFkIiwicHJvY2Nlc3NTdHlsZSIsInRvcCIsImxlZnQiLCJ3aWR0aCIsImN1c3RvbV9tb3JlX2dhbWUiLCJjdXN0b21faW50ZXJzdGl0aWFsIiwiY3VzdG9tX2Jhbm5lciIsImluaXQiLCJfX2V4dGVuZHMiLCJwcm90b3R5cGUiLCJzaG93UmV3YXJkZWRWaWRlbyIsInNob3dJbnRlcnN0aXRpYWwiLCJzaG93QmFubmVyIiwiZm9yYmlkZGVuQmFubmVyIiwiZm9yYmlkZGVyQWQiLCJoaWRlQmFubmVyIiwiaGlkZUFkIiwic2hvd0N1c3RvbUdyaWQiLCJuIiwiY29uc29sZSIsIndhcm4iLCJzaG93Q3VzdG9tQWQiLCJoaWRlQ3VzdG9tR3JpZCIsInNob3dDdXN0b21JY29uIiwiaGlkZUN1c3RvbUljb24iLCJzaG93Q3VzdG9tUGF0Y2giLCJoaWRlQ3VzdG9tUGF0Y2giLCJzaG93Q3VzdG9tTW9yZUdhbWUiLCJoaWRlQ3VzdG9tTW9yZUdhbWUiLCJzaG93Q3VzdG9tSW50ZXJzdGl0aWFsIiwiaGlkZUN1c3RvbUludGVyc3RpdGlhbCIsInNob3dDdXN0b21CYW5uZXIiLCJmb3JiaWRkZW5DdXN0b21CYW5uZXIiLCJoaWRlQ3VzdG9tQmFubmVyIiwic2hhcmUiLCJ3aW5kb3ciLCJ3eCIsImdldFN5c3RlbUluZm9TeW5jIiwic2NyZWVuV2lkdGgiLCJzY3JlZW5IZWlnaHQiLCJHZW5lcmFsQWQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsQ0FBSjtBQUNBQyxPQUFPLENBQUNDLFFBQVIsR0FBbUIsS0FBSyxDQUF4Qjs7QUFDQSxJQUFJQyxTQUFTLEdBQUdDLE9BQU8sQ0FBQyxZQUFELENBQXZCOztBQUNBLElBQUlDLFVBQVUsR0FBR0QsT0FBTyxDQUFDLGFBQUQsQ0FBeEI7O0FBQ0EsSUFBSUUsbUJBQW1CLEdBQUdGLE9BQU8sQ0FBQyxzQkFBRCxDQUFqQzs7QUFDQSxJQUFJRyxhQUFhLEdBQUdILE9BQU8sQ0FBQyxnQkFBRCxDQUEzQjs7QUFDQSxJQUFJSSxlQUFlLEdBQUdKLE9BQU8sQ0FBQyxrQkFBRCxDQUE3Qjs7QUFDQSxJQUFJSyxvQkFBb0IsR0FBR0wsT0FBTyxDQUFDLHVCQUFELENBQWxDOztBQUNBLElBQUlNLFlBQVksR0FBR04sT0FBTyxDQUFDLGVBQUQsQ0FBMUI7O0FBQ0EsSUFBSU8sQ0FBQyxHQUFJLFVBQVVDLENBQVYsRUFBYTtFQUNsQixTQUFTQyxDQUFULEdBQWE7SUFDVCxJQUFJQSxDQUFDLEdBQUdELENBQUMsQ0FBQ0UsSUFBRixDQUFPLElBQVAsS0FBZ0IsSUFBeEI7SUFDQUQsQ0FBQyxDQUFDRSxZQUFGLEdBQWlCLElBQWpCO0lBQ0FGLENBQUMsQ0FBQ0csa0JBQUYsR0FBdUIsSUFBdkI7SUFDQUgs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UjtJQUNBLElBQUk1QyxDQUFDLEdBQUduQixDQUFDLENBQUNnRSxXQUFWO0lBQ0EsSUFBSTdFLENBQUMsR0FBR2EsQ0FBQyxDQUFDaUUsWUFBVjs7SUFDQSxJQUFJbEUsQ0FBQyxJQUFJQSxDQUFDLENBQUM0QixHQUFQLElBQWM1QixDQUFDLENBQUM0QixHQUFGLElBQVMsQ0FBM0IsRUFBOEI7TUFDMUI1QixDQUFDLENBQUM0QixHQUFGLEdBQVF4QyxDQUFDLEdBQUdZLENBQUMsQ0FBQzRCLEdBQWQ7SUFDSDs7SUFDRCxJQUFJNUIsQ0FBQyxJQUFJQSxDQUFDLENBQUM2QixJQUFQLElBQWU3QixDQUFDLENBQUM2QixJQUFGLElBQVUsQ0FBN0IsRUFBZ0M7TUFDNUI3QixDQUFDLENBQUM2QixJQUFGLEdBQVNULENBQUMsR0FBR3BCLENBQUMsQ0FBQzZCLElBQWY7SUFDSDs7SUFDRCxJQUFJN0IsQ0FBQyxJQUFJQSxDQUFDLENBQUM4QixLQUFQLElBQWdCOUIsQ0FBQyxDQUFDOEIsS0FBRixJQUFXLENBQS9CLEVBQWtDO01BQzlCOUIsQ0FBQyxDQUFDOEIsS0FBRixHQUFVVixDQUFDLEdBQUdwQixDQUFDLENBQUM4QixLQUFoQjtJQUNIOztJQUNELE9BQU85QixDQUFQO0VBQ0gsQ0FkRDs7RUFlQSxPQUFPQyxDQUFQO0FBQ0gsQ0F2SU8sQ0F1SUxSLFVBQVUsQ0FBQzBFLFNBdklOLENBQVI7O0FBd0lBOUUsT0FBTyxDQUFDQyxRQUFSLEdBQW1CUyxDQUFuQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIG87XHJcbmV4cG9ydHMuV2VjaGF0QWQgPSB2b2lkIDA7XHJcbnZhciAkYURDb25maWcgPSByZXF1aXJlKFwiLi9BRENvbmZpZ1wiKTtcclxudmFyICRnZW5lcmFsQWQgPSByZXF1aXJlKFwiLi9HZW5lcmFsQWRcIik7XHJcbnZhciAkd2VDaGF0SW50ZXJzdGl0aWFsID0gcmVxdWlyZShcIi4vV2VDaGF0SW50ZXJzdGl0aWFsXCIpO1xyXG52YXIgJHdlY2hhdEJhbm5lciA9IHJlcXVpcmUoXCIuL1dlY2hhdEJhbm5lclwiKTtcclxudmFyICR3ZWNoYXRDdXN0b21BZCA9IHJlcXVpcmUoXCIuL1dlY2hhdEN1c3RvbUFkXCIpO1xyXG52YXIgJHdlY2hhdFJld2FyZGVkVmlkZW8gPSByZXF1aXJlKFwiLi9XZWNoYXRSZXdhcmRlZFZpZGVvXCIpO1xyXG52YXIgJHdlY2hhdFNoYXJlID0gcmVxdWlyZShcIi4vV2VjaGF0U2hhcmVcIik7XHJcbnZhciBwID0gKGZ1bmN0aW9uICh0KSB7XHJcbiAgICBmdW5jdGlvbiBlKCkge1xyXG4gICAgICAgIHZhciBlID0gdC5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgZS53ZWNoYXRSZXdhcmQgPSBudWxsO1xyXG4gICAgICAgIGUud2VjaGF0SW50ZXJzdGl0aWFsID0gbnVsbDtcclxuICAgICAgICBlLndlY2hhdEJhbm5lciA9IG51bGw7XHJcbiAgICAgICAgZS53ZWNoYXRTaGFyZSA9IG51bGw7XHJcbiAgICAgICAgZS5jdXN0b21HcmlkcyA9IFtdO1xyXG4gICAgICAgIGUuY3VzdG9tSWNvbnMgPSBbXTtcclxuICAgICAgICBlLmN1c3RvbVBhdGNocyA9IFtdO1xyXG4gICAgICAgIGUuY3VzdG9tTW9yZUdhbWUgPSBudWxsO1xyXG4gICAgICAgIGUuY3VzdG9tSW50ZXJzdGl0aWFscyA9IFtdO1xyXG4gICAgICAgIGUuY3VzdG9tQmFubmVyID0gbnVsbDtcclxuICAgICAgICBlLndlY2hhdFJld2FyZCA9IG5ldyAkd2VjaGF0UmV3YXJkZWRWaWRlby5kZWZhdWx0KCk7XHJcbiAgICAgICAgZS53ZWNoYXRSZXdhcmQuaW5pdEFkKCRhRENvbmZpZy5BRENvbmZpZy53ZWNoYXQucmV3YXJkZWRfdmlkZW9faWQpO1xyXG4gICAgICAgIGUud2VjaGF0SW50ZXJzdGl0aWFsID0gbmV3ICR3ZUNoYXRJbnRlcnN0aXRpYWwuZGVmYXVsdCgpO1xyXG4gICAgICAgIGUud2VjaGF0SW50ZXJzdGl0aWFsLmluaXRBZCgkYURDb25maWcuQURDb25maWcud2VjaGF0LmludGVyc3RpdGlhbF9pZCk7XHJcbiAgICAgICAgZS53ZWNoYXRCYW5uZXIgPSBuZXcgJHdlY2hhdEJhbm5lci5XZWNoYXRCYW5uZXIoKTtcclxuICAgICAgICBlLndlY2hhdEJhbm5lci5pbml0QWQoJGFEQ29uZmlnLkFEQ29uZmlnLndlY2hhdC5iYW5uZXJfaWQpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJGFEQ29uZmlnLkFEQ29uZmlnLndlY2hhdC5jdXN0b21fZ3JpZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgKG8gPSBuZXcgJHdlY2hhdEN1c3RvbUFkLmRlZmF1bHQoKSkuaW5pdEFkKCRhRENvbmZpZy5BRENvbmZpZy53ZWNoYXQuY3VzdG9tX2dyaWRzW2ldKTtcclxuICAgICAgICAgICAgZS5jdXN0b21Hcmlkcy5wdXNoKG8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgJGFEQ29uZmlnLkFEQ29uZmlnLndlY2hhdC5jdXN0b21faWNvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAobyA9IG5ldyAkd2VjaGF0Q3VzdG9tQWQuZGVmYXVsdCgpKS5pbml0QWQoJGFEQ29uZmlnLkFEQ29uZmlnLndlY2hhdC5jdXN0b21faWNvbltpXSk7XHJcbiAgICAgICAgICAgIGUuY3VzdG9tSWNvbnMucHVzaChvKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8ICRhRENvbmZpZy5BRENvbmZpZy53ZWNoYXQuY3VzdG9tX3BhdGNoLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIChvID0gbmV3ICR3ZWNoYXRDdXN0b21BZC5kZWZhdWx0KCkpLmluaXRBZCgkYURDb25maWcuQURDb25maWcud2VjaGF0LmN1c3RvbV9wYXRjaFtpXSk7XHJcbiAgICAgICAgICAgIGUuY3VzdG9tUGF0Y2hzLnB1c2gobyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGUuY3VzdG9tTW9yZUdhbWUgPSBuZXcgJHdlY2hhdEN1c3RvbUFkLmRlZmF1bHQoKTtcclxuICAgICAgICBlLmN1c3RvbU1vcmVHYW1lLnNldE9wZW5QcmVMb2FkQ3VzdG9tQWQoXHJcbiAgICAgICAgICAgIGUucHJvY2Nlc3NTdHlsZSh7XHJcbiAgICAgICAgICAgICAgICB0b3A6IDAuMTUsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiAwLjAyNSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAwLjk1XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICBlLmN1c3RvbU1vcmVHYW1lLmluaXRBZCgkYURDb25maWcuQURDb25maWcud2VjaGF0LmN1c3RvbV9tb3JlX2dhbWUpO1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCAkYURDb25maWcuQURDb25maWcud2VjaGF0LmN1c3RvbV9pbnRlcnN0aXRpYWwubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIG87XHJcbiAgICAgICAgICAgIChvID0gbmV3ICR3ZWNoYXRDdXN0b21BZC5kZWZhdWx0KCkpLmluaXRBZCgkYURDb25maWcuQURDb25maWcud2VjaGF0LmN1c3RvbV9pbnRlcnN0aXRpYWxbaV0pO1xyXG4gICAgICAgICAgICBlLmN1c3RvbUludGVyc3RpdGlhbHMucHVzaChvKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZS5jdXN0b21CYW5uZXIgPSBuZXcgJHdlY2hhdEN1c3RvbUFkLmRlZmF1bHQoKTtcclxuICAgICAgICBlLmN1c3RvbUJhbm5lci5pbml0QWQoJGFEQ29uZmlnLkFEQ29uZmlnLndlY2hhdC5jdXN0b21fYmFubmVyKTtcclxuICAgICAgICBlLndlY2hhdFNoYXJlID0gbmV3ICR3ZWNoYXRTaGFyZS5kZWZhdWx0KCk7XHJcbiAgICAgICAgZS53ZWNoYXRTaGFyZS5pbml0KCk7XHJcbiAgICAgICAgcmV0dXJuIGU7XHJcbiAgICB9XHJcbiAgICBfX2V4dGVuZHMoZSwgdCk7XHJcbiAgICBlLnByb3RvdHlwZS5zaG93UmV3YXJkZWRWaWRlbyA9IGZ1bmN0aW9uICh0LCBlLCBpKSB7XHJcbiAgICAgICAgdGhpcy53ZWNoYXRSZXdhcmQuc2hvd1Jld2FyZGVkVmlkZW8odCwgZSwgaSk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuc2hvd0ludGVyc3RpdGlhbCA9IGZ1bmN0aW9uICh0LCBlLCBpKSB7XHJcbiAgICAgICAgdGhpcy53ZWNoYXRJbnRlcnN0aXRpYWwuc2hvd0ludGVyc3RpdGlhbCh0LCBlLCBpKTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5zaG93QmFubmVyID0gZnVuY3Rpb24gKHQsIGUsIGkpIHtcclxuICAgICAgICB0aGlzLndlY2hhdEJhbm5lci5zaG93QmFubmVyKHQsIGUsIGkpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmZvcmJpZGRlbkJhbm5lciA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdGhpcy53ZWNoYXRCYW5uZXIuZm9yYmlkZGVyQWQodCk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuaGlkZUJhbm5lciA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdGhpcy53ZWNoYXRCYW5uZXIuaGlkZUFkKHQpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLnNob3dDdXN0b21HcmlkID0gZnVuY3Rpb24gKHQsIGUsIGksIG8sIG4pIHtcclxuICAgICAgICB0ID49IHRoaXMuY3VzdG9tR3JpZHMubGVuZ3RoXHJcbiAgICAgICAgICAgID8gY29uc29sZS53YXJuKFwi5qih5p2/5bm/5ZGK5LiN5a2Y5ZyoXCIpXHJcbiAgICAgICAgICAgIDogKChlID0gdGhpcy5wcm9jY2Vzc1N0eWxlKGUpKSwgdGhpcy5jdXN0b21Hcmlkc1t0XS5zaG93Q3VzdG9tQWQoZSwgaSwgbywgbikpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmhpZGVDdXN0b21HcmlkID0gZnVuY3Rpb24gKHQsIGUpIHtcclxuICAgICAgICB0aGlzLmN1c3RvbUdyaWRzW3RdLmhpZGVBZChlKTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5zaG93Q3VzdG9tSWNvbiA9IGZ1bmN0aW9uICh0LCBlLCBpLCBvLCBuKSB7XHJcbiAgICAgICAgdCA+PSB0aGlzLmN1c3RvbUljb25zLmxlbmd0aFxyXG4gICAgICAgICAgICA/IGNvbnNvbGUud2FybihcIuaooeadv+W5v+WRiuS4jeWtmOWcqFwiKVxyXG4gICAgICAgICAgICA6ICgoZSA9IHRoaXMucHJvY2Nlc3NTdHlsZShlKSksIHRoaXMuY3VzdG9tSWNvbnNbdF0uc2hvd0N1c3RvbUFkKGUsIGksIG8sIG4pKTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5oaWRlQ3VzdG9tSWNvbiA9IGZ1bmN0aW9uICh0LCBlKSB7XHJcbiAgICAgICAgdGhpcy5jdXN0b21JY29uc1t0XS5oaWRlQWQoZSk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuc2hvd0N1c3RvbVBhdGNoID0gZnVuY3Rpb24gKHQsIGUsIGksIG8sIG4pIHtcclxuICAgICAgICB0ID49IHRoaXMuY3VzdG9tUGF0Y2hzLmxlbmd0aFxyXG4gICAgICAgICAgICA/IGNvbnNvbGUud2FybihcIuaooeadv+W5v+WRiuS4jeWtmOWcqFwiKVxyXG4gICAgICAgICAgICA6ICgoZSA9IHRoaXMucHJvY2Nlc3NTdHlsZShlKSksIHRoaXMuY3VzdG9tUGF0Y2hzW3RdLnNob3dDdXN0b21BZChlLCBpLCBvLCBuKSk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuaGlkZUN1c3RvbVBhdGNoID0gZnVuY3Rpb24gKHQsIGUpIHtcclxuICAgICAgICB0aGlzLmN1c3RvbVBhdGNoc1t0XS5oaWRlQWQoZSk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuc2hvd0N1c3RvbU1vcmVHYW1lID0gZnVuY3Rpb24gKHQsIGUsIGksIG8pIHtcclxuICAgICAgICB0ID0gdGhpcy5wcm9jY2Vzc1N0eWxlKHQpO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tTW9yZUdhbWUuc2hvd0N1c3RvbUFkKHQsIGUsIGksIG8pO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmhpZGVDdXN0b21Nb3JlR2FtZSA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdGhpcy5jdXN0b21Nb3JlR2FtZS5oaWRlQWQodCk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuc2hvd0N1c3RvbUludGVyc3RpdGlhbCA9IGZ1bmN0aW9uICh0LCBlLCBpLCBvLCBuKSB7XHJcbiAgICAgICAgdCA+PSB0aGlzLmN1c3RvbUludGVyc3RpdGlhbHMubGVuZ3RoXHJcbiAgICAgICAgICAgID8gY29uc29sZS53YXJuKFwi5qih5p2/5bm/5ZGK5LiN5a2Y5ZyoXCIpXHJcbiAgICAgICAgICAgIDogKChlID0gdGhpcy5wcm9jY2Vzc1N0eWxlKGUpKSwgdGhpcy5jdXN0b21JbnRlcnN0aXRpYWxzW3RdLnNob3dDdXN0b21BZChlLCBpLCBvLCBuKSk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuaGlkZUN1c3RvbUludGVyc3RpdGlhbCA9IGZ1bmN0aW9uICh0LCBlKSB7XHJcbiAgICAgICAgdGhpcy5jdXN0b21JbnRlcnN0aXRpYWxzW3RdLmhpZGVBZChlKTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5zaG93Q3VzdG9tQmFubmVyID0gZnVuY3Rpb24gKHQsIGUsIGksIG8pIHtcclxuICAgICAgICB0ID0gdGhpcy5wcm9jY2Vzc1N0eWxlKHQpO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tQmFubmVyLnNob3dDdXN0b21BZCh0LCBlLCBpLCBvKTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5mb3JiaWRkZW5DdXN0b21CYW5uZXIgPSBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIHRoaXMuY3VzdG9tQmFubmVyLmZvcmJpZGRlckFkKHQpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmhpZGVDdXN0b21CYW5uZXIgPSBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIHRoaXMuY3VzdG9tQmFubmVyLmhpZGVBZCh0KTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5zaGFyZSA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdGhpcy53ZWNoYXRTaGFyZS5zaGFyZSh0KTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5wcm9jY2Vzc1N0eWxlID0gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICB2YXIgZSA9IHdpbmRvdy53eC5nZXRTeXN0ZW1JbmZvU3luYygpO1xyXG4gICAgICAgIHZhciBpID0gZS5zY3JlZW5XaWR0aDtcclxuICAgICAgICB2YXIgbyA9IGUuc2NyZWVuSGVpZ2h0O1xyXG4gICAgICAgIGlmICh0ICYmIHQudG9wICYmIHQudG9wIDw9IDEpIHtcclxuICAgICAgICAgICAgdC50b3AgPSBvICogdC50b3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0ICYmIHQubGVmdCAmJiB0LmxlZnQgPD0gMSkge1xyXG4gICAgICAgICAgICB0LmxlZnQgPSBpICogdC5sZWZ0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodCAmJiB0LndpZHRoICYmIHQud2lkdGggPD0gMSkge1xyXG4gICAgICAgICAgICB0LndpZHRoID0gaSAqIHQud2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBlO1xyXG59KSgkZ2VuZXJhbEFkLkdlbmVyYWxBZCk7XHJcbmV4cG9ydHMuV2VjaGF0QWQgPSBwO1xyXG4iXX0=