{"version":3,"sources":["assets\\game_script\\scripts\\Util.js"],"names":["s","t","isJSON","e","JSON","parse","deepCopy","i","n","constructor","Array","r","__values","Object","keys","a","next","done","l","value","error","call","c","isPosOnNodeRect","getBoundingBoxToWorld","contains","isToday","Date","getFullYear","getMonth","getDate","areNodesOverlap","o","containsRect","intersects","startDayTimestamp","toLocaleDateString","getTime","shuffle","length","Math","floor","random","__read","formatDate","toString","dirConverAngle","atan2","y","x","cc","misc","radiansToDegrees","angleConverDir","degreesToRadians","v3","cos","sin","updateMaterialState","getComponent","RenderComponent","dragonBones","ArmatureDisplay","switchGrayMaterial","children","Material","getBuiltinMaterial","MaterialVariant","create","setMaterial","isValid","parent","amend","split","pow","max","objectFormat","parseObject","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var s = (function () {\r\n    function t() {}\r\n    t.isJSON = function (t) {\r\n        if (\"string\" == typeof t) {\r\n            try {\r\n                var e = JSON.parse(t);\r\n                return !(\"object\" != typeof e || !e);\r\n            } catch (t) {\r\n                return !1;\r\n            }\r\n        }\r\n    };\r\n    t.deepCopy = function (e) {\r\n        var i;\r\n        var n;\r\n        if (\"object\" != typeof e) {\r\n            return e;\r\n        }\r\n        var s = e.constructor == Array ? [] : {};\r\n        if (s instanceof Array) {\r\n            try {\r\n                var r = __values(Object.keys(e));\r\n                for (var a = r.next(); !a.done; a = r.next()) {\r\n                    var l = a.value;\r\n                    s[l] = t.deepCopy(e[l]);\r\n                }\r\n            } catch (t) {\r\n                i = {\r\n                    error: t\r\n                };\r\n            } finally {\r\n                try {\r\n                    if (a && !a.done && (n = r.return)) {\r\n                        n.call(r);\r\n                    }\r\n                } finally {\r\n                    if (i) {\r\n                        throw i.error;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            for (var c in e) s[c] = t.deepCopy(e[c]);\r\n        }\r\n        return s;\r\n    };\r\n    t.isPosOnNodeRect = function (t, e) {\r\n        return e.getBoundingBoxToWorld().contains(t);\r\n    };\r\n    t.isToday = function (t) {\r\n        var e = new Date(t);\r\n        var i = new Date();\r\n        return e.getFullYear() === i.getFullYear() && e.getMonth() === i.getMonth() && e.getDate() === i.getDate();\r\n    };\r\n    t.areNodesOverlap = function (t, e, i) {\r\n        if (void 0 === i) {\r\n            i = !1;\r\n        }\r\n        var o = t.getBoundingBoxToWorld();\r\n        var n = e.getBoundingBoxToWorld();\r\n        return i ? o.containsRect(n) : o.intersects(n);\r\n    };\r\n    t.startDayTimestamp = function () {\r\n        return new Date(new Date(new Date().toLocaleDateString()).getTime()).getTime();\r\n    };\r\n    t.shuffle = function (t) {\r\n        var e;\r\n        var i;\r\n        var o = t;\r\n        for (var s = o.length - 1; s > 0; s--) {\r\n            i = Math.floor(Math.random() * (s + 1));\r\n            e = __read([o[i], o[s]], 2);\r\n            o[s] = e[0];\r\n            o[i] = e[1];\r\n        }\r\n        return o;\r\n    };\r\n    t.formatDate = function (t) {\r\n        var e = Math.floor(t / 3600);\r\n        var i = Math.floor((t % 3600) / 60);\r\n        var o = Math.floor(t % 60);\r\n        return [e >= 10 ? e.toString() : \"0\" + e, i >= 10 ? i.toString() : \"0\" + i, o >= 10 ? o.toString() : \"0\" + o];\r\n    };\r\n    t.dirConverAngle = function (t) {\r\n        var e = Math.atan2(t.y, t.x);\r\n        return cc.misc.radiansToDegrees(e);\r\n    };\r\n    t.angleConverDir = function (t) {\r\n        var e = cc.misc.degreesToRadians(t);\r\n        return cc.v3(Math.cos(e), Math.sin(e));\r\n    };\r\n    t.updateMaterialState = function (e, i) {\r\n        var o = e.getComponent(cc.RenderComponent);\r\n        if (o && !e.getComponent(dragonBones.ArmatureDisplay)) {\r\n            t.switchGrayMaterial(i, o);\r\n        }\r\n        for (var n = 0; n < e.children.length; n++) {\r\n            t.updateMaterialState(e.children[n], i);\r\n        }\r\n    };\r\n    t.switchGrayMaterial = function (t, e) {\r\n        var i = null;\r\n        t\r\n            ? ((i = cc.Material.getBuiltinMaterial(\"2d-gray-sprite\")), (i = cc.MaterialVariant.create(i, e)))\r\n            : ((i = cc.Material.getBuiltinMaterial(\"2d-sprite\")), (i = cc.MaterialVariant.create(i, e)));\r\n        e.setMaterial(0, i);\r\n    };\r\n    t.isValid = function (t) {\r\n        return !(!cc.isValid(t) || !t.parent);\r\n    };\r\n    t.amend = function (t, e, i) {\r\n        var o;\r\n        var n;\r\n        var s;\r\n        var r = t.toString();\r\n        var a = e.toString();\r\n        try {\r\n            n = r.split(\".\")[1].length;\r\n        } catch (t) {\r\n            n = 0;\r\n        }\r\n        try {\r\n            s = a.split(\".\")[1].length;\r\n        } catch (t) {\r\n            s = 0;\r\n        }\r\n        var l = Math.pow(10, Math.max(n, s));\r\n        switch (i) {\r\n            case \"+\":\r\n                o = (t * l + e * l) / l;\r\n                break;\r\n            case \"-\":\r\n                o = (t * l - e * l) / l;\r\n                break;\r\n            case \"*\":\r\n                o = (t * l * e * l) / l / l;\r\n                break;\r\n            case \"/\":\r\n                o = (t * l) / (e * l);\r\n        }\r\n        return o;\r\n    };\r\n    t.objectFormat = function (t) {\r\n        var e = \"\";\r\n        for (var i in t) e.length > 0 ? (e += \",\" + i + \"=\" + t[i]) : (e = i + \"=\" + t[i]);\r\n        return e;\r\n    };\r\n    t.parseObject = function (t) {\r\n        if (!t || t.length <= 0) {\r\n            return null;\r\n        }\r\n        var e = {};\r\n        var i = t.split(\",\");\r\n        for (var o = 0; o < i.length; o++) {\r\n            var n = i[o].split(\"=\");\r\n            var s = n[0];\r\n            var r = n[1];\r\n            if (s && r) {\r\n                e[s] = r;\r\n            }\r\n        }\r\n        return e;\r\n    };\r\n    return t;\r\n})();\r\nexports.default = s;\r\n"]}