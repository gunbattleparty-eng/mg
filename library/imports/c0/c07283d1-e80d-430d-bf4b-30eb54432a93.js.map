{"version":3,"sources":["assets\\game_script\\scripts\\WechatRewardedVideo.js"],"names":["o","$uIManager","require","$geService","$baseRewardedVideo","l","window","wx","c","t","e","apply","arguments","_rewardedVideoAd","__extends","prototype","createRewardedVideo","console","log","adUnitId","createRewardedVideoAd","onLoad","_onLoadCallbackRef","onClose","_onCloseCallbackRef","onError","_onErrorCallbackRef","warn","showRewardedVideo","i","n","Date","getTime","_lastCallShowTime","call","_isLoadComplete","show","then","_errorReloadCount","GeService","instance","reportWxAdToGravity","onRewardedVideoShowSuccessHandler","onRewardedVideoShowFailHandler","onRewardedVideoNotLoadHandler","UIManager","showToast","destroyRewardedVideo","offLoad","offClose","offError","destroy","onRewardedVideoLoad","onRewardedVideoClose","onRewardedVideoCloseHandler","isEnded","onRewardedVideoError","onRewardedVideoErrorHandler","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $uIManager = require(\"./UIManager\");\r\nvar $geService = require(\"./GeService\");\r\nvar $baseRewardedVideo = require(\"./BaseRewardedVideo\");\r\nvar l = window.wx;\r\nvar c = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e._rewardedVideoAd = null;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.createRewardedVideo = function () {\r\n        console.log(\"createRewardedVideo\");\r\n        if (this.adUnitId) {\r\n            if (l && l.createRewardedVideoAd) {\r\n                var t = {\r\n                    adUnitId: this.adUnitId\r\n                };\r\n                this._rewardedVideoAd = l.createRewardedVideoAd(t);\r\n                if (this._rewardedVideoAd.onLoad) {\r\n                    this._rewardedVideoAd.onLoad(this._onLoadCallbackRef);\r\n                }\r\n                if (this._rewardedVideoAd.onClose) {\r\n                    this._rewardedVideoAd.onClose(this._onCloseCallbackRef);\r\n                }\r\n                if (this._rewardedVideoAd.onError) {\r\n                    this._rewardedVideoAd.onError(this._onErrorCallbackRef);\r\n                }\r\n            } else {\r\n                console.warn(\"当前平台不支持创建激励视频\");\r\n            }\r\n        } else {\r\n            console.warn(\"激励视频组件创建失败,未配置pos_id\");\r\n        }\r\n    };\r\n    e.prototype.showRewardedVideo = function (e, i, o) {\r\n        var n = this;\r\n        \"\" !== this.adUnitId\r\n            ? new Date().getTime() - this._lastCallShowTime < 2e3\r\n                ? console.warn(\"showRewardedVideo,调用太频繁\")\r\n                : (t.prototype.showRewardedVideo.call(this, e, i, o),\r\n                  this._rewardedVideoAd && this._isLoadComplete\r\n                      ? this._rewardedVideoAd.show &&\r\n                        this._rewardedVideoAd\r\n                            .show()\r\n                            .then(function () {\r\n                                n._errorReloadCount = 0;\r\n                                $geService.GeService.instance.reportWxAdToGravity(n.adUnitId);\r\n                                n.onRewardedVideoShowSuccessHandler();\r\n                            })\r\n                            .catch(function (t) {\r\n                                n.onRewardedVideoShowFailHandler(t);\r\n                            })\r\n                      : this.onRewardedVideoNotLoadHandler())\r\n            : $uIManager.UIManager.instance.showToast(\"暂无广告资源\");\r\n    };\r\n    e.prototype.destroyRewardedVideo = function () {\r\n        t.prototype.destroyRewardedVideo.call(this);\r\n        if (this._rewardedVideoAd) {\r\n            if (this._rewardedVideoAd.offLoad) {\r\n                this._rewardedVideoAd.offLoad(this._onLoadCallbackRef);\r\n            }\r\n            if (this._rewardedVideoAd.offClose) {\r\n                this._rewardedVideoAd.offClose(this._onCloseCallbackRef);\r\n            }\r\n            if (this._rewardedVideoAd.offError) {\r\n                this._rewardedVideoAd.offError(this._onErrorCallbackRef);\r\n            }\r\n            if (this._rewardedVideoAd.destroy) {\r\n                this._rewardedVideoAd.destroy();\r\n            }\r\n            this._rewardedVideoAd = null;\r\n        }\r\n    };\r\n    e.prototype.onRewardedVideoLoad = function () {\r\n        console.log(\"onRewardedVideoLoad\");\r\n        this._isLoadComplete = !0;\r\n    };\r\n    e.prototype.onRewardedVideoClose = function (t) {\r\n        this.onRewardedVideoCloseHandler((t && t.isEnded) || void 0 === t);\r\n    };\r\n    e.prototype.onRewardedVideoError = function (t) {\r\n        this.onRewardedVideoErrorHandler(t);\r\n    };\r\n    return e;\r\n})($baseRewardedVideo.default);\r\nexports.default = c;\r\n"]}