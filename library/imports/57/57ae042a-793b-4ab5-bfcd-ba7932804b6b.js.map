{"version":3,"sources":["assets\\game_script\\scripts\\SkillInfoView.js"],"names":["o","$assetsLoader","require","$assetsMap","$resUtil","$eventManager","$list","$popupManager","$uIManager","$popupView","$remoteAudio","$configContext","$localEventName","$skillContext","$taskContext","$userDataContext","$startView","$coinDiamondView","$skillInfoListItem","A","cc","_decorator","S","ccclass","C","property","I","t","e","apply","arguments","icon","skillNameLabel","levelLabel","descLabel","skillProLayer","skilList","upgradeInfoLayer","btnUpgrade","upgradeAnim","skillId","config","basicConfig","unlockSKillConfigs","coin","books","colors","Color","fromHEX","__extends","prototype","onResetView","uiParam","param","instance","skillConfigsMap","get","basicSkillConfigMap","skillConfigs","filter","unclock_skillgroup","includes","id","numItems","length","loadRes","BundleNames","Public_Res","SpriteFrame","i","isValid","spriteFrame","ResUtil","assignWith","node","getChildByName","getComponent","Sprite","refreshProperty","renderMaterials","addEvent","on","clickUpgrade","removeEvent","off","playAnim","active","playAnimation","once","dragonBones","EventObject","COMPLETE","Ins","getSKillLevel","spend_price","children","Label","string","toString","color","getSkillBookById","playEffectMusic","checkCoin","checkSKillBook","opearCoin","opearSkillBook","setTaskRecord","upgradeSkill","updateAll","send","RENDER_DOT","MenuType","Skill","UIManager","showToast","PopupManager","open","AssetsMap","PopUpBundles","prefabs","assetsList","CoinDiamondView","type","AstType","COIN","renderItem","render","skill_unclocklevel","name","text","forEach","show_attribute","getSKillAtk","n","showPropertyItem","toFixed","parseValue","s","getSkillCD","r","getSkillPenetration","getSkillBoomAtk","a","getBoomRange","l","getSputteringAtk","getSputteringRange","c","getAtkInterval","u","d","getSkillTime","p","f","getBounceCount","h","__decorate","Node","ArmatureDisplay","PopupView","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $list = require(\"./List\");\r\nvar $popupManager = require(\"./PopupManager\");\r\nvar $uIManager = require(\"./UIManager\");\r\nvar $popupView = require(\"./PopupView\");\r\nvar $remoteAudio = require(\"./RemoteAudio\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $skillContext = require(\"./SkillContext\");\r\nvar $taskContext = require(\"./TaskContext\");\r\nvar $userDataContext = require(\"./UserDataContext\");\r\nvar $startView = require(\"./StartView\");\r\nvar $coinDiamondView = require(\"./CoinDiamondView\");\r\nvar $skillInfoListItem = require(\"./SkillInfoListItem\");\r\nvar A = cc._decorator;\r\nvar S = A.ccclass;\r\nvar C = A.property;\r\nvar I = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.icon = null;\r\n        e.skillNameLabel = null;\r\n        e.levelLabel = null;\r\n        e.descLabel = null;\r\n        e.skillProLayer = null;\r\n        e.skilList = null;\r\n        e.upgradeInfoLayer = null;\r\n        e.btnUpgrade = null;\r\n        e.upgradeAnim = null;\r\n        e.skillId = -1;\r\n        e.config = null;\r\n        e.basicConfig = null;\r\n        e.unlockSKillConfigs = [];\r\n        e.coin = 0;\r\n        e.books = 0;\r\n        e.colors = [new cc.Color().fromHEX(\"#13613B\"), new cc.Color().fromHEX(\"#9C2A2E\")];\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.onResetView = function () {\r\n        var t = this;\r\n        this.skillId = this.uiParam.param.skillId;\r\n        this.config = $configContext.default.instance.skillConfigsMap.get(this.skillId);\r\n        this.basicConfig = $configContext.default.instance.basicSkillConfigMap.get(this.skillId);\r\n        this.unlockSKillConfigs = $configContext.default.instance.skillConfigs.filter(function (e) {\r\n            return t.basicConfig.unclock_skillgroup.includes(e.id);\r\n        });\r\n        this.skilList.numItems = this.unlockSKillConfigs.length;\r\n        $assetsLoader.default.instance.loadRes(\r\n            $assetsMap.BundleNames.Public_Res,\r\n            [\"/skills/\" + this.config.icon, \"/skill_book/\" + this.config.icon],\r\n            cc.SpriteFrame,\r\n            null,\r\n            function (e, i) {\r\n                var o = i[0];\r\n                if (o && cc.isValid(t.icon)) {\r\n                    t.icon.spriteFrame = $resUtil.ResUtil.assignWith(o, t.node);\r\n                    t.upgradeInfoLayer.getChildByName(\"skill_icon\").getComponent(cc.Sprite).spriteFrame =\r\n                        $resUtil.ResUtil.assignWith(i[1], t.node);\r\n                }\r\n            }\r\n        );\r\n        this.refreshProperty();\r\n        this.renderMaterials();\r\n    };\r\n    e.prototype.addEvent = function () {\r\n        this.btnUpgrade.on(\"click\", this.clickUpgrade, this);\r\n    };\r\n    e.prototype.removeEvent = function () {\r\n        this.btnUpgrade.off(\"click\", this.clickUpgrade, this);\r\n    };\r\n    e.prototype.playAnim = function () {\r\n        var t = this;\r\n        this.upgradeAnim.node.active = !0;\r\n        this.upgradeAnim.playAnimation(\"stand\", 1);\r\n        this.upgradeAnim.once(\r\n            dragonBones.EventObject.COMPLETE,\r\n            function () {\r\n                t.upgradeAnim.node.active = !1;\r\n            },\r\n            this\r\n        );\r\n    };\r\n    e.prototype.renderMaterials = function () {\r\n        var t = $skillContext.default.Ins.getSKillLevel(this.skillId);\r\n        if (t >= 50) {\r\n            this.upgradeInfoLayer.active = !1;\r\n        } else {\r\n            {\r\n                this.upgradeInfoLayer.active = !0;\r\n                this.coin = this.basicConfig.spend_price[0] * t;\r\n                this.books = this.basicConfig.spend_price[1] * t;\r\n                var e = this.upgradeInfoLayer.getChildByName(\"coin_layer\");\r\n                e.children[0].getComponent(cc.Label).string = $userDataContext.default.Ins.coin.toString();\r\n                e.children[1].getComponent(cc.Label).string = \"/\" + this.coin;\r\n                this.coin < $userDataContext.default.Ins.coin\r\n                    ? (e.children[0].color = this.colors[0])\r\n                    : (e.children[0].color = this.colors[1]);\r\n                var i = this.upgradeInfoLayer.getChildByName(\"materials_layer\");\r\n                i.children[0].getComponent(cc.Label).string = $userDataContext.default.Ins.getSkillBookById(\r\n                    this.skillId\r\n                ).toString();\r\n                i.children[1].getComponent(cc.Label).string = \"/\" + this.books;\r\n                this.books < $userDataContext.default.Ins.getSkillBookById(this.skillId)\r\n                    ? (i.children[0].color = this.colors[0])\r\n                    : (i.children[0].color = this.colors[1]);\r\n            }\r\n        }\r\n    };\r\n    e.prototype.clickUpgrade = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        $userDataContext.default.Ins.checkCoin(-this.coin)\r\n            ? $userDataContext.default.Ins.checkSKillBook(this.skillId, -this.books)\r\n                ? ($remoteAudio.default.instance.playEffectMusic(\"levelup\"),\r\n                  $userDataContext.default.Ins.opearCoin(-this.coin),\r\n                  $userDataContext.default.Ins.opearSkillBook(this.skillId, -this.books),\r\n                  $taskContext.default.Ins.setTaskRecord(5),\r\n                  $skillContext.default.Ins.upgradeSkill(\r\n                      this.skillId,\r\n                      $skillContext.default.Ins.getSKillLevel(this.skillId) + 1\r\n                  ),\r\n                  this.refreshProperty(),\r\n                  this.renderMaterials(),\r\n                  this.skilList.updateAll(),\r\n                  this.playAnim(),\r\n                  $eventManager.default.send($localEventName.default.RENDER_DOT, $startView.MenuType.Skill))\r\n                : $uIManager.UIManager.instance.showToast(\"材料不足\")\r\n            : $popupManager.PopupManager.instance.open(\r\n                  $assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.CoinDiamondView,\r\n                  {\r\n                      type: $coinDiamondView.AstType.COIN\r\n                  }\r\n              );\r\n    };\r\n    e.prototype.renderItem = function (t, e) {\r\n        var i = this.unlockSKillConfigs[e];\r\n        t.getComponent($skillInfoListItem.default).render(i, this.basicConfig.skill_unclocklevel[e]);\r\n    };\r\n    e.prototype.refreshProperty = function () {\r\n        this.skillNameLabel.string = this.basicConfig.name;\r\n        this.levelLabel.string = \"等级:\" + $skillContext.default.Ins.getSKillLevel(this.skillId);\r\n        this.descLabel.string = this.basicConfig.text;\r\n        this.skillProLayer.children.forEach(function (t) {\r\n            return (t.active = !1);\r\n        });\r\n        var t = $skillContext.default.Ins.getSKillLevel(this.skillId);\r\n        t >= 50 ? (t = -1) : t++;\r\n        for (var e = 0; e < this.basicConfig.show_attribute.length; e++) {\r\n            this.skillProLayer.children[e].active = !0;\r\n            var i = this.basicConfig.show_attribute[e];\r\n            if (1 === i) {\r\n                var o = $skillContext.default.Ins.getSKillAtk(this.config);\r\n                var n = 0;\r\n                if (-1 !== t) {\r\n                    n = $skillContext.default.Ins.getSKillAtk(this.config, t) - o;\r\n                }\r\n                this.showPropertyItem(e, \"攻击力\", o.toFixed(0), this.parseValue(n));\r\n            } else {\r\n                if (4 === i) {\r\n                    var s = $skillContext.default.Ins.getSkillCD(this.config);\r\n                    var r = 0;\r\n                    if (-1 !== t) {\r\n                        r = $skillContext.default.Ins.getSkillCD(this.config, t) - s;\r\n                    }\r\n                    this.showPropertyItem(e, \"冷却时间\", s.toFixed(1), this.parseValue(r));\r\n                } else {\r\n                    if (6 === i) {\r\n                        o = $skillContext.default.Ins.getSkillPenetration(this.config);\r\n                        n = 0;\r\n                        -1 !== t && (n = $skillContext.default.Ins.getSkillPenetration(this.config, t) - o);\r\n                        this.showPropertyItem(e, \"穿透次数\", o.toFixed(0), this.parseValue(n));\r\n                    } else {\r\n                        if (7 === i) {\r\n                            o = $skillContext.default.Ins.getSkillBoomAtk(this.config);\r\n                            n = 0;\r\n                            -1 !== t && (n = $skillContext.default.Ins.getSkillBoomAtk(this.config, t) - o);\r\n                            this.showPropertyItem(e, \"爆炸伤害\", o.toFixed(0), this.parseValue(n));\r\n                        } else {\r\n                            if (8 === i) {\r\n                                var a = 100 * $skillContext.default.Ins.getBoomRange(this.config);\r\n                                var l = 0;\r\n                                if (-1 !== t) {\r\n                                    l = 100 * $skillContext.default.Ins.getBoomRange(this.config, t) - a;\r\n                                }\r\n                                this.showPropertyItem(e, \"爆炸范围\", a.toFixed(0), this.parseValue(l));\r\n                            } else {\r\n                                if (9 === i) {\r\n                                    o = $skillContext.default.Ins.getSputteringAtk(this.config);\r\n                                    n = 0;\r\n                                    -1 !== t && (n = $skillContext.default.Ins.getSputteringAtk(this.config, t) - o);\r\n                                    this.showPropertyItem(e, \"溅射伤害\", o.toFixed(0), this.parseValue(n));\r\n                                } else {\r\n                                    if (10 === i) {\r\n                                        a = $skillContext.default.Ins.getSputteringRange(this.config);\r\n                                        l = 0;\r\n                                        -1 !== t &&\r\n                                            (l = $skillContext.default.Ins.getSputteringRange(this.config, t) - a);\r\n                                        this.showPropertyItem(e, \"伤害范围\", a.toFixed(0), this.parseValue(l));\r\n                                    } else {\r\n                                        if (11 === i) {\r\n                                            var c = $skillContext.default.Ins.getAtkInterval(this.config);\r\n                                            var u = 0;\r\n                                            if (-1 !== t) {\r\n                                                u = $skillContext.default.Ins.getAtkInterval(this.config, t) - c;\r\n                                            }\r\n                                            this.showPropertyItem(e, \"伤害间隔\", c.toFixed(1), this.parseValue(u));\r\n                                        } else {\r\n                                            if (12 === i) {\r\n                                                var d = $skillContext.default.Ins.getSkillTime(this.config);\r\n                                                var p = 0;\r\n                                                if (-1 !== t) {\r\n                                                    p = $skillContext.default.Ins.getSkillTime(this.config, t) - p;\r\n                                                }\r\n                                                this.showPropertyItem(e, \"持续时间\", d.toFixed(1), this.parseValue(p));\r\n                                            } else {\r\n                                                if (13 === i) {\r\n                                                    var f = $skillContext.default.Ins.getBounceCount(this.config);\r\n                                                    var h = 0;\r\n                                                    if (-1 !== t) {\r\n                                                        h =\r\n                                                            $skillContext.default.Ins.getBounceCount(this.config, t) -\r\n                                                            f;\r\n                                                    }\r\n                                                    this.showPropertyItem(\r\n                                                        e,\r\n                                                        \"弹射次数\",\r\n                                                        f.toFixed(0),\r\n                                                        this.parseValue(h)\r\n                                                    );\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    e.prototype.parseValue = function (t) {\r\n        return 0 === t ? \"\" : t > 0 ? \"+\" + t.toFixed(1) : t.toFixed(1);\r\n    };\r\n    e.prototype.showPropertyItem = function (t, e, i, o) {\r\n        var n = this.skillProLayer.children[t];\r\n        n.children[0].getComponent(cc.Label).string = e;\r\n        n.children[1].getComponent(cc.Label).string = i;\r\n        n.children[2].getComponent(cc.Label).string = o;\r\n    };\r\n    __decorate([C(cc.Sprite)], e.prototype, \"icon\", void 0);\r\n    __decorate([C(cc.Label)], e.prototype, \"skillNameLabel\", void 0);\r\n    __decorate([C(cc.Label)], e.prototype, \"levelLabel\", void 0);\r\n    __decorate([C(cc.Label)], e.prototype, \"descLabel\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"skillProLayer\", void 0);\r\n    __decorate([C($list.default)], e.prototype, \"skilList\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"upgradeInfoLayer\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"btnUpgrade\", void 0);\r\n    __decorate([C(dragonBones.ArmatureDisplay)], e.prototype, \"upgradeAnim\", void 0);\r\n    return __decorate([S], e);\r\n})($popupView.PopupView);\r\nexports.default = I;\r\n"]}