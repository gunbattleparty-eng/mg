{"version":3,"sources":["assets\\game_script\\scripts\\EventManager.js"],"names":["o","t","on","e","i","events","has","get","push","callback","target","set","once","onceEvents","off","n","s","length","compare","splice","r","send","arguments","a","apply","l","c","remove","removeAll","clear","toString","Map","exports","window","EventManager"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o = (function () {\r\n    function t() {}\r\n    t.on = function (t, e, i) {\r\n        var o = this.events;\r\n        o.has(t)\r\n            ? o.get(t).push({\r\n                  callback: e,\r\n                  target: i\r\n              })\r\n            : o.set(t, [\r\n                  {\r\n                      callback: e,\r\n                      target: i\r\n                  }\r\n              ]);\r\n    };\r\n    t.once = function (t, e, i) {\r\n        var o = this.onceEvents;\r\n        o.has(t)\r\n            ? o.get(t).push({\r\n                  callback: e,\r\n                  target: i\r\n              })\r\n            : o.set(t, [\r\n                  {\r\n                      callback: e,\r\n                      target: i\r\n                  }\r\n              ]);\r\n    };\r\n    t.off = function (t, e, i) {\r\n        var o = this.events.get(t);\r\n        if (o) {\r\n            var n = 0;\r\n            for (var s = o.length; n < s; n++) {\r\n                if (this.compare(o[n], e, i)) {\r\n                    o.splice(n, 1);\r\n                    if (0 === o.length) {\r\n                        this.events.delete(t);\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        var r = this.onceEvents.get(t);\r\n        if (r) {\r\n            n = 0;\r\n            for (s = r.length; n < s; n++) {\r\n                if (this.compare(r[n], e, i)) {\r\n                    r.splice(n, 1);\r\n                    if (0 === r.length) {\r\n                        this.onceEvents.delete(t);\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    t.send = function (t) {\r\n        var e = [];\r\n        for (var i = 1; i < arguments.length; i++) {\r\n            e[i - 1] = arguments[i];\r\n        }\r\n        var o = this.events.get(t);\r\n        if (o) {\r\n            for (var n = 0; n < o.length; n++) {\r\n                var s = o[n];\r\n                var r = s.callback;\r\n                var a = s.target;\r\n                r.apply(a, e);\r\n            }\r\n        }\r\n        var l = this.onceEvents.get(t);\r\n        if (l) {\r\n            for (n = 0; n < l.length; n++) {\r\n                var c = l[n];\r\n                r = c.callback;\r\n                a = c.target;\r\n                r.apply(a, e);\r\n            }\r\n            this.onceEvents.delete(t);\r\n        }\r\n    };\r\n    t.remove = function (t) {\r\n        if (this.events.has(t)) {\r\n            this.events.delete(t);\r\n        }\r\n        if (this.onceEvents.has(t)) {\r\n            this.onceEvents.delete(t);\r\n        }\r\n    };\r\n    t.removeAll = function () {\r\n        this.events.clear();\r\n        this.onceEvents.clear();\r\n    };\r\n    t.compare = function (t, e, i) {\r\n        var o = t.callback;\r\n        return t.target === i && (o === e || o.toString() === e.toString());\r\n    };\r\n    t.events = new Map();\r\n    t.onceEvents = new Map();\r\n    return t;\r\n})();\r\nexports.default = o;\r\nwindow.EventManager = o;\r\n"]}