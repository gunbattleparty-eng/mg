
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/Bullet_25.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '895d0c5m0lE5Yyk/NDdgkYn', 'Bullet_25');
// game_script/scripts/Bullet_25.js

"use strict";

var o;

var $object = require("./Object");

var $assetsLoader = require("./AssetsLoader");

var $assetsMap = require("./AssetsMap");

var $resUtil = require("./ResUtil");

var $remoteAudio = require("./RemoteAudio");

var $gameContext = require("./GameContext");

var $gameSkillInfo = require("./GameSkillInfo");

var $enemyStatus = require("./EnemyStatus");

var $baseBullet = require("./BaseBullet");

var m = cc._decorator;
var y = m.ccclass;
var g = (m.property, cc.Vec3.ZERO);

var _ = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.buttleType = $baseBullet.BulletType.oil_boom;
    e.enemys = new Set();
    return e;
  }

  __extends(e, t);

  e.prototype.initButtle = function (e, i) {
    t.prototype.initButtle.call(this, e, i);
    var o = this.skillParam.oilBoomRange;
    this.setScale(cc.v3(o, o));
    this.atk = this.skillParam.skillAtk[$gameSkillInfo.Skill4Param.FINAL];
  };

  e.prototype.setAnimation = function () {
    var t = this;
    var e = this.node.children[0].getComponent(cc.Animation);
    $remoteAudio["default"].instance.playEffectMusicRestrict("boom", 0.3);
    e.play("bullet_25");
    e.once(cc.Animation.EventType.FINISHED, function () {
      t.removeSelf();
    }, this);
  };

  e.prototype.onTrigger = function (t, e) {
    if (!this.isUse) {
      if (e == $object.Trigger.enter || e == $object.Trigger.stay) {
        var i = t.object;

        if (this.enemys.has(i)) {
          return;
        }

        if (i.sufferAtk({
          id: 227,
          atk: this.atk,
          skillSpecialitys: this.skillSpecialitys
        })) {
          g.x = i.node.x;
          g.y = i.node.y;
          this.createBoomNo(g);
        } else {
          i.sufferDebuff({
            type: $enemyStatus.EnemyDebuffType.BURN,
            timeLeft: this.skillParam.oilBurnTime,
            value: this.skillParam.oilBurnAtk[$gameSkillInfo.Skill4Param.FINAL]
          });
          this.enemys.add(i);

          if (this.skillParam.oilAllAtkAdd > 0) {
            var o = {
              type: $enemyStatus.EnemyDebuffType.ALL_ATK_ADD,
              timeLeft: this.skillParam.oilBurnTime,
              value: this.skillParam.oilAllAtkAdd
            };
            i.sufferDebuff(o);
          }
        }
      } else {
        if (e == $object.Trigger.exit) {
          i = t.object;
          this.enemys["delete"](i);
        }
      }
    }
  };

  e.prototype.createBoomNo = function (t) {
    if (this.skillParam.oilBurnAreaAtkNo) {
      var e = $gameContext["default"].ins.getButtlePool($baseBullet.BulletType.oil_burn_area_no);

      if (!e) {
        var i = $assetsLoader["default"].instance.getRes($assetsMap.BundleNames.Game, $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.Bullet_28);
        (e = $resUtil.ResUtil.instantiate(i, $gameContext["default"].ins.floorLayer.parent).getComponent($baseBullet["default"])).skillSpecialitys = this.skillSpecialitys;
      }

      e.setPosition(t);
      e.initButtle(null, this.skillId);
      e.insert($gameContext["default"].ins.floorLayer);
      e.setAnimation(null);
    }
  };

  e.prototype.updateFrame = function () {};

  return __decorate([y], e);
}($baseBullet["default"]);

exports["default"] = _;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXEJ1bGxldF8yNS5qcyJdLCJuYW1lcyI6WyJvIiwiJG9iamVjdCIsInJlcXVpcmUiLCIkYXNzZXRzTG9hZGVyIiwiJGFzc2V0c01hcCIsIiRyZXNVdGlsIiwiJHJlbW90ZUF1ZGlvIiwiJGdhbWVDb250ZXh0IiwiJGdhbWVTa2lsbEluZm8iLCIkZW5lbXlTdGF0dXMiLCIkYmFzZUJ1bGxldCIsIm0iLCJjYyIsIl9kZWNvcmF0b3IiLCJ5IiwiY2NjbGFzcyIsImciLCJwcm9wZXJ0eSIsIlZlYzMiLCJaRVJPIiwiXyIsInQiLCJlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJidXR0bGVUeXBlIiwiQnVsbGV0VHlwZSIsIm9pbF9ib29tIiwiZW5lbXlzIiwiU2V0IiwiX19leHRlbmRzIiwicHJvdG90eXBlIiwiaW5pdEJ1dHRsZSIsImkiLCJjYWxsIiwic2tpbGxQYXJhbSIsIm9pbEJvb21SYW5nZSIsInNldFNjYWxlIiwidjMiLCJhdGsiLCJza2lsbEF0ayIsIlNraWxsNFBhcmFtIiwiRklOQUwiLCJzZXRBbmltYXRpb24iLCJub2RlIiwiY2hpbGRyZW4iLCJnZXRDb21wb25lbnQiLCJBbmltYXRpb24iLCJpbnN0YW5jZSIsInBsYXlFZmZlY3RNdXNpY1Jlc3RyaWN0IiwicGxheSIsIm9uY2UiLCJFdmVudFR5cGUiLCJGSU5JU0hFRCIsInJlbW92ZVNlbGYiLCJvblRyaWdnZXIiLCJpc1VzZSIsIlRyaWdnZXIiLCJlbnRlciIsInN0YXkiLCJvYmplY3QiLCJoYXMiLCJzdWZmZXJBdGsiLCJpZCIsInNraWxsU3BlY2lhbGl0eXMiLCJ4IiwiY3JlYXRlQm9vbU5vIiwic3VmZmVyRGVidWZmIiwidHlwZSIsIkVuZW15RGVidWZmVHlwZSIsIkJVUk4iLCJ0aW1lTGVmdCIsIm9pbEJ1cm5UaW1lIiwidmFsdWUiLCJvaWxCdXJuQXRrIiwiYWRkIiwib2lsQWxsQXRrQWRkIiwiQUxMX0FUS19BREQiLCJleGl0Iiwib2lsQnVybkFyZWFBdGtObyIsImlucyIsImdldEJ1dHRsZVBvb2wiLCJvaWxfYnVybl9hcmVhX25vIiwiZ2V0UmVzIiwiQnVuZGxlTmFtZXMiLCJHYW1lIiwiQXNzZXRzTWFwIiwiR2FtZUJ1bmRsZXMiLCJwcmVmYWJzIiwiYXNzZXRzTGlzdCIsIkJ1bGxldF8yOCIsIlJlc1V0aWwiLCJpbnN0YW50aWF0ZSIsImZsb29yTGF5ZXIiLCJwYXJlbnQiLCJzZXRQb3NpdGlvbiIsInNraWxsSWQiLCJpbnNlcnQiLCJ1cGRhdGVGcmFtZSIsIl9fZGVjb3JhdGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUo7O0FBQ0EsSUFBSUMsT0FBTyxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUFyQjs7QUFDQSxJQUFJQyxhQUFhLEdBQUdELE9BQU8sQ0FBQyxnQkFBRCxDQUEzQjs7QUFDQSxJQUFJRSxVQUFVLEdBQUdGLE9BQU8sQ0FBQyxhQUFELENBQXhCOztBQUNBLElBQUlHLFFBQVEsR0FBR0gsT0FBTyxDQUFDLFdBQUQsQ0FBdEI7O0FBQ0EsSUFBSUksWUFBWSxHQUFHSixPQUFPLENBQUMsZUFBRCxDQUExQjs7QUFDQSxJQUFJSyxZQUFZLEdBQUdMLE9BQU8sQ0FBQyxlQUFELENBQTFCOztBQUNBLElBQUlNLGNBQWMsR0FBR04sT0FBTyxDQUFDLGlCQUFELENBQTVCOztBQUNBLElBQUlPLFlBQVksR0FBR1AsT0FBTyxDQUFDLGVBQUQsQ0FBMUI7O0FBQ0EsSUFBSVEsV0FBVyxHQUFHUixPQUFPLENBQUMsY0FBRCxDQUF6Qjs7QUFDQSxJQUFJUyxDQUFDLEdBQUdDLEVBQUUsQ0FBQ0MsVUFBWDtBQUNBLElBQUlDLENBQUMsR0FBR0gsQ0FBQyxDQUFDSSxPQUFWO0FBQ0EsSUFBSUMsQ0FBQyxJQUFJTCxDQUFDLENBQUNNLFFBQUYsRUFBWUwsRUFBRSxDQUFDTSxJQUFILENBQVFDLElBQXhCLENBQUw7O0FBQ0EsSUFBSUMsQ0FBQyxHQUFJLFVBQVVDLENBQVYsRUFBYTtF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QUFDa0YsU0FBWCxDQUFxQkMsV0FBckIsQ0FBaUNDLE9BQWpDLENBQXlDQyxVQUF6QyxDQUFvREMsU0FGaEQsQ0FBUjtRQUlBLENBQUNwRSxDQUFDLEdBQUdqQixRQUFRLENBQUNzRixPQUFULENBQWlCQyxXQUFqQixDQUE2QjNELENBQTdCLEVBQWdDMUIsWUFBWSxXQUFaLENBQXFCeUUsR0FBckIsQ0FBeUJhLFVBQXpCLENBQW9DQyxNQUFwRSxFQUE0RWhELFlBQTVFLENBQ0RwQyxXQUFXLFdBRFYsQ0FBTCxFQUVHc0QsZ0JBRkgsR0FFc0IsS0FBS0EsZ0JBRjNCO01BR0g7O01BQ0QxQyxDQUFDLENBQUN5RSxXQUFGLENBQWMxRSxDQUFkO01BQ0FDLENBQUMsQ0FBQ1UsVUFBRixDQUFhLElBQWIsRUFBbUIsS0FBS2dFLE9BQXhCO01BQ0ExRSxDQUFDLENBQUMyRSxNQUFGLENBQVMxRixZQUFZLFdBQVosQ0FBcUJ5RSxHQUFyQixDQUF5QmEsVUFBbEM7TUFDQXZFLENBQUMsQ0FBQ3FCLFlBQUYsQ0FBZSxJQUFmO0lBQ0g7RUFDSixDQWpCRDs7RUFrQkFyQixDQUFDLENBQUNTLFNBQUYsQ0FBWW1FLFdBQVosR0FBMEIsWUFBWSxDQUFFLENBQXhDOztFQUNBLE9BQU9DLFVBQVUsQ0FBQyxDQUFDckYsQ0FBRCxDQUFELEVBQU1RLENBQU4sQ0FBakI7QUFDSCxDQXhGTyxDQXdGTFosV0FBVyxXQXhGTixDQUFSOztBQXlGQTBGLE9BQU8sV0FBUCxHQUFrQmhGLENBQWxCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbztcclxudmFyICRvYmplY3QgPSByZXF1aXJlKFwiLi9PYmplY3RcIik7XHJcbnZhciAkYXNzZXRzTG9hZGVyID0gcmVxdWlyZShcIi4vQXNzZXRzTG9hZGVyXCIpO1xyXG52YXIgJGFzc2V0c01hcCA9IHJlcXVpcmUoXCIuL0Fzc2V0c01hcFwiKTtcclxudmFyICRyZXNVdGlsID0gcmVxdWlyZShcIi4vUmVzVXRpbFwiKTtcclxudmFyICRyZW1vdGVBdWRpbyA9IHJlcXVpcmUoXCIuL1JlbW90ZUF1ZGlvXCIpO1xyXG52YXIgJGdhbWVDb250ZXh0ID0gcmVxdWlyZShcIi4vR2FtZUNvbnRleHRcIik7XHJcbnZhciAkZ2FtZVNraWxsSW5mbyA9IHJlcXVpcmUoXCIuL0dhbWVTa2lsbEluZm9cIik7XHJcbnZhciAkZW5lbXlTdGF0dXMgPSByZXF1aXJlKFwiLi9FbmVteVN0YXR1c1wiKTtcclxudmFyICRiYXNlQnVsbGV0ID0gcmVxdWlyZShcIi4vQmFzZUJ1bGxldFwiKTtcclxudmFyIG0gPSBjYy5fZGVjb3JhdG9yO1xyXG52YXIgeSA9IG0uY2NjbGFzcztcclxudmFyIGcgPSAobS5wcm9wZXJ0eSwgY2MuVmVjMy5aRVJPKTtcclxudmFyIF8gPSAoZnVuY3Rpb24gKHQpIHtcclxuICAgIGZ1bmN0aW9uIGUoKSB7XHJcbiAgICAgICAgdmFyIGUgPSAobnVsbCAhPT0gdCAmJiB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIHx8IHRoaXM7XHJcbiAgICAgICAgZS5idXR0bGVUeXBlID0gJGJhc2VCdWxsZXQuQnVsbGV0VHlwZS5vaWxfYm9vbTtcclxuICAgICAgICBlLmVuZW15cyA9IG5ldyBTZXQoKTtcclxuICAgICAgICByZXR1cm4gZTtcclxuICAgIH1cclxuICAgIF9fZXh0ZW5kcyhlLCB0KTtcclxuICAgIGUucHJvdG90eXBlLmluaXRCdXR0bGUgPSBmdW5jdGlvbiAoZSwgaSkge1xyXG4gICAgICAgIHQucHJvdG90eXBlLmluaXRCdXR0bGUuY2FsbCh0aGlzLCBlLCBpKTtcclxuICAgICAgICB2YXIgbyA9IHRoaXMuc2tpbGxQYXJhbS5vaWxCb29tUmFuZ2U7XHJcbiAgICAgICAgdGhpcy5zZXRTY2FsZShjYy52MyhvLCBvKSk7XHJcbiAgICAgICAgdGhpcy5hdGsgPSB0aGlzLnNraWxsUGFyYW0uc2tpbGxBdGtbJGdhbWVTa2lsbEluZm8uU2tpbGw0UGFyYW0uRklOQUxdO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLnNldEFuaW1hdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdCA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGUgPSB0aGlzLm5vZGUuY2hpbGRyZW5bMF0uZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbik7XHJcbiAgICAgICAgJHJlbW90ZUF1ZGlvLmRlZmF1bHQuaW5zdGFuY2UucGxheUVmZmVjdE11c2ljUmVzdHJpY3QoXCJib29tXCIsIDAuMyk7XHJcbiAgICAgICAgZS5wbGF5KFwiYnVsbGV0XzI1XCIpO1xyXG4gICAgICAgIGUub25jZShcclxuICAgICAgICAgICAgY2MuQW5pbWF0aW9uLkV2ZW50VHlwZS5GSU5JU0hFRCxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdC5yZW1vdmVTZWxmKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRoaXNcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLm9uVHJpZ2dlciA9IGZ1bmN0aW9uICh0LCBlKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzVXNlKSB7XHJcbiAgICAgICAgICAgIGlmIChlID09ICRvYmplY3QuVHJpZ2dlci5lbnRlciB8fCBlID09ICRvYmplY3QuVHJpZ2dlci5zdGF5KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaSA9IHQub2JqZWN0O1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5lbXlzLmhhcyhpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICBpLnN1ZmZlckF0ayh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAyMjcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0azogdGhpcy5hdGssXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraWxsU3BlY2lhbGl0eXM6IHRoaXMuc2tpbGxTcGVjaWFsaXR5c1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICBnLnggPSBpLm5vZGUueDtcclxuICAgICAgICAgICAgICAgICAgICBnLnkgPSBpLm5vZGUueTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUJvb21ObyhnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaS5zdWZmZXJEZWJ1ZmYoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAkZW5lbXlTdGF0dXMuRW5lbXlEZWJ1ZmZUeXBlLkJVUk4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVMZWZ0OiB0aGlzLnNraWxsUGFyYW0ub2lsQnVyblRpbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnNraWxsUGFyYW0ub2lsQnVybkF0a1skZ2FtZVNraWxsSW5mby5Ta2lsbDRQYXJhbS5GSU5BTF1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZW15cy5hZGQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2tpbGxQYXJhbS5vaWxBbGxBdGtBZGQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJGVuZW15U3RhdHVzLkVuZW15RGVidWZmVHlwZS5BTExfQVRLX0FERCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVMZWZ0OiB0aGlzLnNraWxsUGFyYW0ub2lsQnVyblRpbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5za2lsbFBhcmFtLm9pbEFsbEF0a0FkZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpLnN1ZmZlckRlYnVmZihvKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZSA9PSAkb2JqZWN0LlRyaWdnZXIuZXhpdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGkgPSB0Lm9iamVjdDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZW15cy5kZWxldGUoaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuY3JlYXRlQm9vbU5vID0gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICBpZiAodGhpcy5za2lsbFBhcmFtLm9pbEJ1cm5BcmVhQXRrTm8pIHtcclxuICAgICAgICAgICAgdmFyIGUgPSAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuZ2V0QnV0dGxlUG9vbCgkYmFzZUJ1bGxldC5CdWxsZXRUeXBlLm9pbF9idXJuX2FyZWFfbm8pO1xyXG4gICAgICAgICAgICBpZiAoIWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpID0gJGFzc2V0c0xvYWRlci5kZWZhdWx0Lmluc3RhbmNlLmdldFJlcyhcclxuICAgICAgICAgICAgICAgICAgICAkYXNzZXRzTWFwLkJ1bmRsZU5hbWVzLkdhbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgJGFzc2V0c01hcC5Bc3NldHNNYXAuR2FtZUJ1bmRsZXMucHJlZmFicy5hc3NldHNMaXN0LkJ1bGxldF8yOFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIChlID0gJHJlc1V0aWwuUmVzVXRpbC5pbnN0YW50aWF0ZShpLCAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuZmxvb3JMYXllci5wYXJlbnQpLmdldENvbXBvbmVudChcclxuICAgICAgICAgICAgICAgICAgICAkYmFzZUJ1bGxldC5kZWZhdWx0XHJcbiAgICAgICAgICAgICAgICApKS5za2lsbFNwZWNpYWxpdHlzID0gdGhpcy5za2lsbFNwZWNpYWxpdHlzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGUuc2V0UG9zaXRpb24odCk7XHJcbiAgICAgICAgICAgIGUuaW5pdEJ1dHRsZShudWxsLCB0aGlzLnNraWxsSWQpO1xyXG4gICAgICAgICAgICBlLmluc2VydCgkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuZmxvb3JMYXllcik7XHJcbiAgICAgICAgICAgIGUuc2V0QW5pbWF0aW9uKG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS51cGRhdGVGcmFtZSA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gICAgcmV0dXJuIF9fZGVjb3JhdGUoW3ldLCBlKTtcclxufSkoJGJhc2VCdWxsZXQuZGVmYXVsdCk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IF87XHJcbiJdfQ==