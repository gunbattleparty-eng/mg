{"version":3,"sources":["assets\\game_script\\scripts\\Bullet_6.js"],"names":["o","$object","require","$assetsLoader","$assetsMap","$resUtil","$util","$configContext","$gameContext","$gameSkillInfo","$enemyStatus","$baseBullet","y","cc","_decorator","g","ccclass","_","property","t","e","apply","arguments","buttleType","BulletType","freeze_bullet","currPenetrateLayer","__extends","prototype","initButtle","i","call","atk","skillParam","skillAtk","Skill4Param","FINAL","speed","freezeSpeed","velocity","set","multiplyScalar","onTrigger","isUse","Trigger","enter","object","sufferAtk","id","skillId","skillSpecialitys","bulletBuff","BulletBuff","paralysis_damage","value","freezeSuffParalysisAdd","freezeBack","type","EnemyDebuffType","BACK","timeLeft","sufferDebuff","n","freezeEnemyAtkAddParam","length","s","a","ALL_ATK_ADD","freezeTime","FREEZE","freezeSplitCount","createSplitButtle","config","freezePenetrateLayer","removeSelf","ins","getNearbyN2","node","getButtlePool","thermobaric_split","instance","getRes","BundleNames","Game","AssetsMap","GameBundles","prefabs","assetsList","Bullet_8","ResUtil","instantiate","getComponent","basicSkillConfigMap","get","skill_tpye","setPosition","position","clone","sub","normalize","targetEnemy","insert","buttleLayer","checkBoundary","freezeIsReflect","winSize","width","height","x","Math","abs","setAngle","dirConverAngle","__decorate","exports"],"mappings":";;;;;;AAAA,IAAIA,CAAJ;;AACA,IAAIC,OAAO,GAAGC,OAAO,CAAC,UAAD,CAArB;;AACA,IAAIC,aAAa,GAAGD,OAAO,CAAC,gBAAD,CAA3B;;AACA,IAAIE,UAAU,GAAGF,OAAO,CAAC,aAAD,CAAxB;;AACA,IAAIG,QAAQ,GAAGH,OAAO,CAAC,WAAD,CAAtB;;AACA,IAAII,KAAK,GAAGJ,OAAO,CAAC,QAAD,CAAnB;;AACA,IAAIK,cAAc,GAAGL,OAAO,CAAC,iBAAD,CAA5B;;AACA,IAAIM,YAAY,GAAGN,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAIO,cAAc,GAAGP,OAAO,CAAC,iBAAD,CAA5B;;AACA,IAAIQ,YAAY,GAAGR,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAIS,WAAW,GAAGT,OAAO,CAAC,cAAD,CAAzB;;AACA,IAAIU,CAAC,GAAGC,EAAE,CAACC,UAAX;AACA,IAAIC,CAAC,GAAGH,CAAC,CAACI,OAAV;;AACA,IAAIC,CAAC,IACAL,CAAC,CAACM,QAAF,EACA,UAAUC,CAAV,EAAa;EACV,SAASC,CAAT,GAAa;IACT,IAAIA,CAAC,GAAI,SAASD,CAAT,IAAcA,CAAC,CAACE,KAAF,CAAQ,IAAR,EAAcC,SAAd,CAAf,IAA4C,IAApD;IACAF,CAAC,CAACG,UAAF,GAAeZ,WAAW,CAACa,UAAZ,CAAuBC,aAAtC;IACAL,CAAC,CAACM,kBAAF,GAAuB,CAAvB;IACA,OAAON,CAAP;EACH;;EACDO,SAAS,CAACP,CAAD,EAAID,CAAJ,CAAT;;EACAC,CAAC,CAACQ,SAAF,CAAYC,UAAZ,GAAyB,UAAUT,CAAV,EAAaU,CAAb,EAAgB;IACrCX,CAAC,CAACS,SAAF,CAAYC,UAAZ,CAAuBE,IAAvB,CAA4B,IAA5B,EAAkCX,CAAlC,EAAqCU,CAArC;IACA,KAAKJ,kBAAL,GAA0B,CAA1B;IACA,KAAKM,GAAL,GAAW,KAAKC,UAAL,CAAgBC,QAAhB,CAAyBzB,cAAc,CAAC0B,WAAf,CAA2BC,KAApD,CAAX;IACA,KAAKC,KAAL,GAAa,KAAKJ,UAAL,CAAgBK,WAAhB,CAA4B7B,cAAc,CAAC0B,WAAf,CAA2BC,KAAvD,CAAb;IACA,KAAKG,QAAL,CAAcC,GAAd,CAAkBpB,CAAlB,EAAqBqB,cAArB,CAAoC,KAAKJ,KAAzC;EACH,CAND;;EAOAjB,CAAC,CAACQ,SAAF,CAAYc,SAAZ,GAAwB,UAAUvB,CAAV,EAAaC,CAAb,EAAgB;IACpC,IAAI,CAAC,KAAKuB,KAAN,IAAevB,CAAC,IAAInB,OAAO,CAAC2C,OAAR,CAAgBC,KAAxC,EAA+C;MAC3C,IAAIf,CAAC,GAAGX,CAAC,CAAC2B,MAAV;MACAhB,CAAC,CAACiB,SAAF,CAAY;QACRC,EAAE,EAAE,KAAKC,OADD;QAERC,gBAAgB,EAAE,KAAKA,gBAFf;QAGRC,UAAU,EAAExC,WAAW,CAACyC,UAAZ,CAAuBC,gBAH3B;QAIRC,KAAK,EAAE,KAAKrB,UAAL,CAAgBsB,sBAJf;QAKRvB,GAAG,EAAE,KAAKA;MALF,CAAZ;;MAOA,IAAI,KAAKC,UAAL,CAAgBuB,UAAhB,CAA2B/C,cAAc,CAAC0B,WAAf,CAA2BC,KAAtD,IAA+D,CAAnE,EAAsE;QAClE,IAAIpC,CAAC,GAAG;UACJyD,IAAI,EAAE/C,YAAY,CAACgD,eAAb,CAA6BC,IAD/B;UAEJC,QAAQ,EAAE,CAAC,CAFP;UAGJN,KAAK,EAAE,KAAKrB,UAAL,CAAgBuB,UAAhB,CAA2B/C,cAAc,CAAC0B,WAAf,CAA2BC,KAAtD;QAHH,CAAR;QAKAN,CAAC,CAAC+B,YAAF,CAAe7D,CAAf;MACH;;MACD,KAAK,IAAI8D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK7B,UAAL,CAAgB8B,sBAAhB,CAAuCC,MAA3D,EAAmEF,CAAC,EAApE,EAAwE;QACpE,IAAIG,CAAC,GAAG,KAAKhC,UAAL,CAAgB8B,sBAAxB;QACA,IAAIG,CAAC,GAAG;UACJT,IAAI,EAAE/C,YAAY,CAACgD,eAAb,CAA6BS,WAD/B;UAEJP,QAAQ,EAAEK,CAAC,CAACH,CAAD,CAAD,CAAK,CAAL,CAFN;UAGJR,KAAK,EAAEW,CAAC,CAACH,CAAD,CAAD,CAAK,CAAL;QAHH,CAAR;QAKAhC,CAAC,CAAC+B,YAAF,CAAeK,CAAf;MACH;;MACD,IAAI,KAAKjC,UAAL,CAAgBmC,UAAhB,GAA6B,CAAjC,EAAoC;QAChCpE,CAAC,GAAG;UACAyD,IAAI,EAAE/C,YAAY,CAACgD,eAAb,CAA6BW,MADnC;UAEAT,QAAQ,EAAE,KAAK3B,UAAL,CAAgBmC,UAF1B;UAGAd,KAAK,EAAE;QAHP,CAAJ;QAKAxB,CAAC,CAAC+B,YAAF,CAAe7D,CAAf;MACH;;MACD,IAAI,MAAM,KAAK0B,kBAAX,IAAiC,KAAKO,UAAL,CAAgBqC,gBAAhB,GAAmC,CAAxE,EAA2E;QACvE,KAAKC,iBAAL,CAAuBzC,CAAvB;MACH;;MACD,IAAI,EAAE,OAAOA,CAAC,CAAC0C,MAAF,CAASxB,EAAhB,IAAsB,OAAOlB,CAAC,CAAC0C,MAAF,CAASxB,EAAtC,IAA4C,OAAOlB,CAAC,CAAC0C,MAAF,CAASxB,EAA9D,CAAJ,EAAuE;QACnE,KAAKtB,kBAAL,GAA0B,KAAKO,UAAL,CAAgBwC,oBAA1C;MACH;;MACD,KAAK/C,kBAAL;;MACA,IAAI,KAAKO,UAAL,CAAgBwC,oBAAhB,IAAwC,KAAK/C,kBAAjD,EAAqE;QACjE,KAAKiB,KAAL,GAAa,CAAC,CAAd;QACA,KAAK+B,UAAL;MACH;IACJ;EACJ,CA/CD;;EAgDAtD,CAAC,CAACQ,SAAF,CAAY2C,iBAAZ,GAAgC,UAAUpD,CAAV,EAAa;IACzC,IAAIC,CAAC,GAAGZ,YAAY,WAAZ,CAAqBmE,GAArB,CAAyBC,WAAzB,CAAqCzD,CAAC,CAAC0D,IAAvC,EAA6C,KAAK5C,UAAL,CAAgBqC,gBAA7D,CAAR;;IACA,KAAK,IAAIxC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGV,CAAC,CAAC4C,MAAtB,EAA8BlC,CAAC,EAA/B,EAAmC;MAC/B,IAAI9B,CAAC,GAAGQ,YAAY,WAAZ,CAAqBmE,GAArB,CAAyBG,aAAzB,CAAuCnE,WAAW,CAACa,UAAZ,CAAuBuD,iBAA9D,CAAR;;MACA,IAAI,CAAC/E,CAAL,EAAQ;QACJ,IAAI8D,CAAC,GAAG3D,aAAa,WAAb,CAAsB6E,QAAtB,CAA+BC,MAA/B,CACJ7E,UAAU,CAAC8E,WAAX,CAAuBC,IADnB,EAEJ/E,UAAU,CAACgF,SAAX,CAAqBC,WAArB,CAAiCC,OAAjC,CAAyCC,UAAzC,CAAoDC,QAFhD,CAAR;QAIA,CAACxF,CAAC,GAAGK,QAAQ,CAACoF,OAAT,CAAiBC,WAAjB,CAA6B5B,CAA7B,EAAgC6B,YAAhC,CAA6ChF,WAAW,WAAxD,CAAL,EAAwEuC,gBAAxE,GACI3C,cAAc,WAAd,CAAuByE,QAAvB,CAAgCY,mBAAhC,CAAoDC,GAApD,CAAwD,KAAK5C,OAA7D,EAAsE6C,UAD1E;MAEH;;MACD9F,CAAC,CAAC+F,WAAF,CAAc,KAAKlB,IAAL,CAAUmB,QAAV,CAAmBC,KAAnB,EAAd;MACAjG,CAAC,CAAC6B,UAAF,CAAaT,CAAC,CAACU,CAAD,CAAD,CAAK+C,IAAL,CAAUmB,QAAV,CAAmBE,GAAnB,CAAuB,KAAKrB,IAAL,CAAUmB,QAAjC,EAA2CG,SAA3C,EAAb,EAAqE,KAAKlD,OAA1E;MACAjD,CAAC,CAACoG,WAAF,GAAgBjF,CAAhB;MACAnB,CAAC,CAACqG,MAAF,CAAS7F,YAAY,WAAZ,CAAqBmE,GAArB,CAAyB2B,WAAlC;IACH;EACJ,CAjBD;;EAkBAlF,CAAC,CAACQ,SAAF,CAAY2E,aAAZ,GAA4B,YAAY;IACpC,IAAI,CAAC,KAAKtE,UAAL,CAAgBuE,eAArB,EAAsC;MAClC,OAAOrF,CAAC,CAACS,SAAF,CAAY2E,aAAZ,CAA0BxE,IAA1B,CAA+B,IAA/B,CAAP;IACH;;IACD,IAAIX,CAAC,GAAGP,EAAE,CAAC4F,OAAH,CAAWC,KAAX,GAAmB,CAA3B;IACA,IAAI5E,CAAC,GAAGjB,EAAE,CAAC4F,OAAH,CAAWE,MAAX,GAAoB,CAA5B;IACA,KAAK9B,IAAL,CAAU+B,CAAV,IAAe,CAACxF,CAAhB,IACQ,KAAKmB,QAAL,CAAcqE,CAAd,GAAkBC,IAAI,CAACC,GAAL,CAAS,KAAKvE,QAAL,CAAcqE,CAAvB,CAAnB,EACD,KAAKG,QAAL,CAAczG,KAAK,WAAL,CAAc0G,cAAd,CAA6B,KAAKzE,QAAlC,CAAd,CAFN,IAGM,KAAKsC,IAAL,CAAU+B,CAAV,IAAexF,CAAf,KACE,KAAKmB,QAAL,CAAcqE,CAAd,GAAkB,CAACC,IAAI,CAACC,GAAL,CAAS,KAAKvE,QAAL,CAAcqE,CAAvB,CAApB,EACD,KAAKG,QAAL,CAAczG,KAAK,WAAL,CAAc0G,cAAd,CAA6B,KAAKzE,QAAlC,CAAd,CAFA,CAHN;;IAMA,IAAI,KAAKsC,IAAL,CAAUjE,CAAV,IAAekB,CAAnB,EAAsB;MAClB,KAAKS,QAAL,CAAc3B,CAAd,GAAkB,CAACiG,IAAI,CAACC,GAAL,CAAS,KAAKvE,QAAL,CAAc3B,CAAvB,CAAnB;MACA,KAAKmG,QAAL,CAAczG,KAAK,WAAL,CAAc0G,cAAd,CAA6B,KAAKzE,QAAlC,CAAd;IACH;;IACD,OAAO,EAAE,KAAKsC,IAAL,CAAUjE,CAAV,IAAe,CAACC,EAAE,CAAC4F,OAAH,CAAWE,MAAZ,GAAqB,CAArB,GAAyB,GAA1C,CAAP;EACH,CAjBD;;EAkBA,OAAOM,UAAU,CAAC,CAAClG,CAAD,CAAD,EAAMK,CAAN,CAAjB;AACH,CApGD,CAoGGT,WAAW,WApGd,CAFC,CAAL;;AAuGAuG,OAAO,WAAP,GAAkBjG,CAAlB","sourceRoot":"/","sourcesContent":["var o;\r\nvar $object = require(\"./Object\");\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $util = require(\"./Util\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $gameSkillInfo = require(\"./GameSkillInfo\");\r\nvar $enemyStatus = require(\"./EnemyStatus\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar y = cc._decorator;\r\nvar g = y.ccclass;\r\nvar _ =\r\n    (y.property,\r\n    (function (t) {\r\n        function e() {\r\n            var e = (null !== t && t.apply(this, arguments)) || this;\r\n            e.buttleType = $baseBullet.BulletType.freeze_bullet;\r\n            e.currPenetrateLayer = 0;\r\n            return e;\r\n        }\r\n        __extends(e, t);\r\n        e.prototype.initButtle = function (e, i) {\r\n            t.prototype.initButtle.call(this, e, i);\r\n            this.currPenetrateLayer = 0;\r\n            this.atk = this.skillParam.skillAtk[$gameSkillInfo.Skill4Param.FINAL];\r\n            this.speed = this.skillParam.freezeSpeed[$gameSkillInfo.Skill4Param.FINAL];\r\n            this.velocity.set(e).multiplyScalar(this.speed);\r\n        };\r\n        e.prototype.onTrigger = function (t, e) {\r\n            if (!this.isUse && e == $object.Trigger.enter) {\r\n                var i = t.object;\r\n                i.sufferAtk({\r\n                    id: this.skillId,\r\n                    skillSpecialitys: this.skillSpecialitys,\r\n                    bulletBuff: $baseBullet.BulletBuff.paralysis_damage,\r\n                    value: this.skillParam.freezeSuffParalysisAdd,\r\n                    atk: this.atk\r\n                });\r\n                if (this.skillParam.freezeBack[$gameSkillInfo.Skill4Param.FINAL] > 0) {\r\n                    var o = {\r\n                        type: $enemyStatus.EnemyDebuffType.BACK,\r\n                        timeLeft: -1,\r\n                        value: this.skillParam.freezeBack[$gameSkillInfo.Skill4Param.FINAL]\r\n                    };\r\n                    i.sufferDebuff(o);\r\n                }\r\n                for (var n = 0; n < this.skillParam.freezeEnemyAtkAddParam.length; n++) {\r\n                    var s = this.skillParam.freezeEnemyAtkAddParam;\r\n                    var a = {\r\n                        type: $enemyStatus.EnemyDebuffType.ALL_ATK_ADD,\r\n                        timeLeft: s[n][0],\r\n                        value: s[n][1]\r\n                    };\r\n                    i.sufferDebuff(a);\r\n                }\r\n                if (this.skillParam.freezeTime > 0) {\r\n                    o = {\r\n                        type: $enemyStatus.EnemyDebuffType.FREEZE,\r\n                        timeLeft: this.skillParam.freezeTime,\r\n                        value: 0\r\n                    };\r\n                    i.sufferDebuff(o);\r\n                }\r\n                if (0 === this.currPenetrateLayer && this.skillParam.freezeSplitCount > 0) {\r\n                    this.createSplitButtle(i);\r\n                }\r\n                if (!(29 !== i.config.id && 30 !== i.config.id && 36 !== i.config.id)) {\r\n                    this.currPenetrateLayer = this.skillParam.freezePenetrateLayer;\r\n                }\r\n                this.currPenetrateLayer++;\r\n                if (this.skillParam.freezePenetrateLayer <= this.currPenetrateLayer) {\r\n                    this.isUse = !0;\r\n                    this.removeSelf();\r\n                }\r\n            }\r\n        };\r\n        e.prototype.createSplitButtle = function (t) {\r\n            var e = $gameContext.default.ins.getNearbyN2(t.node, this.skillParam.freezeSplitCount);\r\n            for (var i = 0; i < e.length; i++) {\r\n                var o = $gameContext.default.ins.getButtlePool($baseBullet.BulletType.thermobaric_split);\r\n                if (!o) {\r\n                    var n = $assetsLoader.default.instance.getRes(\r\n                        $assetsMap.BundleNames.Game,\r\n                        $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.Bullet_8\r\n                    );\r\n                    (o = $resUtil.ResUtil.instantiate(n).getComponent($baseBullet.default)).skillSpecialitys =\r\n                        $configContext.default.instance.basicSkillConfigMap.get(this.skillId).skill_tpye;\r\n                }\r\n                o.setPosition(this.node.position.clone());\r\n                o.initButtle(e[i].node.position.sub(this.node.position).normalize(), this.skillId);\r\n                o.targetEnemy = t;\r\n                o.insert($gameContext.default.ins.buttleLayer);\r\n            }\r\n        };\r\n        e.prototype.checkBoundary = function () {\r\n            if (!this.skillParam.freezeIsReflect) {\r\n                return t.prototype.checkBoundary.call(this);\r\n            }\r\n            var e = cc.winSize.width / 2;\r\n            var i = cc.winSize.height / 2;\r\n            this.node.x <= -e\r\n                ? ((this.velocity.x = Math.abs(this.velocity.x)),\r\n                  this.setAngle($util.default.dirConverAngle(this.velocity)))\r\n                : this.node.x >= e &&\r\n                  ((this.velocity.x = -Math.abs(this.velocity.x)),\r\n                  this.setAngle($util.default.dirConverAngle(this.velocity)));\r\n            if (this.node.y >= i) {\r\n                this.velocity.y = -Math.abs(this.velocity.y);\r\n                this.setAngle($util.default.dirConverAngle(this.velocity));\r\n            }\r\n            return !(this.node.y <= -cc.winSize.height / 2 - 100);\r\n        };\r\n        return __decorate([g], e);\r\n    })($baseBullet.default));\r\nexports.default = _;\r\n"]}