
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/Bullet_13.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '75bdfjZCK1D6psNmQKjR5KO', 'Bullet_13');
// game_script/scripts/Bullet_13.js

"use strict";

var o;

var $object = require("./Object");

var $countDownUtil = require("./CountDownUtil");

var $seedUtil = require("./SeedUtil");

var $gameContext = require("./GameContext");

var $gameSkillInfo = require("./GameSkillInfo");

var $enemyStatus = require("./EnemyStatus");

var $baseBullet = require("./BaseBullet");

var f = cc._decorator;
var h = f.ccclass;
var m = (f.property, function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.buttleType = $baseBullet.BulletType.car;
    e.attackAtks = new Set();
    e.isGem = !1;
    e.anim = null;
    return e;
  }

  __extends(e, t);

  e.prototype.initButtle = function (e, i) {
    t.prototype.initButtle.call(this, e, i);
    this.setAngle(0);
    this.attackAtks.clear();
    var o = this.isGem ? $gameSkillInfo.Skill4Param.BASIC : $gameSkillInfo.Skill4Param.FINAL;
    this.atk = this.skillParam.skillAtk[o];
    this.speed = this.skillParam.carSpeed[o];
    this.velocity.set(e).multiplyScalar(this.speed);

    if (!this.anim) {
      this.anim = this.node.children[0].getComponent(cc.Animation);
    }

    this.setAnimation("");
  };

  e.prototype.setAnimation = function (t) {
    t = "bullet_13";
    this.isGem ? t = "bullet_13" : 1 === this.skillParam.carSkin ? t = "bullet_13_1" : 2 === this.skillParam.carSkin ? t = "bullet_13_2" : 3 === this.skillParam.carSkin && (t = "bullet_13_3");
    this.anim.play(t);
  };

  e.prototype.onTrigger = function (t, e) {
    var i = t.object;

    if (e === $object.Trigger.enter) {
      if (this.attackAtks.has(i)) {
        return;
      }

      this.attackAtks.add(i);

      if (this.isGem) {
        return;
      }

      if (this.skillParam.carBack[$gameSkillInfo.Skill4Param.FINAL] > 0) {
        var o = {
          id: 81,
          type: $enemyStatus.EnemyDebuffType.BACK,
          timeLeft: -1,
          value: this.skillParam.carBack[$gameSkillInfo.Skill4Param.FINAL]
        };
        i.sufferDebuff(o);
      }

      if (this.skillParam.carBurnTime > 0) {
        var n = {
          id: this.skillId,
          type: $enemyStatus.EnemyDebuffType.BURN,
          timeLeft: this.skillParam.carBurnTime,
          value: this.skillParam.carBurnAtk[$gameSkillInfo.Skill4Param.FINAL]
        };

        if (this.skillParam.carBurnAdd > 0) {
          n.value += Math.ceil(i.config.HP * this.skillParam.carBurnAdd);
        }

        i.sufferDebuff(n);
      }

      if (this.skillParam.carSlowTime > 0) {
        n = {
          id: this.skillId,
          type: $enemyStatus.EnemyDebuffType.SLOW,
          timeLeft: this.skillParam.carSlowTime,
          value: this.skillParam.carSlowAdd
        };
        i.sufferDebuff(n);
      }

      for (var s = 0; s < this.skillParam.carStunParam.length; s++) {
        var f = this.skillParam.carStunParam;

        if ($seedUtil["default"].probability(100 * f[s][0])) {
          var h = {
            id: this.skillId,
            type: $enemyStatus.EnemyDebuffType.STUN,
            timeLeft: f[s][1],
            value: 0
          };
          i.sufferDebuff(h);
        }
      }

      for (s = 0; s < this.skillParam.carEnemyAtkAddParam.length; s++) {
        f = this.skillParam.carEnemyAtkAddParam;
        h = {
          id: this.skillId,
          type: $enemyStatus.EnemyDebuffType.ALL_ATK_ADD,
          timeLeft: f[s][0],
          value: f[s][1]
        };
        i.sufferDebuff(h);
      }
    } else {
      if (e === $object.Trigger.stay) {
        if ($countDownUtil.CountDownUtil.time - i.getLastAtkTime(0) <= this.skillParam.carAtkInterval / $gameContext["default"].ins.gameRatio) {
          return;
        }

        i.setLastAtkTime(0, $countDownUtil.CountDownUtil.time);
        i.sufferAtk({
          id: this.isGem ? -2 : this.skillId,
          skillSpecialitys: this.skillSpecialitys,
          bulletBuff: $baseBullet.BulletBuff.freeze_damage,
          value: this.skillParam.carSuffFreezeAdd,
          atk: this.atk
        });
      }
    }
  };

  return __decorate([h], e);
}($baseBullet["default"]));
exports["default"] = m;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXEJ1bGxldF8xMy5qcyJdLCJuYW1lcyI6WyJvIiwiJG9iamVjdCIsInJlcXVpcmUiLCIkY291bnREb3duVXRpbCIsIiRzZWVkVXRpbCIsIiRnYW1lQ29udGV4dCIsIiRnYW1lU2tpbGxJbmZvIiwiJGVuZW15U3RhdHVzIiwiJGJhc2VCdWxsZXQiLCJmIiwiY2MiLCJfZGVjb3JhdG9yIiwiaCIsImNjY2xhc3MiLCJtIiwicHJvcGVydHkiLCJ0IiwiZSIsImFwcGx5IiwiYXJndW1lbnRzIiwiYnV0dGxlVHlwZSIsIkJ1bGxldFR5cGUiLCJjYXIiLCJhdHRhY2tBdGtzIiwiU2V0IiwiaXNHZW0iLCJhbmltIiwiX19leHRlbmRzIiwicHJvdG90eXBlIiwiaW5pdEJ1dHRsZSIsImkiLCJjYWxsIiwic2V0QW5nbGUiLCJjbGVhciIsIlNraWxsNFBhcmFtIiwiQkFTSUMiLCJGSU5BTCIsImF0ayIsInNraWxsUGFyYW0iLCJza2lsbEF0ayIsInNwZWVkIiwiY2FyU3BlZWQiLCJ2ZWxvY2l0eSIsInNldCIsIm11bHRpcGx5U2NhbGFyIiwibm9kZSIsImNoaWxkcmVuIiwiZ2V0Q29tcG9uZW50IiwiQW5pbWF0aW9uIiwic2V0QW5pbWF0aW9uIiwiY2FyU2tpbiIsInBsYXkiLCJvblRyaWdnZXIiLCJvYmplY3QiLCJUcmlnZ2VyIiwiZW50ZXIiLCJoYXMiLCJhZGQiLCJjYXJCYWNrIiwiaWQiLCJ0eXBlIiwiRW5lbXlEZWJ1ZmZUeXBlIiwiQkFDSyIsInRpbWVMZWZ0IiwidmFsdWUiLCJzdWZmZXJEZWJ1ZmYiLCJjYXJCdXJuVGltZSIsIm4iLCJza2lsbElkIiwiQlVSTiIsImNhckJ1cm5BdGsiLCJjYXJCdXJuQWRkIiwiTWF0aCIsImNlaWwiLCJjb25maWciLCJIUCIsImNhclNsb3dUaW1lIiwiU0xPVyIsImNhclNsb3dBZGQiLCJzIiwiY2FyU3R1blBhcmFtIiwibGVuZ3RoIiwicHJvYmFiaWxpdHkiLCJTVFVOIiwiY2FyRW5lbXlBdGtBZGRQYXJhbSIsIkFMTF9BVEtfQUREIiwic3RheSIsIkNvdW50RG93blV0aWwiLCJ0aW1lIiwiZ2V0TGFzdEF0a1RpbWUiLCJjYXJBdGtJbnRlcnZhbCIsImlucyIsImdhbWVSYXRpbyIsInNldExhc3RBdGtUaW1lIiwic3VmZmVyQXRrIiwic2tpbGxTcGVjaWFsaXR5cyIsImJ1bGxldEJ1ZmYiLCJCdWxsZXRCdWZmIiwiZnJlZXplX2RhbWFnZSIsImNhclN1ZmZGcmVlemVBZGQiLCJfX2RlY29yYXRlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxDQUFKOztBQUNBLElBQUlDLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFVBQUQsQ0FBckI7O0FBQ0EsSUFBSUMsY0FBYyxHQUFHRCxPQUFPLENBQUMsaUJBQUQsQ0FBNUI7O0FBQ0EsSUFBSUUsU0FBUyxHQUFHRixPQUFPLENBQUMsWUFBRCxDQUF2Qjs7QUFDQSxJQUFJRyxZQUFZLEdBQUdILE9BQU8sQ0FBQyxlQUFELENBQTFCOztBQUNBLElBQUlJLGNBQWMsR0FBR0osT0FBTyxDQUFDLGlCQUFELENBQTVCOztBQUNBLElBQUlLLFlBQVksR0FBR0wsT0FBTyxDQUFDLGVBQUQsQ0FBMUI7O0FBQ0EsSUFBSU0sV0FBVyxHQUFHTixPQUFPLENBQUMsY0FBRCxDQUF6Qjs7QUFDQSxJQUFJTyxDQUFDLEdBQUdDLEVBQUUsQ0FBQ0MsVUFBWDtBQUNBLElBQUlDLENBQUMsR0FBR0gsQ0FBQyxDQUFDSSxPQUFWO0FBQ0EsSUFBSUMsQ0FBQyxJQUNBTCxDQUFDLENBQUNNLFFBQUYsRUFDQSxVQUFVQyxDQUFWLEVBQWE7RUFDVixTQUFTQyxDQUFULEdBQWE7SUFDVCxJQUFJQSxDQUFDLEdBQUksU0FBU0QsQ0FBVCxJQUFjQSxDQUFDLENBQUNFLEtBQUYsQ0FBUSxJQUFSLEVBQWNDLFNBQWQsQ0FBZixJQUE0QyxJQUFwRDtJQUNBRixDQUFDLENBQUNHLFVBQUYsR0FBZVosV0FBVyxDQUFDYSxVQUFaLENB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aEIsT0FBTyxDQUFDcUQsT0FBUixDQUFnQmdDLElBQTFCLEVBQWdDO1FBQzVCLElBQ0luRixjQUFjLENBQUNvRixhQUFmLENBQTZCQyxJQUE3QixHQUFvQzFELENBQUMsQ0FBQzJELGNBQUYsQ0FBaUIsQ0FBakIsQ0FBcEMsSUFDQSxLQUFLbkQsVUFBTCxDQUFnQm9ELGNBQWhCLEdBQWlDckYsWUFBWSxXQUFaLENBQXFCc0YsR0FBckIsQ0FBeUJDLFNBRjlELEVBR0U7VUFDRTtRQUNIOztRQUNEOUQsQ0FBQyxDQUFDK0QsY0FBRixDQUFpQixDQUFqQixFQUFvQjFGLGNBQWMsQ0FBQ29GLGFBQWYsQ0FBNkJDLElBQWpEO1FBQ0ExRCxDQUFDLENBQUNnRSxTQUFGLENBQVk7VUFDUm5DLEVBQUUsRUFBRSxLQUFLbEMsS0FBTCxHQUFhLENBQUMsQ0FBZCxHQUFrQixLQUFLMkMsT0FEbkI7VUFFUjJCLGdCQUFnQixFQUFFLEtBQUtBLGdCQUZmO1VBR1JDLFVBQVUsRUFBRXhGLFdBQVcsQ0FBQ3lGLFVBQVosQ0FBdUJDLGFBSDNCO1VBSVJsQyxLQUFLLEVBQUUsS0FBSzFCLFVBQUwsQ0FBZ0I2RCxnQkFKZjtVQUtSOUQsR0FBRyxFQUFFLEtBQUtBO1FBTEYsQ0FBWjtNQU9IO0lBQ0o7RUFDSixDQWhGRDs7RUFpRkEsT0FBTytELFVBQVUsQ0FBQyxDQUFDeEYsQ0FBRCxDQUFELEVBQU1LLENBQU4sQ0FBakI7QUFDSCxDQXBIRCxDQW9IR1QsV0FBVyxXQXBIZCxDQUZDLENBQUw7QUF1SEE2RixPQUFPLFdBQVAsR0FBa0J2RixDQUFsQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIG87XHJcbnZhciAkb2JqZWN0ID0gcmVxdWlyZShcIi4vT2JqZWN0XCIpO1xyXG52YXIgJGNvdW50RG93blV0aWwgPSByZXF1aXJlKFwiLi9Db3VudERvd25VdGlsXCIpO1xyXG52YXIgJHNlZWRVdGlsID0gcmVxdWlyZShcIi4vU2VlZFV0aWxcIik7XHJcbnZhciAkZ2FtZUNvbnRleHQgPSByZXF1aXJlKFwiLi9HYW1lQ29udGV4dFwiKTtcclxudmFyICRnYW1lU2tpbGxJbmZvID0gcmVxdWlyZShcIi4vR2FtZVNraWxsSW5mb1wiKTtcclxudmFyICRlbmVteVN0YXR1cyA9IHJlcXVpcmUoXCIuL0VuZW15U3RhdHVzXCIpO1xyXG52YXIgJGJhc2VCdWxsZXQgPSByZXF1aXJlKFwiLi9CYXNlQnVsbGV0XCIpO1xyXG52YXIgZiA9IGNjLl9kZWNvcmF0b3I7XHJcbnZhciBoID0gZi5jY2NsYXNzO1xyXG52YXIgbSA9XHJcbiAgICAoZi5wcm9wZXJ0eSxcclxuICAgIChmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGUoKSB7XHJcbiAgICAgICAgICAgIHZhciBlID0gKG51bGwgIT09IHQgJiYgdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSB8fCB0aGlzO1xyXG4gICAgICAgICAgICBlLmJ1dHRsZVR5cGUgPSAkYmFzZUJ1bGxldC5CdWxsZXRUeXBlLmNhcjtcclxuICAgICAgICAgICAgZS5hdHRhY2tBdGtzID0gbmV3IFNldCgpO1xyXG4gICAgICAgICAgICBlLmlzR2VtID0gITE7XHJcbiAgICAgICAgICAgIGUuYW5pbSA9IG51bGw7XHJcbiAgICAgICAgICAgIHJldHVybiBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfX2V4dGVuZHMoZSwgdCk7XHJcbiAgICAgICAgZS5wcm90b3R5cGUuaW5pdEJ1dHRsZSA9IGZ1bmN0aW9uIChlLCBpKSB7XHJcbiAgICAgICAgICAgIHQucHJvdG90eXBlLmluaXRCdXR0bGUuY2FsbCh0aGlzLCBlLCBpKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRBbmdsZSgwKTtcclxuICAgICAgICAgICAgdGhpcy5hdHRhY2tBdGtzLmNsZWFyKCk7XHJcbiAgICAgICAgICAgIHZhciBvID0gdGhpcy5pc0dlbSA/ICRnYW1lU2tpbGxJbmZvLlNraWxsNFBhcmFtLkJBU0lDIDogJGdhbWVTa2lsbEluZm8uU2tpbGw0UGFyYW0uRklOQUw7XHJcbiAgICAgICAgICAgIHRoaXMuYXRrID0gdGhpcy5za2lsbFBhcmFtLnNraWxsQXRrW29dO1xyXG4gICAgICAgICAgICB0aGlzLnNwZWVkID0gdGhpcy5za2lsbFBhcmFtLmNhclNwZWVkW29dO1xyXG4gICAgICAgICAgICB0aGlzLnZlbG9jaXR5LnNldChlKS5tdWx0aXBseVNjYWxhcih0aGlzLnNwZWVkKTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmFuaW0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbSA9IHRoaXMubm9kZS5jaGlsZHJlblswXS5nZXRDb21wb25lbnQoY2MuQW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNldEFuaW1hdGlvbihcIlwiKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGUucHJvdG90eXBlLnNldEFuaW1hdGlvbiA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgICAgIHQgPSBcImJ1bGxldF8xM1wiO1xyXG4gICAgICAgICAgICB0aGlzLmlzR2VtXHJcbiAgICAgICAgICAgICAgICA/ICh0ID0gXCJidWxsZXRfMTNcIilcclxuICAgICAgICAgICAgICAgIDogMSA9PT0gdGhpcy5za2lsbFBhcmFtLmNhclNraW5cclxuICAgICAgICAgICAgICAgID8gKHQgPSBcImJ1bGxldF8xM18xXCIpXHJcbiAgICAgICAgICAgICAgICA6IDIgPT09IHRoaXMuc2tpbGxQYXJhbS5jYXJTa2luXHJcbiAgICAgICAgICAgICAgICA/ICh0ID0gXCJidWxsZXRfMTNfMlwiKVxyXG4gICAgICAgICAgICAgICAgOiAzID09PSB0aGlzLnNraWxsUGFyYW0uY2FyU2tpbiAmJiAodCA9IFwiYnVsbGV0XzEzXzNcIik7XHJcbiAgICAgICAgICAgIHRoaXMuYW5pbS5wbGF5KHQpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZS5wcm90b3R5cGUub25UcmlnZ2VyID0gZnVuY3Rpb24gKHQsIGUpIHtcclxuICAgICAgICAgICAgdmFyIGkgPSB0Lm9iamVjdDtcclxuICAgICAgICAgICAgaWYgKGUgPT09ICRvYmplY3QuVHJpZ2dlci5lbnRlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXR0YWNrQXRrcy5oYXMoaSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF0dGFja0F0a3MuYWRkKGkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNHZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5za2lsbFBhcmFtLmNhckJhY2tbJGdhbWVTa2lsbEluZm8uU2tpbGw0UGFyYW0uRklOQUxdID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogODEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICRlbmVteVN0YXR1cy5FbmVteURlYnVmZlR5cGUuQkFDSyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZUxlZnQ6IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5za2lsbFBhcmFtLmNhckJhY2tbJGdhbWVTa2lsbEluZm8uU2tpbGw0UGFyYW0uRklOQUxdXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBpLnN1ZmZlckRlYnVmZihvKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNraWxsUGFyYW0uY2FyQnVyblRpbWUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnNraWxsSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICRlbmVteVN0YXR1cy5FbmVteURlYnVmZlR5cGUuQlVSTixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZUxlZnQ6IHRoaXMuc2tpbGxQYXJhbS5jYXJCdXJuVGltZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc2tpbGxQYXJhbS5jYXJCdXJuQXRrWyRnYW1lU2tpbGxJbmZvLlNraWxsNFBhcmFtLkZJTkFMXVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2tpbGxQYXJhbS5jYXJCdXJuQWRkID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuLnZhbHVlICs9IE1hdGguY2VpbChpLmNvbmZpZy5IUCAqIHRoaXMuc2tpbGxQYXJhbS5jYXJCdXJuQWRkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaS5zdWZmZXJEZWJ1ZmYobik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5za2lsbFBhcmFtLmNhclNsb3dUaW1lID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG4gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzLnNraWxsSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICRlbmVteVN0YXR1cy5FbmVteURlYnVmZlR5cGUuU0xPVyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZUxlZnQ6IHRoaXMuc2tpbGxQYXJhbS5jYXJTbG93VGltZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc2tpbGxQYXJhbS5jYXJTbG93QWRkXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBpLnN1ZmZlckRlYnVmZihuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgdGhpcy5za2lsbFBhcmFtLmNhclN0dW5QYXJhbS5sZW5ndGg7IHMrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmID0gdGhpcy5za2lsbFBhcmFtLmNhclN0dW5QYXJhbTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNlZWRVdGlsLmRlZmF1bHQucHJvYmFiaWxpdHkoMTAwICogZltzXVswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGggPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5za2lsbElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJGVuZW15U3RhdHVzLkVuZW15RGVidWZmVHlwZS5TVFVOLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZUxlZnQ6IGZbc11bMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpLnN1ZmZlckRlYnVmZihoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IgKHMgPSAwOyBzIDwgdGhpcy5za2lsbFBhcmFtLmNhckVuZW15QXRrQWRkUGFyYW0ubGVuZ3RoOyBzKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gdGhpcy5za2lsbFBhcmFtLmNhckVuZW15QXRrQWRkUGFyYW07XHJcbiAgICAgICAgICAgICAgICAgICAgaCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMuc2tpbGxJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJGVuZW15U3RhdHVzLkVuZW15RGVidWZmVHlwZS5BTExfQVRLX0FERCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZUxlZnQ6IGZbc11bMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmW3NdWzFdXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBpLnN1ZmZlckRlYnVmZihoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChlID09PSAkb2JqZWN0LlRyaWdnZXIuc3RheSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvdW50RG93blV0aWwuQ291bnREb3duVXRpbC50aW1lIC0gaS5nZXRMYXN0QXRrVGltZSgwKSA8PVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNraWxsUGFyYW0uY2FyQXRrSW50ZXJ2YWwgLyAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuZ2FtZVJhdGlvXHJcbiAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaS5zZXRMYXN0QXRrVGltZSgwLCAkY291bnREb3duVXRpbC5Db3VudERvd25VdGlsLnRpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGkuc3VmZmVyQXRrKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMuaXNHZW0gPyAtMiA6IHRoaXMuc2tpbGxJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2tpbGxTcGVjaWFsaXR5czogdGhpcy5za2lsbFNwZWNpYWxpdHlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWxsZXRCdWZmOiAkYmFzZUJ1bGxldC5CdWxsZXRCdWZmLmZyZWV6ZV9kYW1hZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnNraWxsUGFyYW0uY2FyU3VmZkZyZWV6ZUFkZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXRrOiB0aGlzLmF0a1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gX19kZWNvcmF0ZShbaF0sIGUpO1xyXG4gICAgfSkoJGJhc2VCdWxsZXQuZGVmYXVsdCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBtO1xyXG4iXX0=