
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/Gun_9.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '99fc9DbthxIwY5bXtDofCdg', 'Gun_9');
// game_script/scripts/Gun_9.js

"use strict";

var o;

var $assetsLoader = require("./AssetsLoader");

var $assetsMap = require("./AssetsMap");

var $resUtil = require("./ResUtil");

var $eventManager = require("./EventManager");

var $seedUtil = require("./SeedUtil");

var $util = require("./Util");

var $configContext = require("./ConfigContext");

var $globalParam = require("./GlobalParam");

var $localEventName = require("./LocalEventName");

var $baseBullet = require("./BaseBullet");

var $gameContext = require("./GameContext");

var $gameGemInfo = require("./GameGemInfo");

var $gameSkillInfo = require("./GameSkillInfo");

var $baseGun = require("./BaseGun");

var k = cc.Vec3.ZERO;

var v = function (t) {
  function e(e) {
    var i = t.call(this, e) || this;
    i.skillId = 209;
    i.skillParam = $gameContext["default"].ins.skillInfo.getSkillById(i.skillId);
    return i;
  }

  __extends(e, t);

  e.prototype.updateF = function (e) {
    t.prototype.updateF.call(this, e);

    if (!(this.isAttacking || $globalParam["default"].isGamePuase)) {
      this.timeLeft -= e;
      this.timeLeft <= 0 ? (this.isAttacking = !0, this.timeLeft = this.skillParam.skillCD[$gameSkillInfo.Skill4Param.FINAL], $eventManager["default"].send($localEventName["default"].RENDER_SKILL_CD_INFO, this.skillId, 0, -1), this.starGun() || (this.isAttacking = !1, this.timeLeft = 0)) : $eventManager["default"].send($localEventName["default"].RENDER_SKILL_CD_INFO, this.skillId, this.timeLeft / this.skillParam.skillCD[$gameSkillInfo.Skill4Param.FINAL], -1);
    }
  };

  e.prototype.starGun = function () {
    var t = $gameContext["default"].ins.getRangeRankEnemy(this.pointNode, this.skillParam.skillAtkRange[$gameSkillInfo.Skill4Param.FINAL]);
    return !!t && (this.skillParam.windBladeMulti <= 0 ? this.sendBullet1(t) : this.sendbullet2(t), this.isAttacking = !1, !0);
  };

  e.prototype.sendbullet2 = function (t) {
    var e = this;
    this.getRandomPos();
    var i = t.getPosition().sub(k);
    this.createButtle(i, k);

    for (var o = 1; o < this.skillParam.windBladeMulti; o++) {
      this.schedulesOnce(function () {
        var t = $gameContext["default"].ins.getRandomEnemy();

        if (t && t.node.parent) {
          e.getRandomPos();
          var i = t.getPosition().sub(k);
          e.createButtle(i, k);
        }
      }, o * this.skillParam.windBladeMultiTime);
    }
  };

  e.prototype.getRandomPos = function () {
    $seedUtil["default"].probability(50) ? (k.x = $seedUtil["default"].randomFrom(-460, 460), k.y = -cc.winSize.height / 2 - 150) : (k.x = $seedUtil["default"].probability(50) ? -460 : 460, k.y = -$seedUtil["default"].randomFrom(0, cc.winSize.height / 2 + 150));
  };

  e.prototype.sendBullet1 = function (t) {
    var e = this;
    var i = 150 / this.skillParam.windBladeSpeed;
    var o = 0;
    var n = this.skillParam.windBladeComboCount + 1;

    if ($gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.AddSkill) && $seedUtil["default"].probability(100 * $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.AddSkill))) {
      n *= 2;
    }

    var s = t.getPosition().sub(this.pointNode.position);
    k.x = this.pointNode.position.x;
    k.y = this.pointNode.position.y;

    for (var r = 0; r < n; r++) {
      this.schedulesOnce(function () {
        e.createButtle(s, k);
        var t = $util["default"].dirConverAngle(s);

        if (e.skillParam.windBladeParallelCount >= 1) {
          e.createButtle($util["default"].angleConverDir(t + 15), k);
        }

        if (e.skillParam.windBladeParallelCount >= 2) {
          e.createButtle($util["default"].angleConverDir(t - 15), k);
        }

        if (++o === n) {
          e.isAttacking = !1;
        }
      }, i * r);
    }
  };

  e.prototype.createButtle = function (t, e) {
    var i = $gameContext["default"].ins.getButtlePool($baseBullet.BulletType.wind_blade);

    if (!i) {
      var o = $assetsLoader["default"].instance.getRes($assetsMap.BundleNames.Game, $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.Bullet_22);
      (i = $resUtil.ResUtil.instantiate(o, $gameContext["default"].ins.buttleLayer.parent).getComponent($baseBullet["default"])).skillSpecialitys = $configContext["default"].instance.basicSkillConfigMap.get(this.skillId).skill_tpye;
    }

    i.setPosition(e);
    i.initButtle(t.normalize(), this.skillId);
    i.insert($gameContext["default"].ins.buttleLayer);
    i.setAnimation("");
  };

  return e;
}($baseGun["default"]);

exports["default"] = v;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXEd1bl85LmpzIl0sIm5hbWVzIjpbIm8iLCIkYXNzZXRzTG9hZGVyIiwicmVxdWlyZSIsIiRhc3NldHNNYXAiLCIkcmVzVXRpbCIsIiRldmVudE1hbmFnZXIiLCIkc2VlZFV0aWwiLCIkdXRpbCIsIiRjb25maWdDb250ZXh0IiwiJGdsb2JhbFBhcmFtIiwiJGxvY2FsRXZlbnROYW1lIiwiJGJhc2VCdWxsZXQiLCIkZ2FtZUNvbnRleHQiLCIkZ2FtZUdlbUluZm8iLCIkZ2FtZVNraWxsSW5mbyIsIiRiYXNlR3VuIiwiayIsImNjIiwiVmVjMyIsIlpFUk8iLCJ2IiwidCIsImUiLCJpIiwiY2FsbCIsInNraWxsSWQiLCJza2lsbFBhcmFtIiwiaW5zIiwic2tpbGxJbmZvIiwiZ2V0U2tpbGxCeUlkIiwiX19leHRlbmRzIiwicHJvdG90eXBlIiwidXBkYXRlRiIsImlzQXR0YWNraW5nIiwiaXNHYW1lUHVhc2UiLCJ0aW1lTGVmdCIsInNraWxsQ0QiLCJTa2lsbDRQYXJhbSIsIkZJTkFMIiwic2VuZCIsIlJFTkRFUl9TS0lMTF9DRF9JTkZPIiwic3Rhckd1biIsImdldFJhbmdlUmFua0VuZW15IiwicG9pbnROb2RlIiwic2tpbGxBdGtSYW5nZSIsIndpbmRCbGFkZU11bHRpIiwic2VuZEJ1bGxldDEiLCJzZW5kYnVsbGV0MiIsImdldFJhbmRvbVBvcyIsImdldFBvc2l0aW9uIiwic3ViIiwiY3JlYXRlQnV0dGxlIiwic2NoZWR1bGVzT25jZSIsImdldFJhbmRvbUVuZW15Iiwibm9kZSIsInBhcmVudCIsIndpbmRCbGFkZU11bHRpVGltZSIsInByb2JhYmlsaXR5IiwieCIsInJhbmRvbUZyb20iLCJ5Iiwid2luU2l6ZSIsImhlaWdodCIsIndpbmRCbGFkZVNwZWVkIiwibiIsIndpbmRCbGFkZUNvbWJvQ291bnQiLCJHYW1lR2VtSW5mbyIsImhhc0dlbSIsIkdlbVR5cGUiLCJBZGRTa2lsbCIsImdldDEiLCJzIiwicG9zaXRpb24iLCJyIiwiZGlyQ29udmVyQW5nbGUiLCJ3aW5kQmxhZGVQYXJhbGxlbENvdW50IiwiYW5nbGVDb252ZXJEaXIiLCJnZXRCdXR0bGVQb29sIiwiQnVsbGV0VHlwZSIsIndpbmRfYmxhZGUiLCJpbnN0YW5jZSIsImdldFJlcyIsIkJ1bmRsZU5hbWVzIiwiR2FtZSIsIkFzc2V0c01hcCIsIkdhbWVCdW5kbGVzIiwicHJlZmFicyIsImFzc2V0c0xpc3QiLCJCdWxsZXRfMjIiLCJSZXNVdGlsIiwiaW5zdGFudGlhdGUiLCJidXR0bGVMYXllciIsImdldENvbXBvbmVudCIsInNraWxsU3BlY2lhbGl0eXMiLCJiYXNpY1NraWxsQ29uZmlnTWFwIiwiZ2V0Iiwic2tpbGxfdHB5ZSIsInNldFBvc2l0aW9uIiwiaW5pdEJ1dHRsZSIsIm5vcm1hbGl6ZSIsImluc2VydCIsInNldEFuaW1hdGlvbiIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsQ0FBSjs7QUFDQSxJQUFJQyxhQUFhLEdBQUdDLE9BQU8sQ0FBQyxnQkFBRCxDQUEzQjs7QUFDQSxJQUFJQyxVQUFVLEdBQUdELE9BQU8sQ0FBQyxhQUFELENBQXhCOztBQUNBLElBQUlFLFFBQVEsR0FBR0YsT0FBTyxDQUFDLFdBQUQsQ0FBdEI7O0FBQ0EsSUFBSUcsYUFBYSxHQUFHSCxPQUFPLENBQUMsZ0JBQUQsQ0FBM0I7O0FBQ0EsSUFBSUksU0FBUyxHQUFHSixPQUFPLENBQUMsWUFBRCxDQUF2Qjs7QUFDQSxJQUFJSyxLQUFLLEdBQUdMLE9BQU8sQ0FBQyxRQUFELENBQW5COztBQUNBLElBQUlNLGNBQWMsR0FBR04sT0FBTyxDQUFDLGlCQUFELENBQTVCOztBQUNBLElBQUlPLFlBQVksR0FBR1AsT0FBTyxDQUFDLGVBQUQsQ0FBMUI7O0FBQ0EsSUFBSVEsZUFBZSxHQUFHUixPQUFPLENBQUMsa0JBQUQsQ0FBN0I7O0FBQ0EsSUFBSVMsV0FBVyxHQUFHVCxPQUFPLENBQUMsY0FBRCxDQUF6Qjs7QUFDQSxJ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QUFaLENBQXVCQyxVQUE5RCxDQUFSOztJQUNBLElBQUksQ0FBQ3hELENBQUwsRUFBUTtNQUNKLElBQUl2QixDQUFDLEdBQUdDLGFBQWEsV0FBYixDQUFzQitFLFFBQXRCLENBQStCQyxNQUEvQixDQUNKOUUsVUFBVSxDQUFDK0UsV0FBWCxDQUF1QkMsSUFEbkIsRUFFSmhGLFVBQVUsQ0FBQ2lGLFNBQVgsQ0FBcUJDLFdBQXJCLENBQWlDQyxPQUFqQyxDQUF5Q0MsVUFBekMsQ0FBb0RDLFNBRmhELENBQVI7TUFJQSxDQUFDakUsQ0FBQyxHQUFHbkIsUUFBUSxDQUFDcUYsT0FBVCxDQUFpQkMsV0FBakIsQ0FBNkIxRixDQUE3QixFQUFnQ1ksWUFBWSxXQUFaLENBQXFCZSxHQUFyQixDQUF5QmdFLFdBQXpCLENBQXFDcEMsTUFBckUsRUFBNkVxQyxZQUE3RSxDQUNEakYsV0FBVyxXQURWLENBQUwsRUFFR2tGLGdCQUZILEdBRXNCckYsY0FBYyxXQUFkLENBQXVCd0UsUUFBdkIsQ0FBZ0NjLG1CQUFoQyxDQUFvREMsR0FBcEQsQ0FBd0QsS0FBS3RFLE9BQTdELEVBQXNFdUUsVUFGNUY7SUFHSDs7SUFDRHpFLENBQUMsQ0FBQzBFLFdBQUYsQ0FBYzNFLENBQWQ7SUFDQUMsQ0FBQyxDQUFDMkUsVUFBRixDQUFhN0UsQ0FBQyxDQUFDOEUsU0FBRixFQUFiLEVBQTRCLEtBQUsxRSxPQUFqQztJQUNBRixDQUFDLENBQUM2RSxNQUFGLENBQVN4RixZQUFZLFdBQVosQ0FBcUJlLEdBQXJCLENBQXlCZ0UsV0FBbEM7SUFDQXBFLENBQUMsQ0FBQzhFLFlBQUYsQ0FBZSxFQUFmO0VBQ0gsQ0FmRDs7RUFnQkEsT0FBTy9FLENBQVA7QUFDSCxDQTFHTyxDQTBHTFAsUUFBUSxXQTFHSCxDQUFSOztBQTJHQXVGLE9BQU8sV0FBUCxHQUFrQmxGLENBQWxCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbztcclxudmFyICRhc3NldHNMb2FkZXIgPSByZXF1aXJlKFwiLi9Bc3NldHNMb2FkZXJcIik7XHJcbnZhciAkYXNzZXRzTWFwID0gcmVxdWlyZShcIi4vQXNzZXRzTWFwXCIpO1xyXG52YXIgJHJlc1V0aWwgPSByZXF1aXJlKFwiLi9SZXNVdGlsXCIpO1xyXG52YXIgJGV2ZW50TWFuYWdlciA9IHJlcXVpcmUoXCIuL0V2ZW50TWFuYWdlclwiKTtcclxudmFyICRzZWVkVXRpbCA9IHJlcXVpcmUoXCIuL1NlZWRVdGlsXCIpO1xyXG52YXIgJHV0aWwgPSByZXF1aXJlKFwiLi9VdGlsXCIpO1xyXG52YXIgJGNvbmZpZ0NvbnRleHQgPSByZXF1aXJlKFwiLi9Db25maWdDb250ZXh0XCIpO1xyXG52YXIgJGdsb2JhbFBhcmFtID0gcmVxdWlyZShcIi4vR2xvYmFsUGFyYW1cIik7XHJcbnZhciAkbG9jYWxFdmVudE5hbWUgPSByZXF1aXJlKFwiLi9Mb2NhbEV2ZW50TmFtZVwiKTtcclxudmFyICRiYXNlQnVsbGV0ID0gcmVxdWlyZShcIi4vQmFzZUJ1bGxldFwiKTtcclxudmFyICRnYW1lQ29udGV4dCA9IHJlcXVpcmUoXCIuL0dhbWVDb250ZXh0XCIpO1xyXG52YXIgJGdhbWVHZW1JbmZvID0gcmVxdWlyZShcIi4vR2FtZUdlbUluZm9cIik7XHJcbnZhciAkZ2FtZVNraWxsSW5mbyA9IHJlcXVpcmUoXCIuL0dhbWVTa2lsbEluZm9cIik7XHJcbnZhciAkYmFzZUd1biA9IHJlcXVpcmUoXCIuL0Jhc2VHdW5cIik7XHJcbnZhciBrID0gY2MuVmVjMy5aRVJPO1xyXG52YXIgdiA9IChmdW5jdGlvbiAodCkge1xyXG4gICAgZnVuY3Rpb24gZShlKSB7XHJcbiAgICAgICAgdmFyIGkgPSB0LmNhbGwodGhpcywgZSkgfHwgdGhpcztcclxuICAgICAgICBpLnNraWxsSWQgPSAyMDk7XHJcbiAgICAgICAgaS5za2lsbFBhcmFtID0gJGdhbWVDb250ZXh0LmRlZmF1bHQuaW5zLnNraWxsSW5mby5nZXRTa2lsbEJ5SWQoaS5za2lsbElkKTtcclxuICAgICAgICByZXR1cm4gaTtcclxuICAgIH1cclxuICAgIF9fZXh0ZW5kcyhlLCB0KTtcclxuICAgIGUucHJvdG90eXBlLnVwZGF0ZUYgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHQucHJvdG90eXBlLnVwZGF0ZUYuY2FsbCh0aGlzLCBlKTtcclxuICAgICAgICBpZiAoISh0aGlzLmlzQXR0YWNraW5nIHx8ICRnbG9iYWxQYXJhbS5kZWZhdWx0LmlzR2FtZVB1YXNlKSkge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVMZWZ0IC09IGU7XHJcbiAgICAgICAgICAgIHRoaXMudGltZUxlZnQgPD0gMFxyXG4gICAgICAgICAgICAgICAgPyAoKHRoaXMuaXNBdHRhY2tpbmcgPSAhMCksXHJcbiAgICAgICAgICAgICAgICAgICh0aGlzLnRpbWVMZWZ0ID0gdGhpcy5za2lsbFBhcmFtLnNraWxsQ0RbJGdhbWVTa2lsbEluZm8uU2tpbGw0UGFyYW0uRklOQUxdKSxcclxuICAgICAgICAgICAgICAgICAgJGV2ZW50TWFuYWdlci5kZWZhdWx0LnNlbmQoJGxvY2FsRXZlbnROYW1lLmRlZmF1bHQuUkVOREVSX1NLSUxMX0NEX0lORk8sIHRoaXMuc2tpbGxJZCwgMCwgLTEpLFxyXG4gICAgICAgICAgICAgICAgICB0aGlzLnN0YXJHdW4oKSB8fCAoKHRoaXMuaXNBdHRhY2tpbmcgPSAhMSksICh0aGlzLnRpbWVMZWZ0ID0gMCkpKVxyXG4gICAgICAgICAgICAgICAgOiAkZXZlbnRNYW5hZ2VyLmRlZmF1bHQuc2VuZChcclxuICAgICAgICAgICAgICAgICAgICAgICRsb2NhbEV2ZW50TmFtZS5kZWZhdWx0LlJFTkRFUl9TS0lMTF9DRF9JTkZPLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5za2lsbElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lTGVmdCAvIHRoaXMuc2tpbGxQYXJhbS5za2lsbENEWyRnYW1lU2tpbGxJbmZvLlNraWxsNFBhcmFtLkZJTkFMXSxcclxuICAgICAgICAgICAgICAgICAgICAgIC0xXHJcbiAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLnN0YXJHdW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHQgPSAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuZ2V0UmFuZ2VSYW5rRW5lbXkoXHJcbiAgICAgICAgICAgIHRoaXMucG9pbnROb2RlLFxyXG4gICAgICAgICAgICB0aGlzLnNraWxsUGFyYW0uc2tpbGxBdGtSYW5nZVskZ2FtZVNraWxsSW5mby5Ta2lsbDRQYXJhbS5GSU5BTF1cclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICEhdCAmJlxyXG4gICAgICAgICAgICAodGhpcy5za2lsbFBhcmFtLndpbmRCbGFkZU11bHRpIDw9IDAgPyB0aGlzLnNlbmRCdWxsZXQxKHQpIDogdGhpcy5zZW5kYnVsbGV0Mih0KSxcclxuICAgICAgICAgICAgKHRoaXMuaXNBdHRhY2tpbmcgPSAhMSksXHJcbiAgICAgICAgICAgICEwKVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuc2VuZGJ1bGxldDIgPSBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIHZhciBlID0gdGhpcztcclxuICAgICAgICB0aGlzLmdldFJhbmRvbVBvcygpO1xyXG4gICAgICAgIHZhciBpID0gdC5nZXRQb3NpdGlvbigpLnN1YihrKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZUJ1dHRsZShpLCBrKTtcclxuICAgICAgICBmb3IgKHZhciBvID0gMTsgbyA8IHRoaXMuc2tpbGxQYXJhbS53aW5kQmxhZGVNdWx0aTsgbysrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVzT25jZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9ICRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5nZXRSYW5kb21FbmVteSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHQgJiYgdC5ub2RlLnBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUuZ2V0UmFuZG9tUG9zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0LmdldFBvc2l0aW9uKCkuc3ViKGspO1xyXG4gICAgICAgICAgICAgICAgICAgIGUuY3JlYXRlQnV0dGxlKGksIGspO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBvICogdGhpcy5za2lsbFBhcmFtLndpbmRCbGFkZU11bHRpVGltZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmdldFJhbmRvbVBvcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkc2VlZFV0aWwuZGVmYXVsdC5wcm9iYWJpbGl0eSg1MClcclxuICAgICAgICAgICAgPyAoKGsueCA9ICRzZWVkVXRpbC5kZWZhdWx0LnJhbmRvbUZyb20oLTQ2MCwgNDYwKSksIChrLnkgPSAtY2Mud2luU2l6ZS5oZWlnaHQgLyAyIC0gMTUwKSlcclxuICAgICAgICAgICAgOiAoKGsueCA9ICRzZWVkVXRpbC5kZWZhdWx0LnByb2JhYmlsaXR5KDUwKSA/IC00NjAgOiA0NjApLFxyXG4gICAgICAgICAgICAgIChrLnkgPSAtJHNlZWRVdGlsLmRlZmF1bHQucmFuZG9tRnJvbSgwLCBjYy53aW5TaXplLmhlaWdodCAvIDIgKyAxNTApKSk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuc2VuZEJ1bGxldDEgPSBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIHZhciBlID0gdGhpcztcclxuICAgICAgICB2YXIgaSA9IDE1MCAvIHRoaXMuc2tpbGxQYXJhbS53aW5kQmxhZGVTcGVlZDtcclxuICAgICAgICB2YXIgbyA9IDA7XHJcbiAgICAgICAgdmFyIG4gPSB0aGlzLnNraWxsUGFyYW0ud2luZEJsYWRlQ29tYm9Db3VudCArIDE7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAkZ2FtZUdlbUluZm8uR2FtZUdlbUluZm8uaW5zLmhhc0dlbSgkZ2FtZUdlbUluZm8uR2VtVHlwZS5BZGRTa2lsbCkgJiZcclxuICAgICAgICAgICAgJHNlZWRVdGlsLmRlZmF1bHQucHJvYmFiaWxpdHkoMTAwICogJGdhbWVHZW1JbmZvLkdhbWVHZW1JbmZvLmlucy5nZXQxKCRnYW1lR2VtSW5mby5HZW1UeXBlLkFkZFNraWxsKSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgbiAqPSAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcyA9IHQuZ2V0UG9zaXRpb24oKS5zdWIodGhpcy5wb2ludE5vZGUucG9zaXRpb24pO1xyXG4gICAgICAgIGsueCA9IHRoaXMucG9pbnROb2RlLnBvc2l0aW9uLng7XHJcbiAgICAgICAgay55ID0gdGhpcy5wb2ludE5vZGUucG9zaXRpb24ueTtcclxuICAgICAgICBmb3IgKHZhciByID0gMDsgciA8IG47IHIrKykge1xyXG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlc09uY2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZS5jcmVhdGVCdXR0bGUocywgayk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9ICR1dGlsLmRlZmF1bHQuZGlyQ29udmVyQW5nbGUocyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5za2lsbFBhcmFtLndpbmRCbGFkZVBhcmFsbGVsQ291bnQgPj0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUuY3JlYXRlQnV0dGxlKCR1dGlsLmRlZmF1bHQuYW5nbGVDb252ZXJEaXIodCArIDE1KSwgayk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5za2lsbFBhcmFtLndpbmRCbGFkZVBhcmFsbGVsQ291bnQgPj0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgIGUuY3JlYXRlQnV0dGxlKCR1dGlsLmRlZmF1bHQuYW5nbGVDb252ZXJEaXIodCAtIDE1KSwgayk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoKytvID09PSBuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5pc0F0dGFja2luZyA9ICExO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBpICogcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmNyZWF0ZUJ1dHRsZSA9IGZ1bmN0aW9uICh0LCBlKSB7XHJcbiAgICAgICAgdmFyIGkgPSAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuZ2V0QnV0dGxlUG9vbCgkYmFzZUJ1bGxldC5CdWxsZXRUeXBlLndpbmRfYmxhZGUpO1xyXG4gICAgICAgIGlmICghaSkge1xyXG4gICAgICAgICAgICB2YXIgbyA9ICRhc3NldHNMb2FkZXIuZGVmYXVsdC5pbnN0YW5jZS5nZXRSZXMoXHJcbiAgICAgICAgICAgICAgICAkYXNzZXRzTWFwLkJ1bmRsZU5hbWVzLkdhbWUsXHJcbiAgICAgICAgICAgICAgICAkYXNzZXRzTWFwLkFzc2V0c01hcC5HYW1lQnVuZGxlcy5wcmVmYWJzLmFzc2V0c0xpc3QuQnVsbGV0XzIyXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIChpID0gJHJlc1V0aWwuUmVzVXRpbC5pbnN0YW50aWF0ZShvLCAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuYnV0dGxlTGF5ZXIucGFyZW50KS5nZXRDb21wb25lbnQoXHJcbiAgICAgICAgICAgICAgICAkYmFzZUJ1bGxldC5kZWZhdWx0XHJcbiAgICAgICAgICAgICkpLnNraWxsU3BlY2lhbGl0eXMgPSAkY29uZmlnQ29udGV4dC5kZWZhdWx0Lmluc3RhbmNlLmJhc2ljU2tpbGxDb25maWdNYXAuZ2V0KHRoaXMuc2tpbGxJZCkuc2tpbGxfdHB5ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaS5zZXRQb3NpdGlvbihlKTtcclxuICAgICAgICBpLmluaXRCdXR0bGUodC5ub3JtYWxpemUoKSwgdGhpcy5za2lsbElkKTtcclxuICAgICAgICBpLmluc2VydCgkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuYnV0dGxlTGF5ZXIpO1xyXG4gICAgICAgIGkuc2V0QW5pbWF0aW9uKFwiXCIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBlO1xyXG59KSgkYmFzZUd1bi5kZWZhdWx0KTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gdjtcclxuIl19