
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/SeedUtil.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '3b84bVQCWVBaZMDhM6Wccol', 'SeedUtil');
// game_script/scripts/SeedUtil.js

"use strict";

var $util = require("./Util");

var n = function () {
  function t() {}

  t.init = function (t) {
    this.seed = t;
  };

  t.random = function () {
    var t = (1103515245 * this.seed + 123456789) % this.maxNumber;
    this.seed = t;
    return t / this.maxNumber;
  };

  t.randomFromSync = function (e, i) {
    return Math.floor(t.random() * (i - e + 1) + e);
  };

  t.randomFrom = function (t, e) {
    return Math.floor(Math.random() * (e - t + 1) + t);
  };

  t.randomFloat = function (t, e) {
    return parseFloat((Math.random() * (e - t) + t).toFixed(2));
  };

  t.randomCount = function (e, i, o) {
    var n = [];

    if (i - e + 1 <= o) {
      for (var s = e; s <= i; s++) {
        n.push(s);
      }

      return n;
    }

    do {
      var r = t.randomFrom(e, i);

      if (!n.includes(r)) {
        n.push(r);
      }
    } while (n.length < o);

    return n;
  };

  t.randomArr = function (e, i, o) {
    if (void 0 === o) {
      o = !1;
    }

    if (e.length <= i) {
      return e;
    }

    for (var n = []; n.length < i;) {
      var s = t.randomFrom(0, e.length - 1);
      o ? n.push(s) : n.includes(s) || n.push(s);
    }

    var r = [];

    for (var a = 0; a < n.length; a++) {
      r.push(e[n[a]]);
    }

    return r;
  };

  t.randomArrSync = function (e, i, o) {
    if (void 0 === o) {
      o = !1;
    }

    if (e.length <= i) {
      return e;
    }

    for (var n = []; n.length < i;) {
      var s = t.randomFromSync(0, e.length - 1);
      o ? n.push(s) : n.includes(s) || n.push(s);
    }

    var r = [];

    for (var a = 0; a < n.length; a++) {
      r.push(e[n[a]]);
    }

    return r;
  };

  t.weightRandomCount = function (e, i, n) {
    if (void 0 === n) {
      n = !0;
    }

    if (!n && e.length < i) {
      return e;
    }

    var s = $util["default"].deepCopy(e);
    var r = [];
    var a = 0;
    s.forEach(function (t) {
      return a += t;
    });

    do {
      var l = 0;
      var c = t.randomFrom(0, a);

      for (var u = 0; u < s.length; u++) {
        if (l += s[u], 0 !== s[u] && c <= l) {
          r.push(u);

          if (!n) {
            a -= s[u];
            s[u] = 0;
          }

          break;
        }
      }
    } while (r.length < i);

    return r;
  };

  t.probability = function (e, i) {
    if (void 0 === i) {
      i = 100;
    }

    return t.randomFrom(1, i) <= e;
  };

  t.getRandomArbitrary = function (t, e) {
    return Math.random() * (e - t) + t;
  };

  t.splitNumber = function (e, i, o) {
    if (void 0 === o) {
      o = !1;
    }

    var n = [];
    var s = 0;

    for (var r = i; s < r; s++) {
      var a = t.getRandomMoney(e, i, o);
      n.push(a);
      i--;
      e -= a;
    }

    return n;
  };

  t.getRandomMoney = function (e, i, o) {
    if (void 0 === o) {
      o = !1;
    }

    if (1 === i) {
      i--;
      return Math.round(e);
    }

    var n = Math.random();

    if (o) {
      n = t.random();
    }

    var s = n * Math.floor(e / i * 2);
    var r = s <= 1 ? 1 : Math.floor(s);
    i--;
    e -= r;
    return r;
  };

  t.seed = 0;
  t.maxNumber = Math.pow(2, 32) - 1;
  return t;
}();

exports["default"] = n;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXFNlZWRVdGlsLmpzIl0sIm5hbWVzIjpbIiR1dGlsIiwicmVxdWlyZSIsIm4iLCJ0IiwiaW5pdCIsInNlZWQiLCJyYW5kb20iLCJtYXhOdW1iZXIiLCJyYW5kb21Gcm9tU3luYyIsImUiLCJpIiwiTWF0aCIsImZsb29yIiwicmFuZG9tRnJvbSIsInJhbmRvbUZsb2F0IiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJyYW5kb21Db3VudCIsIm8iLCJzIiwicHVzaCIsInIiLCJpbmNsdWRlcyIsImxlbmd0aCIsInJhbmRvbUFyciIsImEiLCJyYW5kb21BcnJTeW5jIiwid2VpZ2h0UmFuZG9tQ291bnQiLCJkZWVwQ29weSIsImZvckVhY2giLCJsIiwiYyIsInUiLCJwcm9iYWJpbGl0eSIsImdldFJhbmRvbUFyYml0cmFyeSIsInNwbGl0TnVtYmVyIiwiZ2V0UmFuZG9tTW9uZXkiLCJyb3VuZCIsInBvdyIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsS0FBSyxHQUFHQyxPQUFPLENBQUMsUUFBRCxDQUFuQjs7QUFDQSxJQUFJQyxDQUFDLEdBQUksWUFBWTtFQUNqQixTQUFTQyxDQUFULEdBQWEsQ0FBRTs7RUFDZkEsQ0FBQyxDQUFDQyxJQUFGLEdBQVMsVUFBVUQsQ0FBVixFQUFhO0lBQ2xCLEtBQUtFLElBQUwsR0FBWUYsQ0FBWjtFQUNILENBRkQ7O0VBR0FBLENBQUMsQ0FBQ0csTUFBRixHQUFXLFlBQVk7SUFDbkIsSUFBSUgsQ0FBQyxHQUFHLENBQUMsYUFBYSxLQUFLRSxJQUFsQixHQUF5QixTQUExQixJQUF1QyxLQUFLRSxTQUFwRDtJQUNBLEtBQUtGLElBQUwsR0FBWUYsQ0FBWjtJQUNBLE9BQU9BLENBQUMsR0FBRyxLQUFLSSxTQUFoQjtFQUNILENBSkQ7O0VBS0FKLENBQUMsQ0FBQ0ssY0FBRixHQUFtQixVQUFVQyxDQUFWLEVBQWFDLENBQWIsRUFBZ0I7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Q0EsSUFBSVksQ0FBSixFQUFPO01BQ0hoQixDQUFDLEdBQUdDLENBQUMsQ0FBQ0csTUFBRixFQUFKO0lBQ0g7O0lBQ0QsSUFBSWEsQ0FBQyxHQUFHakIsQ0FBQyxHQUFHUyxJQUFJLENBQUNDLEtBQUwsQ0FBWUgsQ0FBQyxHQUFHQyxDQUFMLEdBQVUsQ0FBckIsQ0FBWjtJQUNBLElBQUlXLENBQUMsR0FBR0YsQ0FBQyxJQUFJLENBQUwsR0FBUyxDQUFULEdBQWFSLElBQUksQ0FBQ0MsS0FBTCxDQUFXTyxDQUFYLENBQXJCO0lBQ0FULENBQUM7SUFDREQsQ0FBQyxJQUFJWSxDQUFMO0lBQ0EsT0FBT0EsQ0FBUDtFQUNILENBakJEOztFQWtCQWxCLENBQUMsQ0FBQ0UsSUFBRixHQUFTLENBQVQ7RUFDQUYsQ0FBQyxDQUFDSSxTQUFGLEdBQWNJLElBQUksQ0FBQzJCLEdBQUwsQ0FBUyxDQUFULEVBQVksRUFBWixJQUFrQixDQUFoQztFQUNBLE9BQU9uQyxDQUFQO0FBQ0gsQ0E5SU8sRUFBUjs7QUErSUFvQyxPQUFPLFdBQVAsR0FBa0JyQyxDQUFsQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyICR1dGlsID0gcmVxdWlyZShcIi4vVXRpbFwiKTtcclxudmFyIG4gPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gdCgpIHt9XHJcbiAgICB0LmluaXQgPSBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIHRoaXMuc2VlZCA9IHQ7XHJcbiAgICB9O1xyXG4gICAgdC5yYW5kb20gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHQgPSAoMTEwMzUxNTI0NSAqIHRoaXMuc2VlZCArIDEyMzQ1Njc4OSkgJSB0aGlzLm1heE51bWJlcjtcclxuICAgICAgICB0aGlzLnNlZWQgPSB0O1xyXG4gICAgICAgIHJldHVybiB0IC8gdGhpcy5tYXhOdW1iZXI7XHJcbiAgICB9O1xyXG4gICAgdC5yYW5kb21Gcm9tU3luYyA9IGZ1bmN0aW9uIChlLCBpKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IodC5yYW5kb20oKSAqIChpIC0gZSArIDEpICsgZSk7XHJcbiAgICB9O1xyXG4gICAgdC5yYW5kb21Gcm9tID0gZnVuY3Rpb24gKHQsIGUpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGUgLSB0ICsgMSkgKyB0KTtcclxuICAgIH07XHJcbiAgICB0LnJhbmRvbUZsb2F0ID0gZnVuY3Rpb24gKHQsIGUpIHtcclxuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCgoTWF0aC5yYW5kb20oKSAqIChlIC0gdCkgKyB0KS50b0ZpeGVkKDIpKTtcclxuICAgIH07XHJcbiAgICB0LnJhbmRvbUNvdW50ID0gZnVuY3Rpb24gKGUsIGksIG8pIHtcclxuICAgICAgICB2YXIgbiA9IFtdO1xyXG4gICAgICAgIGlmIChpIC0gZSArIDEgPD0gbykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBzID0gZTsgcyA8PSBpOyBzKyspIHtcclxuICAgICAgICAgICAgICAgIG4ucHVzaChzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICB2YXIgciA9IHQucmFuZG9tRnJvbShlLCBpKTtcclxuICAgICAgICAgICAgaWYgKCFuLmluY2x1ZGVzKHIpKSB7XHJcbiAgICAgICAgICAgICAgICBuLnB1c2gocik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IHdoaWxlIChuLmxlbmd0aCA8IG8pO1xyXG4gICAgICAgIHJldHVybiBuO1xyXG4gICAgfTtcclxuICAgIHQucmFuZG9tQXJyID0gZnVuY3Rpb24gKGUsIGksIG8pIHtcclxuICAgICAgICBpZiAodm9pZCAwID09PSBvKSB7XHJcbiAgICAgICAgICAgIG8gPSAhMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGUubGVuZ3RoIDw9IGkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIG4gPSBbXTsgbi5sZW5ndGggPCBpOyApIHtcclxuICAgICAgICAgICAgdmFyIHMgPSB0LnJhbmRvbUZyb20oMCwgZS5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgbyA/IG4ucHVzaChzKSA6IG4uaW5jbHVkZXMocykgfHwgbi5wdXNoKHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgciA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgbi5sZW5ndGg7IGErKykge1xyXG4gICAgICAgICAgICByLnB1c2goZVtuW2FdXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByO1xyXG4gICAgfTtcclxuICAgIHQucmFuZG9tQXJyU3luYyA9IGZ1bmN0aW9uIChlLCBpLCBvKSB7XHJcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbykge1xyXG4gICAgICAgICAgICBvID0gITE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlLmxlbmd0aCA8PSBpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBuID0gW107IG4ubGVuZ3RoIDwgaTsgKSB7XHJcbiAgICAgICAgICAgIHZhciBzID0gdC5yYW5kb21Gcm9tU3luYygwLCBlLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICBvID8gbi5wdXNoKHMpIDogbi5pbmNsdWRlcyhzKSB8fCBuLnB1c2gocyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBuLmxlbmd0aDsgYSsrKSB7XHJcbiAgICAgICAgICAgIHIucHVzaChlW25bYV1dKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHI7XHJcbiAgICB9O1xyXG4gICAgdC53ZWlnaHRSYW5kb21Db3VudCA9IGZ1bmN0aW9uIChlLCBpLCBuKSB7XHJcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikge1xyXG4gICAgICAgICAgICBuID0gITA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghbiAmJiBlLmxlbmd0aCA8IGkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzID0gJHV0aWwuZGVmYXVsdC5kZWVwQ29weShlKTtcclxuICAgICAgICB2YXIgciA9IFtdO1xyXG4gICAgICAgIHZhciBhID0gMDtcclxuICAgICAgICBzLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChhICs9IHQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgICAgdmFyIGwgPSAwO1xyXG4gICAgICAgICAgICB2YXIgYyA9IHQucmFuZG9tRnJvbSgwLCBhKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgdSA9IDA7IHUgPCBzLmxlbmd0aDsgdSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKChsICs9IHNbdV0pLCAwICE9PSBzW3VdICYmIGMgPD0gbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByLnB1c2godSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGEgLT0gc1t1XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc1t1XSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSB3aGlsZSAoci5sZW5ndGggPCBpKTtcclxuICAgICAgICByZXR1cm4gcjtcclxuICAgIH07XHJcbiAgICB0LnByb2JhYmlsaXR5ID0gZnVuY3Rpb24gKGUsIGkpIHtcclxuICAgICAgICBpZiAodm9pZCAwID09PSBpKSB7XHJcbiAgICAgICAgICAgIGkgPSAxMDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0LnJhbmRvbUZyb20oMSwgaSkgPD0gZTtcclxuICAgIH07XHJcbiAgICB0LmdldFJhbmRvbUFyYml0cmFyeSA9IGZ1bmN0aW9uICh0LCBlKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAoZSAtIHQpICsgdDtcclxuICAgIH07XHJcbiAgICB0LnNwbGl0TnVtYmVyID0gZnVuY3Rpb24gKGUsIGksIG8pIHtcclxuICAgICAgICBpZiAodm9pZCAwID09PSBvKSB7XHJcbiAgICAgICAgICAgIG8gPSAhMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG4gPSBbXTtcclxuICAgICAgICB2YXIgcyA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgciA9IGk7IHMgPCByOyBzKyspIHtcclxuICAgICAgICAgICAgdmFyIGEgPSB0LmdldFJhbmRvbU1vbmV5KGUsIGksIG8pO1xyXG4gICAgICAgICAgICBuLnB1c2goYSk7XHJcbiAgICAgICAgICAgIGktLTtcclxuICAgICAgICAgICAgZSAtPSBhO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbjtcclxuICAgIH07XHJcbiAgICB0LmdldFJhbmRvbU1vbmV5ID0gZnVuY3Rpb24gKGUsIGksIG8pIHtcclxuICAgICAgICBpZiAodm9pZCAwID09PSBvKSB7XHJcbiAgICAgICAgICAgIG8gPSAhMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKDEgPT09IGkpIHtcclxuICAgICAgICAgICAgaS0tO1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG4gPSBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICAgIGlmIChvKSB7XHJcbiAgICAgICAgICAgIG4gPSB0LnJhbmRvbSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcyA9IG4gKiBNYXRoLmZsb29yKChlIC8gaSkgKiAyKTtcclxuICAgICAgICB2YXIgciA9IHMgPD0gMSA/IDEgOiBNYXRoLmZsb29yKHMpO1xyXG4gICAgICAgIGktLTtcclxuICAgICAgICBlIC09IHI7XHJcbiAgICAgICAgcmV0dXJuIHI7XHJcbiAgICB9O1xyXG4gICAgdC5zZWVkID0gMDtcclxuICAgIHQubWF4TnVtYmVyID0gTWF0aC5wb3coMiwgMzIpIC0gMTtcclxuICAgIHJldHVybiB0O1xyXG59KSgpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBuO1xyXG4iXX0=