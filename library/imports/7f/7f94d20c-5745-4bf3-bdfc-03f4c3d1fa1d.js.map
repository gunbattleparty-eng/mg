{"version":3,"sources":["assets\\game_script\\scripts\\RoleView.js"],"names":["o","$list","require","$gemListItem","$roleContext","$eventManager","$localEventName","$gameGemInfo","$equipmentContext","$uIManager","$popupManager","$assetsMap","$playerSkin","$itemView","$startView","$equipmentItem","$remoteAudio","$userDataContext","$guide","A","cc","_decorator","S","ccclass","C","property","I","t","e","apply","arguments","gemList","atk","btnCraft","btnProps","btnAutoUpgrade","btnSkin","playerSkin","btnGunSKin","changeGemBtns","equipNode","packList","__extends","prototype","start","ins","showPackInfoList","scheduleOnce","numItems","length","on","RENDER_GEM","updateList","RENDER_DOT","renderDot","renderAtk","clickCraft","clickProps","clickAutoUpgrade","clickSkin","clickGunSkin","currSkinInfo","changePlayerSkin","skin","i","children","changeGemItem","refreshBtn","MenuType","Role","node","getComponent","reuse","unuse","off","indexOf","Ins","order","instance","playEffectMusic","send","forEach","active","hasPlayerSkinDot","hasGunSkinDot","onDestroy","checkEquipUpgrade","isCanComposeGem","UIManager","replaceView","AssetsMap","StartBundles","prefabs","assetsList","RoleShopView","GunShopView","renderItem","isEndGuide","guideStep","self","startGuideTest","render","selectedId","updateAll","GameGemInfo","hasGem","GemType","Attack","get1","getEquipmentAtk","getAtk","string","getCanComposeGemList","showToast","PopupManager","open","PopUpBundles","RewardGemView","gemIds","GemStatsView","stopGuide","guideEnd","autoUpgrade","EQUIP_UPGRADE","__decorate","Label","Node","PlayerSkin","exports"],"mappings":";;;;;;AAAA,IAAIA,CAAJ;;AACA,IAAIC,KAAK,GAAGC,OAAO,CAAC,QAAD,CAAnB;;AACA,IAAIC,YAAY,GAAGD,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAIE,YAAY,GAAGF,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAIG,aAAa,GAAGH,OAAO,CAAC,gBAAD,CAA3B;;AACA,IAAII,eAAe,GAAGJ,OAAO,CAAC,kBAAD,CAA7B;;AACA,IAAIK,YAAY,GAAGL,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAIM,iBAAiB,GAAGN,OAAO,CAAC,oBAAD,CAA/B;;AACA,IAAIO,UAAU,GAAGP,OAAO,CAAC,aAAD,CAAxB;;AACA,IAAIQ,aAAa,GAAGR,OAAO,CAAC,gBAAD,CAA3B;;AACA,IAAIS,UAAU,GAAGT,OAAO,CAAC,aAAD,CAAxB;;AACA,IAAIU,WAAW,GAAGV,OAAO,CAAC,cAAD,CAAzB;;AACA,IAAIW,SAAS,GAAGX,OAAO,CAAC,YAAD,CAAvB;;AACA,IAAIY,UAAU,GAAGZ,OAAO,CAAC,aAAD,CAAxB;;AACA,IAAIa,cAAc,GAAGb,OAAO,CAAC,iBAAD,CAA5B;;AACA,IAAIc,YAAY,GAAGd,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAIe,gBAAgB,GAAGf,OAAO,CAAC,mBAAD,CAA9B;;AACA,IAAIgB,MAAM,GAAGhB,OAAO,CAAC,SAAD,CAApB;;AACA,IAAIiB,CAAC,GAAGC,EAAE,CAACC,UAAX;AACA,IAAIC,CAAC,GAAGH,CAAC,CAACI,OAAV;AACA,IAAIC,CAAC,GAAGL,CAAC,CAACM,QAAV;;AACA,IAAIC,CAAC,GAAI,UAAUC,CAAV,EAAa;EAClB,SAASC,CAAT,GAAa;IACT,IAAIA,CAAC,GAAI,SAASD,CAAT,IAAcA,CAAC,CAACE,KAAF,CAAQ,IAAR,EAAcC,SAAd,CAAf,IAA4C,IAApD;IACAF,CAAC,CAACG,OAAF,GAAY,IAAZ;IACAH,CAAC,CAACI,GAAF,GAAQ,IAAR;IACAJ,CAAC,CAACK,QAAF,GAAa,IAAb;IACAL,CAAC,CAACM,QAAF,GAAa,IAAb;IACAN,CAAC,CAACO,cAAF,GAAmB,IAAnB;IACAP,CAAC,CAACQ,OAAF,GAAY,IAAZ;IACAR,CAAC,CAACS,UAAF,GAAe,IAAf;IACAT,CAAC,CAACU,UAAF,GAAe,IAAf;IACAV,CAAC,CAACW,aAAF,GAAkB,IAAlB;IACAX,CAAC,CAACY,SAAF,GAAc,IAAd;IACAZ,CAAC,CAACa,QAAF,GAAa,EAAb;IACA,OAAOb,CAAP;EACH;;EACDc,SAAS,CAACd,CAAD,EAAID,CAAJ,CAAT;;EACAC,CAAC,CAACe,SAAF,CAAYC,KAAZ,GAAoB,YAAY;IAC5B,IAAIjB,CAAC,GAAG,IAAR;IACA,KAAKc,QAAL,GAAgBrC,YAAY,WAAZ,CAAqByC,GAArB,CAAyBC,gBAAzB,EAAhB;IACA,KAAKC,YAAL,CAAkB,YAAY;MAC1BpB,CAAC,CAACI,OAAF,CAAUiB,QAAV,GAAqBrB,CAAC,CAACc,QAAF,CAAWQ,MAAhC;IACH,CAFD,EAEG,GAFH;IAGA5C,aAAa,WAAb,CAAsB6C,EAAtB,CAAyB5C,eAAe,WAAf,CAAwB6C,UAAjD,EAA6D,KAAKC,UAAlE,EAA8E,IAA9E;IACA/C,aAAa,WAAb,CAAsB6C,EAAtB,CAAyB5C,eAAe,WAAf,CAAwB+C,UAAjD,EAA6D,KAAKC,SAAlE,EAA6E,IAA7E;IACA,KAAKC,SAAL;IACA,KAAKtB,QAAL,CAAciB,EAAd,CAAiB,OAAjB,EAA0B,KAAKM,UAA/B,EAA2C,IAA3C;IACA,KAAKtB,QAAL,CAAcgB,EAAd,CAAiB,OAAjB,EAA0B,KAAKO,UAA/B,EAA2C,IAA3C;IACA,KAAKtB,cAAL,CAAoBe,EAApB,CAAuB,OAAvB,EAAgC,KAAKQ,gBAArC,EAAuD,IAAvD;IACA,KAAKtB,OAAL,CAAac,EAAb,CAAgB,OAAhB,EAAyB,KAAKS,SAA9B,EAAyC,IAAzC;IACA,KAAKrB,UAAL,CAAgBY,EAAhB,CAAmB,OAAnB,EAA4B,KAAKU,YAAjC,EAA+C,IAA/C;IACA,IAAIhC,CAAC,GAAGxB,YAAY,WAAZ,CAAqByC,GAArB,CAAyBgB,YAAjC;IACA,KAAKxB,UAAL,CAAgByB,gBAAhB,CAAiClC,CAAC,CAACmC,IAAnC;;IACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKzB,aAAL,CAAmB0B,QAAnB,CAA4BhB,MAAhD,EAAwDe,CAAC,EAAzD,EAA6D;MACzD,KAAKzB,aAAL,CAAmB0B,QAAnB,CAA4BD,CAA5B,EAA+Bd,EAA/B,CAAkC,OAAlC,EAA2C,KAAKgB,aAAhD,EAA+D,IAA/D;IACH;;IACD,KAAKC,UAAL;IACA,KAAKb,SAAL,CAAexC,UAAU,CAACsD,QAAX,CAAoBC,IAAnC;IACA,KAAKC,IAAL,CAAUC,YAAV,CAAuBxD,cAAc,WAArC,EAA+CuC,SAA/C,CAAyDxC,UAAU,CAACsD,QAAX,CAAoBC,IAA7E;EACH,CAtBD;;EAuBAzC,CAAC,CAACe,SAAF,CAAY6B,KAAZ,GAAoB,YAAY;IAC5B,KAAKL,UAAL;IACA,KAAKb,SAAL,CAAexC,UAAU,CAACsD,QAAX,CAAoBC,IAAnC;IACA,KAAKC,IAAL,CAAUC,YAAV,CAAuBxD,cAAc,WAArC,EAA+CuC,SAA/C,CAAyDxC,UAAU,CAACsD,QAAX,CAAoBC,IAA7E;IACA,KAAKjB,UAAL;IACA/C,aAAa,WAAb,CAAsB6C,EAAtB,CAAyB5C,eAAe,WAAf,CAAwB6C,UAAjD,EAA6D,KAAKC,UAAlE,EAA8E,IAA9E;IACA/C,aAAa,WAAb,CAAsB6C,EAAtB,CAAyB5C,eAAe,WAAf,CAAwB+C,UAAjD,EAA6D,KAAKC,SAAlE,EAA6E,IAA7E;EACH,CAPD;;EAQA1B,CAAC,CAACe,SAAF,CAAY8B,KAAZ,GAAoB,YAAY;IAC5BpE,aAAa,WAAb,CAAsBqE,GAAtB,CAA0BpE,eAAe,WAAf,CAAwB6C,UAAlD,EAA8D,KAAKC,UAAnE,EAA+E,IAA/E;IACA/C,aAAa,WAAb,CAAsBqE,GAAtB,CAA0BpE,eAAe,WAAf,CAAwB+C,UAAlD,EAA8D,KAAKC,SAAnE,EAA8E,IAA9E;EACH,CAHD;;EAIA1B,CAAC,CAACe,SAAF,CAAYuB,aAAZ,GAA4B,UAAUvC,CAAV,EAAa;IACrC,IAAIC,CAAC,GAAG,KAAKW,aAAL,CAAmB0B,QAAnB,CAA4BU,OAA5B,CAAoChD,CAAC,CAAC2C,IAAtC,CAAR;;IACA,IAAI9D,iBAAiB,WAAjB,CAA0BoE,GAA1B,CAA8BC,KAA9B,KAAwCjD,CAA5C,EAA+C;MAC3CZ,YAAY,WAAZ,CAAqB8D,QAArB,CAA8BC,eAA9B,CAA8C,OAA9C;MACAvE,iBAAiB,WAAjB,CAA0BoE,GAA1B,CAA8BV,aAA9B,CAA4CtC,CAA5C;MACA,KAAK2B,SAAL;MACA,KAAKY,UAAL;MACA9D,aAAa,WAAb,CAAsB2E,IAAtB,CAA2B1E,eAAe,WAAf,CAAwB6C,UAAnD;IACH;EACJ,CATD;;EAUAvB,CAAC,CAACe,SAAF,CAAYwB,UAAZ,GAAyB,YAAY;IACjC,KAAK5B,aAAL,CAAmB0B,QAAnB,CAA4BgB,OAA5B,CAAoC,UAAUtD,CAAV,EAAaC,CAAb,EAAgB;MAChDD,CAAC,CAACsC,QAAF,CAAW,CAAX,EAAciB,MAAd,GAAuB1E,iBAAiB,WAAjB,CAA0BoE,GAA1B,CAA8BC,KAA9B,KAAwCjD,CAA/D;IACH,CAFD;IAGA,KAAKQ,OAAL,CAAa6B,QAAb,CAAsB,CAAtB,EAAyBiB,MAAzB,GAAkC9E,YAAY,WAAZ,CAAqByC,GAArB,CAAyBsC,gBAAzB,EAAlC;IACA,KAAK7C,UAAL,CAAgB2B,QAAhB,CAAyB,CAAzB,EAA4BiB,MAA5B,GAAqC9E,YAAY,WAAZ,CAAqByC,GAArB,CAAyBuC,aAAzB,EAArC;EACH,CAND;;EAOAxD,CAAC,CAACe,SAAF,CAAY0C,SAAZ,GAAwB,YAAY;IAChChF,aAAa,WAAb,CAAsBqE,GAAtB,CAA0BpE,eAAe,WAAf,CAAwB6C,UAAlD,EAA8D,KAAKC,UAAnE,EAA+E,IAA/E;IACA/C,aAAa,WAAb,CAAsBqE,GAAtB,CAA0BpE,eAAe,WAAf,CAAwB+C,UAAlD,EAA8D,KAAKC,SAAnE,EAA8E,IAA9E;IACA,KAAKrB,QAAL,CAAcyC,GAAd,CAAkB,OAAlB,EAA2B,KAAKlB,UAAhC,EAA4C,IAA5C;IACA,KAAKtB,QAAL,CAAcwC,GAAd,CAAkB,OAAlB,EAA2B,KAAKjB,UAAhC,EAA4C,IAA5C;IACA,KAAKtB,cAAL,CAAoBuC,GAApB,CAAwB,OAAxB,EAAiC,KAAKhB,gBAAtC,EAAwD,IAAxD;IACA,KAAKtB,OAAL,CAAasC,GAAb,CAAiB,OAAjB,EAA0B,KAAKf,SAA/B,EAA0C,IAA1C;IACA,KAAKrB,UAAL,CAAgBoC,GAAhB,CAAoB,OAApB,EAA6B,KAAKd,YAAlC,EAAgD,IAAhD;EACH,CARD;;EASAhC,CAAC,CAACe,SAAF,CAAYW,SAAZ,GAAwB,UAAU3B,CAAV,EAAa;IACjC,IAAIA,CAAC,KAAKb,UAAU,CAACsD,QAAX,CAAoBC,IAA9B,EAAoC;MAChC,KAAKlC,cAAL,CAAoB8B,QAApB,CAA6B,CAA7B,EAAgCiB,MAAhC,GAAyC1E,iBAAiB,WAAjB,CAA0BoE,GAA1B,CAA8BU,iBAA9B,EAAzC;MACA,KAAKrD,QAAL,CAAcgC,QAAd,CAAuB,CAAvB,EAA0BiB,MAA1B,GAAmC9E,YAAY,WAAZ,CAAqByC,GAArB,CAAyB0C,eAAzB,EAAnC;IACH;EACJ,CALD;;EAMA3D,CAAC,CAACe,SAAF,CAAYgB,SAAZ,GAAwB,YAAY;IAChC3C,YAAY,WAAZ,CAAqB8D,QAArB,CAA8BC,eAA9B,CAA8C,OAA9C;IACAtE,UAAU,CAAC+E,SAAX,CAAqBV,QAArB,CAA8BW,WAA9B,CAA0C9E,UAAU,CAAC+E,SAAX,CAAqBC,YAArB,CAAkCC,OAAlC,CAA0CC,UAA1C,CAAqDC,YAA/F;EACH,CAHD;;EAIAlE,CAAC,CAACe,SAAF,CAAYiB,YAAZ,GAA2B,YAAY;IACnC5C,YAAY,WAAZ,CAAqB8D,QAArB,CAA8BC,eAA9B,CAA8C,OAA9C;IACAtE,UAAU,CAAC+E,SAAX,CAAqBV,QAArB,CAA8BW,WAA9B,CAA0C9E,UAAU,CAAC+E,SAAX,CAAqBC,YAArB,CAAkCC,OAAlC,CAA0CC,UAA1C,CAAqDE,WAA/F;EACH,CAHD;;EAIAnE,CAAC,CAACe,SAAF,CAAYqD,UAAZ,GAAyB,UAAUrE,CAAV,EAAaC,CAAb,EAAgB;IACrC,IAAI,EAAE,MAAMA,CAAN,IAAWX,gBAAgB,WAAhB,CAAyB2D,GAAzB,CAA6BqB,UAA1C,CAAJ,EAA2D;MACvD,MAAMhF,gBAAgB,WAAhB,CAAyB2D,GAAzB,CAA6BsB,SAAnC,GACMhF,MAAM,WAAN,CAAeiF,IAAf,CAAoBC,cAApB,CAAmCzE,CAAnC,EAAsC,MAAtC,CADN,GAEM,MAAMV,gBAAgB,WAAhB,CAAyB2D,GAAzB,CAA6BsB,SAAnC,IACAhF,MAAM,WAAN,CAAeiF,IAAf,CAAoBC,cAApB,CAAmC,KAAKjE,cAAxC,EAAwD,WAAxD,CAHN;IAIH;;IACDR,CAAC,CAAC4C,YAAF,CAAepE,YAAY,WAA3B,EAAqCkG,MAArC,CAA4C,KAAK5D,QAAL,CAAcb,CAAd,CAA5C;EACH,CARD;;EASAA,CAAC,CAACe,SAAF,CAAYS,UAAZ,GAAyB,YAAY;IACjC,KAAKG,SAAL;IACA,KAAKxB,OAAL,CAAauE,UAAb,GAA0B,CAAC,CAA3B;IACA,KAAK7D,QAAL,GAAgBrC,YAAY,WAAZ,CAAqByC,GAArB,CAAyBC,gBAAzB,EAAhB;IACA,KAAKf,OAAL,CAAaiB,QAAb,GAAwB,KAAKP,QAAL,CAAcQ,MAAtC;IACA,KAAKlB,OAAL,CAAawE,SAAb;EACH,CAND;;EAOA3E,CAAC,CAACe,SAAF,CAAYY,SAAZ,GAAwB,YAAY;IAChC,IAAI5B,CAAC,GAAG,CAAR;;IACA,IAAIpB,YAAY,CAACiG,WAAb,CAAyB3D,GAAzB,CAA6B4D,MAA7B,CAAoClG,YAAY,CAACmG,OAAb,CAAqBC,MAAzD,CAAJ,EAAsE;MAClEhF,CAAC,GAAGpB,YAAY,CAACiG,WAAb,CAAyB3D,GAAzB,CAA6B+D,IAA7B,CAAkCrG,YAAY,CAACmG,OAAb,CAAqBC,MAAvD,CAAJ;IACH;;IACDhF,CAAC,IAAInB,iBAAiB,WAAjB,CAA0BoE,GAA1B,CAA8BiC,eAA9B,KAAkDrG,iBAAiB,WAAjB,CAA0BoE,GAA1B,CAA8BkC,MAA9B,EAAvD;IACA,KAAK9E,GAAL,CAAS+E,MAAT,GAAkB,KAAKpF,CAAvB;EACH,CAPD;;EAQAC,CAAC,CAACe,SAAF,CAAYa,UAAZ,GAAyB,YAAY;IACjCxC,YAAY,WAAZ,CAAqB8D,QAArB,CAA8BC,eAA9B,CAA8C,OAA9C;IACA,IAAIpD,CAAC,GAAGvB,YAAY,WAAZ,CAAqByC,GAArB,CAAyBmE,oBAAzB,EAAR;IACArF,CAAC,CAACsB,MAAF,IAAY,CAAZ,GACMxC,UAAU,CAAC+E,SAAX,CAAqBV,QAArB,CAA8BmC,SAA9B,CAAwC,QAAxC,CADN,GAEMvG,aAAa,CAACwG,YAAd,CAA2BpC,QAA3B,CAAoCqC,IAApC,CACIxG,UAAU,CAAC+E,SAAX,CAAqB0B,YAArB,CAAkCxB,OAAlC,CAA0CC,UAA1C,CAAqDwB,aADzD,EAEI;MACIC,MAAM,EAAE3F;IADZ,CAFJ,CAFN;EAQH,CAXD;;EAYAC,CAAC,CAACe,SAAF,CAAYc,UAAZ,GAAyB,YAAY;IACjCzC,YAAY,WAAZ,CAAqB8D,QAArB,CAA8BC,eAA9B,CAA8C,OAA9C;IACArE,aAAa,CAACwG,YAAd,CAA2BpC,QAA3B,CAAoCqC,IAApC,CAAyCxG,UAAU,CAAC+E,SAAX,CAAqB0B,YAArB,CAAkCxB,OAAlC,CAA0CC,UAA1C,CAAqD0B,YAA9F;EACH,CAHD;;EAIA3F,CAAC,CAACe,SAAF,CAAYe,gBAAZ,GAA+B,YAAY;IACvC1C,YAAY,WAAZ,CAAqB8D,QAArB,CAA8BC,eAA9B,CAA8C,OAA9C;;IACA,IAAI,CAAC9D,gBAAgB,WAAhB,CAAyB2D,GAAzB,CAA6BqB,UAAlC,EAA8C;MAC1C/E,MAAM,WAAN,CAAeiF,IAAf,CAAoBqB,SAApB;MACAvG,gBAAgB,WAAhB,CAAyB2D,GAAzB,CAA6B6C,QAA7B;IACH;;IACD,IAAIjH,iBAAiB,WAAjB,CAA0BoE,GAA1B,CAA8BU,iBAA9B,EAAJ,EAAuD;MACnD,IAAI3D,CAAC,GAAGnB,iBAAiB,WAAjB,CAA0BoE,GAA1B,CAA8B8C,WAA9B,EAAR;MACArH,aAAa,WAAb,CAAsB2E,IAAtB,CAA2B1E,eAAe,WAAf,CAAwBqH,aAAnD,EAAkEhG,CAAlE;MACAtB,aAAa,WAAb,CAAsB2E,IAAtB,CAA2B1E,eAAe,WAAf,CAAwB+C,UAAnD,EAA+DvC,UAAU,CAACsD,QAAX,CAAoBC,IAAnF;IACH,CAJD,MAIO;MACH5D,UAAU,CAAC+E,SAAX,CAAqBV,QAArB,CAA8BmC,SAA9B,CAAwC,QAAxC;IACH;EACJ,CAbD;;EAcAW,UAAU,CAAC,CAACpG,CAAC,CAACvB,KAAK,WAAN,CAAF,CAAD,EAAqB2B,CAAC,CAACe,SAAvB,EAAkC,SAAlC,EAA6C,KAAK,CAAlD,CAAV;;EACAiF,UAAU,CAAC,CAACpG,CAAC,CAACJ,EAAE,CAACyG,KAAJ,CAAF,CAAD,EAAgBjG,CAAC,CAACe,SAAlB,EAA6B,KAA7B,EAAoC,KAAK,CAAzC,CAAV;;EACAiF,UAAU,CAAC,CAACpG,CAAC,CAACJ,EAAE,CAAC0G,IAAJ,CAAF,CAAD,EAAelG,CAAC,CAACe,SAAjB,EAA4B,UAA5B,EAAwC,KAAK,CAA7C,CAAV;;EACAiF,UAAU,CAAC,CAACpG,CAAC,CAACJ,EAAE,CAAC0G,IAAJ,CAAF,CAAD,EAAelG,CAAC,CAACe,SAAjB,EAA4B,UAA5B,EAAwC,KAAK,CAA7C,CAAV;;EACAiF,UAAU,CAAC,CAACpG,CAAC,CAACJ,EAAE,CAAC0G,IAAJ,CAAF,CAAD,EAAelG,CAAC,CAACe,SAAjB,EAA4B,gBAA5B,EAA8C,KAAK,CAAnD,CAAV;;EACAiF,UAAU,CAAC,CAACpG,CAAC,CAACJ,EAAE,CAAC0G,IAAJ,CAAF,CAAD,EAAelG,CAAC,CAACe,SAAjB,EAA4B,SAA5B,EAAuC,KAAK,CAA5C,CAAV;;EACAiF,UAAU,CAAC,CAACpG,CAAC,CAACZ,WAAW,CAACmH,UAAb,CAAF,CAAD,EAA8BnG,CAAC,CAACe,SAAhC,EAA2C,YAA3C,EAAyD,KAAK,CAA9D,CAAV;;EACAiF,UAAU,CAAC,CAACpG,CAAC,CAACJ,EAAE,CAAC0G,IAAJ,CAAF,CAAD,EAAelG,CAAC,CAACe,SAAjB,EAA4B,YAA5B,EAA0C,KAAK,CAA/C,CAAV;;EACAiF,UAAU,CAAC,CAACpG,CAAC,CAACJ,EAAE,CAAC0G,IAAJ,CAAF,CAAD,EAAelG,CAAC,CAACe,SAAjB,EAA4B,eAA5B,EAA6C,KAAK,CAAlD,CAAV;;EACAiF,UAAU,CAAC,CAACpG,CAAC,CAACJ,EAAE,CAAC0G,IAAJ,CAAF,CAAD,EAAelG,CAAC,CAACe,SAAjB,EAA4B,WAA5B,EAAyC,KAAK,CAA9C,CAAV;;EACA,OAAOiF,UAAU,CAAC,CAACtG,CAAD,CAAD,EAAMM,CAAN,CAAjB;AACH,CA7JO,CA6JLf,SAAS,WA7JJ,CAAR;;AA8JAmH,OAAO,WAAP,GAAkBtG,CAAlB","sourceRoot":"/","sourcesContent":["var o;\r\nvar $list = require(\"./List\");\r\nvar $gemListItem = require(\"./GemListItem\");\r\nvar $roleContext = require(\"./RoleContext\");\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $gameGemInfo = require(\"./GameGemInfo\");\r\nvar $equipmentContext = require(\"./EquipmentContext\");\r\nvar $uIManager = require(\"./UIManager\");\r\nvar $popupManager = require(\"./PopupManager\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $playerSkin = require(\"./PlayerSkin\");\r\nvar $itemView = require(\"./ItemView\");\r\nvar $startView = require(\"./StartView\");\r\nvar $equipmentItem = require(\"./EquipmentItem\");\r\nvar $remoteAudio = require(\"./RemoteAudio\");\r\nvar $userDataContext = require(\"./UserDataContext\");\r\nvar $guide = require(\"./Guide\");\r\nvar A = cc._decorator;\r\nvar S = A.ccclass;\r\nvar C = A.property;\r\nvar I = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.gemList = null;\r\n        e.atk = null;\r\n        e.btnCraft = null;\r\n        e.btnProps = null;\r\n        e.btnAutoUpgrade = null;\r\n        e.btnSkin = null;\r\n        e.playerSkin = null;\r\n        e.btnGunSKin = null;\r\n        e.changeGemBtns = null;\r\n        e.equipNode = null;\r\n        e.packList = [];\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.start = function () {\r\n        var t = this;\r\n        this.packList = $roleContext.default.ins.showPackInfoList();\r\n        this.scheduleOnce(function () {\r\n            t.gemList.numItems = t.packList.length;\r\n        }, 0.1);\r\n        $eventManager.default.on($localEventName.default.RENDER_GEM, this.updateList, this);\r\n        $eventManager.default.on($localEventName.default.RENDER_DOT, this.renderDot, this);\r\n        this.renderAtk();\r\n        this.btnCraft.on(\"click\", this.clickCraft, this);\r\n        this.btnProps.on(\"click\", this.clickProps, this);\r\n        this.btnAutoUpgrade.on(\"click\", this.clickAutoUpgrade, this);\r\n        this.btnSkin.on(\"click\", this.clickSkin, this);\r\n        this.btnGunSKin.on(\"click\", this.clickGunSkin, this);\r\n        var e = $roleContext.default.ins.currSkinInfo;\r\n        this.playerSkin.changePlayerSkin(e.skin);\r\n        for (var i = 0; i < this.changeGemBtns.children.length; i++) {\r\n            this.changeGemBtns.children[i].on(\"click\", this.changeGemItem, this);\r\n        }\r\n        this.refreshBtn();\r\n        this.renderDot($startView.MenuType.Role);\r\n        this.node.getComponent($equipmentItem.default).renderDot($startView.MenuType.Role);\r\n    };\r\n    e.prototype.reuse = function () {\r\n        this.refreshBtn();\r\n        this.renderDot($startView.MenuType.Role);\r\n        this.node.getComponent($equipmentItem.default).renderDot($startView.MenuType.Role);\r\n        this.updateList();\r\n        $eventManager.default.on($localEventName.default.RENDER_GEM, this.updateList, this);\r\n        $eventManager.default.on($localEventName.default.RENDER_DOT, this.renderDot, this);\r\n    };\r\n    e.prototype.unuse = function () {\r\n        $eventManager.default.off($localEventName.default.RENDER_GEM, this.updateList, this);\r\n        $eventManager.default.off($localEventName.default.RENDER_DOT, this.renderDot, this);\r\n    };\r\n    e.prototype.changeGemItem = function (t) {\r\n        var e = this.changeGemBtns.children.indexOf(t.node);\r\n        if ($equipmentContext.default.Ins.order !== e) {\r\n            $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n            $equipmentContext.default.Ins.changeGemItem(e);\r\n            this.renderAtk();\r\n            this.refreshBtn();\r\n            $eventManager.default.send($localEventName.default.RENDER_GEM);\r\n        }\r\n    };\r\n    e.prototype.refreshBtn = function () {\r\n        this.changeGemBtns.children.forEach(function (t, e) {\r\n            t.children[0].active = $equipmentContext.default.Ins.order === e;\r\n        });\r\n        this.btnSkin.children[0].active = $roleContext.default.ins.hasPlayerSkinDot();\r\n        this.btnGunSKin.children[0].active = $roleContext.default.ins.hasGunSkinDot();\r\n    };\r\n    e.prototype.onDestroy = function () {\r\n        $eventManager.default.off($localEventName.default.RENDER_GEM, this.updateList, this);\r\n        $eventManager.default.off($localEventName.default.RENDER_DOT, this.renderDot, this);\r\n        this.btnCraft.off(\"click\", this.clickCraft, this);\r\n        this.btnProps.off(\"click\", this.clickProps, this);\r\n        this.btnAutoUpgrade.off(\"click\", this.clickAutoUpgrade, this);\r\n        this.btnSkin.off(\"click\", this.clickSkin, this);\r\n        this.btnGunSKin.off(\"click\", this.clickGunSkin, this);\r\n    };\r\n    e.prototype.renderDot = function (t) {\r\n        if (t === $startView.MenuType.Role) {\r\n            this.btnAutoUpgrade.children[0].active = $equipmentContext.default.Ins.checkEquipUpgrade();\r\n            this.btnCraft.children[0].active = $roleContext.default.ins.isCanComposeGem();\r\n        }\r\n    };\r\n    e.prototype.clickSkin = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        $uIManager.UIManager.instance.replaceView($assetsMap.AssetsMap.StartBundles.prefabs.assetsList.RoleShopView);\r\n    };\r\n    e.prototype.clickGunSkin = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        $uIManager.UIManager.instance.replaceView($assetsMap.AssetsMap.StartBundles.prefabs.assetsList.GunShopView);\r\n    };\r\n    e.prototype.renderItem = function (t, e) {\r\n        if (!(0 !== e || $userDataContext.default.Ins.isEndGuide)) {\r\n            1 === $userDataContext.default.Ins.guideStep\r\n                ? $guide.default.self.startGuideTest(t, \"点击宝石\")\r\n                : 2 === $userDataContext.default.Ins.guideStep &&\r\n                  $guide.default.self.startGuideTest(this.btnAutoUpgrade, \"点击装备或一键升级\");\r\n        }\r\n        t.getComponent($gemListItem.default).render(this.packList[e]);\r\n    };\r\n    e.prototype.updateList = function () {\r\n        this.renderAtk();\r\n        this.gemList.selectedId = -1;\r\n        this.packList = $roleContext.default.ins.showPackInfoList();\r\n        this.gemList.numItems = this.packList.length;\r\n        this.gemList.updateAll();\r\n    };\r\n    e.prototype.renderAtk = function () {\r\n        var t = 0;\r\n        if ($gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.Attack)) {\r\n            t = $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.Attack);\r\n        }\r\n        t += $equipmentContext.default.Ins.getEquipmentAtk() + $equipmentContext.default.Ins.getAtk();\r\n        this.atk.string = \"\" + t;\r\n    };\r\n    e.prototype.clickCraft = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        var t = $roleContext.default.ins.getCanComposeGemList();\r\n        t.length <= 0\r\n            ? $uIManager.UIManager.instance.showToast(\"暂无合成宝石\")\r\n            : $popupManager.PopupManager.instance.open(\r\n                  $assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.RewardGemView,\r\n                  {\r\n                      gemIds: t\r\n                  }\r\n              );\r\n    };\r\n    e.prototype.clickProps = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        $popupManager.PopupManager.instance.open($assetsMap.AssetsMap.PopUpBundles.prefabs.assetsList.GemStatsView);\r\n    };\r\n    e.prototype.clickAutoUpgrade = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        if (!$userDataContext.default.Ins.isEndGuide) {\r\n            $guide.default.self.stopGuide();\r\n            $userDataContext.default.Ins.guideEnd();\r\n        }\r\n        if ($equipmentContext.default.Ins.checkEquipUpgrade()) {\r\n            var t = $equipmentContext.default.Ins.autoUpgrade();\r\n            $eventManager.default.send($localEventName.default.EQUIP_UPGRADE, t);\r\n            $eventManager.default.send($localEventName.default.RENDER_DOT, $startView.MenuType.Role);\r\n        } else {\r\n            $uIManager.UIManager.instance.showToast(\"暂无升级装备\");\r\n        }\r\n    };\r\n    __decorate([C($list.default)], e.prototype, \"gemList\", void 0);\r\n    __decorate([C(cc.Label)], e.prototype, \"atk\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"btnCraft\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"btnProps\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"btnAutoUpgrade\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"btnSkin\", void 0);\r\n    __decorate([C($playerSkin.PlayerSkin)], e.prototype, \"playerSkin\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"btnGunSKin\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"changeGemBtns\", void 0);\r\n    __decorate([C(cc.Node)], e.prototype, \"equipNode\", void 0);\r\n    return __decorate([S], e);\r\n})($itemView.default);\r\nexports.default = I;\r\n"]}