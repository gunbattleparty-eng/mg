{"version":3,"sources":["assets\\game_script\\scripts\\Bullet_25.js"],"names":["o","$object","require","$assetsLoader","$assetsMap","$resUtil","$remoteAudio","$gameContext","$gameSkillInfo","$enemyStatus","$baseBullet","m","cc","_decorator","y","ccclass","g","property","Vec3","ZERO","_","t","e","apply","arguments","buttleType","BulletType","oil_boom","enemys","Set","__extends","prototype","initButtle","i","call","skillParam","oilBoomRange","setScale","v3","atk","skillAtk","Skill4Param","FINAL","setAnimation","node","children","getComponent","Animation","instance","playEffectMusicRestrict","play","once","EventType","FINISHED","removeSelf","onTrigger","isUse","Trigger","enter","stay","object","has","sufferAtk","id","skillSpecialitys","x","createBoomNo","sufferDebuff","type","EnemyDebuffType","BURN","timeLeft","oilBurnTime","value","oilBurnAtk","add","oilAllAtkAdd","ALL_ATK_ADD","exit","oilBurnAreaAtkNo","ins","getButtlePool","oil_burn_area_no","getRes","BundleNames","Game","AssetsMap","GameBundles","prefabs","assetsList","Bullet_28","ResUtil","instantiate","floorLayer","parent","setPosition","skillId","insert","updateFrame","__decorate","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $object = require(\"./Object\");\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $remoteAudio = require(\"./RemoteAudio\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $gameSkillInfo = require(\"./GameSkillInfo\");\r\nvar $enemyStatus = require(\"./EnemyStatus\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar m = cc._decorator;\r\nvar y = m.ccclass;\r\nvar g = (m.property, cc.Vec3.ZERO);\r\nvar _ = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.buttleType = $baseBullet.BulletType.oil_boom;\r\n        e.enemys = new Set();\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.initButtle = function (e, i) {\r\n        t.prototype.initButtle.call(this, e, i);\r\n        var o = this.skillParam.oilBoomRange;\r\n        this.setScale(cc.v3(o, o));\r\n        this.atk = this.skillParam.skillAtk[$gameSkillInfo.Skill4Param.FINAL];\r\n    };\r\n    e.prototype.setAnimation = function () {\r\n        var t = this;\r\n        var e = this.node.children[0].getComponent(cc.Animation);\r\n        $remoteAudio.default.instance.playEffectMusicRestrict(\"boom\", 0.3);\r\n        e.play(\"bullet_25\");\r\n        e.once(\r\n            cc.Animation.EventType.FINISHED,\r\n            function () {\r\n                t.removeSelf();\r\n            },\r\n            this\r\n        );\r\n    };\r\n    e.prototype.onTrigger = function (t, e) {\r\n        if (!this.isUse) {\r\n            if (e == $object.Trigger.enter || e == $object.Trigger.stay) {\r\n                var i = t.object;\r\n                if (this.enemys.has(i)) {\r\n                    return;\r\n                }\r\n                if (\r\n                    i.sufferAtk({\r\n                        id: 227,\r\n                        atk: this.atk,\r\n                        skillSpecialitys: this.skillSpecialitys\r\n                    })\r\n                ) {\r\n                    g.x = i.node.x;\r\n                    g.y = i.node.y;\r\n                    this.createBoomNo(g);\r\n                } else {\r\n                    i.sufferDebuff({\r\n                        type: $enemyStatus.EnemyDebuffType.BURN,\r\n                        timeLeft: this.skillParam.oilBurnTime,\r\n                        value: this.skillParam.oilBurnAtk[$gameSkillInfo.Skill4Param.FINAL]\r\n                    });\r\n                    this.enemys.add(i);\r\n                    if (this.skillParam.oilAllAtkAdd > 0) {\r\n                        var o = {\r\n                            type: $enemyStatus.EnemyDebuffType.ALL_ATK_ADD,\r\n                            timeLeft: this.skillParam.oilBurnTime,\r\n                            value: this.skillParam.oilAllAtkAdd\r\n                        };\r\n                        i.sufferDebuff(o);\r\n                    }\r\n                }\r\n            } else {\r\n                if (e == $object.Trigger.exit) {\r\n                    i = t.object;\r\n                    this.enemys.delete(i);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    e.prototype.createBoomNo = function (t) {\r\n        if (this.skillParam.oilBurnAreaAtkNo) {\r\n            var e = $gameContext.default.ins.getButtlePool($baseBullet.BulletType.oil_burn_area_no);\r\n            if (!e) {\r\n                var i = $assetsLoader.default.instance.getRes(\r\n                    $assetsMap.BundleNames.Game,\r\n                    $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.Bullet_28\r\n                );\r\n                (e = $resUtil.ResUtil.instantiate(i, $gameContext.default.ins.floorLayer.parent).getComponent(\r\n                    $baseBullet.default\r\n                )).skillSpecialitys = this.skillSpecialitys;\r\n            }\r\n            e.setPosition(t);\r\n            e.initButtle(null, this.skillId);\r\n            e.insert($gameContext.default.ins.floorLayer);\r\n            e.setAnimation(null);\r\n        }\r\n    };\r\n    e.prototype.updateFrame = function () {};\r\n    return __decorate([y], e);\r\n})($baseBullet.default);\r\nexports.default = _;\r\n"]}