{"version":3,"sources":["assets\\game_script\\scripts\\HWNativeAd.js"],"names":["o","exports","HWNativeAd","$baseAdNode","require","r","window","qg","a","t","e","apply","arguments","adViewName","isOpenPreLoad","__extends","prototype","loadAd","adUnitId","createNativeAd","fail","destroyAd","adIns","onLoad","onError","load","console","warn","error","showNativeAd","i","n","showCallback","errorCallback","closeCallback","isCanShow","adData","isLoaded","isConsume","log","adId","toString","reportAdClick","onAdClose","setHwAdData","imgUrlList","title","desc","source","reportAdShow","isAutoShow","reCreateAd","cc","isValid","adNode","setAdData","getChildByName","getComponent","Label","string","forbiddenNativeAd","hideNativeAd","destroyNativeAdNode","call","offLoad","offError","destroy","autoShow","onAdLoad","adList","length","pop","onAdError","JSON","stringify"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nexports.HWNativeAd = void 0;\r\nvar $baseAdNode = require(\"./BaseAdNode\");\r\nvar r = window.qg;\r\nvar a = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.adViewName = null;\r\n        e.isOpenPreLoad = !1;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.loadAd = function () {\r\n        var t = this;\r\n        if (this.adUnitId) {\r\n            if (r && r.createNativeAd) {\r\n                var e = {\r\n                    adUnitId: this.adUnitId,\r\n                    fail: function () {\r\n                        t.destroyAd();\r\n                    }\r\n                };\r\n                this.adIns = r.createNativeAd(e);\r\n                if (this.adIns.onLoad) {\r\n                    this.adIns.onLoad(this.onLoad);\r\n                }\r\n                if (this.adIns.onError) {\r\n                    this.adIns.onError(this.onError);\r\n                }\r\n                this.adIns.load();\r\n            } else {\r\n                console.warn(\"组件不支持NativeAd\");\r\n            }\r\n        } else {\r\n            console.error(\"OPPONativeAd ID为空\");\r\n        }\r\n    };\r\n    e.prototype.showNativeAd = function (t, e, i, o) {\r\n        var n = this;\r\n        this.showCallback = e;\r\n        this.errorCallback = o;\r\n        this.closeCallback = i;\r\n        this.adViewName = t;\r\n        if (this.isCanShow) {\r\n            return this.adIns && this.adData\r\n                ? this.isLoaded\r\n                    ? void (\r\n                          this.isLoaded &&\r\n                          this.adData &&\r\n                          ((this.isConsume = !0),\r\n                          this.createNativeAd(\r\n                              t,\r\n                              function () {\r\n                                  if (n.adIns && n.adData) {\r\n                                      console.log(\"======\", n.adData.adId.toString());\r\n                                      n.adIns.reportAdClick({\r\n                                          adId: n.adData.adId.toString()\r\n                                      });\r\n                                  }\r\n                                  if (n.showCallback) {\r\n                                      n.showCallback();\r\n                                  }\r\n                                  n.destroyAd();\r\n                              },\r\n                              function () {\r\n                                  n.onAdClose(null);\r\n                              }\r\n                          ),\r\n                          this.setHwAdData(\r\n                              this.adData.imgUrlList[0],\r\n                              this.adData.title,\r\n                              this.adData.desc,\r\n                              this.adData.source\r\n                          ),\r\n                          this.adIns.reportAdShow({\r\n                              adId: this.adData.adId.toString()\r\n                          }))\r\n                      )\r\n                    : (console.warn(this.adUnitId, \":正在加载中，稍等\"), void (this.isAutoShow = !0))\r\n                : (console.warn(this.adUnitId, \":无数据执行重建\"), this.reCreateAd(!0));\r\n        }\r\n        console.warn(this.adUnitId, \":当前广告禁止显示\");\r\n    };\r\n    e.prototype.setHwAdData = function (t, e, i, o) {\r\n        if (cc.isValid(this.adNode)) {\r\n            this.setAdData(t, e, i);\r\n            var n = this.adNode.getChildByName(\"content\");\r\n            if (t) {\r\n                n.getChildByName(\"ad_source\").getComponent(cc.Label).string = o || \"\";\r\n            }\r\n        }\r\n    };\r\n    e.prototype.forbiddenNativeAd = function (t) {\r\n        this.isCanShow = !t;\r\n        if (t && this.isConsume) {\r\n            this.hideNativeAd(!1);\r\n        }\r\n    };\r\n    e.prototype.hideNativeAd = function (e) {\r\n        e && this.isConsume ? (this.destroyAd(), this.reCreateAd(!1)) : t.prototype.destroyNativeAdNode.call(this);\r\n    };\r\n    e.prototype.destroyAd = function () {\r\n        t.prototype.destroyAd.call(this);\r\n        this.adData = null;\r\n        if (this.adIns) {\r\n            if (this.adIns.offLoad) {\r\n                this.adIns.offLoad(this.onLoad);\r\n            }\r\n            if (this.adIns.offError) {\r\n                this.adIns.offError(this.onError);\r\n            }\r\n            if (this.adIns.destroy) {\r\n                this.adIns.destroy();\r\n            }\r\n            this.adIns = null;\r\n        }\r\n    };\r\n    e.prototype.autoShow = function () {\r\n        if (this.isAutoShow) {\r\n            this.isAutoShow = !1;\r\n            this.showNativeAd(this.adViewName, this.showCallback, this.errorCallback);\r\n        }\r\n    };\r\n    e.prototype.onAdLoad = function (e) {\r\n        t.prototype.onAdLoad.call(this, e);\r\n        this.isConsume = !1;\r\n        this.isLoaded = !0;\r\n        if (e && e.adList && e.adList.length > 0) {\r\n            var i = e.adList.pop();\r\n            console.log(\"广告参数:\", i);\r\n            this.adData = i;\r\n            this.autoShow();\r\n        }\r\n    };\r\n    e.prototype.onAdError = function (e) {\r\n        t.prototype.onAdError.call(this, e);\r\n        console.error(\"onAdError\", this.adUnitId, JSON.stringify(e));\r\n        if (this.errorCallback) {\r\n            this.errorCallback();\r\n        }\r\n        this.destroyAd();\r\n    };\r\n    e.prototype.onAdClose = function (e) {\r\n        t.prototype.onAdClose.call(this, e);\r\n        if (this.closeCallback) {\r\n            this.closeCallback();\r\n        }\r\n        this.destroyAd();\r\n    };\r\n    return e;\r\n})($baseAdNode.default);\r\nexports.HWNativeAd = a;\r\n"]}