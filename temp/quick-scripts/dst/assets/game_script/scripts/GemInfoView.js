
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/GemInfoView.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '2bc49lPcOlHg4QdSp8dnT1R', 'GemInfoView');
// game_script/scripts/GemInfoView.js

"use strict";

var o;

var $assetsLoader = require("./AssetsLoader");

var $assetsMap = require("./AssetsMap");

var $resUtil = require("./ResUtil");

var $eventManager = require("./EventManager");

var $uIManager = require("./UIManager");

var $popupView = require("./PopupView");

var $guide = require("./Guide");

var $remoteAudio = require("./RemoteAudio");

var $configContext = require("./ConfigContext");

var $equipmentContext = require("./EquipmentContext");

var $globalParam = require("./GlobalParam");

var $localEventName = require("./LocalEventName");

var $roleContext = require("./RoleContext");

var $userDataContext = require("./UserDataContext");

var $gameGemInfo = require("./GameGemInfo");

var $startView = require("./StartView");

var w = cc._decorator;
var A = w.ccclass;
var S = w.property;

var C = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.infoList = null;
    e.gemIconSp = null;
    e.gemName = null;
    e.gemDesc = null;
    e.embedBtn = null;
    e.gemMask = null;
    e.changeMask = null;
    e.btnLock = null;
    e.gemId = -1;
    e.names = ["普通", "精良", "稀有", "史诗", "传奇", "绝世", "神话"];
    e.partNames = ["帽子", "上衣", "鞋子", "护臂", "裤子", "手套"];
    e.config = null;
    return e;
  }

  __extends(e, t);

  e.prototype.onResetView = function () {
    var t = this;
    this.gemId = this.uiParam.param.gemId;
    $globalParam["default"].currGemIdInfo = this.gemId;
    var e = $configContext["default"].instance.gemConfigs.find(function (e) {
      return e.id === t.gemId;
    });
    this.config = e;
    $assetsLoader["default"].instance.loadRes($assetsMap.BundleNames.Public, ["/textures/gem/g" + e.part + "_" + e.Grade], cc.SpriteFrame, null, function (e, i) {
      var o = i[0];

      if (o && cc.isValid(t.gemIconSp)) {
        t.gemIconSp.spriteFrame = $resUtil.ResUtil.assignWith(o, t.node);
      }
    });
    this.gemName.string = this.partNames[e.part - 1] + "·" + this.names[e.Grade - 1] + "宝石";
    this.gemName.node.color = $gameGemInfo.GameGemInfo.gemColor[e.Grade - 1];
    this.gemDesc.string = $gameGemInfo.GameGemInfo.ins.getGemDesc(e);
    var i = $roleContext["default"].ins.getPackInfo(e.id);
    this.btnLock.children[1].active = i.isLock;
    this.render();

    if (!$userDataContext["default"].Ins.isEndGuide) {
      $userDataContext["default"].Ins.guideStep = 2;
      $guide["default"].self.startGuideTest(this.embedBtn, "点击镶嵌");
    }
  };

  e.prototype.render = function () {
    var t = this;
    var e = $equipmentContext["default"].Ins.getGemList(this.config.part);

    var i = function i(_i) {
      var n = o.infoList.children[_i];

      if (e && e.length > _i && e[_i]) {
        var s = e[_i];
        n.children[0].active = !1;
        n.children[1].active = !0;
        var c = n.children[1].children[0].getComponent(cc.Sprite);
        var u = $configContext["default"].instance.gemConfigs.find(function (t) {
          return t.id === s;
        });
        $assetsLoader["default"].instance.loadRes($assetsMap.BundleNames.Public, ["/textures/gem/g" + u.part + "_" + u.Grade], cc.SpriteFrame, null, function (e, i) {
          var o = i[0];

          if (o && cc.isValid(c)) {
            c.spriteFrame = $resUtil.ResUtil.assignWith(o, t.node);
          }
        });
        var d = $gameGemInfo.GameGemInfo.ins.getGemDesc(u);

        if (d.length >= 19) {
          d = d.substring(0, 18) + "...";
        }

        n.children[1].children[1].getComponent(cc.Label).string = d;
      } else {
        n.children[0].active = !0;
        n.children[1].active = !1;
      }
    };

    var o = this;

    for (var n = 0; n < 5; n++) {
      i(n);
    }
  };

  e.prototype.addEvent = function () {
    this.gemMask.on(cc.Node.EventType.TOUCH_START, this.clickClose, this);

    if (this.gemMask._touchListener) {
      this.gemMask._touchListener.setSwallowTouches(!1);
    }

    this.changeMask.on(cc.Node.EventType.TOUCH_START, this.clickCloseChange, this);

    if (this.changeMask._touchListener) {
      this.gemMask._touchListener.setSwallowTouches(!1);
    }

    this.embedBtn.on("click", this.clickEmbed, this);

    for (var t = 0; t < this.infoList.children.length; t++) {
      this.infoList.children[t].on(cc.Node.EventType.TOUCH_START, this.touchItem, this);
    }

    this.btnLock.on(cc.Node.EventType.TOUCH_START, this.clickLock, this);
  };

  e.prototype.removeEvent = function () {
    this.gemMask.off(cc.Node.EventType.TOUCH_START, this.clickClose, this);
    this.embedBtn.off("click", this.clickEmbed, this);
    this.changeMask.off(cc.Node.EventType.TOUCH_START, this.clickCloseChange, this);

    for (var t = 0; t < this.infoList.children.length; t++) {
      this.infoList.children[t].off(cc.Node.EventType.TOUCH_START, this.touchItem, this);
    }

    this.btnLock.off(cc.Node.EventType.TOUCH_START, this.clickLock, this);
  };

  e.prototype.touchItem = function (e) {
    if ($equipmentContext["default"].Ins.hasSameGem(this.config.part, this.config.id)) {
      $uIManager.UIManager.instance.showToast("宝石已存在");
    } else {
      {
        var i = this.infoList.children.indexOf(e.target);

        if (-1 === $equipmentContext["default"].Ins.getPartAndIndexGemId(this.config.part, i)) {
          return this.clickEmbed();
        }

        $equipmentContext["default"].Ins.removeGem(this.config.part, i);
        $equipmentContext["default"].Ins.setGem(this.config.part, this.config.id, i);
        this.render();
        $eventManager["default"].send($localEventName["default"].RENDER_GEM);
        this.gemMask.active = !0;
        this.changeMask.active = !1;
        $uIManager.UIManager.instance.showToast("替换完成");
        $eventManager["default"].send($localEventName["default"].RENDER_DOT, $startView.MenuType.Role);
        $globalParam["default"].currGemIdInfo = -1;
        t.prototype.onClickClose.call(this);
      }
    }
  };

  e.prototype.clickCloseChange = function (t) {
    var e = this.changeMask.convertToNodeSpaceAR(t.getLocation());

    if (e.y >= this.changeMask.children[2].y || e.y <= this.changeMask.children[3].y) {
      this.gemMask.active = !0;
      this.changeMask.active = !1;
    }
  };

  e.prototype.clickClose = function (e) {
    var i = this.gemMask.convertToNodeSpaceAR(e.getLocation());

    if (i.y >= this.gemMask.children[0].y || i.y <= this.gemMask.children[1].y) {
      $globalParam["default"].currGemIdInfo = -1;
      t.prototype.onClickClose.call(this);
      e.stopPropagationImmediate();
    }
  };

  e.prototype.onClickClose = function () {
    $globalParam["default"].currGemIdInfo = -1;
    t.prototype.onClickClose.call(this);
  };

  e.prototype.clickEmbed = function () {
    $remoteAudio["default"].instance.playEffectMusic("Click");

    if (!this.changeMask.active) {
      if ($equipmentContext["default"].Ins.hasSameGem(this.config.part, this.config.id)) {
        $uIManager.UIManager.instance.showToast("宝石已存在");
      } else {
        {
          if ($equipmentContext["default"].Ins.gemCount(this.config.part) >= 5) {
            this.gemMask.active = !1;
            return void (this.changeMask.active = !0);
          }

          $equipmentContext["default"].Ins.setGem(this.config.part, this.config.id);
          this.render();
          $eventManager["default"].send($localEventName["default"].RENDER_GEM);
          $eventManager["default"].send($localEventName["default"].RENDER_DOT, $startView.MenuType.Role);
          $globalParam["default"].currGemIdInfo = -1;
          t.prototype.onClickClose.call(this);
        }
      }
    }
  };

  e.prototype.clickLock = function () {
    var t = $roleContext["default"].ins.lockAndUnlock(this.config.id);
    this.btnLock.children[1].active = t;
    $eventManager["default"].send($localEventName["default"].RENDER_GEM);
  };

  e.prototype.openAnim = function () {
    return null;
  };

  e.prototype.closeAnim = function () {
    return cc.tween().to(0.15, {
      opacity: 100
    });
  };

  __decorate([S(cc.Node)], e.prototype, "infoList", void 0);

  __decorate([S(cc.Sprite)], e.prototype, "gemIconSp", void 0);

  __decorate([S(cc.Label)], e.prototype, "gemName", void 0);

  __decorate([S(cc.Label)], e.prototype, "gemDesc", void 0);

  __decorate([S(cc.Node)], e.prototype, "embedBtn", void 0);

  __decorate([S(cc.Node)], e.prototype, "gemMask", void 0);

  __decorate([S(cc.Node)], e.prototype, "changeMask", void 0);

  __decorate([S(cc.Node)], e.prototype, "btnLock", void 0);

  return __decorate([A], e);
}($popupView.PopupView);

exports["default"] = C;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXEdlbUluZm9WaWV3LmpzIl0sIm5hbWVzIjpbIm8iLCIkYXNzZXRzTG9hZGVyIiwicmVxdWlyZSIsIiRhc3NldHNNYXAiLCIkcmVzVXRpbCIsIiRldmVudE1hbmFnZXIiLCIkdUlNYW5hZ2VyIiwiJHBvcHVwVmlldyIsIiRndWlkZSIsIiRyZW1vdGVBdWRpbyIsIiRjb25maWdDb250ZXh0IiwiJGVxdWlwbWVudENvbnRleHQiLCIkZ2xvYmFsUGFyYW0iLCIkbG9jYWxFdmVudE5hbWUiLCIkcm9sZUNvbnRleHQiLCIkdXNlckRhdGFDb250ZXh0IiwiJGdhbWVHZW1JbmZvIiwiJHN0YXJ0VmlldyIsInciLCJjYyIsIl9kZWNvcmF0b3IiLCJBIiwiY2NjbGFzcyIsIlMiLCJwcm9wZXJ0eSIsIkMiLCJ0IiwiZSIsImFwcGx5IiwiYXJndW1lbnRzIiwiaW5mb0xpc3QiLCJnZW1JY29uU3AiLCJnZW1OYW1lIiwiZ2VtRGVzYyIsImVtYmVkQnRuIiwiZ2VtTWFzayIsImNoYW5nZU1hc2siLCJidG5Mb2NrIiwiZ2VtSWQiLCJuYW1lcyIsInBhcnROYW1lcyIsImNvbmZpZyIsIl9fZXh0ZW5kcyIsInByb3RvdHlwZSIsIm9uUmVzZXRWaWV3IiwidWlQYXJhbSIsInBhcmFtIiwiY3VyckdlbUlkSW5mbyIsImluc3RhbmNlIiwiZ2VtQ29uZmlncyIsImZpbmQiLCJpZCIsImxvYWRSZXMiLCJCdW5kbGVOYW1lcyIsIlB1YmxpYyIsInBhcnQiLCJHcmFkZSIsIlNwcml0ZUZyYW1lIiwiaSIsImlzVmFsaWQiLCJzcHJpdGVGcmFtZSIsIlJlc1V0aWwiLCJhc3NpZ25XaXRoIiwibm9kZSIsInN0cmluZyIsImNvbG9yIiwiR2FtZUdlbUluZm8iLCJnZW1Db2xvciIsImlucyIsImdldEdlbURlc2MiLCJnZXRQYWNrSW5mbyIsImNoaWxkcmVuIiwiYWN0aXZlIiwiaXNMb2NrIiwicmVuZGVyIiwiSW5zIiwiaXNFbmRHdWlkZSIsImd1aWRlU3RlcCIsInNlbGYiLCJzdGFydEd1aWRlVGVzdCIsImdldEdlbUxpc3QiLCJuIiwibGVuZ3RoIiwicyIsImMiLCJnZXRDb21wb25lbnQiLCJTcHJpdGUiLCJ1IiwiZCIsInN1YnN0cmluZyIsIkxhYmVsIiwiYWRkRXZlbnQiLCJvbiIsIk5vZGUiLCJFdmVudFR5cGUiLCJUT1VDSF9TVEFSVCIsImNsaWNrQ2xvc2UiLCJfdG91Y2hMaXN0ZW5lciIsInNldFN3YWxsb3dUb3VjaGVzIiwiY2xpY2tDbG9zZUNoYW5nZSIsImNsaWNrRW1iZWQiLCJ0b3VjaEl0ZW0iLCJjbGlja0xvY2siLCJyZW1vdmVFdmVudCIsIm9mZiIsImhhc1NhbWVHZW0iLCJVSU1hbmFnZXIiLCJzaG93VG9hc3QiLCJpbmRleE9mIiwidGFyZ2V0IiwiZ2V0UGFydEFuZEluZGV4R2VtSWQiLCJyZW1vdmVHZW0iLCJzZXRHZW0iLCJzZW5kIiwiUkVOREVSX0dFTSIsIlJFTkRFUl9ET1QiLCJNZW51VHlwZSIsIlJvbGUiLCJvbkNsaWNrQ2xvc2UiLCJjYWxsIiwiY29udmVydFRvTm9kZVNwYWNlQVIiLCJnZXRMb2NhdGlvbiIsInkiLCJzdG9wUHJvcGFnYXRpb25JbW1lZGlhdGUiLCJwbGF5RWZmZWN0TXVzaWMiLCJnZW1Db3VudCIsImxvY2tBbmRVbmxvY2siLCJvcGVuQW5pbSIsImNsb3NlQW5pbSIsInR3ZWVuIiwidG8iLCJvcGFjaXR5IiwiX19kZWNvcmF0ZSIsIlBvcHVwVmlldyIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsQ0FBSjs7QUFDQSxJQUFJQyxhQUFhLEdBQUdDLE9BQU8sQ0FBQyxnQkFBRCxDQUEzQjs7QUFDQSxJQUFJQyxVQUFVLEdBQUdELE9BQU8sQ0FBQyxhQUFELENBQXhCOztBQUNBLElBQUlFLFFBQVEsR0FBR0YsT0FBTyxDQUFDLFdBQUQsQ0FBdEI7O0FBQ0EsSUFBSUcsYUFBYSxHQUFHSCxPQUFPLENBQUMsZ0JBQUQsQ0FBM0I7O0FBQ0EsSUFBSUks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NkIsU0FBN0IsRUFBd0MsS0FBSyxDQUE3QyxDQUFWOztFQUNBeUYsVUFBVSxDQUFDLENBQUM3RyxDQUFDLENBQUNKLEVBQUUsQ0FBQzBFLElBQUosQ0FBRixDQUFELEVBQWVsRSxDQUFDLENBQUNnQixTQUFqQixFQUE0QixVQUE1QixFQUF3QyxLQUFLLENBQTdDLENBQVY7O0VBQ0F5RixVQUFVLENBQUMsQ0FBQzdHLENBQUMsQ0FBQ0osRUFBRSxDQUFDMEUsSUFBSixDQUFGLENBQUQsRUFBZWxFLENBQUMsQ0FBQ2dCLFNBQWpCLEVBQTRCLFNBQTVCLEVBQXVDLEtBQUssQ0FBNUMsQ0FBVjs7RUFDQXlGLFVBQVUsQ0FBQyxDQUFDN0csQ0FBQyxDQUFDSixFQUFFLENBQUMwRSxJQUFKLENBQUYsQ0FBRCxFQUFlbEUsQ0FBQyxDQUFDZ0IsU0FBakIsRUFBNEIsWUFBNUIsRUFBMEMsS0FBSyxDQUEvQyxDQUFWOztFQUNBeUYsVUFBVSxDQUFDLENBQUM3RyxDQUFDLENBQUNKLEVBQUUsQ0FBQzBFLElBQUosQ0FBRixDQUFELEVBQWVsRSxDQUFDLENBQUNnQixTQUFqQixFQUE0QixTQUE1QixFQUF1QyxLQUFLLENBQTVDLENBQVY7O0VBQ0EsT0FBT3lGLFVBQVUsQ0FBQyxDQUFDL0csQ0FBRCxDQUFELEVBQU1NLENBQU4sQ0FBakI7QUFDSCxDQXJNTyxDQXFNTHBCLFVBQVUsQ0FBQzhILFNBck1OLENBQVI7O0FBc01BQyxPQUFPLFdBQVAsR0FBa0I3RyxDQUFsQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIG87XHJcbnZhciAkYXNzZXRzTG9hZGVyID0gcmVxdWlyZShcIi4vQXNzZXRzTG9hZGVyXCIpO1xyXG52YXIgJGFzc2V0c01hcCA9IHJlcXVpcmUoXCIuL0Fzc2V0c01hcFwiKTtcclxudmFyICRyZXNVdGlsID0gcmVxdWlyZShcIi4vUmVzVXRpbFwiKTtcclxudmFyICRldmVudE1hbmFnZXIgPSByZXF1aXJlKFwiLi9FdmVudE1hbmFnZXJcIik7XHJcbnZhciAkdUlNYW5hZ2VyID0gcmVxdWlyZShcIi4vVUlNYW5hZ2VyXCIpO1xyXG52YXIgJHBvcHVwVmlldyA9IHJlcXVpcmUoXCIuL1BvcHVwVmlld1wiKTtcclxudmFyICRndWlkZSA9IHJlcXVpcmUoXCIuL0d1aWRlXCIpO1xyXG52YXIgJHJlbW90ZUF1ZGlvID0gcmVxdWlyZShcIi4vUmVtb3RlQXVkaW9cIik7XHJcbnZhciAkY29uZmlnQ29udGV4dCA9IHJlcXVpcmUoXCIuL0NvbmZpZ0NvbnRleHRcIik7XHJcbnZhciAkZXF1aXBtZW50Q29udGV4dCA9IHJlcXVpcmUoXCIuL0VxdWlwbWVudENvbnRleHRcIik7XHJcbnZhciAkZ2xvYmFsUGFyYW0gPSByZXF1aXJlKFwiLi9HbG9iYWxQYXJhbVwiKTtcclxudmFyICRsb2NhbEV2ZW50TmFtZSA9IHJlcXVpcmUoXCIuL0xvY2FsRXZlbnROYW1lXCIpO1xyXG52YXIgJHJvbGVDb250ZXh0ID0gcmVxdWlyZShcIi4vUm9sZUNvbnRleHRcIik7XHJcbnZhciAkdXNlckRhdGFDb250ZXh0ID0gcmVxdWlyZShcIi4vVXNlckRhdGFDb250ZXh0XCIpO1xyXG52YXIgJGdhbWVHZW1JbmZvID0gcmVxdWlyZShcIi4vR2FtZUdlbUluZm9cIik7XHJcbnZhciAkc3RhcnRWaWV3ID0gcmVxdWlyZShcIi4vU3RhcnRWaWV3XCIpO1xyXG52YXIgdyA9IGNjLl9kZWNvcmF0b3I7XHJcbnZhciBBID0gdy5jY2NsYXNzO1xyXG52YXIgUyA9IHcucHJvcGVydHk7XHJcbnZhciBDID0gKGZ1bmN0aW9uICh0KSB7XHJcbiAgICBmdW5jdGlvbiBlKCkge1xyXG4gICAgICAgIHZhciBlID0gKG51bGwgIT09IHQgJiYgdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSB8fCB0aGlzO1xyXG4gICAgICAgIGUuaW5mb0xpc3QgPSBudWxsO1xyXG4gICAgICAgIGUuZ2VtSWNvblNwID0gbnVsbDtcclxuICAgICAgICBlLmdlbU5hbWUgPSBudWxsO1xyXG4gICAgICAgIGUuZ2VtRGVzYyA9IG51bGw7XHJcbiAgICAgICAgZS5lbWJlZEJ0biA9IG51bGw7XHJcbiAgICAgICAgZS5nZW1NYXNrID0gbnVsbDtcclxuICAgICAgICBlLmNoYW5nZU1hc2sgPSBudWxsO1xyXG4gICAgICAgIGUuYnRuTG9jayA9IG51bGw7XHJcbiAgICAgICAgZS5nZW1JZCA9IC0xO1xyXG4gICAgICAgIGUubmFtZXMgPSBbXCLmma7pgJpcIiwgXCLnsr7oia9cIiwgXCLnqIDmnIlcIiwgXCLlj7Lor5dcIiwgXCLkvKDlpYdcIiwgXCLnu53kuJZcIiwgXCLnpZ7or51cIl07XHJcbiAgICAgICAgZS5wYXJ0TmFtZXMgPSBbXCLluL3lrZBcIiwgXCLkuIrooaNcIiwgXCLpnovlrZBcIiwgXCLmiqToh4JcIiwgXCLoo6TlrZBcIiwgXCLmiYvlpZdcIl07XHJcbiAgICAgICAgZS5jb25maWcgPSBudWxsO1xyXG4gICAgICAgIHJldHVybiBlO1xyXG4gICAgfVxyXG4gICAgX19leHRlbmRzKGUsIHQpO1xyXG4gICAgZS5wcm90b3R5cGUub25SZXNldFZpZXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZ2VtSWQgPSB0aGlzLnVpUGFyYW0ucGFyYW0uZ2VtSWQ7XHJcbiAgICAgICAgJGdsb2JhbFBhcmFtLmRlZmF1bHQuY3VyckdlbUlkSW5mbyA9IHRoaXMuZ2VtSWQ7XHJcbiAgICAgICAgdmFyIGUgPSAkY29uZmlnQ29udGV4dC5kZWZhdWx0Lmluc3RhbmNlLmdlbUNvbmZpZ3MuZmluZChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZS5pZCA9PT0gdC5nZW1JZDtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IGU7XHJcbiAgICAgICAgJGFzc2V0c0xvYWRlci5kZWZhdWx0Lmluc3RhbmNlLmxvYWRSZXMoXHJcbiAgICAgICAgICAgICRhc3NldHNNYXAuQnVuZGxlTmFtZXMuUHVibGljLFxyXG4gICAgICAgICAgICBbXCIvdGV4dHVyZXMvZ2VtL2dcIiArIGUucGFydCArIFwiX1wiICsgZS5HcmFkZV0sXHJcbiAgICAgICAgICAgIGNjLlNwcml0ZUZyYW1lLFxyXG4gICAgICAgICAgICBudWxsLFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZSwgaSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG8gPSBpWzBdO1xyXG4gICAgICAgICAgICAgICAgaWYgKG8gJiYgY2MuaXNWYWxpZCh0LmdlbUljb25TcCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0LmdlbUljb25TcC5zcHJpdGVGcmFtZSA9ICRyZXNVdGlsLlJlc1V0aWwuYXNzaWduV2l0aChvLCB0Lm5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLmdlbU5hbWUuc3RyaW5nID0gdGhpcy5wYXJ0TmFtZXNbZS5wYXJ0IC0gMV0gKyBcIsK3XCIgKyB0aGlzLm5hbWVzW2UuR3JhZGUgLSAxXSArIFwi5a6d55+zXCI7XHJcbiAgICAgICAgdGhpcy5nZW1OYW1lLm5vZGUuY29sb3IgPSAkZ2FtZUdlbUluZm8uR2FtZUdlbUluZm8uZ2VtQ29sb3JbZS5HcmFkZSAtIDFdO1xyXG4gICAgICAgIHRoaXMuZ2VtRGVzYy5zdHJpbmcgPSAkZ2FtZUdlbUluZm8uR2FtZUdlbUluZm8uaW5zLmdldEdlbURlc2MoZSk7XHJcbiAgICAgICAgdmFyIGkgPSAkcm9sZUNvbnRleHQuZGVmYXVsdC5pbnMuZ2V0UGFja0luZm8oZS5pZCk7XHJcbiAgICAgICAgdGhpcy5idG5Mb2NrLmNoaWxkcmVuWzFdLmFjdGl2ZSA9IGkuaXNMb2NrO1xyXG4gICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgaWYgKCEkdXNlckRhdGFDb250ZXh0LmRlZmF1bHQuSW5zLmlzRW5kR3VpZGUpIHtcclxuICAgICAgICAgICAgJHVzZXJEYXRhQ29udGV4dC5kZWZhdWx0Lklucy5ndWlkZVN0ZXAgPSAyO1xyXG4gICAgICAgICAgICAkZ3VpZGUuZGVmYXVsdC5zZWxmLnN0YXJ0R3VpZGVUZXN0KHRoaXMuZW1iZWRCdG4sIFwi54K55Ye76ZW25bWMXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xyXG4gICAgICAgIHZhciBlID0gJGVxdWlwbWVudENvbnRleHQuZGVmYXVsdC5JbnMuZ2V0R2VtTGlzdCh0aGlzLmNvbmZpZy5wYXJ0KTtcclxuICAgICAgICB2YXIgaSA9IGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICAgICAgIHZhciBuID0gby5pbmZvTGlzdC5jaGlsZHJlbltpXTtcclxuICAgICAgICAgICAgaWYgKGUgJiYgZS5sZW5ndGggPiBpICYmIGVbaV0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBzID0gZVtpXTtcclxuICAgICAgICAgICAgICAgIG4uY2hpbGRyZW5bMF0uYWN0aXZlID0gITE7XHJcbiAgICAgICAgICAgICAgICBuLmNoaWxkcmVuWzFdLmFjdGl2ZSA9ICEwO1xyXG4gICAgICAgICAgICAgICAgdmFyIGMgPSBuLmNoaWxkcmVuWzFdLmNoaWxkcmVuWzBdLmdldENvbXBvbmVudChjYy5TcHJpdGUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHUgPSAkY29uZmlnQ29udGV4dC5kZWZhdWx0Lmluc3RhbmNlLmdlbUNvbmZpZ3MuZmluZChmdW5jdGlvbiAodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmlkID09PSBzO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkYXNzZXRzTG9hZGVyLmRlZmF1bHQuaW5zdGFuY2UubG9hZFJlcyhcclxuICAgICAgICAgICAgICAgICAgICAkYXNzZXRzTWFwLkJ1bmRsZU5hbWVzLlB1YmxpYyxcclxuICAgICAgICAgICAgICAgICAgICBbXCIvdGV4dHVyZXMvZ2VtL2dcIiArIHUucGFydCArIFwiX1wiICsgdS5HcmFkZV0sXHJcbiAgICAgICAgICAgICAgICAgICAgY2MuU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSwgaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGlbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvICYmIGNjLmlzVmFsaWQoYykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMuc3ByaXRlRnJhbWUgPSAkcmVzVXRpbC5SZXNVdGlsLmFzc2lnbldpdGgobywgdC5ub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZCA9ICRnYW1lR2VtSW5mby5HYW1lR2VtSW5mby5pbnMuZ2V0R2VtRGVzYyh1KTtcclxuICAgICAgICAgICAgICAgIGlmIChkLmxlbmd0aCA+PSAxOSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGQgPSBkLnN1YnN0cmluZygwLCAxOCkgKyBcIi4uLlwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbi5jaGlsZHJlblsxXS5jaGlsZHJlblsxXS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuLmNoaWxkcmVuWzBdLmFjdGl2ZSA9ICEwO1xyXG4gICAgICAgICAgICAgICAgbi5jaGlsZHJlblsxXS5hY3RpdmUgPSAhMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIG8gPSB0aGlzO1xyXG4gICAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgNTsgbisrKSB7XHJcbiAgICAgICAgICAgIGkobik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmFkZEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZ2VtTWFzay5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgdGhpcy5jbGlja0Nsb3NlLCB0aGlzKTtcclxuICAgICAgICBpZiAodGhpcy5nZW1NYXNrLl90b3VjaExpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2VtTWFzay5fdG91Y2hMaXN0ZW5lci5zZXRTd2FsbG93VG91Y2hlcyghMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhbmdlTWFzay5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgdGhpcy5jbGlja0Nsb3NlQ2hhbmdlLCB0aGlzKTtcclxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VNYXNrLl90b3VjaExpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2VtTWFzay5fdG91Y2hMaXN0ZW5lci5zZXRTd2FsbG93VG91Y2hlcyghMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZW1iZWRCdG4ub24oXCJjbGlja1wiLCB0aGlzLmNsaWNrRW1iZWQsIHRoaXMpO1xyXG4gICAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgdGhpcy5pbmZvTGlzdC5jaGlsZHJlbi5sZW5ndGg7IHQrKykge1xyXG4gICAgICAgICAgICB0aGlzLmluZm9MaXN0LmNoaWxkcmVuW3RdLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCB0aGlzLnRvdWNoSXRlbSwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYnRuTG9jay5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgdGhpcy5jbGlja0xvY2ssIHRoaXMpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLnJlbW92ZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZ2VtTWFzay5vZmYoY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIHRoaXMuY2xpY2tDbG9zZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5lbWJlZEJ0bi5vZmYoXCJjbGlja1wiLCB0aGlzLmNsaWNrRW1iZWQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTWFzay5vZmYoY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIHRoaXMuY2xpY2tDbG9zZUNoYW5nZSwgdGhpcyk7XHJcbiAgICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0aGlzLmluZm9MaXN0LmNoaWxkcmVuLmxlbmd0aDsgdCsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5mb0xpc3QuY2hpbGRyZW5bdF0ub2ZmKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCB0aGlzLnRvdWNoSXRlbSwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYnRuTG9jay5vZmYoY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIHRoaXMuY2xpY2tMb2NrLCB0aGlzKTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS50b3VjaEl0ZW0gPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGlmICgkZXF1aXBtZW50Q29udGV4dC5kZWZhdWx0Lklucy5oYXNTYW1lR2VtKHRoaXMuY29uZmlnLnBhcnQsIHRoaXMuY29uZmlnLmlkKSkge1xyXG4gICAgICAgICAgICAkdUlNYW5hZ2VyLlVJTWFuYWdlci5pbnN0YW5jZS5zaG93VG9hc3QoXCLlrp3nn7Plt7LlrZjlnKhcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmluZm9MaXN0LmNoaWxkcmVuLmluZGV4T2YoZS50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKC0xID09PSAkZXF1aXBtZW50Q29udGV4dC5kZWZhdWx0Lklucy5nZXRQYXJ0QW5kSW5kZXhHZW1JZCh0aGlzLmNvbmZpZy5wYXJ0LCBpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNsaWNrRW1iZWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRlcXVpcG1lbnRDb250ZXh0LmRlZmF1bHQuSW5zLnJlbW92ZUdlbSh0aGlzLmNvbmZpZy5wYXJ0LCBpKTtcclxuICAgICAgICAgICAgICAgICRlcXVpcG1lbnRDb250ZXh0LmRlZmF1bHQuSW5zLnNldEdlbSh0aGlzLmNvbmZpZy5wYXJ0LCB0aGlzLmNvbmZpZy5pZCwgaSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgJGV2ZW50TWFuYWdlci5kZWZhdWx0LnNlbmQoJGxvY2FsRXZlbnROYW1lLmRlZmF1bHQuUkVOREVSX0dFTSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlbU1hc2suYWN0aXZlID0gITA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZU1hc2suYWN0aXZlID0gITE7XHJcbiAgICAgICAgICAgICAgICAkdUlNYW5hZ2VyLlVJTWFuYWdlci5pbnN0YW5jZS5zaG93VG9hc3QoXCLmm7/mjaLlrozmiJBcIik7XHJcbiAgICAgICAgICAgICAgICAkZXZlbnRNYW5hZ2VyLmRlZmF1bHQuc2VuZCgkbG9jYWxFdmVudE5hbWUuZGVmYXVsdC5SRU5ERVJfRE9ULCAkc3RhcnRWaWV3Lk1lbnVUeXBlLlJvbGUpO1xyXG4gICAgICAgICAgICAgICAgJGdsb2JhbFBhcmFtLmRlZmF1bHQuY3VyckdlbUlkSW5mbyA9IC0xO1xyXG4gICAgICAgICAgICAgICAgdC5wcm90b3R5cGUub25DbGlja0Nsb3NlLmNhbGwodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuY2xpY2tDbG9zZUNoYW5nZSA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdmFyIGUgPSB0aGlzLmNoYW5nZU1hc2suY29udmVydFRvTm9kZVNwYWNlQVIodC5nZXRMb2NhdGlvbigpKTtcclxuICAgICAgICBpZiAoZS55ID49IHRoaXMuY2hhbmdlTWFzay5jaGlsZHJlblsyXS55IHx8IGUueSA8PSB0aGlzLmNoYW5nZU1hc2suY2hpbGRyZW5bM10ueSkge1xyXG4gICAgICAgICAgICB0aGlzLmdlbU1hc2suYWN0aXZlID0gITA7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFzay5hY3RpdmUgPSAhMTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuY2xpY2tDbG9zZSA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgdmFyIGkgPSB0aGlzLmdlbU1hc2suY29udmVydFRvTm9kZVNwYWNlQVIoZS5nZXRMb2NhdGlvbigpKTtcclxuICAgICAgICBpZiAoaS55ID49IHRoaXMuZ2VtTWFzay5jaGlsZHJlblswXS55IHx8IGkueSA8PSB0aGlzLmdlbU1hc2suY2hpbGRyZW5bMV0ueSkge1xyXG4gICAgICAgICAgICAkZ2xvYmFsUGFyYW0uZGVmYXVsdC5jdXJyR2VtSWRJbmZvID0gLTE7XHJcbiAgICAgICAgICAgIHQucHJvdG90eXBlLm9uQ2xpY2tDbG9zZS5jYWxsKHRoaXMpO1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbkltbWVkaWF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5vbkNsaWNrQ2xvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJGdsb2JhbFBhcmFtLmRlZmF1bHQuY3VyckdlbUlkSW5mbyA9IC0xO1xyXG4gICAgICAgIHQucHJvdG90eXBlLm9uQ2xpY2tDbG9zZS5jYWxsKHRoaXMpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmNsaWNrRW1iZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHJlbW90ZUF1ZGlvLmRlZmF1bHQuaW5zdGFuY2UucGxheUVmZmVjdE11c2ljKFwiQ2xpY2tcIik7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNoYW5nZU1hc2suYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIGlmICgkZXF1aXBtZW50Q29udGV4dC5kZWZhdWx0Lklucy5oYXNTYW1lR2VtKHRoaXMuY29uZmlnLnBhcnQsIHRoaXMuY29uZmlnLmlkKSkge1xyXG4gICAgICAgICAgICAgICAgJHVJTWFuYWdlci5VSU1hbmFnZXIuaW5zdGFuY2Uuc2hvd1RvYXN0KFwi5a6d55+z5bey5a2Y5ZyoXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkZXF1aXBtZW50Q29udGV4dC5kZWZhdWx0Lklucy5nZW1Db3VudCh0aGlzLmNvbmZpZy5wYXJ0KSA+PSA1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VtTWFzay5hY3RpdmUgPSAhMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgKHRoaXMuY2hhbmdlTWFzay5hY3RpdmUgPSAhMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICRlcXVpcG1lbnRDb250ZXh0LmRlZmF1bHQuSW5zLnNldEdlbSh0aGlzLmNvbmZpZy5wYXJ0LCB0aGlzLmNvbmZpZy5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAkZXZlbnRNYW5hZ2VyLmRlZmF1bHQuc2VuZCgkbG9jYWxFdmVudE5hbWUuZGVmYXVsdC5SRU5ERVJfR0VNKTtcclxuICAgICAgICAgICAgICAgICAgICAkZXZlbnRNYW5hZ2VyLmRlZmF1bHQuc2VuZCgkbG9jYWxFdmVudE5hbWUuZGVmYXVsdC5SRU5ERVJfRE9ULCAkc3RhcnRWaWV3Lk1lbnVUeXBlLlJvbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICRnbG9iYWxQYXJhbS5kZWZhdWx0LmN1cnJHZW1JZEluZm8gPSAtMTtcclxuICAgICAgICAgICAgICAgICAgICB0LnByb3RvdHlwZS5vbkNsaWNrQ2xvc2UuY2FsbCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5jbGlja0xvY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHQgPSAkcm9sZUNvbnRleHQuZGVmYXVsdC5pbnMubG9ja0FuZFVubG9jayh0aGlzLmNvbmZpZy5pZCk7XHJcbiAgICAgICAgdGhpcy5idG5Mb2NrLmNoaWxkcmVuWzFdLmFjdGl2ZSA9IHQ7XHJcbiAgICAgICAgJGV2ZW50TWFuYWdlci5kZWZhdWx0LnNlbmQoJGxvY2FsRXZlbnROYW1lLmRlZmF1bHQuUkVOREVSX0dFTSk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUub3BlbkFuaW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuY2xvc2VBbmltID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBjYy50d2VlbigpLnRvKDAuMTUsIHtcclxuICAgICAgICAgICAgb3BhY2l0eTogMTAwXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgX19kZWNvcmF0ZShbUyhjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcImluZm9MaXN0XCIsIHZvaWQgMCk7XHJcbiAgICBfX2RlY29yYXRlKFtTKGNjLlNwcml0ZSldLCBlLnByb3RvdHlwZSwgXCJnZW1JY29uU3BcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW1MoY2MuTGFiZWwpXSwgZS5wcm90b3R5cGUsIFwiZ2VtTmFtZVwiLCB2b2lkIDApO1xyXG4gICAgX19kZWNvcmF0ZShbUyhjYy5MYWJlbCldLCBlLnByb3RvdHlwZSwgXCJnZW1EZXNjXCIsIHZvaWQgMCk7XHJcbiAgICBfX2RlY29yYXRlKFtTKGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwiZW1iZWRCdG5cIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW1MoY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJnZW1NYXNrXCIsIHZvaWQgMCk7XHJcbiAgICBfX2RlY29yYXRlKFtTKGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwiY2hhbmdlTWFza1wiLCB2b2lkIDApO1xyXG4gICAgX19kZWNvcmF0ZShbUyhjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcImJ0bkxvY2tcIiwgdm9pZCAwKTtcclxuICAgIHJldHVybiBfX2RlY29yYXRlKFtBXSwgZSk7XHJcbn0pKCRwb3B1cFZpZXcuUG9wdXBWaWV3KTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gQztcclxuIl19