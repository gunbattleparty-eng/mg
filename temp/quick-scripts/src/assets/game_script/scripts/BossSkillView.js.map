{"version":3,"sources":["assets\\game_script\\scripts\\BossSkillView.js"],"names":["o","$assetsLoader","require","$assetsMap","$resUtil","$eventManager","$popupView","$seedUtil","$configContext","$localEventName","h","cc","_decorator","m","ccclass","y","property","g","t","e","apply","arguments","chooseSkillLayer","chooseAnimLayer","boxLayer","closeContent","skills","currSkills","currIndexs","poss","animStatus","__extends","prototype","onResetView","uiParam","param","skillIds","randomCount","i","children","length","position","clone","Math","min","randomArr","forEach","push","indexOf","n","randomFrom","console","log","render","startAnim","addEvent","on","Node","EventType","TOUCH_START","touchEnd","removeEvent","off","active","instance","skillConfigsMap","get","s","getComponent","Sprite","loadRes","BundleNames","Public_Res","icon","SpriteFrame","isValid","spriteFrame","ResUtil","assignWith","node","Label","string","name","skill_text","animItem","r","a","l","c","u","tween","d","to","call","repeat","opacity","start","Tween","stopAllByTarget","send","CHOOSE_SKILL","onClickClose","__decorate","PopupView","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $popupView = require(\"./PopupView\");\r\nvar $seedUtil = require(\"./SeedUtil\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar h = cc._decorator;\r\nvar m = h.ccclass;\r\nvar y = h.property;\r\nvar g = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.chooseSkillLayer = null;\r\n        e.chooseAnimLayer = null;\r\n        e.boxLayer = null;\r\n        e.closeContent = null;\r\n        e.skills = [];\r\n        e.currSkills = [];\r\n        e.currIndexs = [];\r\n        e.poss = [];\r\n        e.animStatus = 0;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.onResetView = function () {\r\n        var t = this;\r\n        this.skills = this.uiParam.param.skillIds;\r\n        var e = this.uiParam.param.randomCount;\r\n        for (var i = 0; i < this.chooseAnimLayer.children.length; i++) {\r\n            this.poss[i] = this.chooseAnimLayer.children[i].position.clone();\r\n        }\r\n        var o = Math.min(e, this.skills.length);\r\n        this.currSkills = $seedUtil.default.randomArr(this.skills, o);\r\n        this.currSkills.forEach(function (e) {\r\n            t.currIndexs.push(t.skills.indexOf(e));\r\n        });\r\n        if (this.skills.length < 12) {\r\n            var n = 12 - this.skills.length;\r\n            for (i = 0; i < n; i++) {\r\n                this.skills.push(this.skills[$seedUtil.default.randomFrom(0, this.skills.length - 1)]);\r\n            }\r\n        }\r\n        console.log(\"技能池:\", this.skills);\r\n        console.log(\"选中:\", this.currIndexs, this.currSkills);\r\n        this.render();\r\n        this.startAnim();\r\n    };\r\n    e.prototype.addEvent = function () {\r\n        this.closeContent.on(cc.Node.EventType.TOUCH_START, this.touchEnd, this);\r\n    };\r\n    e.prototype.removeEvent = function () {\r\n        this.closeContent.off(cc.Node.EventType.TOUCH_START, this.touchEnd, this);\r\n    };\r\n    e.prototype.render = function () {\r\n        var t = this;\r\n        var e = function (e) {\r\n            var o = i.chooseSkillLayer.children[e];\r\n            o.active = !0;\r\n            if (i.currIndexs.length <= e) {\r\n                o.active = !1;\r\n                return \"continue\";\r\n            }\r\n            var n = $configContext.default.instance.skillConfigsMap.get(i.currSkills[e]);\r\n            var s = o.children[0].getComponent(cc.Sprite);\r\n            $assetsLoader.default.instance.loadRes(\r\n                $assetsMap.BundleNames.Public_Res,\r\n                [\"/skills/\" + n.icon],\r\n                cc.SpriteFrame,\r\n                null,\r\n                function (e, i) {\r\n                    var o = i[0];\r\n                    if (o && cc.isValid(s)) {\r\n                        s.spriteFrame = $resUtil.ResUtil.assignWith(o, t.node);\r\n                    }\r\n                }\r\n            );\r\n            o.children[1].getComponent(cc.Label).string = n.name;\r\n            o.children[2].getComponent(cc.Label).string = n.skill_text;\r\n            o.active = !1;\r\n        };\r\n        var i = this;\r\n        for (var o = 0; o < this.chooseSkillLayer.children.length; o++) {\r\n            e(o);\r\n        }\r\n        var n = function (e) {\r\n            var i = $configContext.default.instance.skillConfigsMap.get(s.skills[e]);\r\n            var o = s.chooseAnimLayer.children[e].children[1].getComponent(cc.Sprite);\r\n            $assetsLoader.default.instance.loadRes(\r\n                $assetsMap.BundleNames.Public_Res,\r\n                [\"/skills/\" + i.icon],\r\n                cc.SpriteFrame,\r\n                null,\r\n                function (e, i) {\r\n                    var n = i[0];\r\n                    if (n && cc.isValid(o)) {\r\n                        o.spriteFrame = $resUtil.ResUtil.assignWith(n, t.node);\r\n                    }\r\n                }\r\n            );\r\n        };\r\n        var s = this;\r\n        for (o = 0; o < this.skills.length; o++) {\r\n            n(o);\r\n        }\r\n    };\r\n    e.prototype.startAnim = function () {\r\n        var t = this;\r\n        this.animStatus = 1;\r\n        var e = 0;\r\n        var i = $seedUtil.default.randomCount(0, 11, this.currIndexs.length);\r\n        for (var o = 0; o < this.currIndexs.length; o++) {\r\n            var n = this.boxLayer.children[o];\r\n            n.active = !0;\r\n            this.animItem(n, i[o], o, function () {\r\n                if (++e >= t.currIndexs.length) {\r\n                    t.animStatus = 2;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    e.prototype.animItem = function (t, e, i, o) {\r\n        var n = this;\r\n        t.position = this.poss[e].clone();\r\n        var s;\r\n        var r = this.currIndexs[i];\r\n        var a = 5 / (60 + (s = r < e ? 11 - e + r + 1 : r - e) + r);\r\n        var l = 60 + s + this.currIndexs[i];\r\n        var c = e;\r\n        var u = cc.tween(t);\r\n        for (var d = 0; d < l; d++) {\r\n            ++c >= 12 && (c = 0);\r\n            u.to(a, {\r\n                position: this.poss[c]\r\n            });\r\n        }\r\n        u.call(function () {\r\n            n.chooseSkillLayer.children[i].active = !0;\r\n            if (o) {\r\n                o();\r\n            }\r\n        });\r\n        u.repeat(\r\n            2,\r\n            cc\r\n                .tween()\r\n                .to(0.3, {\r\n                    opacity: 0\r\n                })\r\n                .to(0.3, {\r\n                    opacity: 255\r\n                })\r\n        );\r\n        u.start();\r\n    };\r\n    e.prototype.touchEnd = function () {\r\n        if (1 === this.animStatus) {\r\n            this.animStatus = 3;\r\n            for (var e = 0; e < this.currIndexs.length; e++) {\r\n                cc.Tween.stopAllByTarget(this.boxLayer.children[e]);\r\n                this.boxLayer.children[e].active = !0;\r\n                this.boxLayer.children[e].opacity = 255;\r\n                this.boxLayer.children[e].position = this.poss[this.currIndexs[e]];\r\n                this.chooseSkillLayer.children[e].active = !0;\r\n            }\r\n        } else {\r\n            if (2 === this.animStatus || 3 === this.animStatus) {\r\n                this.animStatus = 4;\r\n                for (e = 0; e < this.currSkills.length; e++) {\r\n                    $eventManager.default.send($localEventName.default.CHOOSE_SKILL, this.currSkills[e]);\r\n                }\r\n                t.prototype.onClickClose.call(this);\r\n            }\r\n        }\r\n    };\r\n    __decorate([y(cc.Node)], e.prototype, \"chooseSkillLayer\", void 0);\r\n    __decorate([y(cc.Node)], e.prototype, \"chooseAnimLayer\", void 0);\r\n    __decorate([y(cc.Node)], e.prototype, \"boxLayer\", void 0);\r\n    __decorate([y(cc.Node)], e.prototype, \"closeContent\", void 0);\r\n    return __decorate([m], e);\r\n})($popupView.PopupView);\r\nexports.default = g;\r\n"]}