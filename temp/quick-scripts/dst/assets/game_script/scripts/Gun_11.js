
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/Gun_11.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '7ab8cQXT6dHSo5hrpO3OuMG', 'Gun_11');
// game_script/scripts/Gun_11.js

"use strict";

var o;

var $assetsLoader = require("./AssetsLoader");

var $assetsMap = require("./AssetsMap");

var $resUtil = require("./ResUtil");

var $eventManager = require("./EventManager");

var $seedUtil = require("./SeedUtil");

var $configContext = require("./ConfigContext");

var $globalParam = require("./GlobalParam");

var $localEventName = require("./LocalEventName");

var $baseBullet = require("./BaseBullet");

var $gameContext = require("./GameContext");

var $gameSkillInfo = require("./GameSkillInfo");

var $baseGun = require("./BaseGun");

var g = cc.Vec3.ZERO;

var _ = function (t) {
  function e(e) {
    var i = t.call(this, e) || this;
    i.skillId = 247;
    i.skillParam = $gameContext["default"].ins.skillInfo.getSkillById(i.skillId);
    return i;
  }

  __extends(e, t);

  e.prototype.updateF = function (e) {
    t.prototype.updateF.call(this, e);

    if (!($globalParam["default"].isGamePuase || this.releaseing)) {
      this.timeLeft -= e;
      this.timeLeft <= 0 ? (this.timeLeft = this.skillParam.skillCD[$gameSkillInfo.Skill4Param.FINAL], $eventManager["default"].send($localEventName["default"].RENDER_SKILL_CD_INFO, this.skillId, 0), this.startGun() ? (this.releaseing = !0, this.timeLeft = this.skillParam.skillCD[$gameSkillInfo.Skill4Param.FINAL], $eventManager["default"].send($localEventName["default"].RENDER_SKILL_CD_INFO, this.skillId, 1)) : this.timeLeft = 0) : $eventManager["default"].send($localEventName["default"].RENDER_SKILL_CD_INFO, this.skillId, this.timeLeft / this.skillParam.skillCD[$gameSkillInfo.Skill4Param.FINAL], -1);
    }
  };

  e.prototype.startGun = function () {
    var t = this;
    var e = $gameContext["default"].ins.getRandomEnemys(this.pointNode, this.skillParam.skillReleaseCount + 1, this.skillParam.skillAtkRange[$gameSkillInfo.Skill4Param.FINAL]);

    if (e.length <= 0) {
      return !1;
    }

    var i = Math.min(e.length, this.skillParam.skillReleaseCount);

    for (var o = 0; o < i; o++) {
      var n = e[o].getPosition();

      if (o + 1 < e.length) {
        var s = e[o + 1].getPosition();
        g.x = s.x - n.x;
        g.y = s.y - n.y;
      } else {
        g.x = $seedUtil["default"].randomFloat(-1, 1);
        g.y = $seedUtil["default"].randomFloat(-1, 1);
      }

      this.createBullet(n, g.normalizeSelf());
    }

    this.schedulesOnce(function () {
      t.releaseing = !1;
    }, this.skillParam.time[$gameSkillInfo.Skill4Param.FINAL]);
    return !0;
  };

  e.prototype.createBullet = function (t, e) {
    var i = $gameContext["default"].ins.getButtlePool($baseBullet.BulletType.drat);

    if (!i) {
      var o = $assetsLoader["default"].instance.getRes($assetsMap.BundleNames.Game, $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.Bullet_29);
      (i = $resUtil.ResUtil.instantiate(o, $gameContext["default"].ins.lowBulletLayer.parent).getComponent($baseBullet["default"])).skillSpecialitys = $configContext["default"].instance.basicSkillConfigMap.get(this.skillId).skill_tpye;
    }

    i.setPosition(t);
    i.initButtle(e, this.skillId);
    i.insert($gameContext["default"].ins.lowBulletLayer);
  };

  return e;
}($baseGun["default"]);

exports["default"] = _;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXEd1bl8xMS5qcyJdLCJuYW1lcyI6WyJvIiwiJGFzc2V0c0xvYWRlciIsInJlcXVpcmUiLCIkYXNzZXRzTWFwIiwiJHJlc1V0aWwiLCIkZXZlbnRNYW5hZ2VyIiwiJHNlZWRVdGlsIiwiJGNvbmZpZ0NvbnRleHQiLCIkZ2xvYmFsUGFyYW0iLCIkbG9jYWxFdmVudE5hbWUiLCIkYmFzZUJ1bGxldCIsIiRnYW1lQ29udGV4dCIsIiRnYW1lU2tpbGxJbmZvIiwiJGJhc2VHdW4iLCJnIiwiY2MiLCJWZWMzIiwiWkVSTyIsIl8iLCJ0IiwiZSIsImkiLCJjYWxsIiwic2tpbGxJZCIsInNraWxsUGFyYW0iLCJpbnMiLCJza2lsbEluZm8iLCJnZXRTa2lsbEJ5SWQiLCJfX2V4dGVuZHMiLCJwcm90b3R5cGUiLCJ1cGRhdGVGIiwiaXNHYW1lUHVhc2UiLCJyZWxlYXNlaW5nIiwidGltZUxlZnQiLCJza2lsbENEIiwiU2tpbGw0UGFyYW0iLCJGSU5BTCIsInNlbmQiLCJSRU5ERVJfU0tJTExfQ0RfSU5GTyIsInN0YXJ0R3VuIiwiZ2V0UmFuZG9tRW5lbXlzIiwicG9pbnROb2RlIiwic2tpbGxSZWxlYXNlQ291bnQiLCJza2lsbEF0a1JhbmdlIiwibGVuZ3RoIiwiTWF0aCIsIm1pbiIsIm4iLCJnZXRQb3NpdGlvbiIsInMiLCJ4IiwieSIsInJhbmRvbUZsb2F0IiwiY3JlYXRlQnVsbGV0Iiwibm9ybWFsaXplU2VsZiIsInNjaGVkdWxlc09uY2UiLCJ0aW1lIiwiZ2V0QnV0dGxlUG9vbCIsIkJ1bGxldFR5cGUiLCJkcmF0IiwiaW5zdGFuY2UiLCJnZXRSZXMiLCJCdW5kbGVOYW1lcyIsIkdhbWUiLCJBc3NldHNNYXAiLCJHYW1lQnVuZGxlcyIsInByZWZhYnMiLCJhc3NldHNMaXN0IiwiQnVsbGV0XzI5IiwiUmVzVXRpbCIsImluc3RhbnRpYXRlIiwibG93QnVsbGV0TGF5ZXIiLCJwYXJlbnQiLCJnZXRDb21wb25lbnQiLCJza2lsbFNwZWNpYWxpdHlzIiwiYmFzaWNTa2lsbENvbmZpZ01hcCIsImdldCIsInNraWxsX3RweWUiLCJzZXRQb3NpdGlvbiIsImluaXRCdXR0bGUiLCJpbnNlcnQiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUo7O0FBQ0EsSUFBSUMsYUFBYSxHQUFHQyxPQUFPLENBQUMsZ0JBQUQsQ0FBM0I7O0FBQ0EsSUFBSUMsVUFBVSxHQUFHRCxPQUFPLENBQUMsYUFBRCxDQUF4Qjs7QUFDQSxJQUFJRSxRQUFRLEdBQUdGLE9BQU8sQ0FBQyxXQUFELENBQXRCOztBQUNBLElBQUlHLGFBQWEsR0FBR0gsT0FBTyxDQUFDLGdCQUFELENBQTNCOztBQUNBLElBQUlJLFNBQVMsR0FBR0osT0FBTyxDQUFDLFlBQUQsQ0FBdkI7O0FBQ0EsSUFBSUssY0FBYyxHQUFHTCxPQUFPLENBQUMsaUJBQUQsQ0FBNUI7O0FBQ0EsSUFBSU0sWUFBWSxHQUFHTixPQUFPLENBQUMsZUFBRCxDQUExQjs7QUFDQSxJQUFJTyxlQUFlLEdBQUdQLE9BQU8sQ0FBQyxrQkFBRCxDQUE3Qjs7QUFDQSxJQUFJUSxXQUFXLEdBQUdSLE9BQU8sQ0FBQyxjQUFELENBQXpCOztBQUNBLElBQUlTLFlBQVksR0FBR1QsT0FBTyxDQUFDLGVBQUQsQ0FBMUI7O0FBQ0EsSUFBSVUsY0FBYyxHQUFHVixPQUFPLENBQUMsaUJBQUQsQ0FBNUI7O0FBQ0EsSUFBSVcsUUFBUSxHQUFHWCxPQUFPLENBQUMsV0FBRCxDQUF0Qjs7QUFDQSxJQUFJWSxDQUFDLEdBQUdDLEVBQUUsQ0FBQ0MsSUFBSCxDQUFRQyxJQUFoQjs7QUFDQSxJQUFJQyxDQUFDLEdBQUksVUFBVUMsQ0FBVixFQUFhO0VBQ2xCLFNBQVNDLENBQVQsQ0FBV0EsQ0FBWCxFQUFjO0lBQ1YsSUFBSUMsQ0FBQyxHQUFHRixDQUFDLENBQUNHLElBQUYsQ0FBTyxJQUFQLEVBQWFGLENBQWIsS0FBbUIsSUFBM0I7SUFDQUMsQ0FBQyxDQUFDRSxPQUFG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LEVBRUo1RCxVQUFVLENBQUM2RCxTQUFYLENBQXFCQyxXQUFyQixDQUFpQ0MsT0FBakMsQ0FBeUNDLFVBQXpDLENBQW9EQyxTQUZoRCxDQUFSO01BSUEsQ0FBQy9DLENBQUMsR0FBR2pCLFFBQVEsQ0FBQ2lFLE9BQVQsQ0FBaUJDLFdBQWpCLENBQTZCdEUsQ0FBN0IsRUFBZ0NXLFlBQVksV0FBWixDQUFxQmMsR0FBckIsQ0FBeUI4QyxjQUF6QixDQUF3Q0MsTUFBeEUsRUFBZ0ZDLFlBQWhGLENBQ0QvRCxXQUFXLFdBRFYsQ0FBTCxFQUVHZ0UsZ0JBRkgsR0FFc0JuRSxjQUFjLFdBQWQsQ0FBdUJxRCxRQUF2QixDQUFnQ2UsbUJBQWhDLENBQW9EQyxHQUFwRCxDQUF3RCxLQUFLckQsT0FBN0QsRUFBc0VzRCxVQUY1RjtJQUdIOztJQUNEeEQsQ0FBQyxDQUFDeUQsV0FBRixDQUFjM0QsQ0FBZDtJQUNBRSxDQUFDLENBQUMwRCxVQUFGLENBQWEzRCxDQUFiLEVBQWdCLEtBQUtHLE9BQXJCO0lBQ0FGLENBQUMsQ0FBQzJELE1BQUYsQ0FBU3JFLFlBQVksV0FBWixDQUFxQmMsR0FBckIsQ0FBeUI4QyxjQUFsQztFQUNILENBZEQ7O0VBZUEsT0FBT25ELENBQVA7QUFDSCxDQXhFTyxDQXdFTFAsUUFBUSxXQXhFSCxDQUFSOztBQXlFQW9FLE9BQU8sV0FBUCxHQUFrQi9ELENBQWxCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbztcclxudmFyICRhc3NldHNMb2FkZXIgPSByZXF1aXJlKFwiLi9Bc3NldHNMb2FkZXJcIik7XHJcbnZhciAkYXNzZXRzTWFwID0gcmVxdWlyZShcIi4vQXNzZXRzTWFwXCIpO1xyXG52YXIgJHJlc1V0aWwgPSByZXF1aXJlKFwiLi9SZXNVdGlsXCIpO1xyXG52YXIgJGV2ZW50TWFuYWdlciA9IHJlcXVpcmUoXCIuL0V2ZW50TWFuYWdlclwiKTtcclxudmFyICRzZWVkVXRpbCA9IHJlcXVpcmUoXCIuL1NlZWRVdGlsXCIpO1xyXG52YXIgJGNvbmZpZ0NvbnRleHQgPSByZXF1aXJlKFwiLi9Db25maWdDb250ZXh0XCIpO1xyXG52YXIgJGdsb2JhbFBhcmFtID0gcmVxdWlyZShcIi4vR2xvYmFsUGFyYW1cIik7XHJcbnZhciAkbG9jYWxFdmVudE5hbWUgPSByZXF1aXJlKFwiLi9Mb2NhbEV2ZW50TmFtZVwiKTtcclxudmFyICRiYXNlQnVsbGV0ID0gcmVxdWlyZShcIi4vQmFzZUJ1bGxldFwiKTtcclxudmFyICRnYW1lQ29udGV4dCA9IHJlcXVpcmUoXCIuL0dhbWVDb250ZXh0XCIpO1xyXG52YXIgJGdhbWVTa2lsbEluZm8gPSByZXF1aXJlKFwiLi9HYW1lU2tpbGxJbmZvXCIpO1xyXG52YXIgJGJhc2VHdW4gPSByZXF1aXJlKFwiLi9CYXNlR3VuXCIpO1xyXG52YXIgZyA9IGNjLlZlYzMuWkVSTztcclxudmFyIF8gPSAoZnVuY3Rpb24gKHQpIHtcclxuICAgIGZ1bmN0aW9uIGUoZSkge1xyXG4gICAgICAgIHZhciBpID0gdC5jYWxsKHRoaXMsIGUpIHx8IHRoaXM7XHJcbiAgICAgICAgaS5za2lsbElkID0gMjQ3O1xyXG4gICAgICAgIGkuc2tpbGxQYXJhbSA9ICRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5za2lsbEluZm8uZ2V0U2tpbGxCeUlkKGkuc2tpbGxJZCk7XHJcbiAgICAgICAgcmV0dXJuIGk7XHJcbiAgICB9XHJcbiAgICBfX2V4dGVuZHMoZSwgdCk7XHJcbiAgICBlLnByb3RvdHlwZS51cGRhdGVGID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICB0LnByb3RvdHlwZS51cGRhdGVGLmNhbGwodGhpcywgZSk7XHJcbiAgICAgICAgaWYgKCEoJGdsb2JhbFBhcmFtLmRlZmF1bHQuaXNHYW1lUHVhc2UgfHwgdGhpcy5yZWxlYXNlaW5nKSkge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVMZWZ0IC09IGU7XHJcbiAgICAgICAgICAgIHRoaXMudGltZUxlZnQgPD0gMFxyXG4gICAgICAgICAgICAgICAgPyAoKHRoaXMudGltZUxlZnQgPSB0aGlzLnNraWxsUGFyYW0uc2tpbGxDRFskZ2FtZVNraWxsSW5mby5Ta2lsbDRQYXJhbS5GSU5BTF0pLFxyXG4gICAgICAgICAgICAgICAgICAkZXZlbnRNYW5hZ2VyLmRlZmF1bHQuc2VuZCgkbG9jYWxFdmVudE5hbWUuZGVmYXVsdC5SRU5ERVJfU0tJTExfQ0RfSU5GTywgdGhpcy5za2lsbElkLCAwKSxcclxuICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydEd1bigpXHJcbiAgICAgICAgICAgICAgICAgICAgICA/ICgodGhpcy5yZWxlYXNlaW5nID0gITApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy50aW1lTGVmdCA9IHRoaXMuc2tpbGxQYXJhbS5za2lsbENEWyRnYW1lU2tpbGxJbmZvLlNraWxsNFBhcmFtLkZJTkFMXSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRldmVudE1hbmFnZXIuZGVmYXVsdC5zZW5kKCRsb2NhbEV2ZW50TmFtZS5kZWZhdWx0LlJFTkRFUl9TS0lMTF9DRF9JTkZPLCB0aGlzLnNraWxsSWQsIDEpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgOiAodGhpcy50aW1lTGVmdCA9IDApKVxyXG4gICAgICAgICAgICAgICAgOiAkZXZlbnRNYW5hZ2VyLmRlZmF1bHQuc2VuZChcclxuICAgICAgICAgICAgICAgICAgICAgICRsb2NhbEV2ZW50TmFtZS5kZWZhdWx0LlJFTkRFUl9TS0lMTF9DRF9JTkZPLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5za2lsbElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lTGVmdCAvIHRoaXMuc2tpbGxQYXJhbS5za2lsbENEWyRnYW1lU2tpbGxJbmZvLlNraWxsNFBhcmFtLkZJTkFMXSxcclxuICAgICAgICAgICAgICAgICAgICAgIC0xXHJcbiAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLnN0YXJ0R3VuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ID0gdGhpcztcclxuICAgICAgICB2YXIgZSA9ICRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5nZXRSYW5kb21FbmVteXMoXHJcbiAgICAgICAgICAgIHRoaXMucG9pbnROb2RlLFxyXG4gICAgICAgICAgICB0aGlzLnNraWxsUGFyYW0uc2tpbGxSZWxlYXNlQ291bnQgKyAxLFxyXG4gICAgICAgICAgICB0aGlzLnNraWxsUGFyYW0uc2tpbGxBdGtSYW5nZVskZ2FtZVNraWxsSW5mby5Ta2lsbDRQYXJhbS5GSU5BTF1cclxuICAgICAgICApO1xyXG4gICAgICAgIGlmIChlLmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGkgPSBNYXRoLm1pbihlLmxlbmd0aCwgdGhpcy5za2lsbFBhcmFtLnNraWxsUmVsZWFzZUNvdW50KTtcclxuICAgICAgICBmb3IgKHZhciBvID0gMDsgbyA8IGk7IG8rKykge1xyXG4gICAgICAgICAgICB2YXIgbiA9IGVbb10uZ2V0UG9zaXRpb24oKTtcclxuICAgICAgICAgICAgaWYgKG8gKyAxIDwgZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzID0gZVtvICsgMV0uZ2V0UG9zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGcueCA9IHMueCAtIG4ueDtcclxuICAgICAgICAgICAgICAgIGcueSA9IHMueSAtIG4ueTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGcueCA9ICRzZWVkVXRpbC5kZWZhdWx0LnJhbmRvbUZsb2F0KC0xLCAxKTtcclxuICAgICAgICAgICAgICAgIGcueSA9ICRzZWVkVXRpbC5kZWZhdWx0LnJhbmRvbUZsb2F0KC0xLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUJ1bGxldChuLCBnLm5vcm1hbGl6ZVNlbGYoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2NoZWR1bGVzT25jZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHQucmVsZWFzZWluZyA9ICExO1xyXG4gICAgICAgIH0sIHRoaXMuc2tpbGxQYXJhbS50aW1lWyRnYW1lU2tpbGxJbmZvLlNraWxsNFBhcmFtLkZJTkFMXSk7XHJcbiAgICAgICAgcmV0dXJuICEwO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmNyZWF0ZUJ1bGxldCA9IGZ1bmN0aW9uICh0LCBlKSB7XHJcbiAgICAgICAgdmFyIGkgPSAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuZ2V0QnV0dGxlUG9vbCgkYmFzZUJ1bGxldC5CdWxsZXRUeXBlLmRyYXQpO1xyXG4gICAgICAgIGlmICghaSkge1xyXG4gICAgICAgICAgICB2YXIgbyA9ICRhc3NldHNMb2FkZXIuZGVmYXVsdC5pbnN0YW5jZS5nZXRSZXMoXHJcbiAgICAgICAgICAgICAgICAkYXNzZXRzTWFwLkJ1bmRsZU5hbWVzLkdhbWUsXHJcbiAgICAgICAgICAgICAgICAkYXNzZXRzTWFwLkFzc2V0c01hcC5HYW1lQnVuZGxlcy5wcmVmYWJzLmFzc2V0c0xpc3QuQnVsbGV0XzI5XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIChpID0gJHJlc1V0aWwuUmVzVXRpbC5pbnN0YW50aWF0ZShvLCAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMubG93QnVsbGV0TGF5ZXIucGFyZW50KS5nZXRDb21wb25lbnQoXHJcbiAgICAgICAgICAgICAgICAkYmFzZUJ1bGxldC5kZWZhdWx0XHJcbiAgICAgICAgICAgICkpLnNraWxsU3BlY2lhbGl0eXMgPSAkY29uZmlnQ29udGV4dC5kZWZhdWx0Lmluc3RhbmNlLmJhc2ljU2tpbGxDb25maWdNYXAuZ2V0KHRoaXMuc2tpbGxJZCkuc2tpbGxfdHB5ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaS5zZXRQb3NpdGlvbih0KTtcclxuICAgICAgICBpLmluaXRCdXR0bGUoZSwgdGhpcy5za2lsbElkKTtcclxuICAgICAgICBpLmluc2VydCgkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMubG93QnVsbGV0TGF5ZXIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBlO1xyXG59KSgkYmFzZUd1bi5kZWZhdWx0KTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gXztcclxuIl19