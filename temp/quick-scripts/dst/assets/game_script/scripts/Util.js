
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/Util.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '07e23EnlqJHzI4CFMPP96kP', 'Util');
// game_script/scripts/Util.js

"use strict";

var s = function () {
  function t() {}

  t.isJSON = function (t) {
    if ("string" == typeof t) {
      try {
        var e = JSON.parse(t);
        return !("object" != typeof e || !e);
      } catch (t) {
        return !1;
      }
    }
  };

  t.deepCopy = function (e) {
    var i;
    var n;

    if ("object" != typeof e) {
      return e;
    }

    var s = e.constructor == Array ? [] : {};

    if (s instanceof Array) {
      try {
        var r = __values(Object.keys(e));

        for (var a = r.next(); !a.done; a = r.next()) {
          var l = a.value;
          s[l] = t.deepCopy(e[l]);
        }
      } catch (t) {
        i = {
          error: t
        };
      } finally {
        try {
          if (a && !a.done && (n = r["return"])) {
            n.call(r);
          }
        } finally {
          if (i) {
            throw i.error;
          }
        }
      }
    } else {
      for (var c in e) {
        s[c] = t.deepCopy(e[c]);
      }
    }

    return s;
  };

  t.isPosOnNodeRect = function (t, e) {
    return e.getBoundingBoxToWorld().contains(t);
  };

  t.isToday = function (t) {
    var e = new Date(t);
    var i = new Date();
    return e.getFullYear() === i.getFullYear() && e.getMonth() === i.getMonth() && e.getDate() === i.getDate();
  };

  t.areNodesOverlap = function (t, e, i) {
    if (void 0 === i) {
      i = !1;
    }

    var o = t.getBoundingBoxToWorld();
    var n = e.getBoundingBoxToWorld();
    return i ? o.containsRect(n) : o.intersects(n);
  };

  t.startDayTimestamp = function () {
    return new Date(new Date(new Date().toLocaleDateString()).getTime()).getTime();
  };

  t.shuffle = function (t) {
    var e;
    var i;
    var o = t;

    for (var s = o.length - 1; s > 0; s--) {
      i = Math.floor(Math.random() * (s + 1));
      e = __read([o[i], o[s]], 2);
      o[s] = e[0];
      o[i] = e[1];
    }

    return o;
  };

  t.formatDate = function (t) {
    var e = Math.floor(t / 3600);
    var i = Math.floor(t % 3600 / 60);
    var o = Math.floor(t % 60);
    return [e >= 10 ? e.toString() : "0" + e, i >= 10 ? i.toString() : "0" + i, o >= 10 ? o.toString() : "0" + o];
  };

  t.dirConverAngle = function (t) {
    var e = Math.atan2(t.y, t.x);
    return cc.misc.radiansToDegrees(e);
  };

  t.angleConverDir = function (t) {
    var e = cc.misc.degreesToRadians(t);
    return cc.v3(Math.cos(e), Math.sin(e));
  };

  t.updateMaterialState = function (e, i) {
    var o = e.getComponent(cc.RenderComponent);

    if (o && !e.getComponent(dragonBones.ArmatureDisplay)) {
      t.switchGrayMaterial(i, o);
    }

    for (var n = 0; n < e.children.length; n++) {
      t.updateMaterialState(e.children[n], i);
    }
  };

  t.switchGrayMaterial = function (t, e) {
    var i = null;
    t ? (i = cc.Material.getBuiltinMaterial("2d-gray-sprite"), i = cc.MaterialVariant.create(i, e)) : (i = cc.Material.getBuiltinMaterial("2d-sprite"), i = cc.MaterialVariant.create(i, e));
    e.setMaterial(0, i);
  };

  t.isValid = function (t) {
    return !(!cc.isValid(t) || !t.parent);
  };

  t.amend = function (t, e, i) {
    var o;
    var n;
    var s;
    var r = t.toString();
    var a = e.toString();

    try {
      n = r.split(".")[1].length;
    } catch (t) {
      n = 0;
    }

    try {
      s = a.split(".")[1].length;
    } catch (t) {
      s = 0;
    }

    var l = Math.pow(10, Math.max(n, s));

    switch (i) {
      case "+":
        o = (t * l + e * l) / l;
        break;

      case "-":
        o = (t * l - e * l) / l;
        break;

      case "*":
        o = t * l * e * l / l / l;
        break;

      case "/":
        o = t * l / (e * l);
    }

    return o;
  };

  t.objectFormat = function (t) {
    var e = "";

    for (var i in t) {
      e.length > 0 ? e += "," + i + "=" + t[i] : e = i + "=" + t[i];
    }

    return e;
  };

  t.parseObject = function (t) {
    if (!t || t.length <= 0) {
      return null;
    }

    var e = {};
    var i = t.split(",");

    for (var o = 0; o < i.length; o++) {
      var n = i[o].split("=");
      var s = n[0];
      var r = n[1];

      if (s && r) {
        e[s] = r;
      }
    }

    return e;
  };

  return t;
}();

exports["default"] = s;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXFV0aWwuanMiXSwibmFtZXMiOlsicyIsInQiLCJpc0pTT04iLCJlIiwiSlNPTiIsInBhcnNlIiwiZGVlcENvcHkiLCJpIiwibiIsImNvbnN0cnVjdG9yIiwiQXJyYXkiLCJyIiwiX192YWx1ZXMiLCJPYmplY3QiLCJrZXlzIiwiYSIsIm5leHQiLCJkb25lIiwibCIsInZhbHVlIiwiZXJyb3IiLCJjYWxsIiwiYyIsImlzUG9zT25Ob2RlUmVjdCIsImdldEJvdW5kaW5nQm94VG9Xb3JsZCIsImNvbnRhaW5zIiwiaXNUb2RheSIsIkRhdGUiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImFyZU5vZGVzT3ZlcmxhcCIsIm8iLCJjb250YWluc1JlY3QiLCJpbnRlcnNlY3RzIiwic3RhcnREYXlUaW1lc3RhbXAiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJnZXRUaW1lIiwic2h1ZmZsZSIsImxlbmd0aCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIl9fcmVhZCIsImZvcm1hdERhdGUiLCJ0b1N0cmluZyIsImRpckNvbnZlckFuZ2xlIiwiYXRhbjIiLCJ5IiwieCIsImNjIiwibWlzYyIsInJhZGlhbnNUb0RlZ3JlZXMiLCJhbmdsZUNvbnZlckRpciIsImRlZ3JlZXNUb1JhZGlhbnMiLCJ2MyIsImNvcyIsInNpbiIsInVwZGF0ZU1hdGVyaWFsU3RhdGUiLCJnZXRDb21wb25lbnQiLCJSZW5kZXJDb21wb25lbnQiLCJkcmFnb25Cb25lcyIsIkFybWF0dXJlRGlzcGxheSIsInN3aXRjaEdyYXlNYXRlcmlhbCIsImNoaWxkcmVuIiwiTWF0ZXJpYWwiLCJnZXRCdWlsdGluTWF0ZXJpYWwiLCJNYXRlcmlhbFZhcmlhbnQiLCJjcmVhdGUiLCJzZXRNYXRlcmlhbCIsImlzVmFsaWQiLCJwYXJlbnQiLCJhbWVuZCIsInNwbGl0IiwicG93IiwibWF4Iiwib2JqZWN0Rm9ybWF0IiwicGFyc2VPYmplY3QiLCJl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SUFDekIsSUFBSSxDQUFDQSxDQUFELElBQU1BLENBQUMsQ0FBQ3NDLE1BQUYsSUFBWSxDQUF0QixFQUF5QjtNQUNyQixPQUFPLElBQVA7SUFDSDs7SUFDRCxJQUFJcEMsQ0FBQyxHQUFHLEVBQVI7SUFDQSxJQUFJSSxDQUFDLEdBQUdOLENBQUMsQ0FBQ3dFLEtBQUYsQ0FBUSxHQUFSLENBQVI7O0lBQ0EsS0FBSyxJQUFJekMsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR3pCLENBQUMsQ0FBQ2dDLE1BQXRCLEVBQThCUCxDQUFDLEVBQS9CLEVBQW1DO01BQy9CLElBQUl4QixDQUFDLEdBQUdELENBQUMsQ0FBQ3lCLENBQUQsQ0FBRCxDQUFLeUMsS0FBTCxDQUFXLEdBQVgsQ0FBUjtNQUNBLElBQUl6RSxDQUFDLEdBQUdRLENBQUMsQ0FBQyxDQUFELENBQVQ7TUFDQSxJQUFJRyxDQUFDLEdBQUdILENBQUMsQ0FBQyxDQUFELENBQVQ7O01BQ0EsSUFBSVIsQ0FBQyxJQUFJVyxDQUFULEVBQVk7UUFDUlIsQ0FBQyxDQUFDSCxDQUFELENBQUQsR0FBT1csQ0FBUDtNQUNIO0lBQ0o7O0lBQ0QsT0FBT1IsQ0FBUDtFQUNILENBZkQ7O0VBZ0JBLE9BQU9GLENBQVA7QUFDSCxDQXBLTyxFQUFSOztBQXFLQTZFLE9BQU8sV0FBUCxHQUFrQjlFLENBQWxCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcyA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiB0KCkge31cclxuICAgIHQuaXNKU09OID0gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSBKU09OLnBhcnNlKHQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEoXCJvYmplY3RcIiAhPSB0eXBlb2YgZSB8fCAhZSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0LmRlZXBDb3B5ID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICB2YXIgaTtcclxuICAgICAgICB2YXIgbjtcclxuICAgICAgICBpZiAoXCJvYmplY3RcIiAhPSB0eXBlb2YgZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHMgPSBlLmNvbnN0cnVjdG9yID09IEFycmF5ID8gW10gOiB7fTtcclxuICAgICAgICBpZiAocyBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgciA9IF9fdmFsdWVzKE9iamVjdC5rZXlzKGUpKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGEgPSByLm5leHQoKTsgIWEuZG9uZTsgYSA9IHIubmV4dCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBhLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHNbbF0gPSB0LmRlZXBDb3B5KGVbbF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XHJcbiAgICAgICAgICAgICAgICBpID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiB0XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYSAmJiAhYS5kb25lICYmIChuID0gci5yZXR1cm4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG4uY2FsbChyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGkuZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgYyBpbiBlKSBzW2NdID0gdC5kZWVwQ29weShlW2NdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHM7XHJcbiAgICB9O1xyXG4gICAgdC5pc1Bvc09uTm9kZVJlY3QgPSBmdW5jdGlvbiAodCwgZSkge1xyXG4gICAgICAgIHJldHVybiBlLmdldEJvdW5kaW5nQm94VG9Xb3JsZCgpLmNvbnRhaW5zKHQpO1xyXG4gICAgfTtcclxuICAgIHQuaXNUb2RheSA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdmFyIGUgPSBuZXcgRGF0ZSh0KTtcclxuICAgICAgICB2YXIgaSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIGUuZ2V0RnVsbFllYXIoKSA9PT0gaS5nZXRGdWxsWWVhcigpICYmIGUuZ2V0TW9udGgoKSA9PT0gaS5nZXRNb250aCgpICYmIGUuZ2V0RGF0ZSgpID09PSBpLmdldERhdGUoKTtcclxuICAgIH07XHJcbiAgICB0LmFyZU5vZGVzT3ZlcmxhcCA9IGZ1bmN0aW9uICh0LCBlLCBpKSB7XHJcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gaSkge1xyXG4gICAgICAgICAgICBpID0gITE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBvID0gdC5nZXRCb3VuZGluZ0JveFRvV29ybGQoKTtcclxuICAgICAgICB2YXIgbiA9IGUuZ2V0Qm91bmRpbmdCb3hUb1dvcmxkKCk7XHJcbiAgICAgICAgcmV0dXJuIGkgPyBvLmNvbnRhaW5zUmVjdChuKSA6IG8uaW50ZXJzZWN0cyhuKTtcclxuICAgIH07XHJcbiAgICB0LnN0YXJ0RGF5VGltZXN0YW1wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShuZXcgRGF0ZShuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpKS5nZXRUaW1lKCkpLmdldFRpbWUoKTtcclxuICAgIH07XHJcbiAgICB0LnNodWZmbGUgPSBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIHZhciBlO1xyXG4gICAgICAgIHZhciBpO1xyXG4gICAgICAgIHZhciBvID0gdDtcclxuICAgICAgICBmb3IgKHZhciBzID0gby5sZW5ndGggLSAxOyBzID4gMDsgcy0tKSB7XHJcbiAgICAgICAgICAgIGkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAocyArIDEpKTtcclxuICAgICAgICAgICAgZSA9IF9fcmVhZChbb1tpXSwgb1tzXV0sIDIpO1xyXG4gICAgICAgICAgICBvW3NdID0gZVswXTtcclxuICAgICAgICAgICAgb1tpXSA9IGVbMV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvO1xyXG4gICAgfTtcclxuICAgIHQuZm9ybWF0RGF0ZSA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdmFyIGUgPSBNYXRoLmZsb29yKHQgLyAzNjAwKTtcclxuICAgICAgICB2YXIgaSA9IE1hdGguZmxvb3IoKHQgJSAzNjAwKSAvIDYwKTtcclxuICAgICAgICB2YXIgbyA9IE1hdGguZmxvb3IodCAlIDYwKTtcclxuICAgICAgICByZXR1cm4gW2UgPj0gMTAgPyBlLnRvU3RyaW5nKCkgOiBcIjBcIiArIGUsIGkgPj0gMTAgPyBpLnRvU3RyaW5nKCkgOiBcIjBcIiArIGksIG8gPj0gMTAgPyBvLnRvU3RyaW5nKCkgOiBcIjBcIiArIG9dO1xyXG4gICAgfTtcclxuICAgIHQuZGlyQ29udmVyQW5nbGUgPSBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIHZhciBlID0gTWF0aC5hdGFuMih0LnksIHQueCk7XHJcbiAgICAgICAgcmV0dXJuIGNjLm1pc2MucmFkaWFuc1RvRGVncmVlcyhlKTtcclxuICAgIH07XHJcbiAgICB0LmFuZ2xlQ29udmVyRGlyID0gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICB2YXIgZSA9IGNjLm1pc2MuZGVncmVlc1RvUmFkaWFucyh0KTtcclxuICAgICAgICByZXR1cm4gY2MudjMoTWF0aC5jb3MoZSksIE1hdGguc2luKGUpKTtcclxuICAgIH07XHJcbiAgICB0LnVwZGF0ZU1hdGVyaWFsU3RhdGUgPSBmdW5jdGlvbiAoZSwgaSkge1xyXG4gICAgICAgIHZhciBvID0gZS5nZXRDb21wb25lbnQoY2MuUmVuZGVyQ29tcG9uZW50KTtcclxuICAgICAgICBpZiAobyAmJiAhZS5nZXRDb21wb25lbnQoZHJhZ29uQm9uZXMuQXJtYXR1cmVEaXNwbGF5KSkge1xyXG4gICAgICAgICAgICB0LnN3aXRjaEdyYXlNYXRlcmlhbChpLCBvKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBlLmNoaWxkcmVuLmxlbmd0aDsgbisrKSB7XHJcbiAgICAgICAgICAgIHQudXBkYXRlTWF0ZXJpYWxTdGF0ZShlLmNoaWxkcmVuW25dLCBpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdC5zd2l0Y2hHcmF5TWF0ZXJpYWwgPSBmdW5jdGlvbiAodCwgZSkge1xyXG4gICAgICAgIHZhciBpID0gbnVsbDtcclxuICAgICAgICB0XHJcbiAgICAgICAgICAgID8gKChpID0gY2MuTWF0ZXJpYWwuZ2V0QnVpbHRpbk1hdGVyaWFsKFwiMmQtZ3JheS1zcHJpdGVcIikpLCAoaSA9IGNjLk1hdGVyaWFsVmFyaWFudC5jcmVhdGUoaSwgZSkpKVxyXG4gICAgICAgICAgICA6ICgoaSA9IGNjLk1hdGVyaWFsLmdldEJ1aWx0aW5NYXRlcmlhbChcIjJkLXNwcml0ZVwiKSksIChpID0gY2MuTWF0ZXJpYWxWYXJpYW50LmNyZWF0ZShpLCBlKSkpO1xyXG4gICAgICAgIGUuc2V0TWF0ZXJpYWwoMCwgaSk7XHJcbiAgICB9O1xyXG4gICAgdC5pc1ZhbGlkID0gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICByZXR1cm4gISghY2MuaXNWYWxpZCh0KSB8fCAhdC5wYXJlbnQpO1xyXG4gICAgfTtcclxuICAgIHQuYW1lbmQgPSBmdW5jdGlvbiAodCwgZSwgaSkge1xyXG4gICAgICAgIHZhciBvO1xyXG4gICAgICAgIHZhciBuO1xyXG4gICAgICAgIHZhciBzO1xyXG4gICAgICAgIHZhciByID0gdC50b1N0cmluZygpO1xyXG4gICAgICAgIHZhciBhID0gZS50b1N0cmluZygpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIG4gPSByLnNwbGl0KFwiLlwiKVsxXS5sZW5ndGg7XHJcbiAgICAgICAgfSBjYXRjaCAodCkge1xyXG4gICAgICAgICAgICBuID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcyA9IGEuc3BsaXQoXCIuXCIpWzFdLmxlbmd0aDtcclxuICAgICAgICB9IGNhdGNoICh0KSB7XHJcbiAgICAgICAgICAgIHMgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbCA9IE1hdGgucG93KDEwLCBNYXRoLm1heChuLCBzKSk7XHJcbiAgICAgICAgc3dpdGNoIChpKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCIrXCI6XHJcbiAgICAgICAgICAgICAgICBvID0gKHQgKiBsICsgZSAqIGwpIC8gbDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiLVwiOlxyXG4gICAgICAgICAgICAgICAgbyA9ICh0ICogbCAtIGUgKiBsKSAvIGw7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIipcIjpcclxuICAgICAgICAgICAgICAgIG8gPSAodCAqIGwgKiBlICogbCkgLyBsIC8gbDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiL1wiOlxyXG4gICAgICAgICAgICAgICAgbyA9ICh0ICogbCkgLyAoZSAqIGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbztcclxuICAgIH07XHJcbiAgICB0Lm9iamVjdEZvcm1hdCA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdmFyIGUgPSBcIlwiO1xyXG4gICAgICAgIGZvciAodmFyIGkgaW4gdCkgZS5sZW5ndGggPiAwID8gKGUgKz0gXCIsXCIgKyBpICsgXCI9XCIgKyB0W2ldKSA6IChlID0gaSArIFwiPVwiICsgdFtpXSk7XHJcbiAgICAgICAgcmV0dXJuIGU7XHJcbiAgICB9O1xyXG4gICAgdC5wYXJzZU9iamVjdCA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgaWYgKCF0IHx8IHQubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBlID0ge307XHJcbiAgICAgICAgdmFyIGkgPSB0LnNwbGl0KFwiLFwiKTtcclxuICAgICAgICBmb3IgKHZhciBvID0gMDsgbyA8IGkubGVuZ3RoOyBvKyspIHtcclxuICAgICAgICAgICAgdmFyIG4gPSBpW29dLnNwbGl0KFwiPVwiKTtcclxuICAgICAgICAgICAgdmFyIHMgPSBuWzBdO1xyXG4gICAgICAgICAgICB2YXIgciA9IG5bMV07XHJcbiAgICAgICAgICAgIGlmIChzICYmIHIpIHtcclxuICAgICAgICAgICAgICAgIGVbc10gPSByO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlO1xyXG4gICAgfTtcclxuICAgIHJldHVybiB0O1xyXG59KSgpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBzO1xyXG4iXX0=