{"version":3,"sources":["assets\\game_script\\scripts\\RGun_5.js"],"names":["o","$assetsLoader","require","$assetsMap","$resUtil","$configContext","$globalParam","$baseBullet","$gameContext","p","t","e","i","call","ins","skillInfo","robotParam","instance","robotConfigs","find","id","Petsskin_skill_value","timeLeft","__extends","prototype","updateF","isAttacking","isGamePuase","startGun","getRangeRankEnemy","pointNode","node","position","sub","cc","v3","normalize","createButtle","schedulesOnce","getButtlePool","BulletType","r_bullet_5_1","getRes","BundleNames","Game","AssetsMap","GameBundles","prefabs","assetsList","RBullet_5_1","ResUtil","instantiate","robotFlyLayer","parent","getComponent","setPosition","initButtle","insert","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $globalParam = require(\"./GlobalParam\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar p = (function (t) {\r\n    function e(e) {\r\n        var i = t.call(this, e) || this;\r\n        $gameContext.default.ins.skillInfo.robotParam = $configContext.default.instance.robotConfigs.find(function (t) {\r\n            return 6 === t.id;\r\n        }).Petsskin_skill_value;\r\n        i.timeLeft = $gameContext.default.ins.skillInfo.robotParam[1];\r\n        return i;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.updateF = function (e) {\r\n        t.prototype.updateF.call(this, e);\r\n        if (!(this.isAttacking || $globalParam.default.isGamePuase)) {\r\n            this.timeLeft -= e;\r\n            if (this.timeLeft <= 0) {\r\n                this.startGun();\r\n            }\r\n        }\r\n    };\r\n    e.prototype.startGun = function () {\r\n        var t = this;\r\n        var e = $gameContext.default.ins.getRangeRankEnemy(\r\n            this.pointNode,\r\n            $gameContext.default.ins.skillInfo.robotParam[2]\r\n        );\r\n        if (!e) {\r\n            this.timeLeft = 1;\r\n            return !1;\r\n        }\r\n        var i = e.node.position.sub(cc.v3(0, -200)).normalize();\r\n        this.isAttacking = !0;\r\n        this.createButtle(i);\r\n        this.schedulesOnce(function () {\r\n            t.timeLeft = $gameContext.default.ins.skillInfo.robotParam[1];\r\n            t.isAttacking = !1;\r\n        }, $gameContext.default.ins.skillInfo.robotParam[5] + 0.3);\r\n    };\r\n    e.prototype.createButtle = function () {\r\n        var t = $gameContext.default.ins.getButtlePool($baseBullet.BulletType.r_bullet_5_1);\r\n        if (!t) {\r\n            var e = $assetsLoader.default.instance.getRes(\r\n                $assetsMap.BundleNames.Game,\r\n                $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.RBullet_5_1\r\n            );\r\n            t = $resUtil.ResUtil.instantiate(e, $gameContext.default.ins.robotFlyLayer.parent).getComponent(\r\n                $baseBullet.default\r\n            );\r\n        }\r\n        t.setPosition(cc.v3(0, -350));\r\n        t.pointNode = this.pointNode;\r\n        t.initButtle(null);\r\n        t.insert($gameContext.default.ins.robotFlyLayer);\r\n    };\r\n    return e;\r\n})(require(\"./BaseGun\").default);\r\nexports.default = p;\r\n"]}