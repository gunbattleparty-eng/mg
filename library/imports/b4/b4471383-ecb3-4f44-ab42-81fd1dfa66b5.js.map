{"version":3,"sources":["assets\\game_script\\scripts\\VIVONativeAd.js"],"names":["o","exports","VIVONativeAd","$baseAdNode","require","r","window","qg","a","t","e","apply","arguments","adViewName","__extends","prototype","loadAd","adUnitId","createNativeAd","adIns","onLoad","onError","load","console","warn","error","showNativeAd","i","n","showCallback","errorCallback","closeCallback","isCanShow","hideing","isLoaded","isAutoShow","adData","reCreateAd","isConsume","reportAdClick","adId","toString","destroyAd","setAdData","icon","title","desc","reportAdShow","forbiddenNativeAd","hideNativeAd","call","offLoad","offError","destroy","autoShow","onAdLoad","adList","length","pop","onAdError","onAdClose","destroyNativeAdNode"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nexports.VIVONativeAd = void 0;\r\nvar $baseAdNode = require(\"./BaseAdNode\");\r\nvar r = window.qg;\r\nvar a = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.adViewName = null;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.loadAd = function () {\r\n        if (this.adUnitId) {\r\n            if (r && r.createNativeAd) {\r\n                var t = {\r\n                    adUnitId: this.adUnitId\r\n                };\r\n                this.adIns = r.createNativeAd(t);\r\n                if (this.adIns.onLoad) {\r\n                    this.adIns.onLoad(this.onLoad);\r\n                }\r\n                if (this.adIns.onError) {\r\n                    this.adIns.onError(this.onError);\r\n                }\r\n                this.adIns.load();\r\n            } else {\r\n                console.warn(\"组件不支持NativeAd\");\r\n            }\r\n        } else {\r\n            console.error(\"vivoNative ID为空\");\r\n        }\r\n    };\r\n    e.prototype.showNativeAd = function (t, e, i, o) {\r\n        var n = this;\r\n        this.showCallback = e;\r\n        this.errorCallback = o;\r\n        this.closeCallback = i;\r\n        if (this.isCanShow) {\r\n            return this.hideing || !this.isLoaded\r\n                ? (console.warn(this.adUnitId, \":正在隐藏或加载中，稍等\"), void (this.isAutoShow = !0))\r\n                : !this.adIns || this.adData\r\n                ? this.reCreateAd(!0)\r\n                : void (\r\n                      this.isLoaded &&\r\n                      this.adData &&\r\n                      ((this.isConsume = !0),\r\n                      this.createNativeAd(\r\n                          t,\r\n                          function () {\r\n                              if (n.adIns && n.adData) {\r\n                                  n.adIns.reportAdClick({\r\n                                      adId: n.adData.adId.toString()\r\n                                  });\r\n                              }\r\n                              if (n.showCallback) {\r\n                                  n.showCallback();\r\n                              }\r\n                              n.destroyAd();\r\n                              n.reCreateAd(!1);\r\n                          },\r\n                          function () {\r\n                              if (n.closeCallback) {\r\n                                  n.closeCallback();\r\n                              }\r\n                              n.reCreateAd(!1);\r\n                          }\r\n                      ),\r\n                      this.setAdData(this.adData.icon, this.adData.title, this.adData.desc),\r\n                      this.adIns.reportAdShow({\r\n                          adId: this.adData.adId.toString()\r\n                      }))\r\n                  );\r\n        }\r\n        console.warn(this.adUnitId, \":当前广告禁止显示\");\r\n    };\r\n    e.prototype.forbiddenNativeAd = function (t) {\r\n        this.isCanShow = !t;\r\n        if (t && this.isConsume) {\r\n            this.hideNativeAd(!1);\r\n        }\r\n    };\r\n    e.prototype.hideNativeAd = function (t) {\r\n        t && this.isConsume ? (this.destroyAd(), this.reCreateAd(!1)) : this.destroyAd();\r\n    };\r\n    e.prototype.destroyAd = function () {\r\n        t.prototype.destroyAd.call(this);\r\n        this.adData = null;\r\n        if (this.adIns) {\r\n            if (this.adIns.offLoad) {\r\n                this.adIns.offLoad(this.onLoad);\r\n            }\r\n            if (this.adIns.offError) {\r\n                this.adIns.offError(this.onError);\r\n            }\r\n            if (this.adIns.destroy) {\r\n                this.adIns.destroy();\r\n            }\r\n            this.adIns = null;\r\n        }\r\n    };\r\n    e.prototype.autoShow = function () {\r\n        if (this.isAutoShow) {\r\n            this.isAutoShow = !1;\r\n            this.showNativeAd(this.adViewName, this.showCallback, this.errorCallback);\r\n        }\r\n    };\r\n    e.prototype.onAdLoad = function (e) {\r\n        t.prototype.onAdLoad.call(this, e);\r\n        this.isConsume = !1;\r\n        this.isLoaded = !0;\r\n        if (e && e.adList && e.adList.length > 0) {\r\n            var i = e.adList.pop();\r\n            this.adData = i;\r\n            this.autoShow();\r\n        }\r\n    };\r\n    e.prototype.onAdError = function (e) {\r\n        t.prototype.onAdError.call(this, e);\r\n        console.error(\"onAdError\", this.adUnitId, e);\r\n        if (this.errorCallback) {\r\n            this.errorCallback();\r\n        }\r\n        this.destroyAd();\r\n    };\r\n    e.prototype.onAdClose = function (e) {\r\n        t.prototype.onAdClose.call(this, e);\r\n        this.destroyNativeAdNode();\r\n    };\r\n    return e;\r\n})($baseAdNode.default);\r\nexports.VIVONativeAd = a;\r\n"]}