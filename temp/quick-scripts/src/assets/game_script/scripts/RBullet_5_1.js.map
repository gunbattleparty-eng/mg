{"version":3,"sources":["assets\\game_script\\scripts\\RBullet_5_1.js"],"names":["o","$assetsLoader","require","$assetsMap","$resUtil","$gameContext","$baseBullet","d","cc","_decorator","p","ccclass","f","property","h","Vec3","t","e","apply","arguments","buttleType","BulletType","r_bullet_5_1","point1","pointNode","atkCDLeft","timeLeft","isAttacking","__extends","prototype","initButtle","i","call","ins","skillInfo","robotParam","tween","node","children","to","x","start","isUse","updateFrame","removeSelf","startGun","getRandomEnemys","length","caculateTarget","position","add","getPosition","sub","normalizeSelf","createButtle","getButtlePool","r_bullet_5_2","instance","getRes","BundleNames","Game","AssetsMap","GameBundles","prefabs","assetsList","RBullet_5_2","ResUtil","instantiate","lowBulletLayer","parent","getComponent","setPosition","insert","__decorate","Node","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar d = cc._decorator;\r\nvar p = d.ccclass;\r\nvar f = d.property;\r\nvar h =\r\n    (new cc.Vec3(),\r\n    (function (t) {\r\n        function e() {\r\n            var e = (null !== t && t.apply(this, arguments)) || this;\r\n            e.buttleType = $baseBullet.BulletType.r_bullet_5_1;\r\n            e.point1 = [];\r\n            e.pointNode = null;\r\n            e.atkCDLeft = 0;\r\n            e.timeLeft = 0;\r\n            e.isAttacking = !1;\r\n            return e;\r\n        }\r\n        __extends(e, t);\r\n        e.prototype.initButtle = function (e) {\r\n            var i = this;\r\n            t.prototype.initButtle.call(this, e, null);\r\n            this.atkCDLeft = $gameContext.default.ins.skillInfo.robotParam[4];\r\n            this.timeLeft = $gameContext.default.ins.skillInfo.robotParam[5];\r\n            cc.tween(this.node.children[0])\r\n                .to(0.3, {\r\n                    x: 290\r\n                })\r\n                .start();\r\n            cc.tween(this.node.children[1])\r\n                .to(0.3, {\r\n                    x: -290\r\n                })\r\n                .call(function () {\r\n                    i.isUse = !1;\r\n                })\r\n                .start();\r\n        };\r\n        e.prototype.updateFrame = function (t) {\r\n            var e = this;\r\n            if (!(this.isUse || this.timeLeft <= 0)) {\r\n                this.timeLeft -= t;\r\n                if (this.timeLeft <= 0) {\r\n                    this.timeLeft = 0;\r\n                    this.isUse = !0;\r\n                    cc.tween(this.node.children[0])\r\n                        .to(0.3, {\r\n                            x: 500\r\n                        })\r\n                        .start();\r\n                    cc.tween(this.node.children[1])\r\n                        .to(0.3, {\r\n                            x: -500\r\n                        })\r\n                        .call(function () {\r\n                            e.removeSelf();\r\n                        })\r\n                        .start();\r\n                }\r\n                if (!this.isAttacking) {\r\n                    this.atkCDLeft -= t;\r\n                    if (this.atkCDLeft <= 0) {\r\n                        this.atkCDLeft = $gameContext.default.ins.skillInfo.robotParam[4];\r\n                        this.startGun();\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        e.prototype.startGun = function () {\r\n            var t = $gameContext.default.ins.getRandomEnemys(\r\n                this.pointNode,\r\n                2,\r\n                $gameContext.default.ins.skillInfo.robotParam[2]\r\n            );\r\n            if (t.length <= 0) {\r\n                this.atkCDLeft = 1;\r\n                return !1;\r\n            }\r\n            if (1 === t.length) {\r\n                this.caculateTarget(0, t[0]);\r\n                this.caculateTarget(1, t[0]);\r\n            } else {\r\n                for (var e = 0; e < t.length; e++) {\r\n                    this.caculateTarget(e, t[e]);\r\n                }\r\n            }\r\n            this.atkCDLeft = $gameContext.default.ins.skillInfo.robotParam[4];\r\n            this.isAttacking = !1;\r\n        };\r\n        e.prototype.caculateTarget = function (t, e) {\r\n            var i = this.node.position.add(this.point1[t].position);\r\n            var o = e.getPosition().sub(i).normalizeSelf();\r\n            this.createButtle(o, i);\r\n        };\r\n        e.prototype.createButtle = function (t, e) {\r\n            var i = $gameContext.default.ins.getButtlePool($baseBullet.BulletType.r_bullet_5_2);\r\n            if (!i) {\r\n                var o = $assetsLoader.default.instance.getRes(\r\n                    $assetsMap.BundleNames.Game,\r\n                    $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.RBullet_5_2\r\n                );\r\n                i = $resUtil.ResUtil.instantiate(o, $gameContext.default.ins.lowBulletLayer.parent).getComponent(\r\n                    $baseBullet.default\r\n                );\r\n            }\r\n            i.setPosition(e);\r\n            i.initButtle(t, null);\r\n            i.insert($gameContext.default.ins.lowBulletLayer);\r\n        };\r\n        __decorate([f([cc.Node])], e.prototype, \"point1\", void 0);\r\n        return __decorate([p], e);\r\n    })($baseBullet.default));\r\nexports.default = h;\r\n"]}