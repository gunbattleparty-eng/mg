{"version":3,"sources":["assets\\game_script\\scripts\\PopupView.js"],"names":["o","exports","PopupView","$popupManager","require","$uIParam","$uIView","c","cc","_decorator","u","ccclass","d","property","p","t","e","apply","arguments","uiType","LayerType","POPUP","content","isMaskBg","btnClose","maskNode","__extends","prototype","innerResetView","openAnim","target","start","on","onClickClose","innerAddToScreen","call","node","getChildByName","setSiblingIndex","parent","innerRemoveToScreen","off","Tween","stopAllByTarget","scale","tween","to","closeAnim","playCloseAnim","PopupManager","instance","close","__decorate","Boolean","Node","UIView"],"mappings":";;;;;;AAAA,IAAIA,CAAJ;AACAC,OAAO,CAACC,SAAR,GAAoB,KAAK,CAAzB;;AACA,IAAIC,aAAa,GAAGC,OAAO,CAAC,gBAAD,CAA3B;;AACA,IAAIC,QAAQ,GAAGD,OAAO,CAAC,WAAD,CAAtB;;AACA,IAAIE,OAAO,GAAGF,OAAO,CAAC,UAAD,CAArB;;AACA,IAAIG,CAAC,GAAGC,EAAE,CAACC,UAAX;AACA,IAAIC,CAAC,GAAGH,CAAC,CAACI,OAAV;AACA,IAAIC,CAAC,GAAGL,CAAC,CAACM,QAAV;;AACA,IAAIC,CAAC,GAAI,UAAUC,CAAV,EAAa;EAClB,SAASC,CAAT,GAAa;IACT,IAAIA,CAAC,GAAI,SAASD,CAAT,IAAcA,CAAC,CAACE,KAAF,CAAQ,IAAR,EAAcC,SAAd,CAAf,IAA4C,IAApD;IACAF,CAAC,CAACG,MAAF,GAAWd,QAAQ,CAACe,SAAT,CAAmBC,KAA9B;IACAL,CAAC,CAACM,OAAF,GAAY,IAAZ;IACAN,CAAC,CAACO,QAAF,GAAa,CAAC,CAAd;IACAP,CAAC,CAACQ,QAAF,GAAa,IAAb;IACAR,CAAC,CAACS,QAAF,GAAa,IAAb;IACA,OAAOT,CAAP;EACH;;EACDU,SAAS,CAACV,CAAD,EAAID,CAAJ,CAAT;;EACAC,CAAC,CAACW,SAAF,CAAYC,cAAZ,GAA6B,YAAY;IACrC,IAAIb,CAAC,GAAG,KAAKc,QAAL,EAAR;;IACA,IAAId,CAAJ,EAAO;MACHA,CAAC,CAACe,MAAF,CAAS,KAAKR,OAAd,EAAuBS,KAAvB;IACH;;IACD,IAAI,KAAKP,QAAT,EAAmB;MACf,KAAKA,QAAL,CAAcQ,EAAd,CAAiB,OAAjB,EAA0B,KAAKC,YAA/B,EAA6C,IAA7C;IACH;EACJ,CARD;;EASAjB,CAAC,CAACW,SAAF,CAAYO,gBAAZ,GAA+B,YAAY;IACvCnB,CAAC,CAACY,SAAF,CAAYO,gBAAZ,CAA6BC,IAA7B,CAAkC,IAAlC;IACA,KAAKb,OAAL,GAAe,KAAKc,IAAL,CAAUC,cAAV,CAAyB,SAAzB,CAAf;IACA,KAAKf,OAAL,CAAagB,eAAb,CAA6B,CAA7B;;IACA,IAAI,KAAKf,QAAT,EAAmB;MACf,KAAKE,QAAL,CAAcc,MAAd,GAAuB,KAAKH,IAA5B;MACA,KAAKX,QAAL,CAAca,eAAd,CAA8B,CAA9B;IACH;EACJ,CARD;;EASAtB,CAAC,CAACW,SAAF,CAAYa,mBAAZ,GAAkC,YAAY;IAC1C,IAAI,KAAKhB,QAAT,EAAmB;MACf,KAAKA,QAAL,CAAciB,GAAd,CAAkB,OAAlB,EAA2B,KAAKR,YAAhC,EAA8C,IAA9C;IACH;;IACDzB,EAAE,CAACkC,KAAH,CAASC,eAAT,CAAyB,KAAKrB,OAA9B;IACA,KAAKA,OAAL,CAAasB,KAAb,GAAqB,CAArB;IACA7B,CAAC,CAACY,SAAF,CAAYa,mBAAZ,CAAgCL,IAAhC,CAAqC,IAArC;EACH,CAPD;;EAQAnB,CAAC,CAACW,SAAF,CAAYE,QAAZ,GAAuB,YAAY;IAC/B,OAAOrB,EAAE,CACJqC,KADE,GAEFC,EAFE,CAEC,IAFD,EAEO;MACNF,KAAK,EAAE;IADD,CAFP,EAKFE,EALE,CAKC,IALD,EAKO;MACNF,KAAK,EAAE;IADD,CALP,CAAP;EAQH,CATD;;EAUA5B,CAAC,CAACW,SAAF,CAAYoB,SAAZ,GAAwB,YAAY;IAChC,OAAOvC,EAAE,CACJqC,KADE,GAEFC,EAFE,CAEC,IAFD,EAEO;MACNF,KAAK,EAAE;IADD,CAFP,EAKFE,EALE,CAKC,IALD,EAKO;MACNF,KAAK,EAAE;IADD,CALP,CAAP;EAQH,CATD;;EAUA5B,CAAC,CAACW,SAAF,CAAYqB,aAAZ,GAA4B,UAAUjC,CAAV,EAAa;IACrC,IAAIC,CAAC,GAAG,KAAK+B,SAAL,EAAR;IACA/B,CAAC,GACKA,CAAC,CACIc,MADL,CACY,KAAKR,OADjB,EAEKa,IAFL,CAEU,YAAY;MACd,IAAIpB,CAAJ,EAAO;QACHA,CAAC;MACJ;IACJ,CANL,EAOKgB,KAPL,EADL,GASKhB,CAAC,IAAIA,CAAC,EATZ;EAUH,CAZD;;EAaAC,CAAC,CAACW,SAAF,CAAYM,YAAZ,GAA2B,YAAY;IACnC9B,aAAa,CAAC8C,YAAd,CAA2BC,QAA3B,CAAoCC,KAApC,CAA0C,IAA1C;EACH,CAFD;;EAGAC,UAAU,CAAC,CAACxC,CAAC,CAACJ,EAAE,CAAC6C,OAAJ,CAAF,CAAD,EAAkBrC,CAAC,CAACW,SAApB,EAA+B,UAA/B,EAA2C,KAAK,CAAhD,CAAV;;EACAyB,UAAU,CAAC,CAACxC,CAAC,CAACJ,EAAE,CAAC8C,IAAJ,CAAF,CAAD,EAAetC,CAAC,CAACW,SAAjB,EAA4B,UAA5B,EAAwC,KAAK,CAA7C,CAAV;;EACA,OAAOyB,UAAU,CAAC,CAAC1C,CAAD,CAAD,EAAMM,CAAN,CAAjB;AACH,CA5EO,CA4ELV,OAAO,CAACiD,MA5EH,CAAR;;AA6EAtD,OAAO,CAACC,SAAR,GAAoBY,CAApB","sourceRoot":"/","sourcesContent":["var o;\r\nexports.PopupView = void 0;\r\nvar $popupManager = require(\"./PopupManager\");\r\nvar $uIParam = require(\"./UIParam\");\r\nvar $uIView = require(\"./UIView\");\r\nvar c = cc._decorator;\r\nvar u = c.ccclass;\r\nvar d = c.property;\r\nvar p = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.uiType = $uIParam.LayerType.POPUP;\r\n        e.content = null;\r\n        e.isMaskBg = !0;\r\n        e.btnClose = null;\r\n        e.maskNode = null;\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.innerResetView = function () {\r\n        var t = this.openAnim();\r\n        if (t) {\r\n            t.target(this.content).start();\r\n        }\r\n        if (this.btnClose) {\r\n            this.btnClose.on(\"click\", this.onClickClose, this);\r\n        }\r\n    };\r\n    e.prototype.innerAddToScreen = function () {\r\n        t.prototype.innerAddToScreen.call(this);\r\n        this.content = this.node.getChildByName(\"content\");\r\n        this.content.setSiblingIndex(1);\r\n        if (this.isMaskBg) {\r\n            this.maskNode.parent = this.node;\r\n            this.maskNode.setSiblingIndex(0);\r\n        }\r\n    };\r\n    e.prototype.innerRemoveToScreen = function () {\r\n        if (this.btnClose) {\r\n            this.btnClose.off(\"click\", this.onClickClose, this);\r\n        }\r\n        cc.Tween.stopAllByTarget(this.content);\r\n        this.content.scale = 1;\r\n        t.prototype.innerRemoveToScreen.call(this);\r\n    };\r\n    e.prototype.openAnim = function () {\r\n        return cc\r\n            .tween()\r\n            .to(0.15, {\r\n                scale: 1.2\r\n            })\r\n            .to(0.15, {\r\n                scale: 1\r\n            });\r\n    };\r\n    e.prototype.closeAnim = function () {\r\n        return cc\r\n            .tween()\r\n            .to(0.15, {\r\n                scale: 1.2\r\n            })\r\n            .to(0.15, {\r\n                scale: 0.5\r\n            });\r\n    };\r\n    e.prototype.playCloseAnim = function (t) {\r\n        var e = this.closeAnim();\r\n        e\r\n            ? e\r\n                  .target(this.content)\r\n                  .call(function () {\r\n                      if (t) {\r\n                          t();\r\n                      }\r\n                  })\r\n                  .start()\r\n            : t && t();\r\n    };\r\n    e.prototype.onClickClose = function () {\r\n        $popupManager.PopupManager.instance.close(this);\r\n    };\r\n    __decorate([d(cc.Boolean)], e.prototype, \"isMaskBg\", void 0);\r\n    __decorate([d(cc.Node)], e.prototype, \"btnClose\", void 0);\r\n    return __decorate([u], e);\r\n})($uIView.UIView);\r\nexports.PopupView = p;\r\n"]}