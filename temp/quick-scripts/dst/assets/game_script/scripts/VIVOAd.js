
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/VIVOAd.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '7ede7MFz5ZHDY/OJdbIpb5J', 'VIVOAd');
// game_script/scripts/VIVOAd.js

"use strict";

var o;
exports.VIVOAd = void 0;

var $aDConfig = require("./ADConfig");

var $generalAd = require("./GeneralAd");

var $vIVOAddDesktop = require("./VIVOAddDesktop");

var $vIVOBanner = require("./VIVOBanner");

var $vIVOCustom = require("./VIVOCustom");

var $vIVOGamePortal = require("./VIVOGamePortal");

var $vIVORewardedVideo = require("./VIVORewardedVideo");

var p = function (t) {
  function e() {
    var e = t.call(this) || this;
    e.vivoReward = null;
    e.vivoBanner = null;
    e.vivoGamePortal = null;
    e.customeAds = [];
    e.vivoAddDesktop = null;
    e.vivoReward = new $vIVORewardedVideo.VIVORewardedVideo();
    e.vivoReward.initAd($aDConfig.ADConfig.vivo.rewarded_video_id);
    e.vivoBanner = new $vIVOBanner.VIVOBanner();
    e.vivoBanner.initAd($aDConfig.ADConfig.vivo.banner_id);
    e.vivoGamePortal = new $vIVOGamePortal["default"]();
    e.vivoGamePortal.initAd($aDConfig.ADConfig.vivo.gamePortal_id);

    for (var i = 0; i < $aDConfig.ADConfig.vivo.customer_ad_ids.length; i++) {
      e.customeAds[i] = new $vIVOCustom["default"]();
      e.customeAds[i].initAd($aDConfig.ADConfig.vivo.customer_ad_ids[i]);
    }

    e.vivoAddDesktop = new $vIVOAddDesktop["default"]();
    return e;
  }

  __extends(e, t);

  e.prototype.showRewardedVideo = function (t, e, i) {
    this.vivoReward.showRewardedVideo(t, e, i);
  };

  e.prototype.showBanner = function (t, e, i) {
    this.vivoBanner.showBanner(t, e, i);
  };

  e.prototype.hideBanner = function (t) {
    this.vivoBanner.hideBanner(t);
  };

  e.prototype.forbiddenBanner = function (t) {
    this.vivoBanner.forbiddenBanner(t);
  };

  e.prototype.showGamePortal = function (t, e, i) {
    this.vivoGamePortal.showGamePortal(t, e, i);
  };

  e.prototype.hideGamePortal = function (t, e) {
    this.vivoGamePortal.hideGamePortal(t, e);
  };

  e.prototype.showCustomAd = function (t, e, i, o, n) {
    if ("" !== $aDConfig.ADConfig.vivo.customer_ad_ids[t]) {
      if (!this.customeAds[t]) {
        return console.error("showCustomAd index ", t, "为空");
      }

      if (e && e.isBanner) {
        this.customeAds[t].hideAd(!0);
      }

      this.customeAds[t].showCustomAd(e, i, o, n);
    }
  };

  e.prototype.forbiddenCustomAd = function (t, e) {
    if ("" !== $aDConfig.ADConfig.vivo.customer_ad_ids[t]) {
      return this.customeAds[t] ? void this.customeAds[t].forbidderAd(e) : console.error("forbiddenCustomAd index ", t, "为空");
    }
  };

  e.prototype.hideCustomAd = function (t, e) {
    if ("" !== $aDConfig.ADConfig.vivo.customer_ad_ids[t]) {
      return this.customeAds[t] ? void this.customeAds[t].hideAd(e) : console.error("hideCustomAd index ", t, "为空");
    }
  };

  e.prototype.hasShortcutInstalled = function (t) {
    this.vivoAddDesktop.hasShortcutInstalled(t);
  };

  e.prototype.addDesktop = function (t) {
    this.vivoAddDesktop.addDesktop(t);
  };

  return e;
}($generalAd.GeneralAd);

exports.VIVOAd = p;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXFZJVk9BZC5qcyJdLCJuYW1lcyI6WyJvIiwiZXhwb3J0cyIsIlZJVk9BZCIsIiRhRENvbmZpZyIsInJlcXVpcmUiLCIkZ2VuZXJhbEFkIiwiJHZJVk9BZGREZXNrdG9wIiwiJHZJVk9CYW5uZXIiLCIkdklWT0N1c3RvbSIsIiR2SVZPR2FtZVBvcnRhbCIsIiR2SVZPUmV3YXJkZWRWaWRlbyIsInAiLCJ0IiwiZSIsImNhbGwiLCJ2aXZvUmV3YXJkIiwidml2b0Jhbm5lciIsInZpdm9HYW1lUG9ydGFsIiwiY3VzdG9tZUFkcyIsInZpdm9BZGREZXNrdG9wIiwiVklWT1Jld2FyZGVkVmlkZW8iLCJpbml0QWQiLCJBRENvbmZpZyIsInZpdm8iLCJyZXdhcmRlZF92aWRlb19pZCIsIlZJVk9CYW5uZXIiLCJiYW5uZXJfaWQiLCJnYW1lUG9ydGFsX2lkIiwiaSIsImN1c3RvbWVyX2FkX2lkcyIsImxlbmd0aCIsIl9fZXh0ZW5kcyIsInByb3RvdHlwZSIsInNob3dSZXdhcmRlZFZpZGVvIiwic2hvd0Jhbm5lciIsImhpZGVCYW5uZXIiLCJmb3JiaWRkZW5CYW5uZXIiLCJzaG93R2FtZVBvcnRhbCIsImhpZGVHYW1lUG9ydGFsIiwic2hvd0N1c3RvbUFkIiwibiIsImNvbnNvbGUiLCJlcnJvciIsImlzQmFubmVyIiwiaGlkZUFkIiwiZm9yYmlkZGVuQ3VzdG9tQWQiLCJmb3JiaWRkZXJBZCIsImhpZGVDdXN0b21BZCIsImhhc1Nob3J0Y3V0SW5zdGFsbGVkIiwiYWRkRGVza3RvcCIsIkdlbmVyYWxBZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxDQUFKO0FBQ0FDLE9BQU8sQ0FBQ0MsTUFBUixHQUFpQixLQUFLLENBQXRCOztBQUNBLElBQUlDLFNBQVMsR0FBR0MsT0FBTyxDQUFDLFlBQUQsQ0FBdkI7O0FBQ0EsSUFBSUMsVUFBVSxHQUFHRCxPQUFPLENBQUMsYUFBRCxDQUF4Qjs7QUFDQSxJQUFJRSxlQUFlLEdBQUdGLE9BQU8sQ0FBQyxrQkFBRCxDQUE3Qjs7QUFDQSxJQUFJRyxXQUFXLEdBQUdILE9BQU8sQ0FBQyxjQUFELENBQXpCOztBQUNBLElBQUlJLFdBQVcsR0FBR0osT0FBTyxDQUFDLGNBQUQsQ0FBekI7O0FBQ0EsSUFBSUssZUFBZSxHQUFHTCxPQUFPLENBQUMsa0JBQUQsQ0FBN0I7O0FBQ0EsSUFBSU0sa0JBQWtCLEdBQUdOLE9BQU8sQ0FBQyxxQkFBRCxDQUFoQzs7QUFDQSxJQUFJTyxDQUFDLEdBQUksVUFBVUMsQ0FBVixFQUFhO0VBQ2xCLFNBQVNDLENBQVQsR0FBYTtJQUNULElBQUlBLENBQUMsR0FBR0QsQ0FBQyxDQUFDRSxJQUFGLENBQU8sSUFBUCxLQUFnQixJQUF4QjtJQUNBRCxDQUFDLENBQUNFLFVBQUYsR0FBZSxJQUFmO0lBQ0FGLENBQUMsQ0FBQ0csVUFBRixHQUFlLElBQWY7SUFDQUgsQ0FBQyxDQUFDSSxjQUFGLEdBQW1CLElBQW5CO0lBQ0FKLENBQUMsQ0FBQ0ssVUFBRixHQUFlLEVBQWY7SUFDQUwsQ0FBQyxDQUFDTSxjQUFGLEdBQW1CLElBQW5CO0lBQ0FOLENBQUMsQ0FBQ0UsVUFBRixHQUFlLElBQUlMLGtCQUFrQixDQUFDVSxpQkFBdkIsRUFBZjtJQUNBUCxDQUFDLENBQUNFLFVBQUYsQ0FBYU0sTUFBYixDQUFvQmxCLFNBQVMsQ0FBQ21CLFFBQVYsQ0FBbUJDLElBQW5CLENBQXdCQyxpQkFBNUM7SUFDQVgsQ0FBQyxDQUFDRyxVQUFGLEdBQWUsSUFBSVQsV0FBVyxDQUFDa0IsVUFBaEIsRUFBZjtJQUNBWixDQUFDLENBQUNHLFVBQUYsQ0FBYUssTUFBYixDQUFvQmxCLFNBQVMsQ0FBQ21CLFFBQVYsQ0FBbUJDLElBQW5CLENBQXdCRyxTQUE1QztJQUNBYixDQUFDLENBQUNJLGNBQUYsR0FBbUIsSUFBSVIsZUFBZSxXQUFuQixFQUFuQjtJQUNBSSxDQUFDLENBQUNJLGNBQUYsQ0FBaUJJLE1BQWpCLENBQXdCbEIsU0FBUyxDQUFDbUIsUUFBVixDQUFtQkMsSUFBbkIsQ0FBd0JJLGFBQWhEOztJQUNBLEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR3pCLFNBQVMsQ0FBQ21CLFFBQVYsQ0FBbUJDLElBQW5CLENBQXdCTSxlQUF4QixDQUF3Q0MsTUFBNUQsRUFBb0VGLENBQUMsRUFBckUsRUFBeUU7TUFDckVmLENBQUMsQ0FBQ0ssVUFBRixDQUFhVSxDQUFiLElBQWtCLElBQUlwQixXQUFXLFdBQWYsRUFBbEI7TUFDQUssQ0FBQyxDQUFDSyxVQUFGLENBQWFVLENBQWIsRUFBZ0JQLE1BQWhCLENBQXVCbEIsU0FBUyxDQUFDbUIsUUFBVixDQUFtQkMsSUFBbkIsQ0FBd0JNLGVBQXhCLENBQXdDRCxDQUF4QyxDQUF2QjtJQUNIOztJQUNEZixDQUFDLENBQUNNLGNBQUYsR0FBbUIsSUFBSWIsZUFBZSxXQUFuQixFQUFuQjtJQUNBLE9BQU9PLENBQVA7RUFDSDs7RUFDRGtCLFNBQVMsQ0FBQ2xCLENBQUQsRUFBSUQsQ0FBSixDQUFUOztFQUNBQyxDQUFDLENBQUNtQixTQUFGLENBQVlDLGlCQUFaLEdBQWdDLFVBQVVyQixDQUFWLEVBQWFDLENBQWIsRUFBZ0JlLENBQWhCLEVBQW1CO0lBQy9DLEtBQUtiLFVBQUwsQ0FBZ0JrQixpQkFBaEIsQ0FBa0NyQixDQUFsQyxFQUFxQ0MsQ0FBckMsRUFBd0NlLENBQXhDO0VBQ0gsQ0FGRDs7RUFHQWYsQ0FBQyxDQUFDbUIsU0FBRixDQUFZRSxVQUFaLEdBQXlCLFVBQVV0QixDQUFWLEVBQWFDLENBQWIsRUFBZ0JlLENBQWhCLEVBQW1CO0lBQ3hDLEtBQUtaLFVBQUwsQ0FBZ0JrQixVQUFoQixDQUEyQnRCLENBQTNCLEVBQThCQyxDQUE5QixFQUFpQ2UsQ0FBakM7RUFDSCxDQUZEOztFQUdBZixDQUFDLENBQUNtQixTQUFGLENBQVlHLFVBQVosR0FBeUIsVUFBVXZCLENBQVYsRUFBYTtJQUNsQyxLQUFLSSxVQUFMLENBQWdCbUIsVUFBaEIsQ0FBMkJ2QixDQUEzQjtFQUNILENBRkQ7O0VBR0FDLENBQUMsQ0FBQ21CLFNBQUYsQ0FBWUksZUFBWixHQUE4QixVQUFVeEIsQ0FBVixFQUFhO0lBQ3ZDLEtBQUtJLFVBQUwsQ0FBZ0JvQixlQUFoQixDQUFnQ3hCLENBQWhDO0VBQ0gsQ0FGRDs7RUFHQUMsQ0FBQyxDQUFDbUIsU0FBRixDQUFZSyxjQUFaLEdBQTZCLFVBQVV6QixDQUFWLEVBQWFDLENBQWIsRUFBZ0JlLENBQWhCLEVBQW1CO0lBQzVDLEtBQUtYLGNBQUwsQ0FBb0JvQixjQUFwQixDQUFtQ3pCLENBQW5DLEVBQXNDQyxDQUF0QyxFQUF5Q2UsQ0FBekM7RUFDSCxDQUZEOztFQUdBZixDQUFDLENBQUNtQixTQUFGLENBQVlNLGNBQVosR0FBNkIsVUFBVTFCLENBQVYsRUFBYUMsQ0FBYixFQUFnQjtJQUN6QyxLQUFLSSxjQUFMLENBQW9CcUIsY0FBcEIsQ0FBbUMxQixDQUFuQyxFQUFzQ0MsQ0FBdEM7RUFDSCxDQUZEOztFQUdBQSxDQUFDLENBQUNtQixTQUFGLENBQVlPLFlBQVosR0FBMkIsVUFBVTNCLENBQVYsRUFBYUMsQ0FBYixFQUFnQmUsQ0FBaEIsRUFBbUI1QixDQUFuQixFQUFzQndDLENBQXRCLEVBQXlCO0lBQ2hELElBQUksT0FBT3JDLFNBQVMsQ0FBQ21CLFFBQVYsQ0FBbUJDLElBQW5CLENBQXdCTSxlQUF4QixDQUF3Q2pCLENBQXhDLENBQVgsRUFBdUQ7TUFDbkQsSUFBSSxDQUFDLEtBQUtNLFVBQUwsQ0FBZ0JOLENBQWhCLENBQUwsRUFBeUI7UUFDckIsT0FBTzZCLE9BQU8sQ0FBQ0MsS0FBUixDQUFjLHFCQUFkLEVBQXFDOUIsQ0FBckMsRUFBd0MsSUFBeEMsQ0FBUDtNQUNIOztNQUNELElBQUlDLENBQUMsSUFBSUEsQ0FBQyxDQUFDOEIsUUFBWCxFQUFxQjtRQUNqQixLQUFLekIsVUFBTCxDQUFnQk4sQ0FBaEIsRUFBbUJnQyxNQUFuQixDQUEwQixDQUFDLENBQTNCO01BQ0g7O01BQ0QsS0FBSzFCLFVBQUwsQ0FBZ0JOLENBQWhCLEVBQW1CMkIsWUFBbkIsQ0FBZ0MxQixDQUFoQyxFQUFtQ2UsQ0FBbkMsRUFBc0M1QixDQUF0QyxFQUF5Q3dDLENBQXpDO0lBQ0g7RUFDSixDQVZEOztFQVdBM0IsQ0FBQyxDQUFDbUIsU0FBRixDQUFZYSxpQkFBWixHQUFnQyxVQUFVakMsQ0FBVixFQUFhQyxDQUFiLEVBQWdCO0lBQzVDLElBQUksT0FBT1YsU0FBUyxDQUFDbUIsUUFBVixDQUFtQkMsSUFBbkIsQ0FBd0JNLGVBQXhCLENBQXdDakIsQ0FBeEMsQ0FBWCxFQUF1RDtNQUNuRCxPQUFPLEtBQUtNLFVBQUwsQ0FBZ0JOLENBQWhCLElBQ0QsS0FBSyxLQUFLTSxVQUFMLENBQWdCTixDQUFoQixFQUFtQmtDLFdBQW5CLENBQStCakMsQ0FBL0IsQ0FESixHQUVENEIsT0FBTyxDQUFDQyxLQUFSLENBQWMsMEJBQWQsRUFBMEM5QixDQUExQyxFQUE2QyxJQUE3QyxDQUZOO0lBR0g7RUFDSixDQU5EOztFQU9BQyxDQUFDLENBQUNtQixTQUFGLENBQVllLFlBQVosR0FBMkIsVUFBVW5DLENBQVYsRUFBYUMsQ0FBYixFQUFnQjtJQUN2QyxJQUFJLE9BQU9WLFNBQVMsQ0FBQ21CLFFBQVYsQ0FBbUJDLElBQW5CLENBQXdCTSxlQUF4QixDQUF3Q2pCLENBQXhDLENBQVgsRUFBdUQ7TUFDbkQsT0FBTyxLQUFLTSxVQUFMLENBQWdCTixDQUFoQixJQUNELEtBQUssS0FBS00sVUFBTCxDQUFnQk4sQ0FBaEIsRUFBbUJnQyxNQUFuQixDQUEwQi9CLENBQTFCLENBREosR0FFRDRCLE9BQU8sQ0FBQ0MsS0FBUixDQUFjLHFCQUFkLEVBQXFDOUIsQ0FBckMsRUFBd0MsSUFBeEMsQ0FGTjtJQUdIO0VBQ0osQ0FORDs7RUFPQUMsQ0FBQyxDQUFDbUIsU0FBRixDQUFZZ0Isb0JBQVosR0FBbUMsVUFBVXBDLENBQVYsRUFBYTtJQUM1QyxLQUFLTyxjQUFMLENBQW9CNkIsb0JBQXBCLENBQXlDcEMsQ0FBekM7RUFDSCxDQUZEOztFQUdBQyxDQUFDLENBQUNtQixTQUFGLENBQVlpQixVQUFaLEdBQXlCLFVBQVVyQyxDQUFWLEVBQWE7SUFDbEMsS0FBS08sY0FBTCxDQUFvQjhCLFVBQXBCLENBQStCckMsQ0FBL0I7RUFDSCxDQUZEOztFQUdBLE9BQU9DLENBQVA7QUFDSCxDQXhFTyxDQXdFTFIsVUFBVSxDQUFDNkMsU0F4RU4sQ0FBUjs7QUF5RUFqRCxPQUFPLENBQUNDLE1BQVIsR0FBaUJTLENBQWpCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbztcclxuZXhwb3J0cy5WSVZPQWQgPSB2b2lkIDA7XHJcbnZhciAkYURDb25maWcgPSByZXF1aXJlKFwiLi9BRENvbmZpZ1wiKTtcclxudmFyICRnZW5lcmFsQWQgPSByZXF1aXJlKFwiLi9HZW5lcmFsQWRcIik7XHJcbnZhciAkdklWT0FkZERlc2t0b3AgPSByZXF1aXJlKFwiLi9WSVZPQWRkRGVza3RvcFwiKTtcclxudmFyICR2SVZPQmFubmVyID0gcmVxdWlyZShcIi4vVklWT0Jhbm5lclwiKTtcclxudmFyICR2SVZPQ3VzdG9tID0gcmVxdWlyZShcIi4vVklWT0N1c3RvbVwiKTtcclxudmFyICR2SVZPR2FtZVBvcnRhbCA9IHJlcXVpcmUoXCIuL1ZJVk9HYW1lUG9ydGFsXCIpO1xyXG52YXIgJHZJVk9SZXdhcmRlZFZpZGVvID0gcmVxdWlyZShcIi4vVklWT1Jld2FyZGVkVmlkZW9cIik7XHJcbnZhciBwID0gKGZ1bmN0aW9uICh0KSB7XHJcbiAgICBmdW5jdGlvbiBlKCkge1xyXG4gICAgICAgIHZhciBlID0gdC5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgZS52aXZvUmV3YXJkID0gbnVsbDtcclxuICAgICAgICBlLnZpdm9CYW5uZXIgPSBudWxsO1xyXG4gICAgICAgIGUudml2b0dhbWVQb3J0YWwgPSBudWxsO1xyXG4gICAgICAgIGUuY3VzdG9tZUFkcyA9IFtdO1xyXG4gICAgICAgIGUudml2b0FkZERlc2t0b3AgPSBudWxsO1xyXG4gICAgICAgIGUudml2b1Jld2FyZCA9IG5ldyAkdklWT1Jld2FyZGVkVmlkZW8uVklWT1Jld2FyZGVkVmlkZW8oKTtcclxuICAgICAgICBlLnZpdm9SZXdhcmQuaW5pdEFkKCRhRENvbmZpZy5BRENvbmZpZy52aXZvLnJld2FyZGVkX3ZpZGVvX2lkKTtcclxuICAgICAgICBlLnZpdm9CYW5uZXIgPSBuZXcgJHZJVk9CYW5uZXIuVklWT0Jhbm5lcigpO1xyXG4gICAgICAgIGUudml2b0Jhbm5lci5pbml0QWQoJGFEQ29uZmlnLkFEQ29uZmlnLnZpdm8uYmFubmVyX2lkKTtcclxuICAgICAgICBlLnZpdm9HYW1lUG9ydGFsID0gbmV3ICR2SVZPR2FtZVBvcnRhbC5kZWZhdWx0KCk7XHJcbiAgICAgICAgZS52aXZvR2FtZVBvcnRhbC5pbml0QWQoJGFEQ29uZmlnLkFEQ29uZmlnLnZpdm8uZ2FtZVBvcnRhbF9pZCk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkYURDb25maWcuQURDb25maWcudml2by5jdXN0b21lcl9hZF9pZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZS5jdXN0b21lQWRzW2ldID0gbmV3ICR2SVZPQ3VzdG9tLmRlZmF1bHQoKTtcclxuICAgICAgICAgICAgZS5jdXN0b21lQWRzW2ldLmluaXRBZCgkYURDb25maWcuQURDb25maWcudml2by5jdXN0b21lcl9hZF9pZHNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlLnZpdm9BZGREZXNrdG9wID0gbmV3ICR2SVZPQWRkRGVza3RvcC5kZWZhdWx0KCk7XHJcbiAgICAgICAgcmV0dXJuIGU7XHJcbiAgICB9XHJcbiAgICBfX2V4dGVuZHMoZSwgdCk7XHJcbiAgICBlLnByb3RvdHlwZS5zaG93UmV3YXJkZWRWaWRlbyA9IGZ1bmN0aW9uICh0LCBlLCBpKSB7XHJcbiAgICAgICAgdGhpcy52aXZvUmV3YXJkLnNob3dSZXdhcmRlZFZpZGVvKHQsIGUsIGkpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLnNob3dCYW5uZXIgPSBmdW5jdGlvbiAodCwgZSwgaSkge1xyXG4gICAgICAgIHRoaXMudml2b0Jhbm5lci5zaG93QmFubmVyKHQsIGUsIGkpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmhpZGVCYW5uZXIgPSBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIHRoaXMudml2b0Jhbm5lci5oaWRlQmFubmVyKHQpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmZvcmJpZGRlbkJhbm5lciA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdGhpcy52aXZvQmFubmVyLmZvcmJpZGRlbkJhbm5lcih0KTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5zaG93R2FtZVBvcnRhbCA9IGZ1bmN0aW9uICh0LCBlLCBpKSB7XHJcbiAgICAgICAgdGhpcy52aXZvR2FtZVBvcnRhbC5zaG93R2FtZVBvcnRhbCh0LCBlLCBpKTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5oaWRlR2FtZVBvcnRhbCA9IGZ1bmN0aW9uICh0LCBlKSB7XHJcbiAgICAgICAgdGhpcy52aXZvR2FtZVBvcnRhbC5oaWRlR2FtZVBvcnRhbCh0LCBlKTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5zaG93Q3VzdG9tQWQgPSBmdW5jdGlvbiAodCwgZSwgaSwgbywgbikge1xyXG4gICAgICAgIGlmIChcIlwiICE9PSAkYURDb25maWcuQURDb25maWcudml2by5jdXN0b21lcl9hZF9pZHNbdF0pIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmN1c3RvbWVBZHNbdF0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb25zb2xlLmVycm9yKFwic2hvd0N1c3RvbUFkIGluZGV4IFwiLCB0LCBcIuS4uuepulwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZSAmJiBlLmlzQmFubmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWVBZHNbdF0uaGlkZUFkKCEwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmN1c3RvbWVBZHNbdF0uc2hvd0N1c3RvbUFkKGUsIGksIG8sIG4pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5mb3JiaWRkZW5DdXN0b21BZCA9IGZ1bmN0aW9uICh0LCBlKSB7XHJcbiAgICAgICAgaWYgKFwiXCIgIT09ICRhRENvbmZpZy5BRENvbmZpZy52aXZvLmN1c3RvbWVyX2FkX2lkc1t0XSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXN0b21lQWRzW3RdXHJcbiAgICAgICAgICAgICAgICA/IHZvaWQgdGhpcy5jdXN0b21lQWRzW3RdLmZvcmJpZGRlckFkKGUpXHJcbiAgICAgICAgICAgICAgICA6IGNvbnNvbGUuZXJyb3IoXCJmb3JiaWRkZW5DdXN0b21BZCBpbmRleCBcIiwgdCwgXCLkuLrnqbpcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmhpZGVDdXN0b21BZCA9IGZ1bmN0aW9uICh0LCBlKSB7XHJcbiAgICAgICAgaWYgKFwiXCIgIT09ICRhRENvbmZpZy5BRENvbmZpZy52aXZvLmN1c3RvbWVyX2FkX2lkc1t0XSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXN0b21lQWRzW3RdXHJcbiAgICAgICAgICAgICAgICA/IHZvaWQgdGhpcy5jdXN0b21lQWRzW3RdLmhpZGVBZChlKVxyXG4gICAgICAgICAgICAgICAgOiBjb25zb2xlLmVycm9yKFwiaGlkZUN1c3RvbUFkIGluZGV4IFwiLCB0LCBcIuS4uuepulwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuaGFzU2hvcnRjdXRJbnN0YWxsZWQgPSBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIHRoaXMudml2b0FkZERlc2t0b3AuaGFzU2hvcnRjdXRJbnN0YWxsZWQodCk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuYWRkRGVza3RvcCA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdGhpcy52aXZvQWRkRGVza3RvcC5hZGREZXNrdG9wKHQpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBlO1xyXG59KSgkZ2VuZXJhbEFkLkdlbmVyYWxBZCk7XHJcbmV4cG9ydHMuVklWT0FkID0gcDtcclxuIl19