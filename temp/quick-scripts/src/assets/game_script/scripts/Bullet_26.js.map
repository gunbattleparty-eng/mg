{"version":3,"sources":["assets\\game_script\\scripts\\Bullet_26.js"],"names":["o","$object","require","$assetsLoader","$assetsMap","$resUtil","$countDownUtil","$gameContext","$gameSkillInfo","$enemyStatus","$baseBullet","m","cc","_decorator","y","ccclass","g","property","t","e","apply","arguments","buttleType","BulletType","oil_burn_area","leftTime","attackEnemy","Set","__extends","prototype","initButtle","i","call","skillParam","oilBurnAreaRange","Skill4Param","FINAL","setScale","v3","atk","oilBurnAreaAtk","oilBurnAreaTime","node","children","active","oilSkin","onTrigger","isUse","Trigger","enter","stay","object","oilNoRecover","has","hasDebuff","EnemyDebuffType","FORBID_RECOVER","add","sufferDebuff","type","timeLeft","value","CountDownUtil","time","getLastAtkTime","oilBurnAreaInterval","ins","gameRatio","setLastAtkTime","oilLiftAtkAdd","sufferAtk","id","skillId","skillSpecialitys","bulletBuff","BulletBuff","atk_life","oilBurnAreaSlow","SLOW","exit","removeDebuff","updateFrame","createBoom","forEach","clear","removeSelf","oilBurnAreaBoomRange","getButtlePool","oil_burn_area_boom","instance","getRes","BundleNames","Game","AssetsMap","GameBundles","prefabs","assetsList","Bullet_27","ResUtil","instantiate","lowBulletLayer","parent","getComponent","setPosition","getPosition","insert","setAnimation","__decorate","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $object = require(\"./Object\");\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $countDownUtil = require(\"./CountDownUtil\");\r\nvar $gameContext = require(\"./GameContext\");\r\nvar $gameSkillInfo = require(\"./GameSkillInfo\");\r\nvar $enemyStatus = require(\"./EnemyStatus\");\r\nvar $baseBullet = require(\"./BaseBullet\");\r\nvar m = cc._decorator;\r\nvar y = m.ccclass;\r\nvar g =\r\n    (m.property,\r\n    (function (t) {\r\n        function e() {\r\n            var e = (null !== t && t.apply(this, arguments)) || this;\r\n            e.buttleType = $baseBullet.BulletType.oil_burn_area;\r\n            e.leftTime = 0;\r\n            e.attackEnemy = new Set();\r\n            return e;\r\n        }\r\n        __extends(e, t);\r\n        e.prototype.initButtle = function (e, i) {\r\n            t.prototype.initButtle.call(this, e, i);\r\n            var o = this.skillParam.oilBurnAreaRange[$gameSkillInfo.Skill4Param.FINAL];\r\n            this.setScale(cc.v3(o, o));\r\n            this.atk = this.skillParam.oilBurnAreaAtk[$gameSkillInfo.Skill4Param.FINAL];\r\n            this.leftTime = this.skillParam.oilBurnAreaTime;\r\n            this.node.children[0].children[0].active = 1 === this.skillParam.oilSkin;\r\n        };\r\n        e.prototype.onTrigger = function (t, e) {\r\n            if (!this.isUse) {\r\n                if (e == $object.Trigger.enter || e == $object.Trigger.stay) {\r\n                    var i = t.object;\r\n                    if (\r\n                        !(\r\n                            !this.skillParam.oilNoRecover ||\r\n                            (this.attackEnemy.has(i) && i.hasDebuff($enemyStatus.EnemyDebuffType.FORBID_RECOVER))\r\n                        )\r\n                    ) {\r\n                        this.attackEnemy.add(i);\r\n                        i.sufferDebuff({\r\n                            type: $enemyStatus.EnemyDebuffType.FORBID_RECOVER,\r\n                            timeLeft: -1,\r\n                            value: 0\r\n                        });\r\n                    }\r\n                    if (\r\n                        $countDownUtil.CountDownUtil.time - i.getLastAtkTime(6) <=\r\n                        this.skillParam.oilBurnAreaInterval / $gameContext.default.ins.gameRatio\r\n                    ) {\r\n                        return;\r\n                    }\r\n                    i.setLastAtkTime(6, $countDownUtil.CountDownUtil.time);\r\n                    this.skillParam.oilLiftAtkAdd > 0\r\n                        ? i.sufferAtk({\r\n                              id: this.skillId,\r\n                              skillSpecialitys: this.skillSpecialitys,\r\n                              atk: this.atk,\r\n                              bulletBuff: $baseBullet.BulletBuff.atk_life,\r\n                              value: this.skillParam.oilLiftAtkAdd\r\n                          })\r\n                        : i.sufferAtk({\r\n                              id: this.skillId,\r\n                              skillSpecialitys: this.skillSpecialitys,\r\n                              atk: this.atk\r\n                          });\r\n                    if (this.skillParam.oilBurnAreaSlow < 0) {\r\n                        i.sufferDebuff({\r\n                            type: $enemyStatus.EnemyDebuffType.SLOW,\r\n                            timeLeft: this.skillParam.oilBurnAreaInterval + 0.1,\r\n                            value: this.skillParam.oilBurnAreaSlow\r\n                        });\r\n                    }\r\n                } else {\r\n                    if (e == $object.Trigger.exit) {\r\n                        i = t.object;\r\n                        this.attackEnemy.delete(i);\r\n                        i.removeDebuff($enemyStatus.EnemyDebuffType.FORBID_RECOVER);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        e.prototype.updateFrame = function (t) {\r\n            if (!this.isUse) {\r\n                this.leftTime -= t;\r\n                if (this.leftTime <= 0) {\r\n                    this.isUse = !0;\r\n                    this.createBoom();\r\n                    this.attackEnemy.forEach(function (t) {\r\n                        t.removeDebuff($enemyStatus.EnemyDebuffType.FORBID_RECOVER);\r\n                    });\r\n                    this.attackEnemy.clear();\r\n                    this.removeSelf();\r\n                }\r\n            }\r\n        };\r\n        e.prototype.createBoom = function () {\r\n            if (!(this.skillParam.oilBurnAreaBoomRange <= 0)) {\r\n                var t = $gameContext.default.ins.getButtlePool($baseBullet.BulletType.oil_burn_area_boom);\r\n                if (!t) {\r\n                    var e = $assetsLoader.default.instance.getRes(\r\n                        $assetsMap.BundleNames.Game,\r\n                        $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.Bullet_27\r\n                    );\r\n                    (t = $resUtil.ResUtil.instantiate(e, $gameContext.default.ins.lowBulletLayer.parent).getComponent(\r\n                        $baseBullet.default\r\n                    )).skillSpecialitys = this.skillSpecialitys;\r\n                }\r\n                t.setPosition(this.getPosition());\r\n                t.initButtle(null, this.skillId);\r\n                t.insert($gameContext.default.ins.lowBulletLayer);\r\n                t.setAnimation(null);\r\n            }\r\n        };\r\n        return __decorate([y], e);\r\n    })($baseBullet.default));\r\nexports.default = g;\r\n"]}