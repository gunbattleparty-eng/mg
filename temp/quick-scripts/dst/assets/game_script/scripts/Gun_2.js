
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/Gun_2.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'c5915yB3RlGm6V57mDBcQAt', 'Gun_2');
// game_script/scripts/Gun_2.js

"use strict";

var o;

var $assetsLoader = require("./AssetsLoader");

var $assetsMap = require("./AssetsMap");

var $resUtil = require("./ResUtil");

var $eventManager = require("./EventManager");

var $remoteAudio = require("./RemoteAudio");

var $seedUtil = require("./SeedUtil");

var $configContext = require("./ConfigContext");

var $globalParam = require("./GlobalParam");

var $localEventName = require("./LocalEventName");

var $roleContext = require("./RoleContext");

var $baseBullet = require("./BaseBullet");

var $gameContext = require("./GameContext");

var $gameGemInfo = require("./GameGemInfo");

var $gameSkillInfo = require("./GameSkillInfo");

var $baseGun = require("./BaseGun");

var v = cc.Vec3.ZERO;

var b = function (t) {
  function e(e) {
    var i = t.call(this, e) || this;
    i.skin2AtkLeftCd = 0;
    i.skin2AtkCurrCount = 0;
    i.skillId = 23;
    i.skillParam = $gameContext["default"].ins.skillInfo.getSkillById(i.skillId);
    return i;
  }

  __extends(e, t);

  e.prototype.updateF = function (e) {
    t.prototype.updateF.call(this, e);

    if (!(this.isAttacking || $globalParam["default"].isGamePuase)) {
      this.timeLeft -= e;

      if (2 === $roleContext["default"].ins.currSkinInfo.skin && this.skin2AtkCurrCount >= $gameContext["default"].ins.skillInfo.skinAtkTargetCount) {
        this.skin2AtkLeftCd -= e;

        if (this.skin2AtkLeftCd <= 0) {
          this.sendSkin2Bullet();
        }
      }

      this.timeLeft <= 0 ? (this.isAttacking = !0, this.timeLeft = this.skillParam.skillCD[$gameSkillInfo.Skill4Param.FINAL], $eventManager["default"].send($localEventName["default"].RENDER_SKILL_CD_INFO, 23, 0, -1), this.starGun() || (this.isAttacking = !1, this.timeLeft = 0)) : $eventManager["default"].send($localEventName["default"].RENDER_SKILL_CD_INFO, 23, this.timeLeft / this.skillParam.skillCD[$gameSkillInfo.Skill4Param.FINAL], -1);
    }
  };

  e.prototype.starGun = function () {
    var t = this;
    var e = $gameContext["default"].ins.getRangeRankEnemy(this.pointNode, this.skillParam.skillAtkRange[$gameSkillInfo.Skill4Param.FINAL]);

    if (!e) {
      return !1;
    }

    var i = e.node.position.subtract(this.pointNode.position).normalize();

    if ($gameGemInfo.GameGemInfo.ins.hasGem($gameGemInfo.GemType.AddSkill) && $seedUtil["default"].probability(100 * $gameGemInfo.GameGemInfo.ins.get1($gameGemInfo.GemType.AddSkill))) {
      var o = 150 / this.skillParam.thermobaricSpeed[$gameSkillInfo.Skill4Param.FINAL];

      for (var n = 0; n < 2; n++) {
        this.schedulesOnce(function () {
          $remoteAudio["default"].instance.playEffectMusic("firebullet");
          t.sendButtle(i);
        }, o * n);
      }
    } else {
      this.sendButtle(i);
    }

    this.isAttacking = !1;
    return !0;
  };

  e.prototype.sendButtle = function (t) {
    var e = this;
    this.skin2AtkCurrCount++;
    var i = $gameContext["default"].ins.getNearbyN2(this.pointNode, this.skillParam.thermobaricComboCount + 1);
    var o = 150 / this.skillParam.thermobaricSpeed[$gameSkillInfo.Skill4Param.FINAL];
    var n = 0;

    var s = function s(_s) {
      r.schedulesOnce(function () {
        if (0 !== _s) {
          t = i[_s].node.position.sub(e.pointNode.position).normalize();
        }

        e.createButtle(t);

        if (++n >= i.length + 1) {
          e.isAttacking = !1;
        }
      }, o * _s);
    };

    var r = this;

    for (var a = 0; a < i.length; a++) {
      s(a);
    }
  };

  e.prototype.createButtle = function (t) {
    var e = $gameContext["default"].ins.getButtlePool($baseBullet.BulletType.thermobaric_bullet);

    if (!e) {
      var i = $assetsLoader["default"].instance.getRes($assetsMap.BundleNames.Game, $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.Bullet_4);
      (e = $resUtil.ResUtil.instantiate(i, $gameContext["default"].ins.buttleLayer.parent).getComponent($baseBullet["default"])).skillSpecialitys = $configContext["default"].instance.basicSkillConfigMap.get(this.skillId).skill_tpye;
    }

    var o = $gameContext["default"].ins.buttleLayer.convertToNodeSpaceAR(this.pointNode.convertToWorldSpaceAR(cc.Vec3.ZERO));
    e.setPosition(o);
    e.initButtle(t, this.skillId);
    e.insert($gameContext["default"].ins.buttleLayer);
  };

  e.prototype.sendSkin2Bullet = function () {
    if (!$gameContext["default"].ins.getRangeRankEnemy(this.pointNode, this.skillParam.skillAtkRange[$gameSkillInfo.Skill4Param.FINAL])) {
      this.skin2AtkLeftCd = 2;
      return !1;
    }

    for (var t = 0; t < 3; t++) {
      var e = $gameContext["default"].ins.getButtlePool($baseBullet.BulletType.s_bullet_2);

      if (!e) {
        var i = $assetsLoader["default"].instance.getRes($assetsMap.BundleNames.Game, $assetsMap.AssetsMap.GameBundles.prefabs.assetsList.SBullet_2);
        e = $resUtil.ResUtil.instantiate(i, $gameContext["default"].ins.lowBulletLayer.parent).getComponent($baseBullet["default"]);
      }

      v.x = 200 * t - 200;
      v.y = -350;
      e.setPosition(v.clone());
      v.x = 0;
      v.y = 1;
      e.initButtle(v, this.skillId);
      e.insert($gameContext["default"].ins.lowBulletLayer);
    }

    this.skin2AtkCurrCount = 0;
    this.skin2AtkLeftCd = $gameContext["default"].ins.skillInfo.skinAtkCd;
  };

  return e;
}($baseGun["default"]);

exports["default"] = b;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXEd1bl8yLmpzIl0sIm5hbWVzIjpbIm8iLCIkYXNzZXRzTG9hZGVyIiwicmVxdWlyZSIsIiRhc3NldHNNYXAiLCIkcmVzVXRpbCIsIiRldmVudE1hbmFnZXIiLCIkcmVtb3RlQXVkaW8iLCIkc2VlZFV0aWwiLCIkY29uZmlnQ29udGV4dCIsIiRnbG9iYWxQYXJhbSIsIiRsb2NhbEV2ZW50TmFtZSIsIiRyb2xlQ29udGV4dCIsIiRiYXNlQnVsbGV0IiwiJGdhbWVDb250ZXh0IiwiJGdhbWVHZW1JbmZvIiwiJGdhbWVTa2lsbEluZm8iLCIkYmFzZUd1biIsInYiLCJjYyIsIlZlYzMiLCJaRVJPIiwiYiIsInQiLCJlIiwiaSIsImNhbGwiLCJza2luMkF0a0xlZnRDZCIsInNraW4yQXRrQ3VyckNvdW50Iiwic2tpbGxJZCIsInNraWxsUGFyYW0iLCJpbnMiLCJza2lsbEluZm8iLCJnZXRTa2lsbEJ5SWQiLCJfX2V4dGVuZHMiLCJwcm90b3R5cGUiLCJ1cGRhdGVGIiwiaXNBdHRhY2tpbmciLCJpc0dhbWVQdWFzZSIsInRpbWVMZWZ0IiwiY3VyclNraW5JbmZvIiwic2tpbiIsInNraW5BdGtUYXJnZXRDb3VudCIsInNlbmRTa2luMkJ1bGxldCIsInNraWxsQ0QiLCJTa2lsbDRQYXJhbSIsIkZJTkFMIiwic2VuZCIsIlJFTkRFUl9TS0lMTF9DRF9JTkZPIiwic3Rhckd1biIsImdldFJhbmdlUmFua0VuZW15IiwicG9pbnROb2RlIiwic2tpbGxBdGtSYW5nZSIsIm5vZGUiLCJwb3NpdGlvbiIsInN1YnRyYWN0Iiwibm9ybWFsaXplIiwiR2FtZUdlbUluZm8iLCJoYXNHZW0iLCJHZW1UeXBlIiwiQWRkU2tpbGwiLCJwcm9iYWJpbGl0eSIsImdldDEiLCJ0aGVybW9iYXJpY1NwZWVkIiwibiIsInNjaGVkdWxlc09uY2UiLCJpbnN0YW5jZSIsInBsYXlFZmZlY3RNdXNpYyIsInNlbmRCdXR0bGUiLCJnZXROZWFyYnlOMiIsInRoZXJtb2JhcmljQ29tYm9Db3VudCIsInMiLCJyIiwic3ViIiwiY3JlYXRlQnV0dGxlIiwibGVuZ3RoIiwiYSIsImdldEJ1dHRsZVBvb2wiLCJCdWxsZXRUeXBlIiwidGhlcm1vYmFyaWNfYnVsbGV0IiwiZ2V0UmVzIiwiQnVuZGxlTmFtZXMiLCJHYW1lIiwiQXNzZXRzTWFwIiwiR2FtZUJ1bmRsZXMiLCJwcmVmYWJzIiwiYXNzZXRzTGlzdCIsIkJ1bGxldF80IiwiUmVzVXRpbCIsImluc3RhbnRpYXRlIiwiYnV0dGxlTGF5ZXIiLCJwYXJlbnQiLCJnZXRDb21wb25lbnQiLCJza2lsbFNwZWNpYWxpdHlzIiwiYmFzaWNTa2lsbENvbmZpZ01hcCIsImdldCIsInNraWxsX3RweWUiLCJjb252ZXJ0VG9Ob2RlU3BhY2VBUiIsImNvbnZlcnRUb1dvcmxkU3BhY2VBUiIsInNldFBvc2l0aW9uIiwiaW5pdEJ1dHRsZSIsImluc2VydCIsInNfYnVsbGV0XzIiLCJTQnVsbGV0XzIiLCJsb3dCdWxsZXRMYXllciIsIngiLCJ5IiwiY2xvbmUiLCJza2luQXRrQ2QiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUo7O0FBQ0EsSUFBSUMsYUFBYSxHQUFHQyxPQUFPLENBQUMsZ0JBQUQsQ0FBM0I7O0FBQ0EsSUFBSUMsVUFBVSxHQUFHRCxPQUFPLENBQUMsYUFBRCxDQUF4Qjs7QUFDQSxJQUFJRSxRQUFRLEdBQUdGLE9BQU8sQ0FBQyxXQUFELENBQXRCOztBQUNBLElBQUlHLGFBQWEsR0FBR0gsT0FBTyxDQUFDLGdCQUFELENBQTNCOztBQUNBLElBQUlJLFlBQVksR0FBR0osT0FBTyxDQUFDLGVBQUQsQ0FBMUI7O0FBQ0EsSUFBSUssU0FBUyxHQUFHTCxPQUFPLENBQUMsWUFBRCxDQUF2Qjs7QUFDQSxJQUFJTSxjQUFjLEdBQUdOLE9BQU8sQ0FBQyxpQkFBRCxDQUE1Qjs7QUFDQSxJQUFJTyxZQUFZLEdBQUdQLE9BQU8sQ0FBQyxlQUFELENBQTFCOztBQUNB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eUNDLFVBQXpDLENBQW9EaUIsU0FGaEQsQ0FBUjtRQUlBL0UsQ0FBQyxHQUFHbkIsUUFBUSxDQUFDbUYsT0FBVCxDQUFpQkMsV0FBakIsQ0FBNkJoRSxDQUE3QixFQUFnQ1gsWUFBWSxXQUFaLENBQXFCaUIsR0FBckIsQ0FBeUJ5RSxjQUF6QixDQUF3Q2IsTUFBeEUsRUFBZ0ZDLFlBQWhGLENBQ0EvRSxXQUFXLFdBRFgsQ0FBSjtNQUdIOztNQUNESyxDQUFDLENBQUN1RixDQUFGLEdBQU0sTUFBTWxGLENBQU4sR0FBVSxHQUFoQjtNQUNBTCxDQUFDLENBQUN3RixDQUFGLEdBQU0sQ0FBQyxHQUFQO01BQ0FsRixDQUFDLENBQUMyRSxXQUFGLENBQWNqRixDQUFDLENBQUN5RixLQUFGLEVBQWQ7TUFDQXpGLENBQUMsQ0FBQ3VGLENBQUYsR0FBTSxDQUFOO01BQ0F2RixDQUFDLENBQUN3RixDQUFGLEdBQU0sQ0FBTjtNQUNBbEYsQ0FBQyxDQUFDNEUsVUFBRixDQUFhbEYsQ0FBYixFQUFnQixLQUFLVyxPQUFyQjtNQUNBTCxDQUFDLENBQUM2RSxNQUFGLENBQVN2RixZQUFZLFdBQVosQ0FBcUJpQixHQUFyQixDQUF5QnlFLGNBQWxDO0lBQ0g7O0lBQ0QsS0FBSzVFLGlCQUFMLEdBQXlCLENBQXpCO0lBQ0EsS0FBS0QsY0FBTCxHQUFzQmIsWUFBWSxXQUFaLENBQXFCaUIsR0FBckIsQ0FBeUJDLFNBQXpCLENBQW1DNEUsU0FBekQ7RUFDSCxDQS9CRDs7RUFnQ0EsT0FBT3BGLENBQVA7QUFDSCxDQXhJTyxDQXdJTFAsUUFBUSxXQXhJSCxDQUFSOztBQXlJQTRGLE9BQU8sV0FBUCxHQUFrQnZGLENBQWxCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbztcclxudmFyICRhc3NldHNMb2FkZXIgPSByZXF1aXJlKFwiLi9Bc3NldHNMb2FkZXJcIik7XHJcbnZhciAkYXNzZXRzTWFwID0gcmVxdWlyZShcIi4vQXNzZXRzTWFwXCIpO1xyXG52YXIgJHJlc1V0aWwgPSByZXF1aXJlKFwiLi9SZXNVdGlsXCIpO1xyXG52YXIgJGV2ZW50TWFuYWdlciA9IHJlcXVpcmUoXCIuL0V2ZW50TWFuYWdlclwiKTtcclxudmFyICRyZW1vdGVBdWRpbyA9IHJlcXVpcmUoXCIuL1JlbW90ZUF1ZGlvXCIpO1xyXG52YXIgJHNlZWRVdGlsID0gcmVxdWlyZShcIi4vU2VlZFV0aWxcIik7XHJcbnZhciAkY29uZmlnQ29udGV4dCA9IHJlcXVpcmUoXCIuL0NvbmZpZ0NvbnRleHRcIik7XHJcbnZhciAkZ2xvYmFsUGFyYW0gPSByZXF1aXJlKFwiLi9HbG9iYWxQYXJhbVwiKTtcclxudmFyICRsb2NhbEV2ZW50TmFtZSA9IHJlcXVpcmUoXCIuL0xvY2FsRXZlbnROYW1lXCIpO1xyXG52YXIgJHJvbGVDb250ZXh0ID0gcmVxdWlyZShcIi4vUm9sZUNvbnRleHRcIik7XHJcbnZhciAkYmFzZUJ1bGxldCA9IHJlcXVpcmUoXCIuL0Jhc2VCdWxsZXRcIik7XHJcbnZhciAkZ2FtZUNvbnRleHQgPSByZXF1aXJlKFwiLi9HYW1lQ29udGV4dFwiKTtcclxudmFyICRnYW1lR2VtSW5mbyA9IHJlcXVpcmUoXCIuL0dhbWVHZW1JbmZvXCIpO1xyXG52YXIgJGdhbWVTa2lsbEluZm8gPSByZXF1aXJlKFwiLi9HYW1lU2tpbGxJbmZvXCIpO1xyXG52YXIgJGJhc2VHdW4gPSByZXF1aXJlKFwiLi9CYXNlR3VuXCIpO1xyXG52YXIgdiA9IGNjLlZlYzMuWkVSTztcclxudmFyIGIgPSAoZnVuY3Rpb24gKHQpIHtcclxuICAgIGZ1bmN0aW9uIGUoZSkge1xyXG4gICAgICAgIHZhciBpID0gdC5jYWxsKHRoaXMsIGUpIHx8IHRoaXM7XHJcbiAgICAgICAgaS5za2luMkF0a0xlZnRDZCA9IDA7XHJcbiAgICAgICAgaS5za2luMkF0a0N1cnJDb3VudCA9IDA7XHJcbiAgICAgICAgaS5za2lsbElkID0gMjM7XHJcbiAgICAgICAgaS5za2lsbFBhcmFtID0gJGdhbWVDb250ZXh0LmRlZmF1bHQuaW5zLnNraWxsSW5mby5nZXRTa2lsbEJ5SWQoaS5za2lsbElkKTtcclxuICAgICAgICByZXR1cm4gaTtcclxuICAgIH1cclxuICAgIF9fZXh0ZW5kcyhlLCB0KTtcclxuICAgIGUucHJvdG90eXBlLnVwZGF0ZUYgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHQucHJvdG90eXBlLnVwZGF0ZUYuY2FsbCh0aGlzLCBlKTtcclxuICAgICAgICBpZiAoISh0aGlzLmlzQXR0YWNraW5nIHx8ICRnbG9iYWxQYXJhbS5kZWZhdWx0LmlzR2FtZVB1YXNlKSkge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVMZWZ0IC09IGU7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIDIgPT09ICRyb2xlQ29udGV4dC5kZWZhdWx0Lmlucy5jdXJyU2tpbkluZm8uc2tpbiAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5za2luMkF0a0N1cnJDb3VudCA+PSAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuc2tpbGxJbmZvLnNraW5BdGtUYXJnZXRDb3VudFxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2tpbjJBdGtMZWZ0Q2QgLT0gZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNraW4yQXRrTGVmdENkIDw9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRTa2luMkJ1bGxldCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudGltZUxlZnQgPD0gMFxyXG4gICAgICAgICAgICAgICAgPyAoKHRoaXMuaXNBdHRhY2tpbmcgPSAhMCksXHJcbiAgICAgICAgICAgICAgICAgICh0aGlzLnRpbWVMZWZ0ID0gdGhpcy5za2lsbFBhcmFtLnNraWxsQ0RbJGdhbWVTa2lsbEluZm8uU2tpbGw0UGFyYW0uRklOQUxdKSxcclxuICAgICAgICAgICAgICAgICAgJGV2ZW50TWFuYWdlci5kZWZhdWx0LnNlbmQoJGxvY2FsRXZlbnROYW1lLmRlZmF1bHQuUkVOREVSX1NLSUxMX0NEX0lORk8sIDIzLCAwLCAtMSksXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuc3Rhckd1bigpIHx8ICgodGhpcy5pc0F0dGFja2luZyA9ICExKSwgKHRoaXMudGltZUxlZnQgPSAwKSkpXHJcbiAgICAgICAgICAgICAgICA6ICRldmVudE1hbmFnZXIuZGVmYXVsdC5zZW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgJGxvY2FsRXZlbnROYW1lLmRlZmF1bHQuUkVOREVSX1NLSUxMX0NEX0lORk8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAyMyxcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGltZUxlZnQgLyB0aGlzLnNraWxsUGFyYW0uc2tpbGxDRFskZ2FtZVNraWxsSW5mby5Ta2lsbDRQYXJhbS5GSU5BTF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAtMVxyXG4gICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5zdGFyR3VuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ID0gdGhpcztcclxuICAgICAgICB2YXIgZSA9ICRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5nZXRSYW5nZVJhbmtFbmVteShcclxuICAgICAgICAgICAgdGhpcy5wb2ludE5vZGUsXHJcbiAgICAgICAgICAgIHRoaXMuc2tpbGxQYXJhbS5za2lsbEF0a1JhbmdlWyRnYW1lU2tpbGxJbmZvLlNraWxsNFBhcmFtLkZJTkFMXVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgaWYgKCFlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGkgPSBlLm5vZGUucG9zaXRpb24uc3VidHJhY3QodGhpcy5wb2ludE5vZGUucG9zaXRpb24pLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgJGdhbWVHZW1JbmZvLkdhbWVHZW1JbmZvLmlucy5oYXNHZW0oJGdhbWVHZW1JbmZvLkdlbVR5cGUuQWRkU2tpbGwpICYmXHJcbiAgICAgICAgICAgICRzZWVkVXRpbC5kZWZhdWx0LnByb2JhYmlsaXR5KDEwMCAqICRnYW1lR2VtSW5mby5HYW1lR2VtSW5mby5pbnMuZ2V0MSgkZ2FtZUdlbUluZm8uR2VtVHlwZS5BZGRTa2lsbCkpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHZhciBvID0gMTUwIC8gdGhpcy5za2lsbFBhcmFtLnRoZXJtb2JhcmljU3BlZWRbJGdhbWVTa2lsbEluZm8uU2tpbGw0UGFyYW0uRklOQUxdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBuID0gMDsgbiA8IDI7IG4rKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZXNPbmNlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkcmVtb3RlQXVkaW8uZGVmYXVsdC5pbnN0YW5jZS5wbGF5RWZmZWN0TXVzaWMoXCJmaXJlYnVsbGV0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHQuc2VuZEJ1dHRsZShpKTtcclxuICAgICAgICAgICAgICAgIH0sIG8gKiBuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZEJ1dHRsZShpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pc0F0dGFja2luZyA9ICExO1xyXG4gICAgICAgIHJldHVybiAhMDtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5zZW5kQnV0dGxlID0gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICB2YXIgZSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5za2luMkF0a0N1cnJDb3VudCsrO1xyXG4gICAgICAgIHZhciBpID0gJGdhbWVDb250ZXh0LmRlZmF1bHQuaW5zLmdldE5lYXJieU4yKHRoaXMucG9pbnROb2RlLCB0aGlzLnNraWxsUGFyYW0udGhlcm1vYmFyaWNDb21ib0NvdW50ICsgMSk7XHJcbiAgICAgICAgdmFyIG8gPSAxNTAgLyB0aGlzLnNraWxsUGFyYW0udGhlcm1vYmFyaWNTcGVlZFskZ2FtZVNraWxsSW5mby5Ta2lsbDRQYXJhbS5GSU5BTF07XHJcbiAgICAgICAgdmFyIG4gPSAwO1xyXG4gICAgICAgIHZhciBzID0gZnVuY3Rpb24gKHMpIHtcclxuICAgICAgICAgICAgci5zY2hlZHVsZXNPbmNlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgwICE9PSBzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdCA9IGlbc10ubm9kZS5wb3NpdGlvbi5zdWIoZS5wb2ludE5vZGUucG9zaXRpb24pLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZS5jcmVhdGVCdXR0bGUodCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoKytuID49IGkubGVuZ3RoICsgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGUuaXNBdHRhY2tpbmcgPSAhMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgbyAqIHMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHIgPSB0aGlzO1xyXG4gICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgaS5sZW5ndGg7IGErKykge1xyXG4gICAgICAgICAgICBzKGEpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5jcmVhdGVCdXR0bGUgPSBmdW5jdGlvbiAodCkge1xyXG4gICAgICAgIHZhciBlID0gJGdhbWVDb250ZXh0LmRlZmF1bHQuaW5zLmdldEJ1dHRsZVBvb2woJGJhc2VCdWxsZXQuQnVsbGV0VHlwZS50aGVybW9iYXJpY19idWxsZXQpO1xyXG4gICAgICAgIGlmICghZSkge1xyXG4gICAgICAgICAgICB2YXIgaSA9ICRhc3NldHNMb2FkZXIuZGVmYXVsdC5pbnN0YW5jZS5nZXRSZXMoXHJcbiAgICAgICAgICAgICAgICAkYXNzZXRzTWFwLkJ1bmRsZU5hbWVzLkdhbWUsXHJcbiAgICAgICAgICAgICAgICAkYXNzZXRzTWFwLkFzc2V0c01hcC5HYW1lQnVuZGxlcy5wcmVmYWJzLmFzc2V0c0xpc3QuQnVsbGV0XzRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgKGUgPSAkcmVzVXRpbC5SZXNVdGlsLmluc3RhbnRpYXRlKGksICRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5idXR0bGVMYXllci5wYXJlbnQpLmdldENvbXBvbmVudChcclxuICAgICAgICAgICAgICAgICRiYXNlQnVsbGV0LmRlZmF1bHRcclxuICAgICAgICAgICAgKSkuc2tpbGxTcGVjaWFsaXR5cyA9ICRjb25maWdDb250ZXh0LmRlZmF1bHQuaW5zdGFuY2UuYmFzaWNTa2lsbENvbmZpZ01hcC5nZXQodGhpcy5za2lsbElkKS5za2lsbF90cHllO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbyA9ICRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5idXR0bGVMYXllci5jb252ZXJ0VG9Ob2RlU3BhY2VBUihcclxuICAgICAgICAgICAgdGhpcy5wb2ludE5vZGUuY29udmVydFRvV29ybGRTcGFjZUFSKGNjLlZlYzMuWkVSTylcclxuICAgICAgICApO1xyXG4gICAgICAgIGUuc2V0UG9zaXRpb24obyk7XHJcbiAgICAgICAgZS5pbml0QnV0dGxlKHQsIHRoaXMuc2tpbGxJZCk7XHJcbiAgICAgICAgZS5pbnNlcnQoJGdhbWVDb250ZXh0LmRlZmF1bHQuaW5zLmJ1dHRsZUxheWVyKTtcclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5zZW5kU2tpbjJCdWxsZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhJGdhbWVDb250ZXh0LmRlZmF1bHQuaW5zLmdldFJhbmdlUmFua0VuZW15KFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wb2ludE5vZGUsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNraWxsUGFyYW0uc2tpbGxBdGtSYW5nZVskZ2FtZVNraWxsSW5mby5Ta2lsbDRQYXJhbS5GSU5BTF1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLnNraW4yQXRrTGVmdENkID0gMjtcclxuICAgICAgICAgICAgcmV0dXJuICExO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IDM7IHQrKykge1xyXG4gICAgICAgICAgICB2YXIgZSA9ICRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5nZXRCdXR0bGVQb29sKCRiYXNlQnVsbGV0LkJ1bGxldFR5cGUuc19idWxsZXRfMik7XHJcbiAgICAgICAgICAgIGlmICghZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGkgPSAkYXNzZXRzTG9hZGVyLmRlZmF1bHQuaW5zdGFuY2UuZ2V0UmVzKFxyXG4gICAgICAgICAgICAgICAgICAgICRhc3NldHNNYXAuQnVuZGxlTmFtZXMuR2FtZSxcclxuICAgICAgICAgICAgICAgICAgICAkYXNzZXRzTWFwLkFzc2V0c01hcC5HYW1lQnVuZGxlcy5wcmVmYWJzLmFzc2V0c0xpc3QuU0J1bGxldF8yXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgZSA9ICRyZXNVdGlsLlJlc1V0aWwuaW5zdGFudGlhdGUoaSwgJGdhbWVDb250ZXh0LmRlZmF1bHQuaW5zLmxvd0J1bGxldExheWVyLnBhcmVudCkuZ2V0Q29tcG9uZW50KFxyXG4gICAgICAgICAgICAgICAgICAgICRiYXNlQnVsbGV0LmRlZmF1bHRcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdi54ID0gMjAwICogdCAtIDIwMDtcclxuICAgICAgICAgICAgdi55ID0gLTM1MDtcclxuICAgICAgICAgICAgZS5zZXRQb3NpdGlvbih2LmNsb25lKCkpO1xyXG4gICAgICAgICAgICB2LnggPSAwO1xyXG4gICAgICAgICAgICB2LnkgPSAxO1xyXG4gICAgICAgICAgICBlLmluaXRCdXR0bGUodiwgdGhpcy5za2lsbElkKTtcclxuICAgICAgICAgICAgZS5pbnNlcnQoJGdhbWVDb250ZXh0LmRlZmF1bHQuaW5zLmxvd0J1bGxldExheWVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5za2luMkF0a0N1cnJDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5za2luMkF0a0xlZnRDZCA9ICRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5za2lsbEluZm8uc2tpbkF0a0NkO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBlO1xyXG59KSgkYmFzZUd1bi5kZWZhdWx0KTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gYjtcclxuIl19