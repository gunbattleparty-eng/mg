
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/PopupManager.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '4a8e5yUM8tAyYYEd0Qe0yMO', 'PopupManager');
// game_script/scripts/PopupManager.js

"use strict";

exports.PopupManager = void 0;

var $assetsLoader = require("./AssetsLoader");

var $resManager = require("./ResManager");

var $resUtil = require("./ResUtil");

var $popupView = require("./PopupView");

var $uICache = require("./UICache");

var $uIManager = require("./UIManager");

var $uIParam = require("./UIParam");

var $waitingManager = require("./WaitingManager");

var d = function () {
  function t() {
    this.uiManager = $uIManager.UIManager.instance;
    this.uiCache = $uICache.UICache.instance;
  }

  t.prototype.openConfrim = function (t) {
    var e = this.uiCache.getBaseUI($uIParam.LayerType.DIALOG);
    e.registerCallback(t);

    if (e.isMaskBg) {
      e.maskNode = this.uiCache.getPopBg();
    }

    this.uiManager.uiAddScene($uIParam.LayerType.DIALOG, e);
    this.uiManager.layerConfirm.addChild(e.node);
  };

  t.prototype.open = function (t, e, i) {
    var a = this;

    if (void 0 === e) {
      e = null;
    }

    if (void 0 === i) {
      i = null;
    }

    var l = this.uiCache.getCacheView(t);

    if (l) {
      $resUtil.ResUtil.getResKeeper(l, !0);
      var d = {
        uuid: l.uuid,
        viewPath: t,
        param: e,
        rooNode: this.uiManager.layerPop
      };
      var p = l.getComponent($popupView.PopupView);
      p ? (p.isMaskBg && (p.maskNode = this.uiCache.getPopBg()), p.uiCallback = i, p.uiParam = d, this.uiManager.uiAddScene($uIParam.LayerType.POPUP, p), this.uiManager.layerPop.addChild(p.node)) : console.error("当前UI不存在，或者没有绑定脚本");
    } else {
      console.warn("资源未被加载,自动加载");
      $waitingManager.WaitingManager.instance.show(10, null, 0.5);
      var f = $resManager.ResManager.instance.getAssets(t);
      $assetsLoader["default"].instance.loadResSync(f.bundle, [f.path], cc.Prefab, null, function () {
        console.warn("资源未被加载,自动加载完成");
        $waitingManager.WaitingManager.instance.close();
        a.open(t, e, i);
      });
    }
  };

  t.prototype.close = function (t) {
    var e = this;

    if (cc.isValid(t)) {
      t.playCloseAnim(function () {
        if (t.uiType === $uIParam.LayerType.DIALOG) {
          e.uiCache.setPopBg(t.maskNode);
          return void e.uiManager.uiRemoveScene($uIParam.LayerType.DIALOG, t);
        }

        if (cc.isValid(t.maskNode)) {
          e.uiCache.setPopBg(t.maskNode);
        }

        e.uiManager.uiRemoveScene($uIParam.LayerType.POPUP, t);
      });
    }
  };

  t.prototype.closeAll = function () {
    var t = this.uiCache.getCurrView($uIParam.LayerType.POPUP);

    for (var e = 0; e < t.length; e++) {
      this.close(t[e]);
    }
  };

  t.instance = new t();
  return t;
}();

exports.PopupManager = d;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXFBvcHVwTWFuYWdlci5qcyJdLCJuYW1lcyI6WyJleHBvcnRzIiwiUG9wdXBNYW5hZ2VyIiwiJGFzc2V0c0xvYWRlciIsInJlcXVpcmUiLCIkcmVzTWFuYWdlciIsIiRyZXNVdGlsIiwiJHBvcHVwVmlldyIsIiR1SUNhY2hlIiwiJHVJTWFuYWdlciIsIiR1SVBhcmFtIiwiJHdhaXRpbmdNYW5hZ2VyIiwiZCIsInQiLCJ1aU1hbmFnZXIiLCJVSU1hbmFnZXIiLCJpbnN0YW5jZSIsInVpQ2FjaGUiLCJVSUNhY2hlIiwicHJvdG90eXBlIiwib3BlbkNvbmZyaW0iLCJlIiwiZ2V0QmFzZVVJIiwiTGF5ZXJUeXBlIiwiRElBTE9HIiwicmVnaXN0ZXJDYWxsYmFjayIsImlzTWFza0JnIiwibWFza05vZGUiLCJnZXRQb3BCZyIsInVpQWRkU2NlbmUiLCJsYXllckNvbmZpcm0iLCJhZGRDaGlsZCIsIm5vZGUiLCJvcGVuIiwiaSIsImEiLCJsIiwiZ2V0Q2FjaGVWaWV3IiwiUmVzVXRpbCIsImdldFJlc0tlZXBlciIsInV1aWQiLCJ2aWV3UGF0aCIsInBhcmFtIiwicm9vTm9kZSIsImxheWVyUG9wIiwicCIsImdldENvbXBvbmVudCIsIlBvcHVwVmlldyIsInVpQ2FsbGJhY2siLCJ1aVBhcmFtIiwiUE9QVVAiLCJjb25zb2xlIiwiZXJyb3IiLCJ3YXJuIiwiV2FpdGluZ01hbmFnZXIiLCJzaG93IiwiZiIsIlJlc01hbmFnZXIiLCJnZXRBc3NldHMiLCJsb2FkUmVzU3luYyIsImJ1bmRsZSIsInBhdGgiLCJjYyIsIlByZWZhYiIsImNsb3NlIiwiaXNWYWxpZCIsInBsYXlDbG9zZUFuaW0iLCJ1aVR5cGUiLCJzZXRQb3BCZyIsInVpUmVtb3ZlU2NlbmUiLCJjbG9zZUFsbCIsImdldEN1cnJWaWV3IiwibGVuZ3RoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBQSxPQUFPLENBQUNDLFlBQVIsR0FBdUIs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SCxDQUFDLENBQUNKLE9BQUYsQ0FBVW1ELFFBQVYsQ0FBbUJ2RCxDQUFDLENBQUNjLFFBQXJCO1VBQ0EsT0FBTyxLQUFLTixDQUFDLENBQUNQLFNBQUYsQ0FBWXVELGFBQVosQ0FBMEIzRCxRQUFRLENBQUNhLFNBQVQsQ0FBbUJDLE1BQTdDLEVBQXFEWCxDQUFyRCxDQUFaO1FBQ0g7O1FBQ0QsSUFBSWlELEVBQUUsQ0FBQ0csT0FBSCxDQUFXcEQsQ0FBQyxDQUFDYyxRQUFiLENBQUosRUFBNEI7VUFDeEJOLENBQUMsQ0FBQ0osT0FBRixDQUFVbUQsUUFBVixDQUFtQnZELENBQUMsQ0FBQ2MsUUFBckI7UUFDSDs7UUFDRE4sQ0FBQyxDQUFDUCxTQUFGLENBQVl1RCxhQUFaLENBQTBCM0QsUUFBUSxDQUFDYSxTQUFULENBQW1CMkIsS0FBN0MsRUFBb0RyQyxDQUFwRDtNQUNILENBVEQ7SUFVSDtFQUNKLENBZEQ7O0VBZUFBLENBQUMsQ0FBQ00sU0FBRixDQUFZbUQsUUFBWixHQUF1QixZQUFZO0lBQy9CLElBQUl6RCxDQUFDLEdBQUcsS0FBS0ksT0FBTCxDQUFhc0QsV0FBYixDQUF5QjdELFFBQVEsQ0FBQ2EsU0FBVCxDQUFtQjJCLEtBQTVDLENBQVI7O0lBQ0EsS0FBSyxJQUFJN0IsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR1IsQ0FBQyxDQUFDMkQsTUFBdEIsRUFBOEJuRCxDQUFDLEVBQS9CLEVBQW1DO01BQy9CLEtBQUsyQyxLQUFMLENBQVduRCxDQUFDLENBQUNRLENBQUQsQ0FBWjtJQUNIO0VBQ0osQ0FMRDs7RUFNQVIsQ0FBQyxDQUFDRyxRQUFGLEdBQWEsSUFBSUgsQ0FBSixFQUFiO0VBQ0EsT0FBT0EsQ0FBUDtBQUNILENBekVPLEVBQVI7O0FBMEVBWixPQUFPLENBQUNDLFlBQVIsR0FBdUJVLENBQXZCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnRzLlBvcHVwTWFuYWdlciA9IHZvaWQgMDtcclxudmFyICRhc3NldHNMb2FkZXIgPSByZXF1aXJlKFwiLi9Bc3NldHNMb2FkZXJcIik7XHJcbnZhciAkcmVzTWFuYWdlciA9IHJlcXVpcmUoXCIuL1Jlc01hbmFnZXJcIik7XHJcbnZhciAkcmVzVXRpbCA9IHJlcXVpcmUoXCIuL1Jlc1V0aWxcIik7XHJcbnZhciAkcG9wdXBWaWV3ID0gcmVxdWlyZShcIi4vUG9wdXBWaWV3XCIpO1xyXG52YXIgJHVJQ2FjaGUgPSByZXF1aXJlKFwiLi9VSUNhY2hlXCIpO1xyXG52YXIgJHVJTWFuYWdlciA9IHJlcXVpcmUoXCIuL1VJTWFuYWdlclwiKTtcclxudmFyICR1SVBhcmFtID0gcmVxdWlyZShcIi4vVUlQYXJhbVwiKTtcclxudmFyICR3YWl0aW5nTWFuYWdlciA9IHJlcXVpcmUoXCIuL1dhaXRpbmdNYW5hZ2VyXCIpO1xyXG52YXIgZCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiB0KCkge1xyXG4gICAgICAgIHRoaXMudWlNYW5hZ2VyID0gJHVJTWFuYWdlci5VSU1hbmFnZXIuaW5zdGFuY2U7XHJcbiAgICAgICAgdGhpcy51aUNhY2hlID0gJHVJQ2FjaGUuVUlDYWNoZS5pbnN0YW5jZTtcclxuICAgIH1cclxuICAgIHQucHJvdG90eXBlLm9wZW5Db25mcmltID0gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICB2YXIgZSA9IHRoaXMudWlDYWNoZS5nZXRCYXNlVUkoJHVJUGFyYW0uTGF5ZXJUeXBlLkRJQUxPRyk7XHJcbiAgICAgICAgZS5yZWdpc3RlckNhbGxiYWNrKHQpO1xyXG4gICAgICAgIGlmIChlLmlzTWFza0JnKSB7XHJcbiAgICAgICAgICAgIGUubWFza05vZGUgPSB0aGlzLnVpQ2FjaGUuZ2V0UG9wQmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51aU1hbmFnZXIudWlBZGRTY2VuZSgkdUlQYXJhbS5MYXllclR5cGUuRElBTE9HLCBlKTtcclxuICAgICAgICB0aGlzLnVpTWFuYWdlci5sYXllckNvbmZpcm0uYWRkQ2hpbGQoZS5ub2RlKTtcclxuICAgIH07XHJcbiAgICB0LnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24gKHQsIGUsIGkpIHtcclxuICAgICAgICB2YXIgYSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkge1xyXG4gICAgICAgICAgICBlID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gaSkge1xyXG4gICAgICAgICAgICBpID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGwgPSB0aGlzLnVpQ2FjaGUuZ2V0Q2FjaGVWaWV3KHQpO1xyXG4gICAgICAgIGlmIChsKSB7XHJcbiAgICAgICAgICAgICRyZXNVdGlsLlJlc1V0aWwuZ2V0UmVzS2VlcGVyKGwsICEwKTtcclxuICAgICAgICAgICAgdmFyIGQgPSB7XHJcbiAgICAgICAgICAgICAgICB1dWlkOiBsLnV1aWQsXHJcbiAgICAgICAgICAgICAgICB2aWV3UGF0aDogdCxcclxuICAgICAgICAgICAgICAgIHBhcmFtOiBlLFxyXG4gICAgICAgICAgICAgICAgcm9vTm9kZTogdGhpcy51aU1hbmFnZXIubGF5ZXJQb3BcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIHAgPSBsLmdldENvbXBvbmVudCgkcG9wdXBWaWV3LlBvcHVwVmlldyk7XHJcbiAgICAgICAgICAgIHBcclxuICAgICAgICAgICAgICAgID8gKHAuaXNNYXNrQmcgJiYgKHAubWFza05vZGUgPSB0aGlzLnVpQ2FjaGUuZ2V0UG9wQmcoKSksXHJcbiAgICAgICAgICAgICAgICAgIChwLnVpQ2FsbGJhY2sgPSBpKSxcclxuICAgICAgICAgICAgICAgICAgKHAudWlQYXJhbSA9IGQpLFxyXG4gICAgICAgICAgICAgICAgICB0aGlzLnVpTWFuYWdlci51aUFkZFNjZW5lKCR1SVBhcmFtLkxheWVyVHlwZS5QT1BVUCwgcCksXHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudWlNYW5hZ2VyLmxheWVyUG9wLmFkZENoaWxkKHAubm9kZSkpXHJcbiAgICAgICAgICAgICAgICA6IGNvbnNvbGUuZXJyb3IoXCLlvZPliY1VSeS4jeWtmOWcqO+8jOaIluiAheayoeaciee7keWumuiEmuacrFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCLotYTmupDmnKrooqvliqDovb0s6Ieq5Yqo5Yqg6L29XCIpO1xyXG4gICAgICAgICAgICAkd2FpdGluZ01hbmFnZXIuV2FpdGluZ01hbmFnZXIuaW5zdGFuY2Uuc2hvdygxMCwgbnVsbCwgMC41KTtcclxuICAgICAgICAgICAgdmFyIGYgPSAkcmVzTWFuYWdlci5SZXNNYW5hZ2VyLmluc3RhbmNlLmdldEFzc2V0cyh0KTtcclxuICAgICAgICAgICAgJGFzc2V0c0xvYWRlci5kZWZhdWx0Lmluc3RhbmNlLmxvYWRSZXNTeW5jKGYuYnVuZGxlLCBbZi5wYXRoXSwgY2MuUHJlZmFiLCBudWxsLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCLotYTmupDmnKrooqvliqDovb0s6Ieq5Yqo5Yqg6L295a6M5oiQXCIpO1xyXG4gICAgICAgICAgICAgICAgJHdhaXRpbmdNYW5hZ2VyLldhaXRpbmdNYW5hZ2VyLmluc3RhbmNlLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICBhLm9wZW4odCwgZSwgaSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgdmFyIGUgPSB0aGlzO1xyXG4gICAgICAgIGlmIChjYy5pc1ZhbGlkKHQpKSB7XHJcbiAgICAgICAgICAgIHQucGxheUNsb3NlQW5pbShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodC51aVR5cGUgPT09ICR1SVBhcmFtLkxheWVyVHlwZS5ESUFMT0cpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnVpQ2FjaGUuc2V0UG9wQmcodC5tYXNrTm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgZS51aU1hbmFnZXIudWlSZW1vdmVTY2VuZSgkdUlQYXJhbS5MYXllclR5cGUuRElBTE9HLCB0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChjYy5pc1ZhbGlkKHQubWFza05vZGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS51aUNhY2hlLnNldFBvcEJnKHQubWFza05vZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZS51aU1hbmFnZXIudWlSZW1vdmVTY2VuZSgkdUlQYXJhbS5MYXllclR5cGUuUE9QVVAsIHQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdC5wcm90b3R5cGUuY2xvc2VBbGwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHQgPSB0aGlzLnVpQ2FjaGUuZ2V0Q3VyclZpZXcoJHVJUGFyYW0uTGF5ZXJUeXBlLlBPUFVQKTtcclxuICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IHQubGVuZ3RoOyBlKyspIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSh0W2VdKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdC5pbnN0YW5jZSA9IG5ldyB0KCk7XHJcbiAgICByZXR1cm4gdDtcclxufSkoKTtcclxuZXhwb3J0cy5Qb3B1cE1hbmFnZXIgPSBkO1xyXG4iXX0=