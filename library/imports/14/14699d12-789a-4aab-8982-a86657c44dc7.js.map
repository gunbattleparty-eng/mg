{"version":3,"sources":["assets\\scripts\\auth\\AuthService.js"],"names":["Api","require","Storage","AuthService","register","email","password","post","login","res","token","setToken","user","setPlayer","me","get","logout","clear","module","exports"],"mappings":";;;;;;+CACA;;;;;;AADA;AACA,IAAMA,GAAG,GAAOC,OAAO,CAAC,mBAAD,CAAvB;;AACA,IAAMC,OAAO,GAAGD,OAAO,CAAC,iBAAD,CAAvB;;AAEA,IAAME,WAAW,GAAG;EACZC,QADY,0BACe;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cAAjBC,KAAiB,QAAjBA,KAAiB,EAAVC,QAAU,QAAVA,QAAU;cAAA,iCACxBN,GAAG,CAACO,IAAJ,CAAS,eAAT,EAA0B;gBAACF,KAAK,EAALA,KAAD;gBAAQC,QAAQ,EAARA;cAAR,CAA1B,CADwB;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAEhC,CAHiB;EAIZE,KAJY,wBAIY;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cAAjBH,KAAiB,SAAjBA,KAAiB,EAAVC,QAAU,SAAVA,QAAU;cAAA;cAAA,OACVN,GAAG,CAACO,IAAJ,CAAS,YAAT,EAAuB;gBAACF,KAAK,EAALA,KAAD;gBAAQC,QAAQ,EAARA;cAAR,CAAvB,CADU;;YAAA;cACtBG,GADsB;;cAE5B;cACA,IAAGA,GAAG,IAAIA,GAAG,CAACC,KAAd,EAAoB;gBAClBR,OAAO,CAACS,QAAR,CAAiBF,GAAG,CAACC,KAArB;gBACA,IAAGD,GAAG,CAACG,IAAP,EAAaV,OAAO,CAACW,SAAR,CAAkBJ,GAAG,CAACG,IAAtB;cACd;;cAN2B,kCAOrBH,GAPqB;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAQ7B,CAZiB;EAaZK,EAbY,gBAaR;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACSd,GAAG,CAACe,GAAJ,CAAQ,IAAR,CADT;;YAAA;cACFD,EADE;cAERZ,OAAO,CAACW,SAAR,CAAkBC,EAAE,IAAI,EAAxB;cAFQ,kCAGDA,EAHC;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAIT,CAjBiB;EAkBlBE,MAlBkB,oBAkBV;IACNd,OAAO,CAACe,KAAR;EACD;AApBiB,CAApB;AAuBAC,MAAM,CAACC,OAAP,GAAiBhB,WAAjB","sourceRoot":"/","sourcesContent":["// assets/scripts/auth/AuthService.js\nconst Api     = require('../core/ApiClient');\nconst Storage = require('../core/Storage');\n\nconst AuthService = {\n  async register({email, password}){\n    return Api.post('auth/register', {email, password});\n  },\n  async login({email, password}){\n    const res = await Api.post('auth/login', {email, password});\n    // 约定：{ token: '...', user: {...} }\n    if(res && res.token){\n      Storage.setToken(res.token);\n      if(res.user) Storage.setPlayer(res.user);\n    }\n    return res;\n  },\n  async me(){\n    const me = await Api.get('me');\n    Storage.setPlayer(me || {});\n    return me;\n  },\n  logout(){\n    Storage.clear();\n  }\n};\n\nmodule.exports = AuthService;\n"]}