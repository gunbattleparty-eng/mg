{"version":3,"sources":["assets\\game_script\\scripts\\UIManager.js"],"names":["exports","UIManager","$assetsMap","require","$resManager","$resUtil","$uIView","$uICache","$uIParam","c","t","baseUIType","LayerType","DIALOG","WAITING","LOADING","TOAST","rootView","uiCache","UICache","instance","resManager","ResManager","layerUI","layerPop","layerLoadingView","layerWaitding","layerConfirm","layerToast","currLoingView","prototype","isCurrPage","children","length","name","init","e","i","createLayer","setBaseUI","changeLoadingView","get","getBaseUI","destroy","removeBaseUICache","loadBaseUI","AssetsMap","ResourcesBundle","prefabs","assetsList","WaitingView","ToastView","popBgPrefab","PopMaskBg","replaceView","getCurrView","POPUP","uiRemoveScene","o","UI","n","a","getCacheView","ResUtil","getResKeeper","uuid","viewPath","param","rooNode","u","getComponent","UIView","uiParam","uiAddScene","addChild","node","console","error","lodingView","s","r","isBundleLoaded","hasBundleLoadedAssets","parent","loadBundles","setProgress","registerCB","loadArray","removeLoadingView","showToast","msg","arguments","time","pos","cc","v2","hideToast","active","putCurrView","innerAddToScreen","innerRemoveToScreen","removeCurrView","includes","uiType","cacheBaseUI","cacheView","getChildByName","isValid","generateDefaultLayer","Node","addComponent","Widget","isAlignLeft","isAlignRight","isAlignTop","isAlignBottom","left","right","top","bottom","alignMode","AlignMode","ALWAYS","enabled","setSiblingIndex","getLayer"],"mappings":"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","sourceRoot":"/","sourcesContent":["exports.UIManager = void 0;\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resManager = require(\"./ResManager\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $uIView = require(\"./UIView\");\r\nvar $uICache = require(\"./UICache\");\r\nvar $uIParam = require(\"./UIParam\");\r\nvar c = (function () {\r\n    function t() {\r\n        this.baseUIType = [\r\n            $uIParam.LayerType.DIALOG,\r\n            $uIParam.LayerType.WAITING,\r\n            $uIParam.LayerType.LOADING,\r\n            $uIParam.LayerType.TOAST\r\n        ];\r\n        this.rootView = null;\r\n        this.uiCache = $uICache.UICache.instance;\r\n        this.resManager = $resManager.ResManager.instance;\r\n        this.layerUI = null;\r\n        this.layerPop = null;\r\n        this.layerLoadingView = null;\r\n        this.layerWaitding = null;\r\n        this.layerConfirm = null;\r\n        this.layerToast = null;\r\n        this.currLoingView = null;\r\n    }\r\n    t.prototype.isCurrPage = function (t) {\r\n        return this.layerUI.children.length > 0 && this.layerUI.children[0].name === t;\r\n    };\r\n    t.prototype.init = function (t, e, i) {\r\n        this.rootView = t;\r\n        this.createLayer();\r\n        this.uiCache.setBaseUI($uIParam.LayerType.LOADING, e);\r\n        this.uiCache.setBaseUI($uIParam.LayerType.DIALOG, i);\r\n    };\r\n    t.prototype.changeLoadingView = function (t) {\r\n        var e = this.resManager.get(t);\r\n        this.uiCache.getBaseUI($uIParam.LayerType.LOADING).destroy();\r\n        this.uiCache.removeBaseUICache($uIParam.LayerType.LOADING);\r\n        this.uiCache.setBaseUI($uIParam.LayerType.LOADING, e);\r\n    };\r\n    t.prototype.loadBaseUI = function () {\r\n        this.uiCache.setBaseUI(\r\n            $uIParam.LayerType.WAITING,\r\n            this.resManager.get($assetsMap.AssetsMap.ResourcesBundle.prefabs.assetsList.WaitingView)\r\n        );\r\n        this.uiCache.setBaseUI(\r\n            $uIParam.LayerType.TOAST,\r\n            this.resManager.get($assetsMap.AssetsMap.ResourcesBundle.prefabs.assetsList.ToastView)\r\n        );\r\n        this.uiCache.popBgPrefab = this.resManager.get(\r\n            $assetsMap.AssetsMap.ResourcesBundle.prefabs.assetsList.PopMaskBg\r\n        );\r\n    };\r\n    t.prototype.replaceView = function (t, e) {\r\n        if (void 0 === e) {\r\n            e = null;\r\n        }\r\n        for (var i = this.uiCache.getCurrView($uIParam.LayerType.POPUP); i.length > 0; ) {\r\n            this.uiRemoveScene($uIParam.LayerType.POPUP, i[0]);\r\n            i = this.uiCache.getCurrView($uIParam.LayerType.POPUP);\r\n        }\r\n        var o = this.uiCache.getCurrView($uIParam.LayerType.UI);\r\n        for (var n = 0; n < o.length; n++) {\r\n            this.uiRemoveScene($uIParam.LayerType.UI, o[n]);\r\n        }\r\n        var a = this.uiCache.getCacheView(t);\r\n        $resUtil.ResUtil.getResKeeper(a, !0);\r\n        var c = {\r\n            uuid: a.uuid,\r\n            viewPath: t,\r\n            param: e,\r\n            rooNode: this.layerUI\r\n        };\r\n        var u = a.getComponent($uIView.UIView);\r\n        u\r\n            ? ((u.uiParam = c), this.uiAddScene($uIParam.LayerType.UI, u), this.layerUI.addChild(u.node))\r\n            : console.error(\"当前UI不存在，或者没有绑定脚本\");\r\n    };\r\n    t.prototype.lodingView = function (t, e, i, o) {\r\n        var n = this;\r\n        if (void 0 === o) {\r\n            o = !0;\r\n        }\r\n        var s = !1;\r\n        for (var r = 0; r < t.length; r++) {\r\n            if (!this.resManager.isBundleLoaded(t[r])) {\r\n                s = !0;\r\n                break;\r\n            }\r\n            if (!this.resManager.hasBundleLoadedAssets(t[r])) {\r\n                s = !0;\r\n            }\r\n        }\r\n        if (s) {\r\n            var a = this.uiCache.getBaseUI($uIParam.LayerType.LOADING);\r\n            this.currLoingView = a;\r\n            this.uiAddScene($uIParam.LayerType.LOADING, a);\r\n            a.node.parent = this.layerLoadingView;\r\n            this.resManager.loadBundles(\r\n                t,\r\n                function (t) {\r\n                    a.setProgress(t);\r\n                },\r\n                function () {\r\n                    var t = !1;\r\n                    a.setProgress(0, !0);\r\n                    a.registerCB(function () {\r\n                        t\r\n                            ? (i && i(),\r\n                              o && ((n.currLoingView = null), n.uiRemoveScene($uIParam.LayerType.LOADING, a)))\r\n                            : (t = !0);\r\n                    }, n);\r\n                    n.resManager.loadArray(\r\n                        e,\r\n                        function (t) {\r\n                            a.setProgress(t);\r\n                        },\r\n                        function () {\r\n                            t\r\n                                ? (i && i(),\r\n                                  o && ((n.currLoingView = null), n.uiRemoveScene($uIParam.LayerType.LOADING, a)))\r\n                                : (t = !0);\r\n                        }\r\n                    );\r\n                }\r\n            );\r\n        } else {\r\n            if (i) {\r\n                i();\r\n            }\r\n        }\r\n    };\r\n    t.prototype.removeLoadingView = function () {\r\n        if (this.currLoingView) {\r\n            this.uiRemoveScene($uIParam.LayerType.LOADING, this.currLoingView);\r\n        }\r\n    };\r\n    t.prototype.showToast = function () {\r\n        var t = this.uiCache.getBaseUI($uIParam.LayerType.TOAST);\r\n        var e = {\r\n            uuid: t.node.uuid,\r\n            viewPath: \"\",\r\n            param: {\r\n                msg: arguments[0] || \"\",\r\n                time: arguments[1] || 1,\r\n                pos: arguments[2] || cc.v2(0, 200)\r\n            },\r\n            rooNode: this.layerToast\r\n        };\r\n        t.uiParam = e;\r\n        this.uiAddScene($uIParam.LayerType.TOAST, t);\r\n        t.node.parent = this.layerToast;\r\n    };\r\n    t.prototype.hideToast = function (t) {\r\n        this.uiRemoveScene($uIParam.LayerType.TOAST, t);\r\n    };\r\n    t.prototype.uiAddScene = function (t, e) {\r\n        e.node.active = !0;\r\n        this.uiCache.putCurrView(t, e);\r\n        e.innerAddToScreen();\r\n    };\r\n    t.prototype.uiRemoveScene = function (t, e) {\r\n        e.innerRemoveToScreen();\r\n        if (this.uiCache.removeCurrView(t, e)) {\r\n            e.node.active = !1;\r\n            e.node.parent = null;\r\n            this.baseUIType.includes(e.uiType)\r\n                ? this.uiCache.cacheBaseUI(t, e)\r\n                : this.uiCache.cacheView(e.uiParam.viewPath, e);\r\n        }\r\n    };\r\n    t.prototype.createLayer = function () {\r\n        this.layerUI = this.rootView.getChildByName(\"layer_ui\");\r\n        if (!cc.isValid(this.layerUI)) {\r\n            this.layerUI = this.generateDefaultLayer(\"layer_ui\", $uIParam.LayerType.UI);\r\n        }\r\n        this.layerPop = this.rootView.getChildByName(\"layer_pop\");\r\n        if (!cc.isValid(this.layerPop)) {\r\n            this.layerPop = this.generateDefaultLayer(\"layer_pop\", $uIParam.LayerType.POPUP);\r\n        }\r\n        this.layerLoadingView = this.rootView.getChildByName(\"loading_view\");\r\n        if (!cc.isValid(this.layerLoadingView)) {\r\n            this.layerLoadingView = this.generateDefaultLayer(\"loading_view\", $uIParam.LayerType.LOADING);\r\n        }\r\n        this.layerConfirm = this.rootView.getChildByName(\"layer_confirm\");\r\n        if (!cc.isValid(this.layerConfirm)) {\r\n            this.layerConfirm = this.generateDefaultLayer(\"layer_confirm\", $uIParam.LayerType.DIALOG);\r\n        }\r\n        this.layerWaitding = this.rootView.getChildByName(\"layer_waiting\");\r\n        if (!cc.isValid(this.layerWaitding)) {\r\n            this.layerWaitding = this.generateDefaultLayer(\"layer_waiting\", $uIParam.LayerType.WAITING);\r\n        }\r\n        this.layerToast = this.rootView.getChildByName(\"layerToast\");\r\n        if (!cc.isValid(this.layerToast)) {\r\n            this.layerToast = this.generateDefaultLayer(\"layerToast\", $uIParam.LayerType.TOAST);\r\n        }\r\n    };\r\n    t.prototype.generateDefaultLayer = function (t, e) {\r\n        var i = new cc.Node();\r\n        var o = i.addComponent(cc.Widget);\r\n        o.isAlignLeft = o.isAlignRight = o.isAlignTop = o.isAlignBottom = !0;\r\n        o.left = o.right = o.top = o.bottom = 0;\r\n        o.alignMode = cc.Widget.AlignMode.ALWAYS;\r\n        o.enabled = !0;\r\n        i.setSiblingIndex(e);\r\n        i.name = t;\r\n        this.rootView.addChild(i);\r\n        return i;\r\n    };\r\n    t.prototype.getLayer = function (t) {\r\n        return t === $uIParam.LayerType.UI\r\n            ? this.layerUI\r\n            : t === $uIParam.LayerType.LOADING\r\n            ? this.layerLoadingView\r\n            : t === $uIParam.LayerType.POPUP\r\n            ? this.layerPop\r\n            : t === $uIParam.LayerType.WAITING\r\n            ? this.layerWaitding\r\n            : t === $uIParam.LayerType.DIALOG\r\n            ? this.layerConfirm\r\n            : t === $uIParam.LayerType.TOAST\r\n            ? this.layerToast\r\n            : void 0;\r\n    };\r\n    t.instance = new t();\r\n    return t;\r\n})();\r\nexports.UIManager = c;\r\n"]}