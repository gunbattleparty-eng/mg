{"version":3,"sources":["assets\\game_script\\scripts\\EggTipView.js"],"names":["o","$assetsLoader","require","$assetsMap","$resUtil","$eventManager","$popupView","$platform","$remoteAudio","$util","$aD","$adService","$configContext","$localEventName","$userDataContext","$startView","v","cc","_decorator","b","ccclass","w","property","A","t","e","apply","arguments","unLockImage","img","btnPre","btnNext","pageNo","btnAd","currSecIndex","secIndexs","currIndex","spNames","__extends","prototype","onResetView","instance","eggConfigs","i","length","tag","Ins","hasEggCompleted","push","shuffle","n","getCurrConfigIndex","indexOf","splice","unshift","render","addEvent","on","clickGain","clickPre","clickNext","removeEvent","off","active","node","getComponentInChildren","Label","string","tipsimg","renderSp","showRewardedVideo","Platform","currPlatForm","PlatformEnum","TOU_TIAO","toutiao","report","setCurrConfigIndex","send","RENDER_DOT","MenuType","Battle","loadRes","BundleNames","Public_Res","SpriteFrame","isValid","spriteFrame","ResUtil","assignWith","playEffectMusic","__decorate","Node","Sprite","PopupView","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var o;\r\nvar $assetsLoader = require(\"./AssetsLoader\");\r\nvar $assetsMap = require(\"./AssetsMap\");\r\nvar $resUtil = require(\"./ResUtil\");\r\nvar $eventManager = require(\"./EventManager\");\r\nvar $popupView = require(\"./PopupView\");\r\nvar $platform = require(\"./Platform\");\r\nvar $remoteAudio = require(\"./RemoteAudio\");\r\nvar $util = require(\"./Util\");\r\nvar $aD = require(\"./AD\");\r\nvar $adService = require(\"./AdService\");\r\nvar $configContext = require(\"./ConfigContext\");\r\nvar $localEventName = require(\"./LocalEventName\");\r\nvar $userDataContext = require(\"./UserDataContext\");\r\nvar $startView = require(\"./StartView\");\r\nvar v = cc._decorator;\r\nvar b = v.ccclass;\r\nvar w = v.property;\r\nvar A = (function (t) {\r\n    function e() {\r\n        var e = (null !== t && t.apply(this, arguments)) || this;\r\n        e.unLockImage = null;\r\n        e.img = null;\r\n        e.btnPre = null;\r\n        e.btnNext = null;\r\n        e.pageNo = null;\r\n        e.btnAd = null;\r\n        e.currSecIndex = -1;\r\n        e.secIndexs = [];\r\n        e.currIndex = 0;\r\n        e.spNames = [];\r\n        return e;\r\n    }\r\n    __extends(e, t);\r\n    e.prototype.onResetView = function () {\r\n        this.currSecIndex = -1;\r\n        var t = [];\r\n        var e = $configContext.default.instance.eggConfigs;\r\n        for (var i = 0; i < e.length; i++) {\r\n            if (!(0 === (o = e[i]).tag.length || $userDataContext.default.Ins.hasEggCompleted(o.tag))) {\r\n                t.push(i);\r\n            }\r\n        }\r\n        if (0 !== t.length) {\r\n            for (i = 0; i < e.length; i++) {\r\n                var o;\r\n                if (0 === (o = e[i]).tag.length) {\r\n                    t.push(i);\r\n                }\r\n            }\r\n        } else {\r\n            for (i = 0; i < e.length; i++) {\r\n                t.push(i);\r\n            }\r\n        }\r\n        $util.default.shuffle(t);\r\n        var n = $userDataContext.default.Ins.getCurrConfigIndex();\r\n        if (-1 !== n) {\r\n            -1 !== (i = t.indexOf(n))\r\n                ? (t.splice(i, 1), t.unshift(n), (this.currSecIndex = 0))\r\n                : (this.currSecIndex = -1);\r\n        }\r\n        this.secIndexs = t;\r\n        this.render();\r\n    };\r\n    e.prototype.addEvent = function () {\r\n        this.btnAd.on(\"click\", this.clickGain, this);\r\n        this.btnPre.on(\"click\", this.clickPre, this);\r\n        this.btnNext.on(\"click\", this.clickNext, this);\r\n    };\r\n    e.prototype.removeEvent = function () {\r\n        this.btnAd.off(\"click\", this.clickGain, this);\r\n        this.btnPre.off(\"click\", this.clickPre, this);\r\n        this.btnNext.off(\"click\", this.clickNext, this);\r\n    };\r\n    e.prototype.render = function () {\r\n        this.unLockImage.active = !1;\r\n        this.img.node.active = !1;\r\n        this.btnPre.active = !1;\r\n        this.btnNext.active = !1;\r\n        this.pageNo.node.active = !1;\r\n        if (-1 === this.currSecIndex) {\r\n            this.unLockImage.active = !0;\r\n            return void (this.btnAd.getComponentInChildren(cc.Label).string = \"获取\");\r\n        }\r\n        this.img.node.active = !0;\r\n        this.btnPre.active = !0;\r\n        this.btnNext.active = !0;\r\n        this.pageNo.node.active = !0;\r\n        this.btnAd.getComponentInChildren(cc.Label).string = \"刷新\";\r\n        this.currIndex = 0;\r\n        this.spNames = $configContext.default.instance.eggConfigs[this.secIndexs[this.currSecIndex]].tipsimg;\r\n        this.pageNo.string = this.currIndex + 1 + \"/\" + this.spNames.length;\r\n        this.renderSp();\r\n    };\r\n    e.prototype.clickGain = function () {\r\n        var t = this;\r\n        $adService.default.Ins.showRewardedVideo(function () {\r\n            if ($platform.Platform.currPlatForm === $platform.PlatformEnum.TOU_TIAO) {\r\n                $aD.default.toutiao.report(\"Egg_day\");\r\n            }\r\n            t.currSecIndex++;\r\n            if (t.currSecIndex >= t.secIndexs.length) {\r\n                t.currSecIndex = 0;\r\n            }\r\n            $userDataContext.default.Ins.setCurrConfigIndex(t.secIndexs[t.currSecIndex]);\r\n            t.render();\r\n            $eventManager.default.send($localEventName.default.RENDER_DOT, $startView.MenuType.Battle);\r\n        });\r\n    };\r\n    e.prototype.renderSp = function () {\r\n        var t = this;\r\n        $assetsLoader.default.instance.loadRes(\r\n            $assetsMap.BundleNames.Public_Res,\r\n            [\"/egg_img/\" + this.spNames[this.currIndex]],\r\n            cc.SpriteFrame,\r\n            null,\r\n            function (e, i) {\r\n                var o = i[0];\r\n                if (o && cc.isValid(t.img)) {\r\n                    t.img.spriteFrame = $resUtil.ResUtil.assignWith(o, t.node);\r\n                }\r\n            }\r\n        );\r\n        this.btnNext.active = this.currIndex < this.spNames.length - 1;\r\n        this.btnPre.active = 0 !== this.currIndex;\r\n        this.pageNo.string = this.currIndex + 1 + \"/\" + this.spNames.length;\r\n    };\r\n    e.prototype.clickPre = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        this.currIndex--;\r\n        this.renderSp();\r\n    };\r\n    e.prototype.clickNext = function () {\r\n        $remoteAudio.default.instance.playEffectMusic(\"Click\");\r\n        this.currIndex++;\r\n        this.renderSp();\r\n    };\r\n    __decorate([w(cc.Node)], e.prototype, \"unLockImage\", void 0);\r\n    __decorate([w(cc.Sprite)], e.prototype, \"img\", void 0);\r\n    __decorate([w(cc.Node)], e.prototype, \"btnPre\", void 0);\r\n    __decorate([w(cc.Node)], e.prototype, \"btnNext\", void 0);\r\n    __decorate([w(cc.Label)], e.prototype, \"pageNo\", void 0);\r\n    __decorate([w(cc.Node)], e.prototype, \"btnAd\", void 0);\r\n    return __decorate([b], e);\r\n})($popupView.PopupView);\r\nexports.default = A;\r\n"]}