
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/game_script/scripts/GameSpeedView.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'fc48b3slgVGs4dK/gA10UBJ', 'GameSpeedView');
// game_script/scripts/GameSpeedView.js

"use strict";

var o;

var $popupView = require("./PopupView");

var $platform = require("./Platform");

var $aD = require("./AD");

var $adService = require("./AdService");

var $userDataContext = require("./UserDataContext");

var $gameContext = require("./GameContext");

var p = cc._decorator;
var f = p.ccclass;
var h = p.property;

var m = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.anim1 = null;
    e.anim2 = null;
    e.btnSpeed1 = null;
    e.btnSpeed2 = null;
    return e;
  }

  __extends(e, t);

  e.prototype.onResetView = function () {
    var t = 0;

    if ($userDataContext["default"].Ins.speedRecord[0]) {
      t = 1;

      if (1.5 === $gameContext["default"].ins.gameRatio) {
        t = 2;
      }
    }

    this.render(1, t);
    t = 0;

    if ($userDataContext["default"].Ins.speedRecord[1]) {
      t = 1;

      if (2 === $gameContext["default"].ins.gameRatio) {
        t = 2;
      }
    }

    this.render(2, t);
  };

  e.prototype.addEvent = function () {
    this.btnSpeed1.on("click", this.clickBtn, this);
    this.btnSpeed2.on("click", this.clickBtn, this);
  };

  e.prototype.removeEvent = function () {
    this.btnSpeed1.off("click", this.clickBtn, this);
    this.btnSpeed2.off("click", this.clickBtn, this);
  };

  e.prototype.clickBtn = function (t) {
    var e = this;

    if ("btn_seed1" === t.node.name) {
      if (!$userDataContext["default"].Ins.speedRecord[0]) {
        return void $adService["default"].Ins.showRewardedVideo(function () {
          if ($platform.Platform.currPlatForm === $platform.PlatformEnum.TOU_TIAO) {
            $aD["default"].toutiao.report("game15x");
          }

          $userDataContext["default"].Ins.speedRecord[0] = !0;
          $userDataContext["default"].Ins.saveSpeedRecord();
          e.onResetView();
        });
      }

      if (1.5 !== $gameContext["default"].ins.gameRatio) {
        $gameContext["default"].ins.gameRatio = 1.5;
        return void this.onResetView();
      }

      if (1.5 === $gameContext["default"].ins.gameRatio) {
        $gameContext["default"].ins.gameRatio = 1;
        return void this.onResetView();
      }
    } else {
      if (!$userDataContext["default"].Ins.speedRecord[1]) {
        return void $adService["default"].Ins.showRewardedVideo(function () {
          if ($platform.Platform.currPlatForm === $platform.PlatformEnum.TOU_TIAO) {
            $aD["default"].toutiao.report("game2x");
          }

          $userDataContext["default"].Ins.speedRecord[1] = !0;
          $userDataContext["default"].Ins.saveSpeedRecord();
          e.onResetView();
        });
      }

      if (2 !== $gameContext["default"].ins.gameRatio) {
        $gameContext["default"].ins.gameRatio = 2;
        return void this.onResetView();
      }

      if (2 === $gameContext["default"].ins.gameRatio) {
        $gameContext["default"].ins.gameRatio = 1;
        return void this.onResetView();
      }
    }
  };

  e.prototype.render = function (t, e) {
    var i = 1 === t ? this.anim1 : this.anim2;
    var o = 1 === t ? this.btnSpeed1 : this.btnSpeed2;
    var n = o.children[2].children[0];
    var s = o.children[2].children[1].getComponent(cc.Label);
    n.active = !1;
    o.children[0].active = !1;
    o.children[1].active = !1;
    0 === e ? (i.playAnimation("off_" + t, 0), n.active = !0, s.string = "解锁") : 1 === e ? (i.playAnimation("off_" + t, 0), o.children[0].active = !0, s.string = "使用") : 2 === e && (i.playAnimation("on_" + t, 0), o.children[1].active = !0, s.string = "取消");
  };

  __decorate([h(dragonBones.ArmatureDisplay)], e.prototype, "anim1", void 0);

  __decorate([h(dragonBones.ArmatureDisplay)], e.prototype, "anim2", void 0);

  __decorate([h(cc.Node)], e.prototype, "btnSpeed1", void 0);

  __decorate([h(cc.Node)], e.prototype, "btnSpeed2", void 0);

  return __decorate([f], e);
}($popupView.PopupView);

exports["default"] = m;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcZ2FtZV9zY3JpcHRcXHNjcmlwdHNcXEdhbWVTcGVlZFZpZXcuanMiXSwibmFtZXMiOlsibyIsIiRwb3B1cFZpZXciLCJyZXF1aXJlIiwiJHBsYXRmb3JtIiwiJGFEIiwiJGFkU2VydmljZSIsIiR1c2VyRGF0YUNvbnRleHQiLCIkZ2FtZUNvbnRleHQiLCJwIiwiY2MiLCJfZGVjb3JhdG9yIiwiZiIsImNjY2xhc3MiLCJoIiwicHJvcGVydHkiLCJtIiwidCIsImUiLCJhcHBseSIsImFyZ3VtZW50cyIsImFuaW0xIiwiYW5pbTIiLCJidG5TcGVlZDEiLCJidG5TcGVlZDIiLCJfX2V4dGVuZHMiLCJwcm90b3R5cGUiLCJvblJlc2V0VmlldyIsIklucyIsInNwZWVkUmVjb3JkIiwiaW5zIiwiZ2FtZVJhdGlvIiwicmVuZGVyIiwiYWRkRXZlbnQiLCJvbiIsImNsaWNrQnRuIiwicmVtb3ZlRXZlbnQiLCJvZmYiLCJub2RlIiwibmFtZSIsInNob3dSZXdhcmRlZFZpZGVvIiwiUGxhdGZvcm0iLCJjdXJyUGxhdEZvcm0iLCJQbGF0Zm9ybUVudW0iLCJUT1VfVElBTyIsInRvdXRpYW8iLCJyZXBvcnQiLCJzYXZlU3BlZWRSZWNvcmQiLCJpIiwibiIsImNoaWxkcmVuIiwicyIsImdldENvbXBvbmVudCIsIkxhYmVsIiwiYWN0aXZlIiwicGxheUFuaW1hdGlvbiIsInN0cmluZyIsIl9fZGVjb3JhdGUiLCJkcmFnb25Cb25lcyIsIkFybWF0dXJlRGlzcGxheSIsIk5vZGUiLCJQb3B1cFZpZXciLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUo7O0FBQ0EsSUFBSUMsVUFBVSxHQUFHQyxPQUFPLENBQUMsYUFBRCxDQUF4Qjs7QUFDQSxJQUFJQyxTQUFTLEdBQUdELE9BQU8sQ0FBQyxZQUFELENBQXZCOztBQUNBLElBQUlFLEdBQUcsR0FBR0YsT0FBTyxDQUFDLE1BQUQsQ0FBakI7O0FBQ0EsSUFBSUcsVUFB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QXJDLEVBQWdELE9BQWhELEVBQXlELEtBQUssQ0FBOUQsQ0FBVjs7RUFDQStCLFVBQVUsQ0FBQyxDQUFDM0MsQ0FBQyxDQUFDSixFQUFFLENBQUNrRCxJQUFKLENBQUYsQ0FBRCxFQUFlMUMsQ0FBQyxDQUFDUSxTQUFqQixFQUE0QixXQUE1QixFQUF5QyxLQUFLLENBQTlDLENBQVY7O0VBQ0ErQixVQUFVLENBQUMsQ0FBQzNDLENBQUMsQ0FBQ0osRUFBRSxDQUFDa0QsSUFBSixDQUFGLENBQUQsRUFBZTFDLENBQUMsQ0FBQ1EsU0FBakIsRUFBNEIsV0FBNUIsRUFBeUMsS0FBSyxDQUE5QyxDQUFWOztFQUNBLE9BQU8rQixVQUFVLENBQUMsQ0FBQzdDLENBQUQsQ0FBRCxFQUFNTSxDQUFOLENBQWpCO0FBQ0gsQ0FqR08sQ0FpR0xoQixVQUFVLENBQUMyRCxTQWpHTixDQUFSOztBQWtHQUMsT0FBTyxXQUFQLEdBQWtCOUMsQ0FBbEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBvO1xyXG52YXIgJHBvcHVwVmlldyA9IHJlcXVpcmUoXCIuL1BvcHVwVmlld1wiKTtcclxudmFyICRwbGF0Zm9ybSA9IHJlcXVpcmUoXCIuL1BsYXRmb3JtXCIpO1xyXG52YXIgJGFEID0gcmVxdWlyZShcIi4vQURcIik7XHJcbnZhciAkYWRTZXJ2aWNlID0gcmVxdWlyZShcIi4vQWRTZXJ2aWNlXCIpO1xyXG52YXIgJHVzZXJEYXRhQ29udGV4dCA9IHJlcXVpcmUoXCIuL1VzZXJEYXRhQ29udGV4dFwiKTtcclxudmFyICRnYW1lQ29udGV4dCA9IHJlcXVpcmUoXCIuL0dhbWVDb250ZXh0XCIpO1xyXG52YXIgcCA9IGNjLl9kZWNvcmF0b3I7XHJcbnZhciBmID0gcC5jY2NsYXNzO1xyXG52YXIgaCA9IHAucHJvcGVydHk7XHJcbnZhciBtID0gKGZ1bmN0aW9uICh0KSB7XHJcbiAgICBmdW5jdGlvbiBlKCkge1xyXG4gICAgICAgIHZhciBlID0gKG51bGwgIT09IHQgJiYgdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSB8fCB0aGlzO1xyXG4gICAgICAgIGUuYW5pbTEgPSBudWxsO1xyXG4gICAgICAgIGUuYW5pbTIgPSBudWxsO1xyXG4gICAgICAgIGUuYnRuU3BlZWQxID0gbnVsbDtcclxuICAgICAgICBlLmJ0blNwZWVkMiA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIGU7XHJcbiAgICB9XHJcbiAgICBfX2V4dGVuZHMoZSwgdCk7XHJcbiAgICBlLnByb3RvdHlwZS5vblJlc2V0VmlldyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdCA9IDA7XHJcbiAgICAgICAgaWYgKCR1c2VyRGF0YUNvbnRleHQuZGVmYXVsdC5JbnMuc3BlZWRSZWNvcmRbMF0pIHtcclxuICAgICAgICAgICAgdCA9IDE7XHJcbiAgICAgICAgICAgIGlmICgxLjUgPT09ICRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5nYW1lUmF0aW8pIHtcclxuICAgICAgICAgICAgICAgIHQgPSAyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVuZGVyKDEsIHQpO1xyXG4gICAgICAgIHQgPSAwO1xyXG4gICAgICAgIGlmICgkdXNlckRhdGFDb250ZXh0LmRlZmF1bHQuSW5zLnNwZWVkUmVjb3JkWzFdKSB7XHJcbiAgICAgICAgICAgIHQgPSAxO1xyXG4gICAgICAgICAgICBpZiAoMiA9PT0gJGdhbWVDb250ZXh0LmRlZmF1bHQuaW5zLmdhbWVSYXRpbykge1xyXG4gICAgICAgICAgICAgICAgdCA9IDI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZW5kZXIoMiwgdCk7XHJcbiAgICB9O1xyXG4gICAgZS5wcm90b3R5cGUuYWRkRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5idG5TcGVlZDEub24oXCJjbGlja1wiLCB0aGlzLmNsaWNrQnRuLCB0aGlzKTtcclxuICAgICAgICB0aGlzLmJ0blNwZWVkMi5vbihcImNsaWNrXCIsIHRoaXMuY2xpY2tCdG4sIHRoaXMpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLnJlbW92ZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuYnRuU3BlZWQxLm9mZihcImNsaWNrXCIsIHRoaXMuY2xpY2tCdG4sIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuYnRuU3BlZWQyLm9mZihcImNsaWNrXCIsIHRoaXMuY2xpY2tCdG4sIHRoaXMpO1xyXG4gICAgfTtcclxuICAgIGUucHJvdG90eXBlLmNsaWNrQnRuID0gZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICB2YXIgZSA9IHRoaXM7XHJcbiAgICAgICAgaWYgKFwiYnRuX3NlZWQxXCIgPT09IHQubm9kZS5uYW1lKSB7XHJcbiAgICAgICAgICAgIGlmICghJHVzZXJEYXRhQ29udGV4dC5kZWZhdWx0Lklucy5zcGVlZFJlY29yZFswXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgJGFkU2VydmljZS5kZWZhdWx0Lklucy5zaG93UmV3YXJkZWRWaWRlbyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRwbGF0Zm9ybS5QbGF0Zm9ybS5jdXJyUGxhdEZvcm0gPT09ICRwbGF0Zm9ybS5QbGF0Zm9ybUVudW0uVE9VX1RJQU8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGFELmRlZmF1bHQudG91dGlhby5yZXBvcnQoXCJnYW1lMTV4XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkdXNlckRhdGFDb250ZXh0LmRlZmF1bHQuSW5zLnNwZWVkUmVjb3JkWzBdID0gITA7XHJcbiAgICAgICAgICAgICAgICAgICAgJHVzZXJEYXRhQ29udGV4dC5kZWZhdWx0Lklucy5zYXZlU3BlZWRSZWNvcmQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlLm9uUmVzZXRWaWV3KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoMS41ICE9PSAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuZ2FtZVJhdGlvKSB7XHJcbiAgICAgICAgICAgICAgICAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuZ2FtZVJhdGlvID0gMS41O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgdGhpcy5vblJlc2V0VmlldygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgxLjUgPT09ICRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5nYW1lUmF0aW8pIHtcclxuICAgICAgICAgICAgICAgICRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5nYW1lUmF0aW8gPSAxO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgdGhpcy5vblJlc2V0VmlldygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCEkdXNlckRhdGFDb250ZXh0LmRlZmF1bHQuSW5zLnNwZWVkUmVjb3JkWzFdKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAkYWRTZXJ2aWNlLmRlZmF1bHQuSW5zLnNob3dSZXdhcmRlZFZpZGVvKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHBsYXRmb3JtLlBsYXRmb3JtLmN1cnJQbGF0Rm9ybSA9PT0gJHBsYXRmb3JtLlBsYXRmb3JtRW51bS5UT1VfVElBTykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkYUQuZGVmYXVsdC50b3V0aWFvLnJlcG9ydChcImdhbWUyeFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgJHVzZXJEYXRhQ29udGV4dC5kZWZhdWx0Lklucy5zcGVlZFJlY29yZFsxXSA9ICEwO1xyXG4gICAgICAgICAgICAgICAgICAgICR1c2VyRGF0YUNvbnRleHQuZGVmYXVsdC5JbnMuc2F2ZVNwZWVkUmVjb3JkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5vblJlc2V0VmlldygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKDIgIT09ICRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5nYW1lUmF0aW8pIHtcclxuICAgICAgICAgICAgICAgICRnYW1lQ29udGV4dC5kZWZhdWx0Lmlucy5nYW1lUmF0aW8gPSAyO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgdGhpcy5vblJlc2V0VmlldygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgyID09PSAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuZ2FtZVJhdGlvKSB7XHJcbiAgICAgICAgICAgICAgICAkZ2FtZUNvbnRleHQuZGVmYXVsdC5pbnMuZ2FtZVJhdGlvID0gMTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIHRoaXMub25SZXNldFZpZXcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAodCwgZSkge1xyXG4gICAgICAgIHZhciBpID0gMSA9PT0gdCA/IHRoaXMuYW5pbTEgOiB0aGlzLmFuaW0yO1xyXG4gICAgICAgIHZhciBvID0gMSA9PT0gdCA/IHRoaXMuYnRuU3BlZWQxIDogdGhpcy5idG5TcGVlZDI7XHJcbiAgICAgICAgdmFyIG4gPSBvLmNoaWxkcmVuWzJdLmNoaWxkcmVuWzBdO1xyXG4gICAgICAgIHZhciBzID0gby5jaGlsZHJlblsyXS5jaGlsZHJlblsxXS5nZXRDb21wb25lbnQoY2MuTGFiZWwpO1xyXG4gICAgICAgIG4uYWN0aXZlID0gITE7XHJcbiAgICAgICAgby5jaGlsZHJlblswXS5hY3RpdmUgPSAhMTtcclxuICAgICAgICBvLmNoaWxkcmVuWzFdLmFjdGl2ZSA9ICExO1xyXG4gICAgICAgIDAgPT09IGVcclxuICAgICAgICAgICAgPyAoaS5wbGF5QW5pbWF0aW9uKFwib2ZmX1wiICsgdCwgMCksIChuLmFjdGl2ZSA9ICEwKSwgKHMuc3RyaW5nID0gXCLop6PplIFcIikpXHJcbiAgICAgICAgICAgIDogMSA9PT0gZVxyXG4gICAgICAgICAgICA/IChpLnBsYXlBbmltYXRpb24oXCJvZmZfXCIgKyB0LCAwKSwgKG8uY2hpbGRyZW5bMF0uYWN0aXZlID0gITApLCAocy5zdHJpbmcgPSBcIuS9v+eUqFwiKSlcclxuICAgICAgICAgICAgOiAyID09PSBlICYmIChpLnBsYXlBbmltYXRpb24oXCJvbl9cIiArIHQsIDApLCAoby5jaGlsZHJlblsxXS5hY3RpdmUgPSAhMCksIChzLnN0cmluZyA9IFwi5Y+W5raIXCIpKTtcclxuICAgIH07XHJcbiAgICBfX2RlY29yYXRlKFtoKGRyYWdvbkJvbmVzLkFybWF0dXJlRGlzcGxheSldLCBlLnByb3RvdHlwZSwgXCJhbmltMVwiLCB2b2lkIDApO1xyXG4gICAgX19kZWNvcmF0ZShbaChkcmFnb25Cb25lcy5Bcm1hdHVyZURpc3BsYXkpXSwgZS5wcm90b3R5cGUsIFwiYW5pbTJcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW2goY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJidG5TcGVlZDFcIiwgdm9pZCAwKTtcclxuICAgIF9fZGVjb3JhdGUoW2goY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJidG5TcGVlZDJcIiwgdm9pZCAwKTtcclxuICAgIHJldHVybiBfX2RlY29yYXRlKFtmXSwgZSk7XHJcbn0pKCRwb3B1cFZpZXcuUG9wdXBWaWV3KTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gbTtcclxuIl19